function pp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yp={exports:{}},Tc={},xp={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl=Symbol.for("react.element"),Ox=Symbol.for("react.portal"),bx=Symbol.for("react.fragment"),Dx=Symbol.for("react.strict_mode"),Px=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Mx=Symbol.for("react.context"),Lx=Symbol.for("react.forward_ref"),Bx=Symbol.for("react.suspense"),Fx=Symbol.for("react.memo"),Vx=Symbol.for("react.lazy"),j1=Symbol.iterator;function Ux(t){return t===null||typeof t!="object"?null:(t=j1&&t[j1]||t["@@iterator"],typeof t=="function"?t:null)}var wp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ep=Object.assign,_p={};function la(t,e,n){this.props=t,this.context=e,this.refs=_p,this.updater=n||wp}la.prototype.isReactComponent={};la.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};la.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ap(){}Ap.prototype=la.prototype;function pd(t,e,n){this.props=t,this.context=e,this.refs=_p,this.updater=n||wp}var md=pd.prototype=new Ap;md.constructor=pd;Ep(md,la.prototype);md.isPureReactComponent=!0;var W1=Array.isArray,vp=Object.prototype.hasOwnProperty,yd={current:null},Cp={key:!0,ref:!0,__self:!0,__source:!0};function Ip(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)vp.call(e,i)&&!Cp.hasOwnProperty(i)&&(o[i]=e[i]);var m=arguments.length-2;if(m===1)o.children=n;else if(1<m){for(var y=Array(m),x=0;x<m;x++)y[x]=arguments[x+2];o.children=y}if(t&&t.defaultProps)for(i in m=t.defaultProps,m)o[i]===void 0&&(o[i]=m[i]);return{$$typeof:Nl,type:t,key:l,ref:f,props:o,_owner:yd.current}}function zx(t,e){return{$$typeof:Nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nl}function jx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var H1=/\/+/g;function dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jx(""+t.key):e.toString(36)}function Eu(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case Nl:case Ox:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+dh(f,0):i,W1(o)?(n="",t!=null&&(n=t.replace(H1,"$&/")+"/"),Eu(o,e,n,"",function(x){return x})):o!=null&&(xd(o)&&(o=zx(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(H1,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",W1(t))for(var m=0;m<t.length;m++){l=t[m];var y=i+dh(l,m);f+=Eu(l,e,n,y,o)}else if(y=Ux(t),typeof y=="function")for(t=y.call(t),m=0;!(l=t.next()).done;)l=l.value,y=i+dh(l,m++),f+=Eu(l,e,n,y,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function $l(t,e,n){if(t==null)return t;var i=[],o=0;return Eu(t,i,"","",function(l){return e.call(n,l,o++)}),i}function Wx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},_u={transition:null},Hx={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:_u,ReactCurrentOwner:yd};function Tp(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:$l,forEach:function(t,e,n){$l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $l(t,function(){e++}),e},toArray:function(t){return $l(t,function(e){return e})||[]},only:function(t){if(!xd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=la;Ue.Fragment=bx;Ue.Profiler=Px;Ue.PureComponent=pd;Ue.StrictMode=Dx;Ue.Suspense=Bx;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hx;Ue.act=Tp;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ep({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=yd.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(y in e)vp.call(e,y)&&!Cp.hasOwnProperty(y)&&(i[y]=e[y]===void 0&&m!==void 0?m[y]:e[y])}var y=arguments.length-2;if(y===1)i.children=n;else if(1<y){m=Array(y);for(var x=0;x<y;x++)m[x]=arguments[x+2];i.children=m}return{$$typeof:Nl,type:t.type,key:o,ref:l,props:i,_owner:f}};Ue.createContext=function(t){return t={$$typeof:Mx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kx,_context:t},t.Consumer=t};Ue.createElement=Ip;Ue.createFactory=function(t){var e=Ip.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:Lx,render:t}};Ue.isValidElement=xd;Ue.lazy=function(t){return{$$typeof:Vx,_payload:{_status:-1,_result:t},_init:Wx}};Ue.memo=function(t,e){return{$$typeof:Fx,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};Ue.unstable_act=Tp;Ue.useCallback=function(t,e){return Un.current.useCallback(t,e)};Ue.useContext=function(t){return Un.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Un.current.useEffect(t,e)};Ue.useId=function(){return Un.current.useId()};Ue.useImperativeHandle=function(t,e,n){return Un.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Un.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return Un.current.useReducer(t,e,n)};Ue.useRef=function(t){return Un.current.useRef(t)};Ue.useState=function(t){return Un.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return Un.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return Un.current.useTransition()};Ue.version="18.3.1";xp.exports=Ue;var ge=xp.exports;const Gx=mp(ge),Xx=pp({__proto__:null,default:Gx},[ge]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx=ge,qx=Symbol.for("react.element"),Yx=Symbol.for("react.fragment"),Qx=Object.prototype.hasOwnProperty,$x=Kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zx={key:!0,ref:!0,__self:!0,__source:!0};function Sp(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)Qx.call(e,i)&&!Zx.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:qx,type:t,key:l,ref:f,props:o,_owner:$x.current}}Tc.Fragment=Yx;Tc.jsx=Sp;Tc.jsxs=Sp;yp.exports=Tc;var xe=yp.exports,Rp={exports:{}},yr={},Np={exports:{}},Op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,Ce){var Oe=pe.length;pe.push(Ce);e:for(;0<Oe;){var gt=Oe-1>>>1,Le=pe[gt];if(0<o(Le,Ce))pe[gt]=Ce,pe[Oe]=Le,Oe=gt;else break e}}function n(pe){return pe.length===0?null:pe[0]}function i(pe){if(pe.length===0)return null;var Ce=pe[0],Oe=pe.pop();if(Oe!==Ce){pe[0]=Oe;e:for(var gt=0,Le=pe.length,st=Le>>>1;gt<st;){var yt=2*(gt+1)-1,tr=pe[yt],Ae=yt+1,nr=pe[Ae];if(0>o(tr,Oe))Ae<Le&&0>o(nr,tr)?(pe[gt]=nr,pe[Ae]=Oe,gt=Ae):(pe[gt]=tr,pe[yt]=Oe,gt=yt);else if(Ae<Le&&0>o(nr,Oe))pe[gt]=nr,pe[Ae]=Oe,gt=Ae;else break e}}return Ce}function o(pe,Ce){var Oe=pe.sortIndex-Ce.sortIndex;return Oe!==0?Oe:pe.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,m=f.now();t.unstable_now=function(){return f.now()-m}}var y=[],x=[],v=1,C=null,D=3,F=!1,X=!1,G=!1,$=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(pe){for(var Ce=n(x);Ce!==null;){if(Ce.callback===null)i(x);else if(Ce.startTime<=pe)i(x),Ce.sortIndex=Ce.expirationTime,e(y,Ce);else break;Ce=n(x)}}function Q(pe){if(G=!1,L(pe),!X)if(n(y)!==null)X=!0,It(ue);else{var Ce=n(x);Ce!==null&&Ne(Q,Ce.startTime-pe)}}function ue(pe,Ce){X=!1,G&&(G=!1,U(O),O=-1),F=!0;var Oe=D;try{for(L(Ce),C=n(y);C!==null&&(!(C.expirationTime>Ce)||pe&&!H());){var gt=C.callback;if(typeof gt=="function"){C.callback=null,D=C.priorityLevel;var Le=gt(C.expirationTime<=Ce);Ce=t.unstable_now(),typeof Le=="function"?C.callback=Le:C===n(y)&&i(y),L(Ce)}else i(y);C=n(y)}if(C!==null)var st=!0;else{var yt=n(x);yt!==null&&Ne(Q,yt.startTime-Ce),st=!1}return st}finally{C=null,D=Oe,F=!1}}var ie=!1,b=null,O=-1,N=5,V=-1;function H(){return!(t.unstable_now()-V<N)}function j(){if(b!==null){var pe=t.unstable_now();V=pe;var Ce=!0;try{Ce=b(!0,pe)}finally{Ce?B():(ie=!1,b=null)}}else ie=!1}var B;if(typeof M=="function")B=function(){M(j)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,te=et.port2;et.port1.onmessage=j,B=function(){te.postMessage(null)}}else B=function(){$(j,0)};function It(pe){b=pe,ie||(ie=!0,B())}function Ne(pe,Ce){O=$(function(){pe(t.unstable_now())},Ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){X||F||(X=!0,It(ue))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return n(y)},t.unstable_next=function(pe){switch(D){case 1:case 2:case 3:var Ce=3;break;default:Ce=D}var Oe=D;D=Ce;try{return pe()}finally{D=Oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,Ce){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Oe=D;D=pe;try{return Ce()}finally{D=Oe}},t.unstable_scheduleCallback=function(pe,Ce,Oe){var gt=t.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?gt+Oe:gt):Oe=gt,pe){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=Oe+Le,pe={id:v++,callback:Ce,priorityLevel:pe,startTime:Oe,expirationTime:Le,sortIndex:-1},Oe>gt?(pe.sortIndex=Oe,e(x,pe),n(y)===null&&pe===n(x)&&(G?(U(O),O=-1):G=!0,Ne(Q,Oe-gt))):(pe.sortIndex=Le,e(y,pe),X||F||(X=!0,It(ue))),pe},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(pe){var Ce=D;return function(){var Oe=D;D=Ce;try{return pe.apply(this,arguments)}finally{D=Oe}}}})(Op);Np.exports=Op;var Jx=Np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=ge,mr=Jx;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bp=new Set,tl={};function eo(t,e){Ko(t,e),Ko(t+"Capture",e)}function Ko(t,e){for(tl[t]=e,t=0;t<e.length;t++)bp.add(e[t])}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qh=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G1={},X1={};function nw(t){return qh.call(X1,t)?!0:qh.call(G1,t)?!1:tw.test(t)?X1[t]=!0:(G1[t]=!0,!1)}function rw(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iw(t,e,n,i){if(e===null||typeof e>"u"||rw(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){In[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];In[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){In[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){In[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){In[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){In[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){In[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){In[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){In[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var wd=/[\-:]([a-z])/g;function Ed(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wd,Ed);In[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wd,Ed);In[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wd,Ed);In[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){In[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});In.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){In[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function _d(t,e,n,i){var o=In.hasOwnProperty(e)?In[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iw(e,n,o,i)&&(n=null),i||o===null?nw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ni=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),So=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),Ad=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),Dp=Symbol.for("react.provider"),Pp=Symbol.for("react.context"),vd=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),$h=Symbol.for("react.suspense_list"),Cd=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),kp=Symbol.for("react.offscreen"),K1=Symbol.iterator;function Ta(t){return t===null||typeof t!="object"?null:(t=K1&&t[K1]||t["@@iterator"],typeof t=="function"?t:null)}var Lt=Object.assign,gh;function ka(t){if(gh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gh=e&&e[1]||""}return`
`+gh+t}var ph=!1;function mh(t,e){if(!t||ph)return"";ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var i=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){i=x}t.call(e.prototype)}else{try{throw Error()}catch(x){i=x}t()}}catch(x){if(x&&i&&typeof x.stack=="string"){for(var o=x.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,m=l.length-1;1<=f&&0<=m&&o[f]!==l[m];)m--;for(;1<=f&&0<=m;f--,m--)if(o[f]!==l[m]){if(f!==1||m!==1)do if(f--,m--,0>m||o[f]!==l[m]){var y=`
`+o[f].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=f&&0<=m);break}}}finally{ph=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ka(t):""}function sw(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=mh(t.type,!1),t;case 11:return t=mh(t.type.render,!1),t;case 1:return t=mh(t.type,!0),t;default:return""}}function Zh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ro:return"Fragment";case So:return"Portal";case Yh:return"Profiler";case Ad:return"StrictMode";case Qh:return"Suspense";case $h:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pp:return(t.displayName||"Context")+".Consumer";case Dp:return(t._context.displayName||"Context")+".Provider";case vd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cd:return e=t.displayName||null,e!==null?e:Zh(t.type)||"Memo";case ji:e=t._payload,t=t._init;try{return Zh(t(e))}catch{}}return null}function ow(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zh(e);case 8:return e===Ad?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aw(t){var e=Mp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jl(t){t._valueTracker||(t._valueTracker=aw(t))}function Lp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Mp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jh(t,e){var n=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function q1(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bp(t,e){e=e.checked,e!=null&&_d(t,"checked",e,!1)}function ef(t,e){Bp(t,e);var n=hs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tf(t,e.type,n):e.hasOwnProperty("defaultValue")&&tf(t,e.type,hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tf(t,e,n){(e!=="number"||Fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ma=Array.isArray;function Uo(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+hs(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function nf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Ma(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hs(n)}}function Fp(t,e){var n=hs(e.value),i=hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function $1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eu,Up=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eu=eu||document.createElement("div"),eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lw=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){lw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function zp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function jp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=zp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var uw=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sf(t,e){if(e){if(uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function of(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var af=null;function Id(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lf=null,zo=null,jo=null;function Z1(t){if(t=Dl(t)){if(typeof lf!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=bc(e),lf(t.stateNode,t.type,e))}}function Wp(t){zo?jo?jo.push(t):jo=[t]:zo=t}function Hp(){if(zo){var t=zo,e=jo;if(jo=zo=null,Z1(t),e)for(t=0;t<e.length;t++)Z1(e[t])}}function Gp(t,e){return t(e)}function Xp(){}var yh=!1;function Kp(t,e,n){if(yh)return t(e,n);yh=!0;try{return Gp(t,e,n)}finally{yh=!1,(zo!==null||jo!==null)&&(Xp(),Hp())}}function rl(t,e){var n=t.stateNode;if(n===null)return null;var i=bc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var uf=!1;if(Ai)try{var Sa={};Object.defineProperty(Sa,"passive",{get:function(){uf=!0}}),window.addEventListener("test",Sa,Sa),window.removeEventListener("test",Sa,Sa)}catch{uf=!1}function cw(t,e,n,i,o,l,f,m,y){var x=Array.prototype.slice.call(arguments,3);try{e.apply(n,x)}catch(v){this.onError(v)}}var Wa=!1,Vu=null,Uu=!1,cf=null,hw={onError:function(t){Wa=!0,Vu=t}};function fw(t,e,n,i,o,l,f,m,y){Wa=!1,Vu=null,cw.apply(hw,arguments)}function dw(t,e,n,i,o,l,f,m,y){if(fw.apply(this,arguments),Wa){if(Wa){var x=Vu;Wa=!1,Vu=null}else throw Error(ae(198));Uu||(Uu=!0,cf=x)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function J1(t){if(to(t)!==t)throw Error(ae(188))}function gw(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return J1(o),t;if(l===i)return J1(o),e;l=l.sibling}throw Error(ae(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,m=o.child;m;){if(m===n){f=!0,n=o,i=l;break}if(m===i){f=!0,i=o,n=l;break}m=m.sibling}if(!f){for(m=l.child;m;){if(m===n){f=!0,n=l,i=o;break}if(m===i){f=!0,i=l,n=o;break}m=m.sibling}if(!f)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function Yp(t){return t=gw(t),t!==null?Qp(t):null}function Qp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qp(t);if(e!==null)return e;t=t.sibling}return null}var $p=mr.unstable_scheduleCallback,e0=mr.unstable_cancelCallback,pw=mr.unstable_shouldYield,mw=mr.unstable_requestPaint,Xt=mr.unstable_now,yw=mr.unstable_getCurrentPriorityLevel,Td=mr.unstable_ImmediatePriority,Zp=mr.unstable_UserBlockingPriority,zu=mr.unstable_NormalPriority,xw=mr.unstable_LowPriority,Jp=mr.unstable_IdlePriority,Sc=null,ri=null;function ww(t){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(Sc,t,void 0,(t.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:Aw,Ew=Math.log,_w=Math.LN2;function Aw(t){return t>>>=0,t===0?32:31-(Ew(t)/_w|0)|0}var tu=64,nu=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var m=f&~o;m!==0?i=La(m):(l&=f,l!==0&&(i=La(l)))}else f=n&~o,f!==0?i=La(f):l!==0&&(i=La(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ur(e),o=1<<n,i|=t[n],e&=~o;return i}function vw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cw(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-Ur(l),m=1<<f,y=o[f];y===-1?(!(m&n)||m&i)&&(o[f]=vw(m,e)):y<=e&&(t.expiredLanes|=m),l&=~m}}function hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function em(){var t=tu;return tu<<=1,!(tu&4194240)&&(tu=64),t}function xh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ur(e),t[e]=n}function Iw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Ur(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function Sd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ur(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var lt=0;function tm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nm,Rd,rm,im,sm,ff=!1,ru=[],Qi=null,$i=null,Zi=null,il=new Map,sl=new Map,Hi=[],Tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t0(t,e){switch(t){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(e.pointerId)}}function Ra(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Dl(e),e!==null&&Rd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Sw(t,e,n,i,o){switch(e){case"focusin":return Qi=Ra(Qi,t,e,n,i,o),!0;case"dragenter":return $i=Ra($i,t,e,n,i,o),!0;case"mouseover":return Zi=Ra(Zi,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return il.set(l,Ra(il.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,sl.set(l,Ra(sl.get(l)||null,t,e,n,i,o)),!0}return!1}function om(t){var e=zs(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=qp(n),e!==null){t.blockedOn=e,sm(t.priority,function(){rm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=df(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);af=i,n.target.dispatchEvent(i),af=null}else return e=Dl(n),e!==null&&Rd(e),t.blockedOn=n,!1;e.shift()}return!0}function n0(t,e,n){Au(t)&&n.delete(e)}function Rw(){ff=!1,Qi!==null&&Au(Qi)&&(Qi=null),$i!==null&&Au($i)&&($i=null),Zi!==null&&Au(Zi)&&(Zi=null),il.forEach(n0),sl.forEach(n0)}function Na(t,e){t.blockedOn===e&&(t.blockedOn=null,ff||(ff=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,Rw)))}function ol(t){function e(o){return Na(o,t)}if(0<ru.length){Na(ru[0],t);for(var n=1;n<ru.length;n++){var i=ru[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Qi!==null&&Na(Qi,t),$i!==null&&Na($i,t),Zi!==null&&Na(Zi,t),il.forEach(e),sl.forEach(e),n=0;n<Hi.length;n++)i=Hi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)om(n),n.blockedOn===null&&Hi.shift()}var Wo=Ni.ReactCurrentBatchConfig,Wu=!0;function Nw(t,e,n,i){var o=lt,l=Wo.transition;Wo.transition=null;try{lt=1,Nd(t,e,n,i)}finally{lt=o,Wo.transition=l}}function Ow(t,e,n,i){var o=lt,l=Wo.transition;Wo.transition=null;try{lt=4,Nd(t,e,n,i)}finally{lt=o,Wo.transition=l}}function Nd(t,e,n,i){if(Wu){var o=df(t,e,n,i);if(o===null)Rh(t,e,i,Hu,n),t0(t,i);else if(Sw(o,t,e,n,i))i.stopPropagation();else if(t0(t,i),e&4&&-1<Tw.indexOf(t)){for(;o!==null;){var l=Dl(o);if(l!==null&&nm(l),l=df(t,e,n,i),l===null&&Rh(t,e,i,Hu,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else Rh(t,e,i,null,n)}}var Hu=null;function df(t,e,n,i){if(Hu=null,t=Id(i),t=zs(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hu=t,null}function am(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yw()){case Td:return 1;case Zp:return 4;case zu:case xw:return 16;case Jp:return 536870912;default:return 16}default:return 16}}var Xi=null,Od=null,vu=null;function lm(){if(vu)return vu;var t,e=Od,n=e.length,i,o="value"in Xi?Xi.value:Xi.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return vu=o.slice(t,1<i?1-i:void 0)}function Cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iu(){return!0}function r0(){return!1}function xr(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(l):l[m]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?iu:r0,this.isPropagationStopped=r0,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),e}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bd=xr(ua),bl=Lt({},ua,{view:0,detail:0}),bw=xr(bl),wh,Eh,Oa,Rc=Lt({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(wh=t.screenX-Oa.screenX,Eh=t.screenY-Oa.screenY):Eh=wh=0,Oa=t),wh)},movementY:function(t){return"movementY"in t?t.movementY:Eh}}),i0=xr(Rc),Dw=Lt({},Rc,{dataTransfer:0}),Pw=xr(Dw),kw=Lt({},bl,{relatedTarget:0}),_h=xr(kw),Mw=Lt({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Lw=xr(Mw),Bw=Lt({},ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fw=xr(Bw),Vw=Lt({},ua,{data:0}),s0=xr(Vw),Uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ww(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jw[t])?!!e[t]:!1}function Dd(){return Ww}var Hw=Lt({},bl,{key:function(t){if(t.key){var e=Uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dd,charCode:function(t){return t.type==="keypress"?Cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gw=xr(Hw),Xw=Lt({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o0=xr(Xw),Kw=Lt({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dd}),qw=xr(Kw),Yw=Lt({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=xr(Yw),$w=Lt({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zw=xr($w),Jw=[9,13,27,32],Pd=Ai&&"CompositionEvent"in window,Ha=null;Ai&&"documentMode"in document&&(Ha=document.documentMode);var eE=Ai&&"TextEvent"in window&&!Ha,um=Ai&&(!Pd||Ha&&8<Ha&&11>=Ha),a0=" ",l0=!1;function cm(t,e){switch(t){case"keyup":return Jw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var No=!1;function tE(t,e){switch(t){case"compositionend":return hm(e);case"keypress":return e.which!==32?null:(l0=!0,a0);case"textInput":return t=e.data,t===a0&&l0?null:t;default:return null}}function nE(t,e){if(No)return t==="compositionend"||!Pd&&cm(t,e)?(t=lm(),vu=Od=Xi=null,No=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return um&&e.locale!=="ko"?null:e.data;default:return null}}var rE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rE[t.type]:e==="textarea"}function fm(t,e,n,i){Wp(i),e=Gu(e,"onChange"),0<e.length&&(n=new bd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ga=null,al=null;function iE(t){vm(t,0)}function Nc(t){var e=Do(t);if(Lp(e))return t}function sE(t,e){if(t==="change")return e}var dm=!1;if(Ai){var Ah;if(Ai){var vh="oninput"in document;if(!vh){var c0=document.createElement("div");c0.setAttribute("oninput","return;"),vh=typeof c0.oninput=="function"}Ah=vh}else Ah=!1;dm=Ah&&(!document.documentMode||9<document.documentMode)}function h0(){Ga&&(Ga.detachEvent("onpropertychange",gm),al=Ga=null)}function gm(t){if(t.propertyName==="value"&&Nc(al)){var e=[];fm(e,al,t,Id(t)),Kp(iE,e)}}function oE(t,e,n){t==="focusin"?(h0(),Ga=e,al=n,Ga.attachEvent("onpropertychange",gm)):t==="focusout"&&h0()}function aE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(al)}function lE(t,e){if(t==="click")return Nc(e)}function uE(t,e){if(t==="input"||t==="change")return Nc(e)}function cE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wr=typeof Object.is=="function"?Object.is:cE;function ll(t,e){if(Wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!qh.call(e,o)||!Wr(t[o],e[o]))return!1}return!0}function f0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d0(t,e){var n=f0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f0(n)}}function pm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mm(){for(var t=window,e=Fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function kd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hE(t){var e=mm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pm(n.ownerDocument.documentElement,n)){if(i!==null&&kd(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=d0(n,l);var f=d0(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fE=Ai&&"documentMode"in document&&11>=document.documentMode,Oo=null,gf=null,Xa=null,pf=!1;function g0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pf||Oo==null||Oo!==Fu(i)||(i=Oo,"selectionStart"in i&&kd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xa&&ll(Xa,i)||(Xa=i,i=Gu(gf,"onSelect"),0<i.length&&(e=new bd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Oo)))}function su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},Ch={},ym={};Ai&&(ym=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Oc(t){if(Ch[t])return Ch[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ym)return Ch[t]=e[n];return t}var xm=Oc("animationend"),wm=Oc("animationiteration"),Em=Oc("animationstart"),_m=Oc("transitionend"),Am=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(t,e){Am.set(t,e),eo(e,[t])}for(var Ih=0;Ih<p0.length;Ih++){var Th=p0[Ih],dE=Th.toLowerCase(),gE=Th[0].toUpperCase()+Th.slice(1);ws(dE,"on"+gE)}ws(xm,"onAnimationEnd");ws(wm,"onAnimationIteration");ws(Em,"onAnimationStart");ws("dblclick","onDoubleClick");ws("focusin","onFocus");ws("focusout","onBlur");ws(_m,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function m0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dw(i,e,void 0,t),t.currentTarget=null}function vm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var m=i[f],y=m.instance,x=m.currentTarget;if(m=m.listener,y!==l&&o.isPropagationStopped())break e;m0(o,m,x),l=y}else for(f=0;f<i.length;f++){if(m=i[f],y=m.instance,x=m.currentTarget,m=m.listener,y!==l&&o.isPropagationStopped())break e;m0(o,m,x),l=y}}}if(Uu)throw t=cf,Uu=!1,cf=null,t}function At(t,e){var n=e[Ef];n===void 0&&(n=e[Ef]=new Set);var i=t+"__bubble";n.has(i)||(Cm(e,t,2,!1),n.add(i))}function Sh(t,e,n){var i=0;e&&(i|=4),Cm(n,t,i,e)}var ou="_reactListening"+Math.random().toString(36).slice(2);function ul(t){if(!t[ou]){t[ou]=!0,bp.forEach(function(n){n!=="selectionchange"&&(pE.has(n)||Sh(n,!1,t),Sh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ou]||(e[ou]=!0,Sh("selectionchange",!1,e))}}function Cm(t,e,n,i){switch(am(e)){case 1:var o=Nw;break;case 4:o=Ow;break;default:o=Nd}n=o.bind(null,e,n,t),o=void 0,!uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Rh(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var m=i.stateNode.containerInfo;if(m===o||m.nodeType===8&&m.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var y=f.tag;if((y===3||y===4)&&(y=f.stateNode.containerInfo,y===o||y.nodeType===8&&y.parentNode===o))return;f=f.return}for(;m!==null;){if(f=zs(m),f===null)return;if(y=f.tag,y===5||y===6){i=l=f;continue e}m=m.parentNode}}i=i.return}Kp(function(){var x=l,v=Id(n),C=[];e:{var D=Am.get(t);if(D!==void 0){var F=bd,X=t;switch(t){case"keypress":if(Cu(n)===0)break e;case"keydown":case"keyup":F=Gw;break;case"focusin":X="focus",F=_h;break;case"focusout":X="blur",F=_h;break;case"beforeblur":case"afterblur":F=_h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Pw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=qw;break;case xm:case wm:case Em:F=Lw;break;case _m:F=Qw;break;case"scroll":F=bw;break;case"wheel":F=Zw;break;case"copy":case"cut":case"paste":F=Fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=o0}var G=(e&4)!==0,$=!G&&t==="scroll",U=G?D!==null?D+"Capture":null:D;G=[];for(var M=x,L;M!==null;){L=M;var Q=L.stateNode;if(L.tag===5&&Q!==null&&(L=Q,U!==null&&(Q=rl(M,U),Q!=null&&G.push(cl(M,Q,L)))),$)break;M=M.return}0<G.length&&(D=new F(D,X,null,n,v),C.push({event:D,listeners:G}))}}if(!(e&7)){e:{if(D=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",D&&n!==af&&(X=n.relatedTarget||n.fromElement)&&(zs(X)||X[vi]))break e;if((F||D)&&(D=v.window===v?v:(D=v.ownerDocument)?D.defaultView||D.parentWindow:window,F?(X=n.relatedTarget||n.toElement,F=x,X=X?zs(X):null,X!==null&&($=to(X),X!==$||X.tag!==5&&X.tag!==6)&&(X=null)):(F=null,X=x),F!==X)){if(G=i0,Q="onMouseLeave",U="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(G=o0,Q="onPointerLeave",U="onPointerEnter",M="pointer"),$=F==null?D:Do(F),L=X==null?D:Do(X),D=new G(Q,M+"leave",F,n,v),D.target=$,D.relatedTarget=L,Q=null,zs(v)===x&&(G=new G(U,M+"enter",X,n,v),G.target=L,G.relatedTarget=$,Q=G),$=Q,F&&X)t:{for(G=F,U=X,M=0,L=G;L;L=Ao(L))M++;for(L=0,Q=U;Q;Q=Ao(Q))L++;for(;0<M-L;)G=Ao(G),M--;for(;0<L-M;)U=Ao(U),L--;for(;M--;){if(G===U||U!==null&&G===U.alternate)break t;G=Ao(G),U=Ao(U)}G=null}else G=null;F!==null&&y0(C,D,F,G,!1),X!==null&&$!==null&&y0(C,$,X,G,!0)}}e:{if(D=x?Do(x):window,F=D.nodeName&&D.nodeName.toLowerCase(),F==="select"||F==="input"&&D.type==="file")var ue=sE;else if(u0(D))if(dm)ue=uE;else{ue=aE;var ie=oE}else(F=D.nodeName)&&F.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(ue=lE);if(ue&&(ue=ue(t,x))){fm(C,ue,n,v);break e}ie&&ie(t,D,x),t==="focusout"&&(ie=D._wrapperState)&&ie.controlled&&D.type==="number"&&tf(D,"number",D.value)}switch(ie=x?Do(x):window,t){case"focusin":(u0(ie)||ie.contentEditable==="true")&&(Oo=ie,gf=x,Xa=null);break;case"focusout":Xa=gf=Oo=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,g0(C,n,v);break;case"selectionchange":if(fE)break;case"keydown":case"keyup":g0(C,n,v)}var b;if(Pd)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else No?cm(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(um&&n.locale!=="ko"&&(No||O!=="onCompositionStart"?O==="onCompositionEnd"&&No&&(b=lm()):(Xi=v,Od="value"in Xi?Xi.value:Xi.textContent,No=!0)),ie=Gu(x,O),0<ie.length&&(O=new s0(O,t,null,n,v),C.push({event:O,listeners:ie}),b?O.data=b:(b=hm(n),b!==null&&(O.data=b)))),(b=eE?tE(t,n):nE(t,n))&&(x=Gu(x,"onBeforeInput"),0<x.length&&(v=new s0("onBeforeInput","beforeinput",null,n,v),C.push({event:v,listeners:x}),v.data=b))}vm(C,e)})}function cl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gu(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=rl(t,n),l!=null&&i.unshift(cl(t,l,o)),l=rl(t,e),l!=null&&i.push(cl(t,l,o))),t=t.return}return i}function Ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y0(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var m=n,y=m.alternate,x=m.stateNode;if(y!==null&&y===i)break;m.tag===5&&x!==null&&(m=x,o?(y=rl(n,l),y!=null&&f.unshift(cl(n,y,m))):o||(y=rl(n,l),y!=null&&f.push(cl(n,y,m)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var mE=/\r\n?/g,yE=/\u0000|\uFFFD/g;function x0(t){return(typeof t=="string"?t:""+t).replace(mE,`
`).replace(yE,"")}function au(t,e,n){if(e=x0(e),x0(t)!==e&&n)throw Error(ae(425))}function Xu(){}var mf=null,yf=null;function xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,xE=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,wE=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(t){return w0.resolve(null).then(t).catch(EE)}:wf;function EE(t){setTimeout(function(){throw t})}function Nh(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),ol(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);ol(e)}function Ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ca=Math.random().toString(36).slice(2),ni="__reactFiber$"+ca,hl="__reactProps$"+ca,vi="__reactContainer$"+ca,Ef="__reactEvents$"+ca,_E="__reactListeners$"+ca,AE="__reactHandles$"+ca;function zs(t){var e=t[ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vi]||n[ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E0(t);t!==null;){if(n=t[ni])return n;t=E0(t)}return e}t=n,n=t.parentNode}return null}function Dl(t){return t=t[ni]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function bc(t){return t[hl]||null}var _f=[],Po=-1;function Es(t){return{current:t}}function Ct(t){0>Po||(t.current=_f[Po],_f[Po]=null,Po--)}function mt(t,e){Po++,_f[Po]=t.current,t.current=e}var fs={},kn=Es(fs),Zn=Es(!1),qs=fs;function qo(t,e){var n=t.type.contextTypes;if(!n)return fs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Jn(t){return t=t.childContextTypes,t!=null}function Ku(){Ct(Zn),Ct(kn)}function _0(t,e,n){if(kn.current!==fs)throw Error(ae(168));mt(kn,e),mt(Zn,n)}function Im(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(ae(108,ow(t)||"Unknown",o));return Lt({},n,i)}function qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fs,qs=kn.current,mt(kn,t),mt(Zn,Zn.current),!0}function A0(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=Im(t,e,qs),i.__reactInternalMemoizedMergedChildContext=t,Ct(Zn),Ct(kn),mt(kn,t)):Ct(Zn),mt(Zn,n)}var xi=null,Dc=!1,Oh=!1;function Tm(t){xi===null?xi=[t]:xi.push(t)}function vE(t){Dc=!0,Tm(t)}function _s(){if(!Oh&&xi!==null){Oh=!0;var t=0,e=lt;try{var n=xi;for(lt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}xi=null,Dc=!1}catch(o){throw xi!==null&&(xi=xi.slice(t+1)),$p(Td,_s),o}finally{lt=e,Oh=!1}}return null}var ko=[],Mo=0,Yu=null,Qu=0,vr=[],Cr=0,Ys=null,wi=1,Ei="";function Fs(t,e){ko[Mo++]=Qu,ko[Mo++]=Yu,Yu=t,Qu=e}function Sm(t,e,n){vr[Cr++]=wi,vr[Cr++]=Ei,vr[Cr++]=Ys,Ys=t;var i=wi;t=Ei;var o=32-Ur(i)-1;i&=~(1<<o),n+=1;var l=32-Ur(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,wi=1<<32-Ur(e)+o|n<<o|i,Ei=l+t}else wi=1<<l|n<<o|i,Ei=t}function Md(t){t.return!==null&&(Fs(t,1),Sm(t,1,0))}function Ld(t){for(;t===Yu;)Yu=ko[--Mo],ko[Mo]=null,Qu=ko[--Mo],ko[Mo]=null;for(;t===Ys;)Ys=vr[--Cr],vr[Cr]=null,Ei=vr[--Cr],vr[Cr]=null,wi=vr[--Cr],vr[Cr]=null}var pr=null,gr=null,Rt=!1,Fr=null;function Rm(t,e){var n=Tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pr=t,gr=Ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pr=t,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ys!==null?{id:wi,overflow:Ei}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pr=t,gr=null,!0):!1;default:return!1}}function Af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vf(t){if(Rt){var e=gr;if(e){var n=e;if(!v0(t,e)){if(Af(t))throw Error(ae(418));e=Ji(n.nextSibling);var i=pr;e&&v0(t,e)?Rm(i,n):(t.flags=t.flags&-4097|2,Rt=!1,pr=t)}}else{if(Af(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Rt=!1,pr=t}}}function C0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pr=t}function lu(t){if(t!==pr)return!1;if(!Rt)return C0(t),Rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xf(t.type,t.memoizedProps)),e&&(e=gr)){if(Af(t))throw Nm(),Error(ae(418));for(;e;)Rm(t,e),e=Ji(e.nextSibling)}if(C0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gr=Ji(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gr=null}}else gr=pr?Ji(t.stateNode.nextSibling):null;return!0}function Nm(){for(var t=gr;t;)t=Ji(t.nextSibling)}function Yo(){gr=pr=null,Rt=!1}function Bd(t){Fr===null?Fr=[t]:Fr.push(t)}var CE=Ni.ReactCurrentBatchConfig;function ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var m=o.refs;f===null?delete m[l]:m[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function uu(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I0(t){var e=t._init;return e(t._payload)}function Om(t){function e(U,M){if(t){var L=U.deletions;L===null?(U.deletions=[M],U.flags|=16):L.push(M)}}function n(U,M){if(!t)return null;for(;M!==null;)e(U,M),M=M.sibling;return null}function i(U,M){for(U=new Map;M!==null;)M.key!==null?U.set(M.key,M):U.set(M.index,M),M=M.sibling;return U}function o(U,M){return U=rs(U,M),U.index=0,U.sibling=null,U}function l(U,M,L){return U.index=L,t?(L=U.alternate,L!==null?(L=L.index,L<M?(U.flags|=2,M):L):(U.flags|=2,M)):(U.flags|=1048576,M)}function f(U){return t&&U.alternate===null&&(U.flags|=2),U}function m(U,M,L,Q){return M===null||M.tag!==6?(M=Bh(L,U.mode,Q),M.return=U,M):(M=o(M,L),M.return=U,M)}function y(U,M,L,Q){var ue=L.type;return ue===Ro?v(U,M,L.props.children,Q,L.key):M!==null&&(M.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ji&&I0(ue)===M.type)?(Q=o(M,L.props),Q.ref=ba(U,M,L),Q.return=U,Q):(Q=bu(L.type,L.key,L.props,null,U.mode,Q),Q.ref=ba(U,M,L),Q.return=U,Q)}function x(U,M,L,Q){return M===null||M.tag!==4||M.stateNode.containerInfo!==L.containerInfo||M.stateNode.implementation!==L.implementation?(M=Fh(L,U.mode,Q),M.return=U,M):(M=o(M,L.children||[]),M.return=U,M)}function v(U,M,L,Q,ue){return M===null||M.tag!==7?(M=Xs(L,U.mode,Q,ue),M.return=U,M):(M=o(M,L),M.return=U,M)}function C(U,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Bh(""+M,U.mode,L),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Zl:return L=bu(M.type,M.key,M.props,null,U.mode,L),L.ref=ba(U,null,M),L.return=U,L;case So:return M=Fh(M,U.mode,L),M.return=U,M;case ji:var Q=M._init;return C(U,Q(M._payload),L)}if(Ma(M)||Ta(M))return M=Xs(M,U.mode,L,null),M.return=U,M;uu(U,M)}return null}function D(U,M,L,Q){var ue=M!==null?M.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ue!==null?null:m(U,M,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Zl:return L.key===ue?y(U,M,L,Q):null;case So:return L.key===ue?x(U,M,L,Q):null;case ji:return ue=L._init,D(U,M,ue(L._payload),Q)}if(Ma(L)||Ta(L))return ue!==null?null:v(U,M,L,Q,null);uu(U,L)}return null}function F(U,M,L,Q,ue){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return U=U.get(L)||null,m(M,U,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Zl:return U=U.get(Q.key===null?L:Q.key)||null,y(M,U,Q,ue);case So:return U=U.get(Q.key===null?L:Q.key)||null,x(M,U,Q,ue);case ji:var ie=Q._init;return F(U,M,L,ie(Q._payload),ue)}if(Ma(Q)||Ta(Q))return U=U.get(L)||null,v(M,U,Q,ue,null);uu(M,Q)}return null}function X(U,M,L,Q){for(var ue=null,ie=null,b=M,O=M=0,N=null;b!==null&&O<L.length;O++){b.index>O?(N=b,b=null):N=b.sibling;var V=D(U,b,L[O],Q);if(V===null){b===null&&(b=N);break}t&&b&&V.alternate===null&&e(U,b),M=l(V,M,O),ie===null?ue=V:ie.sibling=V,ie=V,b=N}if(O===L.length)return n(U,b),Rt&&Fs(U,O),ue;if(b===null){for(;O<L.length;O++)b=C(U,L[O],Q),b!==null&&(M=l(b,M,O),ie===null?ue=b:ie.sibling=b,ie=b);return Rt&&Fs(U,O),ue}for(b=i(U,b);O<L.length;O++)N=F(b,U,O,L[O],Q),N!==null&&(t&&N.alternate!==null&&b.delete(N.key===null?O:N.key),M=l(N,M,O),ie===null?ue=N:ie.sibling=N,ie=N);return t&&b.forEach(function(H){return e(U,H)}),Rt&&Fs(U,O),ue}function G(U,M,L,Q){var ue=Ta(L);if(typeof ue!="function")throw Error(ae(150));if(L=ue.call(L),L==null)throw Error(ae(151));for(var ie=ue=null,b=M,O=M=0,N=null,V=L.next();b!==null&&!V.done;O++,V=L.next()){b.index>O?(N=b,b=null):N=b.sibling;var H=D(U,b,V.value,Q);if(H===null){b===null&&(b=N);break}t&&b&&H.alternate===null&&e(U,b),M=l(H,M,O),ie===null?ue=H:ie.sibling=H,ie=H,b=N}if(V.done)return n(U,b),Rt&&Fs(U,O),ue;if(b===null){for(;!V.done;O++,V=L.next())V=C(U,V.value,Q),V!==null&&(M=l(V,M,O),ie===null?ue=V:ie.sibling=V,ie=V);return Rt&&Fs(U,O),ue}for(b=i(U,b);!V.done;O++,V=L.next())V=F(b,U,O,V.value,Q),V!==null&&(t&&V.alternate!==null&&b.delete(V.key===null?O:V.key),M=l(V,M,O),ie===null?ue=V:ie.sibling=V,ie=V);return t&&b.forEach(function(j){return e(U,j)}),Rt&&Fs(U,O),ue}function $(U,M,L,Q){if(typeof L=="object"&&L!==null&&L.type===Ro&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case Zl:e:{for(var ue=L.key,ie=M;ie!==null;){if(ie.key===ue){if(ue=L.type,ue===Ro){if(ie.tag===7){n(U,ie.sibling),M=o(ie,L.props.children),M.return=U,U=M;break e}}else if(ie.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ji&&I0(ue)===ie.type){n(U,ie.sibling),M=o(ie,L.props),M.ref=ba(U,ie,L),M.return=U,U=M;break e}n(U,ie);break}else e(U,ie);ie=ie.sibling}L.type===Ro?(M=Xs(L.props.children,U.mode,Q,L.key),M.return=U,U=M):(Q=bu(L.type,L.key,L.props,null,U.mode,Q),Q.ref=ba(U,M,L),Q.return=U,U=Q)}return f(U);case So:e:{for(ie=L.key;M!==null;){if(M.key===ie)if(M.tag===4&&M.stateNode.containerInfo===L.containerInfo&&M.stateNode.implementation===L.implementation){n(U,M.sibling),M=o(M,L.children||[]),M.return=U,U=M;break e}else{n(U,M);break}else e(U,M);M=M.sibling}M=Fh(L,U.mode,Q),M.return=U,U=M}return f(U);case ji:return ie=L._init,$(U,M,ie(L._payload),Q)}if(Ma(L))return X(U,M,L,Q);if(Ta(L))return G(U,M,L,Q);uu(U,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,M!==null&&M.tag===6?(n(U,M.sibling),M=o(M,L),M.return=U,U=M):(n(U,M),M=Bh(L,U.mode,Q),M.return=U,U=M),f(U)):n(U,M)}return $}var Qo=Om(!0),bm=Om(!1),$u=Es(null),Zu=null,Lo=null,Fd=null;function Vd(){Fd=Lo=Zu=null}function Ud(t){var e=$u.current;Ct($u),t._currentValue=e}function Cf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){Zu=t,Fd=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Rr(t){var e=t._currentValue;if(Fd!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(Zu===null)throw Error(ae(308));Lo=t,Zu.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var js=null;function zd(t){js===null?js=[t]:js.push(t)}function Dm(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,zd(e)):(n.next=o.next,o.next=n),e.interleaved=n,Ci(t,i)}function Ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wi=!1;function jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function es(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Je&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Ci(t,n)}return o=i.interleaved,o===null?(e.next=e,zd(i)):(e.next=o.next,o.next=e),i.interleaved=e,Ci(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sd(t,n)}}function T0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ju(t,e,n,i){var o=t.updateQueue;Wi=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var y=m,x=y.next;y.next=null,f===null?l=x:f.next=x,f=y;var v=t.alternate;v!==null&&(v=v.updateQueue,m=v.lastBaseUpdate,m!==f&&(m===null?v.firstBaseUpdate=x:m.next=x,v.lastBaseUpdate=y))}if(l!==null){var C=o.baseState;f=0,v=x=y=null,m=l;do{var D=m.lane,F=m.eventTime;if((i&D)===D){v!==null&&(v=v.next={eventTime:F,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var X=t,G=m;switch(D=e,F=n,G.tag){case 1:if(X=G.payload,typeof X=="function"){C=X.call(F,C,D);break e}C=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=G.payload,D=typeof X=="function"?X.call(F,C,D):X,D==null)break e;C=Lt({},C,D);break e;case 2:Wi=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,D=o.effects,D===null?o.effects=[m]:D.push(m))}else F={eventTime:F,lane:D,tag:m.tag,payload:m.payload,callback:m.callback,next:null},v===null?(x=v=F,y=C):v=v.next=F,f|=D;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;D=m,m=D.next,D.next=null,o.lastBaseUpdate=D,o.shared.pending=null}}while(!0);if(v===null&&(y=C),o.baseState=y,o.firstBaseUpdate=x,o.lastBaseUpdate=v,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);$s|=f,t.lanes=f,t.memoizedState=C}}function S0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(ae(191,o));o.call(i)}}}var Pl={},ii=Es(Pl),fl=Es(Pl),dl=Es(Pl);function Ws(t){if(t===Pl)throw Error(ae(174));return t}function Wd(t,e){switch(mt(dl,e),mt(fl,t),mt(ii,Pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rf(e,t)}Ct(ii),mt(ii,e)}function $o(){Ct(ii),Ct(fl),Ct(dl)}function km(t){Ws(dl.current);var e=Ws(ii.current),n=rf(e,t.type);e!==n&&(mt(fl,t),mt(ii,n))}function Hd(t){fl.current===t&&(Ct(ii),Ct(fl))}var kt=Es(0);function ec(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bh=[];function Gd(){for(var t=0;t<bh.length;t++)bh[t]._workInProgressVersionPrimary=null;bh.length=0}var Tu=Ni.ReactCurrentDispatcher,Dh=Ni.ReactCurrentBatchConfig,Qs=0,Mt=null,on=null,pn=null,tc=!1,Ka=!1,gl=0,IE=0;function Rn(){throw Error(ae(321))}function Xd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wr(t[n],e[n]))return!1;return!0}function Kd(t,e,n,i,o,l){if(Qs=l,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tu.current=t===null||t.memoizedState===null?NE:OE,t=n(i,o),Ka){l=0;do{if(Ka=!1,gl=0,25<=l)throw Error(ae(301));l+=1,pn=on=null,e.updateQueue=null,Tu.current=bE,t=n(i,o)}while(Ka)}if(Tu.current=nc,e=on!==null&&on.next!==null,Qs=0,pn=on=Mt=null,tc=!1,e)throw Error(ae(300));return t}function qd(){var t=gl!==0;return gl=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Mt.memoizedState=pn=t:pn=pn.next=t,pn}function Nr(){if(on===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=pn===null?Mt.memoizedState:pn.next;if(e!==null)pn=e,on=t;else{if(t===null)throw Error(ae(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},pn===null?Mt.memoizedState=pn=t:pn=pn.next=t}return pn}function pl(t,e){return typeof e=="function"?e(t):e}function Ph(t){var e=Nr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=on,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var m=f=null,y=null,x=l;do{var v=x.lane;if((Qs&v)===v)y!==null&&(y=y.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),i=x.hasEagerState?x.eagerState:t(i,x.action);else{var C={lane:v,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};y===null?(m=y=C,f=i):y=y.next=C,Mt.lanes|=v,$s|=v}x=x.next}while(x!==null&&x!==l);y===null?f=i:y.next=m,Wr(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=y,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,Mt.lanes|=l,$s|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kh(t){var e=Nr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);Wr(l,e.memoizedState)||($n=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Mm(){}function Lm(t,e){var n=Mt,i=Nr(),o=e(),l=!Wr(i.memoizedState,o);if(l&&(i.memoizedState=o,$n=!0),i=i.queue,Yd(Vm.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,ml(9,Fm.bind(null,n,i,o,e),void 0,null),mn===null)throw Error(ae(349));Qs&30||Bm(n,e,o)}return o}function Bm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fm(t,e,n,i){e.value=n,e.getSnapshot=i,Um(e)&&zm(t)}function Vm(t,e,n){return n(function(){Um(e)&&zm(t)})}function Um(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wr(t,n)}catch{return!0}}function zm(t){var e=Ci(t,1);e!==null&&zr(e,t,1,-1)}function R0(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:t},e.queue=t,t=t.dispatch=RE.bind(null,Mt,t),[e.memoizedState,t]}function ml(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function jm(){return Nr().memoizedState}function Su(t,e,n,i){var o=ti();Mt.flags|=t,o.memoizedState=ml(1|e,n,void 0,i===void 0?null:i)}function Pc(t,e,n,i){var o=Nr();i=i===void 0?null:i;var l=void 0;if(on!==null){var f=on.memoizedState;if(l=f.destroy,i!==null&&Xd(i,f.deps)){o.memoizedState=ml(e,n,l,i);return}}Mt.flags|=t,o.memoizedState=ml(1|e,n,l,i)}function N0(t,e){return Su(8390656,8,t,e)}function Yd(t,e){return Pc(2048,8,t,e)}function Wm(t,e){return Pc(4,2,t,e)}function Hm(t,e){return Pc(4,4,t,e)}function Gm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xm(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4,4,Gm.bind(null,e,t),n)}function Qd(){}function Km(t,e){var n=Nr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Xd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function qm(t,e){var n=Nr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Xd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ym(t,e,n){return Qs&21?(Wr(n,e)||(n=em(),Mt.lanes|=n,$s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=n)}function TE(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var i=Dh.transition;Dh.transition={};try{t(!1),e()}finally{lt=n,Dh.transition=i}}function Qm(){return Nr().memoizedState}function SE(t,e,n){var i=ns(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$m(t))Zm(e,n);else if(n=Dm(t,e,n,i),n!==null){var o=Vn();zr(n,t,i,o),Jm(n,e,i)}}function RE(t,e,n){var i=ns(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($m(t))Zm(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,m=l(f,n);if(o.hasEagerState=!0,o.eagerState=m,Wr(m,f)){var y=e.interleaved;y===null?(o.next=o,zd(e)):(o.next=y.next,y.next=o),e.interleaved=o;return}}catch{}finally{}n=Dm(t,e,o,i),n!==null&&(o=Vn(),zr(n,t,i,o),Jm(n,e,i))}}function $m(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function Zm(t,e){Ka=tc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jm(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sd(t,n)}}var nc={readContext:Rr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},NE={readContext:Rr,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:Rr,useEffect:N0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,Gm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ti();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=SE.bind(null,Mt,t),[i.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:R0,useDebugValue:Qd,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=R0(!1),e=t[0];return t=TE.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Mt,o=ti();if(Rt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),mn===null)throw Error(ae(349));Qs&30||Bm(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,N0(Vm.bind(null,i,l,t),[t]),i.flags|=2048,ml(9,Fm.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=ti(),e=mn.identifierPrefix;if(Rt){var n=Ei,i=wi;n=(i&~(1<<32-Ur(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=gl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OE={readContext:Rr,useCallback:Km,useContext:Rr,useEffect:Yd,useImperativeHandle:Xm,useInsertionEffect:Wm,useLayoutEffect:Hm,useMemo:qm,useReducer:Ph,useRef:jm,useState:function(){return Ph(pl)},useDebugValue:Qd,useDeferredValue:function(t){var e=Nr();return Ym(e,on.memoizedState,t)},useTransition:function(){var t=Ph(pl)[0],e=Nr().memoizedState;return[t,e]},useMutableSource:Mm,useSyncExternalStore:Lm,useId:Qm,unstable_isNewReconciler:!1},bE={readContext:Rr,useCallback:Km,useContext:Rr,useEffect:Yd,useImperativeHandle:Xm,useInsertionEffect:Wm,useLayoutEffect:Hm,useMemo:qm,useReducer:kh,useRef:jm,useState:function(){return kh(pl)},useDebugValue:Qd,useDeferredValue:function(t){var e=Nr();return on===null?e.memoizedState=t:Ym(e,on.memoizedState,t)},useTransition:function(){var t=kh(pl)[0],e=Nr().memoizedState;return[t,e]},useMutableSource:Mm,useSyncExternalStore:Lm,useId:Qm,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=Lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function If(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kc={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Vn(),o=ns(t),l=_i(i,o);l.payload=e,n!=null&&(l.callback=n),e=es(t,l,o),e!==null&&(zr(e,t,o,i),Iu(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Vn(),o=ns(t),l=_i(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=es(t,l,o),e!==null&&(zr(e,t,o,i),Iu(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vn(),i=ns(t),o=_i(n,i);o.tag=2,e!=null&&(o.callback=e),e=es(t,o,i),e!==null&&(zr(e,t,i,n),Iu(e,t,i))}};function O0(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!ll(n,i)||!ll(o,l):!0}function e2(t,e,n){var i=!1,o=fs,l=e.contextType;return typeof l=="object"&&l!==null?l=Rr(l):(o=Jn(e)?qs:kn.current,i=e.contextTypes,l=(i=i!=null)?qo(t,o):fs),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function b0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&kc.enqueueReplaceState(e,e.state,null)}function Tf(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},jd(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Rr(l):(l=Jn(e)?qs:kn.current,o.context=qo(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(If(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&kc.enqueueReplaceState(o,o.state,null),Ju(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",i=e;do n+=sw(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function Mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DE=typeof WeakMap=="function"?WeakMap:Map;function t2(t,e,n){n=_i(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ic||(ic=!0,Bf=i),Sf(t,e)},n}function n2(t,e,n){n=_i(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Sf(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Sf(t,e),typeof i!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function D0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new DE;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=XE.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k0(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_i(-1,1),e.tag=2,es(n,e,1))),n.lanes|=1),t)}var PE=Ni.ReactCurrentOwner,$n=!1;function Fn(t,e,n,i){e.child=t===null?bm(e,null,n,i):Qo(e,t.child,n,i)}function M0(t,e,n,i,o){n=n.render;var l=e.ref;return Ho(e,o),i=Kd(t,e,n,i,l,o),n=qd(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ii(t,e,o)):(Rt&&n&&Md(e),e.flags|=1,Fn(t,e,i,o),e.child)}function L0(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!i1(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,r2(t,e,l,i,o)):(t=bu(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(f,i)&&t.ref===e.ref)return Ii(t,e,o)}return e.flags|=1,t=rs(l,i),t.ref=e.ref,t.return=e,e.child=t}function r2(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(ll(l,i)&&t.ref===e.ref)if($n=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,Ii(t,e,o)}return Rf(t,e,n,i,o)}function i2(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Fo,dr),dr|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(Fo,dr),dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,mt(Fo,dr),dr|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,mt(Fo,dr),dr|=i;return Fn(t,e,o,n),e.child}function s2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rf(t,e,n,i,o){var l=Jn(n)?qs:kn.current;return l=qo(e,l),Ho(e,o),n=Kd(t,e,n,i,l,o),i=qd(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ii(t,e,o)):(Rt&&i&&Md(e),e.flags|=1,Fn(t,e,n,o),e.child)}function B0(t,e,n,i,o){if(Jn(n)){var l=!0;qu(e)}else l=!1;if(Ho(e,o),e.stateNode===null)Ru(t,e),e2(e,n,i),Tf(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,m=e.memoizedProps;f.props=m;var y=f.context,x=n.contextType;typeof x=="object"&&x!==null?x=Rr(x):(x=Jn(n)?qs:kn.current,x=qo(e,x));var v=n.getDerivedStateFromProps,C=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function";C||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(m!==i||y!==x)&&b0(e,f,i,x),Wi=!1;var D=e.memoizedState;f.state=D,Ju(e,i,f,o),y=e.memoizedState,m!==i||D!==y||Zn.current||Wi?(typeof v=="function"&&(If(e,n,v,i),y=e.memoizedState),(m=Wi||O0(e,n,m,i,D,y,x))?(C||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=y),f.props=i,f.state=y,f.context=x,i=m):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,Pm(t,e),m=e.memoizedProps,x=e.type===e.elementType?m:Lr(e.type,m),f.props=x,C=e.pendingProps,D=f.context,y=n.contextType,typeof y=="object"&&y!==null?y=Rr(y):(y=Jn(n)?qs:kn.current,y=qo(e,y));var F=n.getDerivedStateFromProps;(v=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(m!==C||D!==y)&&b0(e,f,i,y),Wi=!1,D=e.memoizedState,f.state=D,Ju(e,i,f,o);var X=e.memoizedState;m!==C||D!==X||Zn.current||Wi?(typeof F=="function"&&(If(e,n,F,i),X=e.memoizedState),(x=Wi||O0(e,n,x,i,D,X,y)||!1)?(v||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,X,y),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,X,y)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||m===t.memoizedProps&&D===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&D===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=X),f.props=i,f.state=X,f.context=y,i=x):(typeof f.componentDidUpdate!="function"||m===t.memoizedProps&&D===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&D===t.memoizedState||(e.flags|=1024),i=!1)}return Nf(t,e,n,i,l,o)}function Nf(t,e,n,i,o,l){s2(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&A0(e,n,!1),Ii(t,e,l);i=e.stateNode,PE.current=e;var m=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=Qo(e,t.child,null,l),e.child=Qo(e,null,m,l)):Fn(t,e,m,l),e.memoizedState=i.state,o&&A0(e,n,!0),e.child}function o2(t){var e=t.stateNode;e.pendingContext?_0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_0(t,e.context,!1),Wd(t,e.containerInfo)}function F0(t,e,n,i,o){return Yo(),Bd(o),e.flags|=256,Fn(t,e,n,i),e.child}var Of={dehydrated:null,treeContext:null,retryLane:0};function bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function a2(t,e,n){var i=e.pendingProps,o=kt.current,l=!1,f=(e.flags&128)!==0,m;if((m=f)||(m=t!==null&&t.memoizedState===null?!1:(o&2)!==0),m?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),mt(kt,o&1),t===null)return vf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Bc(f,i,0,null),t=Xs(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=bf(n),e.memoizedState=Of,t):$d(e,f));if(o=t.memoizedState,o!==null&&(m=o.dehydrated,m!==null))return kE(t,e,f,i,m,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,m=o.sibling;var y={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=y,e.deletions=null):(i=rs(o,y),i.subtreeFlags=o.subtreeFlags&14680064),m!==null?l=rs(m,l):(l=Xs(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?bf(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=Of,i}return l=t.child,t=l.sibling,i=rs(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function $d(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cu(t,e,n,i){return i!==null&&Bd(i),Qo(e,t.child,null,n),t=$d(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kE(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=Mh(Error(ae(422))),cu(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Bc({mode:"visible",children:i.children},o,0,null),l=Xs(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Qo(e,t.child,null,f),e.child.memoizedState=bf(f),e.memoizedState=Of,l);if(!(e.mode&1))return cu(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var m=i.dgst;return i=m,l=Error(ae(419)),i=Mh(l,i,void 0),cu(t,e,f,i)}if(m=(f&t.childLanes)!==0,$n||m){if(i=mn,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Ci(t,o),zr(i,t,o,-1))}return r1(),i=Mh(Error(ae(421))),cu(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=KE.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,gr=Ji(o.nextSibling),pr=e,Rt=!0,Fr=null,t!==null&&(vr[Cr++]=wi,vr[Cr++]=Ei,vr[Cr++]=Ys,wi=t.id,Ei=t.overflow,Ys=e),e=$d(e,i.children),e.flags|=4096,e)}function V0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Cf(t.return,e,n)}function Lh(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function l2(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(Fn(t,e,i.children,n),i=kt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V0(t,n,e);else if(t.tag===19)V0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(mt(kt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ec(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Lh(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ec(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Lh(e,!0,n,null,l);break;case"together":Lh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ME(t,e,n){switch(e.tag){case 3:o2(e),Yo();break;case 5:km(e);break;case 1:Jn(e.type)&&qu(e);break;case 4:Wd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;mt($u,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(mt(kt,kt.current&1),e.flags|=128,null):n&e.child.childLanes?a2(t,e,n):(mt(kt,kt.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);mt(kt,kt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return l2(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),mt(kt,kt.current),i)break;return null;case 22:case 23:return e.lanes=0,i2(t,e,n)}return Ii(t,e,n)}var u2,Df,c2,h2;u2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Df=function(){};c2=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Ws(ii.current);var l=null;switch(n){case"input":o=Jh(t,o),i=Jh(t,i),l=[];break;case"select":o=Lt({},o,{value:void 0}),i=Lt({},i,{value:void 0}),l=[];break;case"textarea":o=nf(t,o),i=nf(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Xu)}sf(n,i);var f;n=null;for(x in o)if(!i.hasOwnProperty(x)&&o.hasOwnProperty(x)&&o[x]!=null)if(x==="style"){var m=o[x];for(f in m)m.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(tl.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in i){var y=i[x];if(m=o!=null?o[x]:void 0,i.hasOwnProperty(x)&&y!==m&&(y!=null||m!=null))if(x==="style")if(m){for(f in m)!m.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in y)y.hasOwnProperty(f)&&m[f]!==y[f]&&(n||(n={}),n[f]=y[f])}else n||(l||(l=[]),l.push(x,n)),n=y;else x==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,m=m?m.__html:void 0,y!=null&&m!==y&&(l=l||[]).push(x,y)):x==="children"?typeof y!="string"&&typeof y!="number"||(l=l||[]).push(x,""+y):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(tl.hasOwnProperty(x)?(y!=null&&x==="onScroll"&&At("scroll",t),l||m===y||(l=[])):(l=l||[]).push(x,y))}n&&(l=l||[]).push("style",n);var x=l;(e.updateQueue=x)&&(e.flags|=4)}};h2=function(t,e,n,i){n!==i&&(e.flags|=4)};function Da(t,e){if(!Rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LE(t,e,n){var i=e.pendingProps;switch(Ld(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return Jn(e.type)&&Ku(),Nn(e),null;case 3:return i=e.stateNode,$o(),Ct(Zn),Ct(kn),Gd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fr!==null&&(Uf(Fr),Fr=null))),Df(t,e),Nn(e),null;case 5:Hd(e);var o=Ws(dl.current);if(n=e.type,t!==null&&e.stateNode!=null)c2(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return Nn(e),null}if(t=Ws(ii.current),lu(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[ni]=e,i[hl]=l,t=(e.mode&1)!==0,n){case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":case"embed":At("load",i);break;case"video":case"audio":for(o=0;o<Ba.length;o++)At(Ba[o],i);break;case"source":At("error",i);break;case"img":case"image":case"link":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"input":q1(i,l),At("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},At("invalid",i);break;case"textarea":Q1(i,l),At("invalid",i)}sf(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var m=l[f];f==="children"?typeof m=="string"?i.textContent!==m&&(l.suppressHydrationWarning!==!0&&au(i.textContent,m,t),o=["children",m]):typeof m=="number"&&i.textContent!==""+m&&(l.suppressHydrationWarning!==!0&&au(i.textContent,m,t),o=["children",""+m]):tl.hasOwnProperty(f)&&m!=null&&f==="onScroll"&&At("scroll",i)}switch(n){case"input":Jl(i),Y1(i,l,!0);break;case"textarea":Jl(i),$1(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Xu)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[ni]=e,t[hl]=i,u2(t,e,!1,!1),e.stateNode=t;e:{switch(f=of(n,i),n){case"dialog":At("cancel",t),At("close",t),o=i;break;case"iframe":case"object":case"embed":At("load",t),o=i;break;case"video":case"audio":for(o=0;o<Ba.length;o++)At(Ba[o],t);o=i;break;case"source":At("error",t),o=i;break;case"img":case"image":case"link":At("error",t),At("load",t),o=i;break;case"details":At("toggle",t),o=i;break;case"input":q1(t,i),o=Jh(t,i),At("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Lt({},i,{value:void 0}),At("invalid",t);break;case"textarea":Q1(t,i),o=nf(t,i),At("invalid",t);break;default:o=i}sf(n,o),m=o;for(l in m)if(m.hasOwnProperty(l)){var y=m[l];l==="style"?jp(t,y):l==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&Up(t,y)):l==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&nl(t,y):typeof y=="number"&&nl(t,""+y):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(tl.hasOwnProperty(l)?y!=null&&l==="onScroll"&&At("scroll",t):y!=null&&_d(t,l,y,f))}switch(n){case"input":Jl(t),Y1(t,i,!1);break;case"textarea":Jl(t),$1(t);break;case"option":i.value!=null&&t.setAttribute("value",""+hs(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Uo(t,!!i.multiple,l,!1):i.defaultValue!=null&&Uo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)h2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Ws(dl.current),Ws(ii.current),lu(e)){if(i=e.stateNode,n=e.memoizedProps,i[ni]=e,(l=i.nodeValue!==n)&&(t=pr,t!==null))switch(t.tag){case 3:au(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ni]=e,e.stateNode=i}return Nn(e),null;case 13:if(Ct(kt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&gr!==null&&e.mode&1&&!(e.flags&128))Nm(),Yo(),e.flags|=98560,l=!1;else if(l=lu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ae(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ae(317));l[ni]=e}else Yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),l=!1}else Fr!==null&&(Uf(Fr),Fr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||kt.current&1?ln===0&&(ln=3):r1())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return $o(),Df(t,e),t===null&&ul(e.stateNode.containerInfo),Nn(e),null;case 10:return Ud(e.type._context),Nn(e),null;case 17:return Jn(e.type)&&Ku(),Nn(e),null;case 19:if(Ct(kt),l=e.memoizedState,l===null)return Nn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)Da(l,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=ec(t),f!==null){for(e.flags|=128,Da(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(kt,kt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Xt()>Jo&&(e.flags|=128,i=!0,Da(l,!1),e.lanes=4194304)}else{if(!i)if(t=ec(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Da(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Rt)return Nn(e),null}else 2*Xt()-l.renderingStartTime>Jo&&n!==1073741824&&(e.flags|=128,i=!0,Da(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xt(),e.sibling=null,n=kt.current,mt(kt,i?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return n1(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?dr&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function BE(t,e){switch(Ld(e),e.tag){case 1:return Jn(e.type)&&Ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $o(),Ct(Zn),Ct(kn),Gd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hd(e),null;case 13:if(Ct(kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ct(kt),null;case 4:return $o(),null;case 10:return Ud(e.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var hu=!1,Dn=!1,FE=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){zt(t,e,i)}else n.current=null}function Pf(t,e,n){try{n()}catch(i){zt(t,e,i)}}var U0=!1;function VE(t,e){if(mf=Wu,t=mm(),kd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,m=-1,y=-1,x=0,v=0,C=t,D=null;t:for(;;){for(var F;C!==n||o!==0&&C.nodeType!==3||(m=f+o),C!==l||i!==0&&C.nodeType!==3||(y=f+i),C.nodeType===3&&(f+=C.nodeValue.length),(F=C.firstChild)!==null;)D=C,C=F;for(;;){if(C===t)break t;if(D===n&&++x===o&&(m=f),D===l&&++v===i&&(y=f),(F=C.nextSibling)!==null)break;C=D,D=C.parentNode}C=F}n=m===-1||y===-1?null:{start:m,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(yf={focusedElem:t,selectionRange:n},Wu=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var X=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var G=X.memoizedProps,$=X.memoizedState,U=e.stateNode,M=U.getSnapshotBeforeUpdate(e.elementType===e.type?G:Lr(e.type,G),$);U.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(Q){zt(e,e.return,Q)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return X=U0,U0=!1,X}function qa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&Pf(e,n,l)}o=o.next}while(o!==i)}}function Mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function kf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f2(t){var e=t.alternate;e!==null&&(t.alternate=null,f2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ni],delete e[hl],delete e[Ef],delete e[_E],delete e[AE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d2(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(i!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}function Lf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Lf(t,e,n),t=t.sibling;t!==null;)Lf(t,e,n),t=t.sibling}var _n=null,Br=!1;function zi(t,e,n){for(n=n.child;n!==null;)g2(t,e,n),n=n.sibling}function g2(t,e,n){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(Sc,n)}catch{}switch(n.tag){case 5:Dn||Bo(n,e);case 6:var i=_n,o=Br;_n=null,zi(t,e,n),_n=i,Br=o,_n!==null&&(Br?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Br?(t=_n,n=n.stateNode,t.nodeType===8?Nh(t.parentNode,n):t.nodeType===1&&Nh(t,n),ol(t)):Nh(_n,n.stateNode));break;case 4:i=_n,o=Br,_n=n.stateNode.containerInfo,Br=!0,zi(t,e,n),_n=i,Br=o;break;case 0:case 11:case 14:case 15:if(!Dn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&Pf(n,e,f),o=o.next}while(o!==i)}zi(t,e,n);break;case 1:if(!Dn&&(Bo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(m){zt(n,e,m)}zi(t,e,n);break;case 21:zi(t,e,n);break;case 22:n.mode&1?(Dn=(i=Dn)||n.memoizedState!==null,zi(t,e,n),Dn=i):zi(t,e,n);break;default:zi(t,e,n)}}function j0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FE),e.forEach(function(i){var o=qE.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Mr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,m=f;e:for(;m!==null;){switch(m.tag){case 5:_n=m.stateNode,Br=!1;break e;case 3:_n=m.stateNode.containerInfo,Br=!0;break e;case 4:_n=m.stateNode.containerInfo,Br=!0;break e}m=m.return}if(_n===null)throw Error(ae(160));g2(l,f,o),_n=null,Br=!1;var y=o.alternate;y!==null&&(y.return=null),o.return=null}catch(x){zt(o,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p2(e,t),e=e.sibling}function p2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mr(e,t),ei(t),i&4){try{qa(3,t,t.return),Mc(3,t)}catch(G){zt(t,t.return,G)}try{qa(5,t,t.return)}catch(G){zt(t,t.return,G)}}break;case 1:Mr(e,t),ei(t),i&512&&n!==null&&Bo(n,n.return);break;case 5:if(Mr(e,t),ei(t),i&512&&n!==null&&Bo(n,n.return),t.flags&32){var o=t.stateNode;try{nl(o,"")}catch(G){zt(t,t.return,G)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,m=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{m==="input"&&l.type==="radio"&&l.name!=null&&Bp(o,l),of(m,f);var x=of(m,l);for(f=0;f<y.length;f+=2){var v=y[f],C=y[f+1];v==="style"?jp(o,C):v==="dangerouslySetInnerHTML"?Up(o,C):v==="children"?nl(o,C):_d(o,v,C,x)}switch(m){case"input":ef(o,l);break;case"textarea":Fp(o,l);break;case"select":var D=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var F=l.value;F!=null?Uo(o,!!l.multiple,F,!1):D!==!!l.multiple&&(l.defaultValue!=null?Uo(o,!!l.multiple,l.defaultValue,!0):Uo(o,!!l.multiple,l.multiple?[]:"",!1))}o[hl]=l}catch(G){zt(t,t.return,G)}}break;case 6:if(Mr(e,t),ei(t),i&4){if(t.stateNode===null)throw Error(ae(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(G){zt(t,t.return,G)}}break;case 3:if(Mr(e,t),ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(e.containerInfo)}catch(G){zt(t,t.return,G)}break;case 4:Mr(e,t),ei(t);break;case 13:Mr(e,t),ei(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(e1=Xt())),i&4&&j0(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Dn=(x=Dn)||v,Mr(e,t),Dn=x):Mr(e,t),ei(t),i&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!v&&t.mode&1)for(Ee=t,v=t.child;v!==null;){for(C=Ee=v;Ee!==null;){switch(D=Ee,F=D.child,D.tag){case 0:case 11:case 14:case 15:qa(4,D,D.return);break;case 1:Bo(D,D.return);var X=D.stateNode;if(typeof X.componentWillUnmount=="function"){i=D,n=D.return;try{e=i,X.props=e.memoizedProps,X.state=e.memoizedState,X.componentWillUnmount()}catch(G){zt(i,n,G)}}break;case 5:Bo(D,D.return);break;case 22:if(D.memoizedState!==null){H0(C);continue}}F!==null?(F.return=D,Ee=F):H0(C)}v=v.sibling}e:for(v=null,C=t;;){if(C.tag===5){if(v===null){v=C;try{o=C.stateNode,x?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(m=C.stateNode,y=C.memoizedProps.style,f=y!=null&&y.hasOwnProperty("display")?y.display:null,m.style.display=zp("display",f))}catch(G){zt(t,t.return,G)}}}else if(C.tag===6){if(v===null)try{C.stateNode.nodeValue=x?"":C.memoizedProps}catch(G){zt(t,t.return,G)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;v===C&&(v=null),C=C.return}v===C&&(v=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Mr(e,t),ei(t),i&4&&j0(t);break;case 21:break;default:Mr(e,t),ei(t)}}function ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(d2(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(nl(o,""),i.flags&=-33);var l=z0(t);Lf(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,m=z0(t);Mf(t,m,f);break;default:throw Error(ae(161))}}catch(y){zt(t,t.return,y)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UE(t,e,n){Ee=t,m2(t)}function m2(t,e,n){for(var i=(t.mode&1)!==0;Ee!==null;){var o=Ee,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||hu;if(!f){var m=o.alternate,y=m!==null&&m.memoizedState!==null||Dn;m=hu;var x=Dn;if(hu=f,(Dn=y)&&!x)for(Ee=o;Ee!==null;)f=Ee,y=f.child,f.tag===22&&f.memoizedState!==null?G0(o):y!==null?(y.return=f,Ee=y):G0(o);for(;l!==null;)Ee=l,m2(l),l=l.sibling;Ee=o,hu=m,Dn=x}W0(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,Ee=l):W0(t)}}function W0(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||Mc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dn)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Lr(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&S0(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S0(e,f,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var y=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var v=x.memoizedState;if(v!==null){var C=v.dehydrated;C!==null&&ol(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Dn||e.flags&512&&kf(e)}catch(D){zt(e,e.return,D)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function H0(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function G0(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mc(4,e)}catch(y){zt(e,n,y)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(y){zt(e,o,y)}}var l=e.return;try{kf(e)}catch(y){zt(e,l,y)}break;case 5:var f=e.return;try{kf(e)}catch(y){zt(e,f,y)}}}catch(y){zt(e,e.return,y)}if(e===t){Ee=null;break}var m=e.sibling;if(m!==null){m.return=e.return,Ee=m;break}Ee=e.return}}var zE=Math.ceil,rc=Ni.ReactCurrentDispatcher,Zd=Ni.ReactCurrentOwner,Sr=Ni.ReactCurrentBatchConfig,Je=0,mn=null,Qt=null,Cn=0,dr=0,Fo=Es(0),ln=0,yl=null,$s=0,Lc=0,Jd=0,Ya=null,Qn=null,e1=0,Jo=1/0,yi=null,ic=!1,Bf=null,ts=null,fu=!1,Ki=null,sc=0,Qa=0,Ff=null,Nu=-1,Ou=0;function Vn(){return Je&6?Xt():Nu!==-1?Nu:Nu=Xt()}function ns(t){return t.mode&1?Je&2&&Cn!==0?Cn&-Cn:CE.transition!==null?(Ou===0&&(Ou=em()),Ou):(t=lt,t!==0||(t=window.event,t=t===void 0?16:am(t.type)),t):1}function zr(t,e,n,i){if(50<Qa)throw Qa=0,Ff=null,Error(ae(185));Ol(t,n,i),(!(Je&2)||t!==mn)&&(t===mn&&(!(Je&2)&&(Lc|=n),ln===4&&Gi(t,Cn)),er(t,i),n===1&&Je===0&&!(e.mode&1)&&(Jo=Xt()+500,Dc&&_s()))}function er(t,e){var n=t.callbackNode;Cw(t,e);var i=ju(t,t===mn?Cn:0);if(i===0)n!==null&&e0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&e0(n),e===1)t.tag===0?vE(X0.bind(null,t)):Tm(X0.bind(null,t)),wE(function(){!(Je&6)&&_s()}),n=null;else{switch(tm(i)){case 1:n=Td;break;case 4:n=Zp;break;case 16:n=zu;break;case 536870912:n=Jp;break;default:n=zu}n=C2(n,y2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y2(t,e){if(Nu=-1,Ou=0,Je&6)throw Error(ae(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var i=ju(t,t===mn?Cn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=oc(t,i);else{e=i;var o=Je;Je|=2;var l=w2();(mn!==t||Cn!==e)&&(yi=null,Jo=Xt()+500,Gs(t,e));do try{HE();break}catch(m){x2(t,m)}while(!0);Vd(),rc.current=l,Je=o,Qt!==null?e=0:(mn=null,Cn=0,e=ln)}if(e!==0){if(e===2&&(o=hf(t),o!==0&&(i=o,e=Vf(t,o))),e===1)throw n=yl,Gs(t,0),Gi(t,i),er(t,Xt()),n;if(e===6)Gi(t,i);else{if(o=t.current.alternate,!(i&30)&&!jE(o)&&(e=oc(t,i),e===2&&(l=hf(t),l!==0&&(i=l,e=Vf(t,l))),e===1))throw n=yl,Gs(t,0),Gi(t,i),er(t,Xt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:Vs(t,Qn,yi);break;case 3:if(Gi(t,i),(i&130023424)===i&&(e=e1+500-Xt(),10<e)){if(ju(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Vn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=wf(Vs.bind(null,t,Qn,yi),e);break}Vs(t,Qn,yi);break;case 4:if(Gi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-Ur(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=Xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zE(i/1960))-i,10<i){t.timeoutHandle=wf(Vs.bind(null,t,Qn,yi),i);break}Vs(t,Qn,yi);break;case 5:Vs(t,Qn,yi);break;default:throw Error(ae(329))}}}return er(t,Xt()),t.callbackNode===n?y2.bind(null,t):null}function Vf(t,e){var n=Ya;return t.current.memoizedState.isDehydrated&&(Gs(t,e).flags|=256),t=oc(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&Uf(e)),t}function Uf(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function jE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Wr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gi(t,e){for(e&=~Jd,e&=~Lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ur(e),i=1<<n;t[n]=-1,e&=~i}}function X0(t){if(Je&6)throw Error(ae(327));Go();var e=ju(t,0);if(!(e&1))return er(t,Xt()),null;var n=oc(t,e);if(t.tag!==0&&n===2){var i=hf(t);i!==0&&(e=i,n=Vf(t,i))}if(n===1)throw n=yl,Gs(t,0),Gi(t,e),er(t,Xt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vs(t,Qn,yi),er(t,Xt()),null}function t1(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Jo=Xt()+500,Dc&&_s())}}function Zs(t){Ki!==null&&Ki.tag===0&&!(Je&6)&&Go();var e=Je;Je|=1;var n=Sr.transition,i=lt;try{if(Sr.transition=null,lt=1,t)return t()}finally{lt=i,Sr.transition=n,Je=e,!(Je&6)&&_s()}}function n1(){dr=Fo.current,Ct(Fo)}function Gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xE(n)),Qt!==null)for(n=Qt.return;n!==null;){var i=n;switch(Ld(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ku();break;case 3:$o(),Ct(Zn),Ct(kn),Gd();break;case 5:Hd(i);break;case 4:$o();break;case 13:Ct(kt);break;case 19:Ct(kt);break;case 10:Ud(i.type._context);break;case 22:case 23:n1()}n=n.return}if(mn=t,Qt=t=rs(t.current,null),Cn=dr=e,ln=0,yl=null,Jd=Lc=$s=0,Qn=Ya=null,js!==null){for(e=0;e<js.length;e++)if(n=js[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}js=null}return t}function x2(t,e){do{var n=Qt;try{if(Vd(),Tu.current=nc,tc){for(var i=Mt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}tc=!1}if(Qs=0,pn=on=Mt=null,Ka=!1,gl=0,Zd.current=null,n===null||n.return===null){ln=1,yl=e,Qt=null;break}e:{var l=t,f=n.return,m=n,y=e;if(e=Cn,m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var x=y,v=m,C=v.tag;if(!(v.mode&1)&&(C===0||C===11||C===15)){var D=v.alternate;D?(v.updateQueue=D.updateQueue,v.memoizedState=D.memoizedState,v.lanes=D.lanes):(v.updateQueue=null,v.memoizedState=null)}var F=P0(f);if(F!==null){F.flags&=-257,k0(F,f,m,l,e),F.mode&1&&D0(l,x,e),e=F,y=x;var X=e.updateQueue;if(X===null){var G=new Set;G.add(y),e.updateQueue=G}else X.add(y);break e}else{if(!(e&1)){D0(l,x,e),r1();break e}y=Error(ae(426))}}else if(Rt&&m.mode&1){var $=P0(f);if($!==null){!($.flags&65536)&&($.flags|=256),k0($,f,m,l,e),Bd(Zo(y,m));break e}}l=y=Zo(y,m),ln!==4&&(ln=2),Ya===null?Ya=[l]:Ya.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var U=t2(l,y,e);T0(l,U);break e;case 1:m=y;var M=l.type,L=l.stateNode;if(!(l.flags&128)&&(typeof M.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(ts===null||!ts.has(L)))){l.flags|=65536,e&=-e,l.lanes|=e;var Q=n2(l,m,e);T0(l,Q);break e}}l=l.return}while(l!==null)}_2(n)}catch(ue){e=ue,Qt===n&&n!==null&&(Qt=n=n.return);continue}break}while(!0)}function w2(){var t=rc.current;return rc.current=nc,t===null?nc:t}function r1(){(ln===0||ln===3||ln===2)&&(ln=4),mn===null||!($s&268435455)&&!(Lc&268435455)||Gi(mn,Cn)}function oc(t,e){var n=Je;Je|=2;var i=w2();(mn!==t||Cn!==e)&&(yi=null,Gs(t,e));do try{WE();break}catch(o){x2(t,o)}while(!0);if(Vd(),Je=n,rc.current=i,Qt!==null)throw Error(ae(261));return mn=null,Cn=0,ln}function WE(){for(;Qt!==null;)E2(Qt)}function HE(){for(;Qt!==null&&!pw();)E2(Qt)}function E2(t){var e=v2(t.alternate,t,dr);t.memoizedProps=t.pendingProps,e===null?_2(t):Qt=e,Zd.current=null}function _2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BE(n,e),n!==null){n.flags&=32767,Qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Qt=null;return}}else if(n=LE(n,e,dr),n!==null){Qt=n;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);ln===0&&(ln=5)}function Vs(t,e,n){var i=lt,o=Sr.transition;try{Sr.transition=null,lt=1,GE(t,e,n,i)}finally{Sr.transition=o,lt=i}return null}function GE(t,e,n,i){do Go();while(Ki!==null);if(Je&6)throw Error(ae(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Iw(t,l),t===mn&&(Qt=mn=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fu||(fu=!0,C2(zu,function(){return Go(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Sr.transition,Sr.transition=null;var f=lt;lt=1;var m=Je;Je|=4,Zd.current=null,VE(t,n),p2(n,t),hE(yf),Wu=!!mf,yf=mf=null,t.current=n,UE(n),mw(),Je=m,lt=f,Sr.transition=l}else t.current=n;if(fu&&(fu=!1,Ki=t,sc=o),l=t.pendingLanes,l===0&&(ts=null),ww(n.stateNode),er(t,Xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(ic)throw ic=!1,t=Bf,Bf=null,t;return sc&1&&t.tag!==0&&Go(),l=t.pendingLanes,l&1?t===Ff?Qa++:(Qa=0,Ff=t):Qa=0,_s(),null}function Go(){if(Ki!==null){var t=tm(sc),e=Sr.transition,n=lt;try{if(Sr.transition=null,lt=16>t?16:t,Ki===null)var i=!1;else{if(t=Ki,Ki=null,sc=0,Je&6)throw Error(ae(331));var o=Je;for(Je|=4,Ee=t.current;Ee!==null;){var l=Ee,f=l.child;if(Ee.flags&16){var m=l.deletions;if(m!==null){for(var y=0;y<m.length;y++){var x=m[y];for(Ee=x;Ee!==null;){var v=Ee;switch(v.tag){case 0:case 11:case 15:qa(8,v,l)}var C=v.child;if(C!==null)C.return=v,Ee=C;else for(;Ee!==null;){v=Ee;var D=v.sibling,F=v.return;if(f2(v),v===x){Ee=null;break}if(D!==null){D.return=F,Ee=D;break}Ee=F}}}var X=l.alternate;if(X!==null){var G=X.child;if(G!==null){X.child=null;do{var $=G.sibling;G.sibling=null,G=$}while(G!==null)}}Ee=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ee=f;else e:for(;Ee!==null;){if(l=Ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:qa(9,l,l.return)}var U=l.sibling;if(U!==null){U.return=l.return,Ee=U;break e}Ee=l.return}}var M=t.current;for(Ee=M;Ee!==null;){f=Ee;var L=f.child;if(f.subtreeFlags&2064&&L!==null)L.return=f,Ee=L;else e:for(f=M;Ee!==null;){if(m=Ee,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Mc(9,m)}}catch(ue){zt(m,m.return,ue)}if(m===f){Ee=null;break e}var Q=m.sibling;if(Q!==null){Q.return=m.return,Ee=Q;break e}Ee=m.return}}if(Je=o,_s(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(Sc,t)}catch{}i=!0}return i}finally{lt=n,Sr.transition=e}}return!1}function K0(t,e,n){e=Zo(n,e),e=t2(t,e,1),t=es(t,e,1),e=Vn(),t!==null&&(Ol(t,1,e),er(t,e))}function zt(t,e,n){if(t.tag===3)K0(t,t,n);else for(;e!==null;){if(e.tag===3){K0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ts===null||!ts.has(i))){t=Zo(n,t),t=n2(e,t,1),e=es(e,t,1),t=Vn(),e!==null&&(Ol(e,1,t),er(e,t));break}}e=e.return}}function XE(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Vn(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(Cn&n)===n&&(ln===4||ln===3&&(Cn&130023424)===Cn&&500>Xt()-e1?Gs(t,0):Jd|=n),er(t,e)}function A2(t,e){e===0&&(t.mode&1?(e=nu,nu<<=1,!(nu&130023424)&&(nu=4194304)):e=1);var n=Vn();t=Ci(t,e),t!==null&&(Ol(t,e,n),er(t,n))}function KE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A2(t,n)}function qE(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),A2(t,n)}var v2;v2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zn.current)$n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $n=!1,ME(t,e,n);$n=!!(t.flags&131072)}else $n=!1,Rt&&e.flags&1048576&&Sm(e,Qu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ru(t,e),t=e.pendingProps;var o=qo(e,kn.current);Ho(e,n),o=Kd(null,e,i,t,o,n);var l=qd();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(i)?(l=!0,qu(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,jd(e),o.updater=kc,e.stateNode=o,o._reactInternals=e,Tf(e,i,t,n),e=Nf(null,e,i,!0,l,n)):(e.tag=0,Rt&&l&&Md(e),Fn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=QE(i),t=Lr(i,t),o){case 0:e=Rf(null,e,i,t,n);break e;case 1:e=B0(null,e,i,t,n);break e;case 11:e=M0(null,e,i,t,n);break e;case 14:e=L0(null,e,i,Lr(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Lr(i,o),Rf(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Lr(i,o),B0(t,e,i,o,n);case 3:e:{if(o2(e),t===null)throw Error(ae(387));i=e.pendingProps,l=e.memoizedState,o=l.element,Pm(t,e),Ju(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Zo(Error(ae(423)),e),e=F0(t,e,i,n,o);break e}else if(i!==o){o=Zo(Error(ae(424)),e),e=F0(t,e,i,n,o);break e}else for(gr=Ji(e.stateNode.containerInfo.firstChild),pr=e,Rt=!0,Fr=null,n=bm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yo(),i===o){e=Ii(t,e,n);break e}Fn(t,e,i,n)}e=e.child}return e;case 5:return km(e),t===null&&vf(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,xf(i,o)?f=null:l!==null&&xf(i,l)&&(e.flags|=32),s2(t,e),Fn(t,e,f,n),e.child;case 6:return t===null&&vf(e),null;case 13:return a2(t,e,n);case 4:return Wd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Qo(e,null,i,n):Fn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Lr(i,o),M0(t,e,i,o,n);case 7:return Fn(t,e,e.pendingProps,n),e.child;case 8:return Fn(t,e,e.pendingProps.children,n),e.child;case 12:return Fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,mt($u,i._currentValue),i._currentValue=f,l!==null)if(Wr(l.value,f)){if(l.children===o.children&&!Zn.current){e=Ii(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var m=l.dependencies;if(m!==null){f=l.child;for(var y=m.firstContext;y!==null;){if(y.context===i){if(l.tag===1){y=_i(-1,n&-n),y.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var v=x.pending;v===null?y.next=y:(y.next=v.next,v.next=y),x.pending=y}}l.lanes|=n,y=l.alternate,y!==null&&(y.lanes|=n),Cf(l.return,n,e),m.lanes|=n;break}y=y.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ae(341));f.lanes|=n,m=f.alternate,m!==null&&(m.lanes|=n),Cf(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}Fn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Ho(e,n),o=Rr(o),i=i(o),e.flags|=1,Fn(t,e,i,n),e.child;case 14:return i=e.type,o=Lr(i,e.pendingProps),o=Lr(i.type,o),L0(t,e,i,o,n);case 15:return r2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Lr(i,o),Ru(t,e),e.tag=1,Jn(i)?(t=!0,qu(e)):t=!1,Ho(e,n),e2(e,i,o),Tf(e,i,o,n),Nf(null,e,i,!0,t,n);case 19:return l2(t,e,n);case 22:return i2(t,e,n)}throw Error(ae(156,e.tag))};function C2(t,e){return $p(t,e)}function YE(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,n,i){return new YE(t,e,n,i)}function i1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QE(t){if(typeof t=="function")return i1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vd)return 11;if(t===Cd)return 14}return 2}function rs(t,e){var n=t.alternate;return n===null?(n=Tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bu(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")i1(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Ro:return Xs(n.children,o,l,e);case Ad:f=8,o|=8;break;case Yh:return t=Tr(12,n,e,o|2),t.elementType=Yh,t.lanes=l,t;case Qh:return t=Tr(13,n,e,o),t.elementType=Qh,t.lanes=l,t;case $h:return t=Tr(19,n,e,o),t.elementType=$h,t.lanes=l,t;case kp:return Bc(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dp:f=10;break e;case Pp:f=9;break e;case vd:f=11;break e;case Cd:f=14;break e;case ji:f=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Tr(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function Xs(t,e,n,i){return t=Tr(7,t,i,e),t.lanes=n,t}function Bc(t,e,n,i){return t=Tr(22,t,i,e),t.elementType=kp,t.lanes=n,t.stateNode={isHidden:!1},t}function Bh(t,e,n){return t=Tr(6,t,null,e),t.lanes=n,t}function Fh(t,e,n){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $E(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xh(0),this.expirationTimes=xh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xh(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function s1(t,e,n,i,o,l,f,m,y){return t=new $E(t,e,n,m,y),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Tr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jd(l),t}function ZE(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:So,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function I2(t){if(!t)return fs;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Jn(n))return Im(t,n,e)}return e}function T2(t,e,n,i,o,l,f,m,y){return t=s1(n,i,!0,t,o,l,f,m,y),t.context=I2(null),n=t.current,i=Vn(),o=ns(n),l=_i(i,o),l.callback=e??null,es(n,l,o),t.current.lanes=o,Ol(t,o,i),er(t,i),t}function Fc(t,e,n,i){var o=e.current,l=Vn(),f=ns(o);return n=I2(n),e.context===null?e.context=n:e.pendingContext=n,e=_i(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=es(o,e,f),t!==null&&(zr(t,o,f,l),Iu(t,o,f)),f}function ac(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function o1(t,e){q0(t,e),(t=t.alternate)&&q0(t,e)}function JE(){return null}var S2=typeof reportError=="function"?reportError:function(t){console.error(t)};function a1(t){this._internalRoot=t}Vc.prototype.render=a1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Fc(t,e,null,null)};Vc.prototype.unmount=a1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zs(function(){Fc(null,t,null,null)}),e[vi]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=im();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hi.length&&e!==0&&e<Hi[n].priority;n++);Hi.splice(n,0,t),n===0&&om(t)}};function l1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function e_(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var x=ac(f);l.call(x)}}var f=T2(e,i,t,0,null,!1,!1,"",Y0);return t._reactRootContainer=f,t[vi]=f.current,ul(t.nodeType===8?t.parentNode:t),Zs(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var m=i;i=function(){var x=ac(y);m.call(x)}}var y=s1(t,0,!1,null,null,!1,!1,"",Y0);return t._reactRootContainer=y,t[vi]=y.current,ul(t.nodeType===8?t.parentNode:t),Zs(function(){Fc(e,y,n,i)}),y}function zc(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var m=o;o=function(){var y=ac(f);m.call(y)}}Fc(e,f,t,o)}else f=e_(n,e,t,o,i);return ac(f)}nm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=La(e.pendingLanes);n!==0&&(Sd(e,n|1),er(e,Xt()),!(Je&6)&&(Jo=Xt()+500,_s()))}break;case 13:Zs(function(){var i=Ci(t,1);if(i!==null){var o=Vn();zr(i,t,1,o)}}),o1(t,1)}};Rd=function(t){if(t.tag===13){var e=Ci(t,134217728);if(e!==null){var n=Vn();zr(e,t,134217728,n)}o1(t,134217728)}};rm=function(t){if(t.tag===13){var e=ns(t),n=Ci(t,e);if(n!==null){var i=Vn();zr(n,t,e,i)}o1(t,e)}};im=function(){return lt};sm=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};lf=function(t,e,n){switch(e){case"input":if(ef(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=bc(i);if(!o)throw Error(ae(90));Lp(i),ef(i,o)}}}break;case"textarea":Fp(t,n);break;case"select":e=n.value,e!=null&&Uo(t,!!n.multiple,e,!1)}};Gp=t1;Xp=Zs;var t_={usingClientEntryPoint:!1,Events:[Dl,Do,bc,Wp,Hp,t1]},Pa={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n_={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yp(t),t===null?null:t.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||JE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Sc=du.inject(n_),ri=du}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t_;yr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l1(e))throw Error(ae(200));return ZE(t,e,null,n)};yr.createRoot=function(t,e){if(!l1(t))throw Error(ae(299));var n=!1,i="",o=S2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=s1(t,1,!1,null,null,n,!1,i,o),t[vi]=e.current,ul(t.nodeType===8?t.parentNode:t),new a1(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=Yp(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return Zs(t)};yr.hydrate=function(t,e,n){if(!Uc(e))throw Error(ae(200));return zc(null,t,e,!0,n)};yr.hydrateRoot=function(t,e,n){if(!l1(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=S2;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=T2(e,null,t,1,n??null,o,!1,l,f),t[vi]=e.current,ul(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Vc(e)};yr.render=function(t,e,n){if(!Uc(e))throw Error(ae(200));return zc(null,t,e,!1,n)};yr.unmountComponentAtNode=function(t){if(!Uc(t))throw Error(ae(40));return t._reactRootContainer?(Zs(function(){zc(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1};yr.unstable_batchedUpdates=t1;yr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Uc(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return zc(t,e,n,!1,i)};yr.version="18.3.1-next-f1338f8080-20240426";function R2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R2)}catch(t){console.error(t)}}R2(),Rp.exports=yr;var r_=Rp.exports,N2,Q0=r_;N2=Q0.createRoot,Q0.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xl.apply(this,arguments)}var qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qi||(qi={}));const $0="popstate";function i_(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:f,hash:m}=i.location;return zf("",{pathname:l,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:lc(o)}return o_(e,n,null,t)}function $t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function O2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s_(){return Math.random().toString(36).substr(2,8)}function Z0(t,e){return{usr:t.state,key:t.key,idx:e}}function zf(t,e,n,i){return n===void 0&&(n=null),xl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ha(e):e,{state:n,key:e&&e.key||i||s_()})}function lc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ha(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function o_(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,f=o.history,m=qi.Pop,y=null,x=v();x==null&&(x=0,f.replaceState(xl({},f.state,{idx:x}),""));function v(){return(f.state||{idx:null}).idx}function C(){m=qi.Pop;let $=v(),U=$==null?null:$-x;x=$,y&&y({action:m,location:G.location,delta:U})}function D($,U){m=qi.Push;let M=zf(G.location,$,U);x=v()+1;let L=Z0(M,x),Q=G.createHref(M);try{f.pushState(L,"",Q)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(Q)}l&&y&&y({action:m,location:G.location,delta:1})}function F($,U){m=qi.Replace;let M=zf(G.location,$,U);x=v();let L=Z0(M,x),Q=G.createHref(M);f.replaceState(L,"",Q),l&&y&&y({action:m,location:G.location,delta:0})}function X($){let U=o.location.origin!=="null"?o.location.origin:o.location.href,M=typeof $=="string"?$:lc($);return M=M.replace(/ $/,"%20"),$t(U,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,U)}let G={get action(){return m},get location(){return t(o,f)},listen($){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener($0,C),y=$,()=>{o.removeEventListener($0,C),y=null}},createHref($){return e(o,$)},createURL:X,encodeLocation($){let U=X($);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:D,replace:F,go($){return f.go($)}};return G}var J0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(J0||(J0={}));function a_(t,e,n){return n===void 0&&(n="/"),l_(t,e,n,!1)}function l_(t,e,n,i){let o=typeof e=="string"?ha(e):e,l=u1(o.pathname||"/",n);if(l==null)return null;let f=b2(t);u_(f);let m=null;for(let y=0;m==null&&y<f.length;++y){let x=E_(l);m=x_(f[y],x,i)}return m}function b2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,f,m)=>{let y={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};y.relativePath.startsWith("/")&&($t(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let x=is([i,y.relativePath]),v=n.concat(y);l.children&&l.children.length>0&&($t(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),b2(l.children,e,v,x)),!(l.path==null&&!l.index)&&e.push({path:x,score:m_(x,l.index),routesMeta:v})};return t.forEach((l,f)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))o(l,f);else for(let y of D2(l.path))o(l,f,y)}),e}function D2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let f=D2(i.join("/")),m=[];return m.push(...f.map(y=>y===""?l:[l,y].join("/"))),o&&m.push(...f),m.map(y=>t.startsWith("/")&&y===""?"/":y)}function u_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:y_(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const c_=/^:[\w-]+$/,h_=3,f_=2,d_=1,g_=10,p_=-2,eg=t=>t==="*";function m_(t,e){let n=t.split("/"),i=n.length;return n.some(eg)&&(i+=p_),e&&(i+=f_),n.filter(o=>!eg(o)).reduce((o,l)=>o+(c_.test(l)?h_:l===""?d_:g_),i)}function y_(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function x_(t,e,n){let{routesMeta:i}=t,o={},l="/",f=[];for(let m=0;m<i.length;++m){let y=i[m],x=m===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",C=tg({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},v),D=y.route;if(!C&&x&&n&&!i[i.length-1].route.index&&(C=tg({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},v)),!C)return null;Object.assign(o,C.params),f.push({params:o,pathname:is([l,C.pathname]),pathnameBase:C_(is([l,C.pathnameBase])),route:D}),C.pathnameBase!=="/"&&(l=is([l,C.pathnameBase]))}return f}function tg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=w_(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],f=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((x,v,C)=>{let{paramName:D,isOptional:F}=v;if(D==="*"){let G=m[C]||"";f=l.slice(0,l.length-G.length).replace(/(.)\/+$/,"$1")}const X=m[C];return F&&!X?x[D]=void 0:x[D]=(X||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:f,pattern:t}}function w_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),O2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,y)=>(i.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function E_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return O2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function u1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function __(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?ha(t):t;return{pathname:n?n.startsWith("/")?n:A_(n,e):e,search:I_(i),hash:T_(o)}}function A_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Vh(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function P2(t,e){let n=v_(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function k2(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=ha(t):(o=xl({},t),$t(!o.pathname||!o.pathname.includes("?"),Vh("?","pathname","search",o)),$t(!o.pathname||!o.pathname.includes("#"),Vh("#","pathname","hash",o)),$t(!o.search||!o.search.includes("#"),Vh("#","search","hash",o)));let l=t===""||o.pathname==="",f=l?"/":o.pathname,m;if(f==null)m=n;else{let C=e.length-1;if(!i&&f.startsWith("..")){let D=f.split("/");for(;D[0]==="..";)D.shift(),C-=1;o.pathname=D.join("/")}m=C>=0?e[C]:"/"}let y=__(o,m),x=f&&f!=="/"&&f.endsWith("/"),v=(l||f===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(x||v)&&(y.pathname+="/"),y}const is=t=>t.join("/").replace(/\/\/+/g,"/"),C_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),I_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function S_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const M2=["post","put","patch","delete"];new Set(M2);const R_=["get",...M2];new Set(R_);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wl.apply(this,arguments)}const c1=ge.createContext(null),N_=ge.createContext(null),no=ge.createContext(null),jc=ge.createContext(null),ro=ge.createContext({outlet:null,matches:[],isDataRoute:!1}),L2=ge.createContext(null);function O_(t,e){let{relative:n}=e===void 0?{}:e;kl()||$t(!1);let{basename:i,navigator:o}=ge.useContext(no),{hash:l,pathname:f,search:m}=F2(t,{relative:n}),y=f;return i!=="/"&&(y=f==="/"?i:is([i,f])),o.createHref({pathname:y,search:m,hash:l})}function kl(){return ge.useContext(jc)!=null}function Wc(){return kl()||$t(!1),ge.useContext(jc).location}function B2(t){ge.useContext(no).static||ge.useLayoutEffect(t)}function b_(){let{isDataRoute:t}=ge.useContext(ro);return t?H_():D_()}function D_(){kl()||$t(!1);let t=ge.useContext(c1),{basename:e,future:n,navigator:i}=ge.useContext(no),{matches:o}=ge.useContext(ro),{pathname:l}=Wc(),f=JSON.stringify(P2(o,n.v7_relativeSplatPath)),m=ge.useRef(!1);return B2(()=>{m.current=!0}),ge.useCallback(function(x,v){if(v===void 0&&(v={}),!m.current)return;if(typeof x=="number"){i.go(x);return}let C=k2(x,JSON.parse(f),l,v.relative==="path");t==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:is([e,C.pathname])),(v.replace?i.replace:i.push)(C,v.state,v)},[e,i,f,l,t])}function F2(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=ge.useContext(no),{matches:o}=ge.useContext(ro),{pathname:l}=Wc(),f=JSON.stringify(P2(o,i.v7_relativeSplatPath));return ge.useMemo(()=>k2(t,JSON.parse(f),l,n==="path"),[t,f,l,n])}function P_(t,e){return k_(t,e)}function k_(t,e,n,i){kl()||$t(!1);let{navigator:o}=ge.useContext(no),{matches:l}=ge.useContext(ro),f=l[l.length-1],m=f?f.params:{};f&&f.pathname;let y=f?f.pathnameBase:"/";f&&f.route;let x=Wc(),v;if(e){var C;let $=typeof e=="string"?ha(e):e;y==="/"||(C=$.pathname)!=null&&C.startsWith(y)||$t(!1),v=$}else v=x;let D=v.pathname||"/",F=D;if(y!=="/"){let $=y.replace(/^\//,"").split("/");F="/"+D.replace(/^\//,"").split("/").slice($.length).join("/")}let X=a_(t,{pathname:F}),G=V_(X&&X.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:is([y,o.encodeLocation?o.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?y:is([y,o.encodeLocation?o.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,n,i);return e&&G?ge.createElement(jc.Provider,{value:{location:wl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:qi.Pop}},G):G}function M_(){let t=W_(),e=S_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),n?ge.createElement("pre",{style:o},n):null,null)}const L_=ge.createElement(M_,null);class B_ extends ge.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?ge.createElement(ro.Provider,{value:this.props.routeContext},ge.createElement(L2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F_(t){let{routeContext:e,match:n,children:i}=t,o=ge.useContext(c1);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),ge.createElement(ro.Provider,{value:e},i)}function V_(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,m=(o=n)==null?void 0:o.errors;if(m!=null){let v=f.findIndex(C=>C.route.id&&(m==null?void 0:m[C.route.id])!==void 0);v>=0||$t(!1),f=f.slice(0,Math.min(f.length,v+1))}let y=!1,x=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<f.length;v++){let C=f[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(x=v),C.route.id){let{loaderData:D,errors:F}=n,X=C.route.loader&&D[C.route.id]===void 0&&(!F||F[C.route.id]===void 0);if(C.route.lazy||X){y=!0,x>=0?f=f.slice(0,x+1):f=[f[0]];break}}}return f.reduceRight((v,C,D)=>{let F,X=!1,G=null,$=null;n&&(F=m&&C.route.id?m[C.route.id]:void 0,G=C.route.errorElement||L_,y&&(x<0&&D===0?(X=!0,$=null):x===D&&(X=!0,$=C.route.hydrateFallbackElement||null)));let U=e.concat(f.slice(0,D+1)),M=()=>{let L;return F?L=G:X?L=$:C.route.Component?L=ge.createElement(C.route.Component,null):C.route.element?L=C.route.element:L=v,ge.createElement(F_,{match:C,routeContext:{outlet:v,matches:U,isDataRoute:n!=null},children:L})};return n&&(C.route.ErrorBoundary||C.route.errorElement||D===0)?ge.createElement(B_,{location:n.location,revalidation:n.revalidation,component:G,error:F,children:M(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):M()},null)}var V2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(V2||{}),uc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uc||{});function U_(t){let e=ge.useContext(c1);return e||$t(!1),e}function z_(t){let e=ge.useContext(N_);return e||$t(!1),e}function j_(t){let e=ge.useContext(ro);return e||$t(!1),e}function U2(t){let e=j_(),n=e.matches[e.matches.length-1];return n.route.id||$t(!1),n.route.id}function W_(){var t;let e=ge.useContext(L2),n=z_(uc.UseRouteError),i=U2(uc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function H_(){let{router:t}=U_(V2.UseNavigateStable),e=U2(uc.UseNavigateStable),n=ge.useRef(!1);return B2(()=>{n.current=!0}),ge.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,wl({fromRouteId:e},l)))},[t,e])}function Fa(t){$t(!1)}function G_(t){let{basename:e="/",children:n=null,location:i,navigationType:o=qi.Pop,navigator:l,static:f=!1,future:m}=t;kl()&&$t(!1);let y=e.replace(/^\/*/,"/"),x=ge.useMemo(()=>({basename:y,navigator:l,static:f,future:wl({v7_relativeSplatPath:!1},m)}),[y,m,l,f]);typeof i=="string"&&(i=ha(i));let{pathname:v="/",search:C="",hash:D="",state:F=null,key:X="default"}=i,G=ge.useMemo(()=>{let $=u1(v,y);return $==null?null:{location:{pathname:$,search:C,hash:D,state:F,key:X},navigationType:o}},[y,v,C,D,F,X,o]);return G==null?null:ge.createElement(no.Provider,{value:x},ge.createElement(jc.Provider,{children:n,value:G}))}function X_(t){let{children:e,location:n}=t;return P_(jf(e),n)}new Promise(()=>{});function jf(t,e){e===void 0&&(e=[]);let n=[];return ge.Children.forEach(t,(i,o)=>{if(!ge.isValidElement(i))return;let l=[...e,o];if(i.type===ge.Fragment){n.push.apply(n,jf(i.props.children,l));return}i.type!==Fa&&$t(!1),!i.props.index||!i.props.children||$t(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=jf(i.props.children,l)),n.push(f)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wf.apply(this,arguments)}function K_(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function q_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Y_(t,e){return t.button===0&&(!e||e==="_self")&&!q_(t)}const Q_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$_="6";try{window.__reactRouterVersion=$_}catch{}const Z_="startTransition",ng=Xx[Z_];function J_(t){let{basename:e,children:n,future:i,window:o}=t,l=ge.useRef();l.current==null&&(l.current=i_({window:o,v5Compat:!0}));let f=l.current,[m,y]=ge.useState({action:f.action,location:f.location}),{v7_startTransition:x}=i||{},v=ge.useCallback(C=>{x&&ng?ng(()=>y(C)):y(C)},[y,x]);return ge.useLayoutEffect(()=>f.listen(v),[f,v]),ge.createElement(G_,{basename:e,children:n,location:m.location,navigationType:m.action,navigator:f,future:i})}const eA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gu=ge.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:f,state:m,target:y,to:x,preventScrollReset:v,viewTransition:C}=e,D=K_(e,Q_),{basename:F}=ge.useContext(no),X,G=!1;if(typeof x=="string"&&tA.test(x)&&(X=x,eA))try{let L=new URL(window.location.href),Q=x.startsWith("//")?new URL(L.protocol+x):new URL(x),ue=u1(Q.pathname,F);Q.origin===L.origin&&ue!=null?x=ue+Q.search+Q.hash:G=!0}catch{}let $=O_(x,{relative:o}),U=nA(x,{replace:f,state:m,target:y,preventScrollReset:v,relative:o,viewTransition:C});function M(L){i&&i(L),L.defaultPrevented||U(L)}return ge.createElement("a",Wf({},D,{href:X||$,onClick:G||l?i:M,ref:n,target:y}))});var rg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rg||(rg={}));var ig;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ig||(ig={}));function nA(t,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:f,viewTransition:m}=e===void 0?{}:e,y=b_(),x=Wc(),v=F2(t,{relative:f});return ge.useCallback(C=>{if(Y_(C,n)){C.preventDefault();let D=i!==void 0?i:lc(x)===lc(v);y(t,{replace:D,state:o,preventScrollReset:l,relative:f,viewTransition:m})}},[x,y,v,i,o,n,t,l,f,m])}const rA="/assets/imagem1-DPpgkpNR.png";function iA(){return xe.jsxs("div",{className:"home-container",children:[xe.jsx("h1",{className:"controllween-title",children:"ControllWeen"}),xe.jsx("div",{className:"floating-images",children:xe.jsx("img",{src:rA,alt:"decoration1",className:"float"})})]})}var sg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},sA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],f=t[n++],m=t[n++],y=((o&7)<<18|(l&63)<<12|(f&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=t[n++],f=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|f&63)}}return e.join("")},j2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],f=o+1<t.length,m=f?t[o+1]:0,y=o+2<t.length,x=y?t[o+2]:0,v=l>>2,C=(l&3)<<4|m>>4;let D=(m&15)<<2|x>>6,F=x&63;y||(F=64,f||(D=64)),i.push(n[v],n[C],n[D],n[F])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],m=o<t.length?n[t.charAt(o)]:0;++o;const x=o<t.length?n[t.charAt(o)]:64;++o;const C=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||m==null||x==null||C==null)throw new oA;const D=l<<2|m>>4;if(i.push(D),x!==64){const F=m<<4&240|x>>2;if(i.push(F),C!==64){const X=x<<6&192|C;i.push(X)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aA=function(t){const e=z2(t);return j2.encodeByteArray(e,!0)},cc=function(t){return aA(t).replace(/\./g,"")},lA=function(t){try{return j2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof sg>"u")return;const t=sg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lA(t[1]);return e&&JSON.parse(e)},h1=()=>{try{return cA()||hA()||fA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dA=t=>{var e,n;return(n=(e=h1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},W2=t=>{const e=dA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},H2=()=>{var t;return(t=h1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cc(JSON.stringify(n)),cc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yA(){var t;const e=(t=h1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xA(){return!yA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function EA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="FirebaseError";class io extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=_A,Object.setPrototypeOf(this,io.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G2.prototype.create)}}class G2{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],f=l?AA(l,i):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new io(o,m,i)}}function AA(t,e){return t.replace(vA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const vA=/\{\$([^}]+)}/g;function Hf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],f=e[o];if(og(l)&&og(f)){if(!Hf(l,f))return!1}else if(l!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function og(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){return t&&t._delegate?t._delegate:t}class ea{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new gA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TA(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&f.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const f=this.instances.get(o);return f&&e(f,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:IA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(t){return t===Us?void 0:t}function TA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const RA={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},NA=Ye.INFO,OA={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},bA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=OA[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X2{constructor(e){this.name=e,this._logLevel=NA,this._logHandler=bA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const DA=(t,e)=>e.some(n=>t instanceof n);let ag,lg;function PA(){return ag||(ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kA(){return lg||(lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K2=new WeakMap,Gf=new WeakMap,q2=new WeakMap,Uh=new WeakMap,f1=new WeakMap;function MA(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",f)},l=()=>{n(ss(t.result)),o()},f=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&K2.set(n,t)}).catch(()=>{}),f1.set(e,t),e}function LA(t){if(Gf.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",f),t.removeEventListener("abort",f)},l=()=>{n(),o()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",f),t.addEventListener("abort",f)});Gf.set(t,e)}let Xf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||q2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BA(t){Xf=t(Xf)}function FA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(zh(this),e,...n);return q2.set(i,e.sort?e.sort():[e]),ss(i)}:kA().includes(t)?function(...e){return t.apply(zh(this),e),ss(K2.get(this))}:function(...e){return ss(t.apply(zh(this),e))}}function VA(t){return typeof t=="function"?FA(t):(t instanceof IDBTransaction&&LA(t),DA(t,PA())?new Proxy(t,Xf):t)}function ss(t){if(t instanceof IDBRequest)return MA(t);if(Uh.has(t))return Uh.get(t);const e=VA(t);return e!==t&&(Uh.set(t,e),f1.set(e,t)),e}const zh=t=>f1.get(t);function UA(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const f=indexedDB.open(t,e),m=ss(f);return i&&f.addEventListener("upgradeneeded",y=>{i(ss(f.result),y.oldVersion,y.newVersion,ss(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),m}const zA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],jh=new Map;function ug(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=jA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||zA.includes(n)))return;const l=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let x=y.store;return i&&(x=x.index(m.shift())),(await Promise.all([x[n](...m),o&&y.done]))[0]};return jh.set(e,l),l}BA(t=>({...t,get:(e,n,i)=>ug(e,n)||t.get(e,n,i),has:(e,n)=>!!ug(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function HA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kf="@firebase/app",cg="0.10.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new X2("@firebase/app"),GA="@firebase/app-compat",XA="@firebase/analytics-compat",KA="@firebase/analytics",qA="@firebase/app-check-compat",YA="@firebase/app-check",QA="@firebase/auth",$A="@firebase/auth-compat",ZA="@firebase/database",JA="@firebase/data-connect",ev="@firebase/database-compat",tv="@firebase/functions",nv="@firebase/functions-compat",rv="@firebase/installations",iv="@firebase/installations-compat",sv="@firebase/messaging",ov="@firebase/messaging-compat",av="@firebase/performance",lv="@firebase/performance-compat",uv="@firebase/remote-config",cv="@firebase/remote-config-compat",hv="@firebase/storage",fv="@firebase/storage-compat",dv="@firebase/firestore",gv="@firebase/vertexai",pv="@firebase/firestore-compat",mv="firebase",yv="11.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",xv={[Kf]:"fire-core",[GA]:"fire-core-compat",[KA]:"fire-analytics",[XA]:"fire-analytics-compat",[YA]:"fire-app-check",[qA]:"fire-app-check-compat",[QA]:"fire-auth",[$A]:"fire-auth-compat",[ZA]:"fire-rtdb",[JA]:"fire-data-connect",[ev]:"fire-rtdb-compat",[tv]:"fire-fn",[nv]:"fire-fn-compat",[rv]:"fire-iid",[iv]:"fire-iid-compat",[sv]:"fire-fcm",[ov]:"fire-fcm-compat",[av]:"fire-perf",[lv]:"fire-perf-compat",[uv]:"fire-rc",[cv]:"fire-rc-compat",[hv]:"fire-gcs",[fv]:"fire-gcs-compat",[dv]:"fire-fst",[pv]:"fire-fst-compat",[gv]:"fire-vertex","fire-js":"fire-js",[mv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,wv=new Map,Yf=new Map;function hg(t,e){try{t.container.addComponent(e)}catch(n){Ti.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function El(t){const e=t.name;if(Yf.has(e))return Ti.debug(`There were multiple attempts to register component ${e}.`),!1;Yf.set(e,t);for(const n of hc.values())hg(n,t);for(const n of wv.values())hg(n,t);return!0}function Y2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new G2("app","Firebase",Ev);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=yv;function Q2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:qf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw os.create("bad-app-name",{appName:String(o)});if(n||(n=H2()),!n)throw os.create("no-options");const l=hc.get(o);if(l){if(Hf(n,l.options)&&Hf(i,l.config))return l;throw os.create("duplicate-app",{appName:o})}const f=new SA(o);for(const y of Yf.values())f.addComponent(y);const m=new _v(n,i,f);return hc.set(o,m),m}function $2(t=qf){const e=hc.get(t);if(!e&&t===qf&&H2())return Q2();if(!e)throw os.create("no-app",{appName:t});return e}function as(t,e,n){var i;let o=(i=xv[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),f=e.match(/\s|\//);if(l||f){const m=[`Unable to register library "${o}" with version "${e}":`];l&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ti.warn(m.join(" "));return}El(new ea(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="firebase-heartbeat-database",Cv=1,_l="firebase-heartbeat-store";let Wh=null;function Z2(){return Wh||(Wh=UA(vv,Cv,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_l)}catch(n){console.warn(n)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),Wh}async function Iv(t){try{const n=(await Z2()).transaction(_l),i=await n.objectStore(_l).get(J2(t));return await n.done,i}catch(e){if(e instanceof io)Ti.warn(e.message);else{const n=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ti.warn(n.message)}}}async function fg(t,e){try{const i=(await Z2()).transaction(_l,"readwrite");await i.objectStore(_l).put(e,J2(t)),await i.done}catch(n){if(n instanceof io)Ti.warn(n.message);else{const i=os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ti.warn(i.message)}}}function J2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=1024,Sv=30*24*60*60*1e3;class Rv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ov(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=dg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(f=>f.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=Sv}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ti.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dg(),{heartbeatsToSend:i,unsentEntries:o}=Nv(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Ti.warn(n),""}}}function dg(){return new Date().toISOString().substring(0,10)}function Nv(t,e=Tv){const n=[];let i=t.slice();for(const o of t){const l=n.find(f=>f.agent===o.agent);if(l){if(l.dates.push(o.date),gg(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),gg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Ov{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?EA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Iv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function gg(t){return cc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){El(new ea("platform-logger",e=>new WA(e),"PRIVATE")),El(new ea("heartbeat",e=>new Rv(e),"PRIVATE")),as(Kf,cg,t),as(Kf,cg,"esm2017"),as("fire-js","")}bv("");var pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,ey;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,O){function N(){}N.prototype=O.prototype,b.D=O.prototype,b.prototype=new N,b.prototype.constructor=b,b.C=function(V,H,j){for(var B=Array(arguments.length-2),et=2;et<arguments.length;et++)B[et-2]=arguments[et];return O.prototype[H].apply(V,B)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,O,N){N||(N=0);var V=Array(16);if(typeof O=="string")for(var H=0;16>H;++H)V[H]=O.charCodeAt(N++)|O.charCodeAt(N++)<<8|O.charCodeAt(N++)<<16|O.charCodeAt(N++)<<24;else for(H=0;16>H;++H)V[H]=O[N++]|O[N++]<<8|O[N++]<<16|O[N++]<<24;O=b.g[0],N=b.g[1],H=b.g[2];var j=b.g[3],B=O+(j^N&(H^j))+V[0]+3614090360&4294967295;O=N+(B<<7&4294967295|B>>>25),B=j+(H^O&(N^H))+V[1]+3905402710&4294967295,j=O+(B<<12&4294967295|B>>>20),B=H+(N^j&(O^N))+V[2]+606105819&4294967295,H=j+(B<<17&4294967295|B>>>15),B=N+(O^H&(j^O))+V[3]+3250441966&4294967295,N=H+(B<<22&4294967295|B>>>10),B=O+(j^N&(H^j))+V[4]+4118548399&4294967295,O=N+(B<<7&4294967295|B>>>25),B=j+(H^O&(N^H))+V[5]+1200080426&4294967295,j=O+(B<<12&4294967295|B>>>20),B=H+(N^j&(O^N))+V[6]+2821735955&4294967295,H=j+(B<<17&4294967295|B>>>15),B=N+(O^H&(j^O))+V[7]+4249261313&4294967295,N=H+(B<<22&4294967295|B>>>10),B=O+(j^N&(H^j))+V[8]+1770035416&4294967295,O=N+(B<<7&4294967295|B>>>25),B=j+(H^O&(N^H))+V[9]+2336552879&4294967295,j=O+(B<<12&4294967295|B>>>20),B=H+(N^j&(O^N))+V[10]+4294925233&4294967295,H=j+(B<<17&4294967295|B>>>15),B=N+(O^H&(j^O))+V[11]+2304563134&4294967295,N=H+(B<<22&4294967295|B>>>10),B=O+(j^N&(H^j))+V[12]+1804603682&4294967295,O=N+(B<<7&4294967295|B>>>25),B=j+(H^O&(N^H))+V[13]+4254626195&4294967295,j=O+(B<<12&4294967295|B>>>20),B=H+(N^j&(O^N))+V[14]+2792965006&4294967295,H=j+(B<<17&4294967295|B>>>15),B=N+(O^H&(j^O))+V[15]+1236535329&4294967295,N=H+(B<<22&4294967295|B>>>10),B=O+(H^j&(N^H))+V[1]+4129170786&4294967295,O=N+(B<<5&4294967295|B>>>27),B=j+(N^H&(O^N))+V[6]+3225465664&4294967295,j=O+(B<<9&4294967295|B>>>23),B=H+(O^N&(j^O))+V[11]+643717713&4294967295,H=j+(B<<14&4294967295|B>>>18),B=N+(j^O&(H^j))+V[0]+3921069994&4294967295,N=H+(B<<20&4294967295|B>>>12),B=O+(H^j&(N^H))+V[5]+3593408605&4294967295,O=N+(B<<5&4294967295|B>>>27),B=j+(N^H&(O^N))+V[10]+38016083&4294967295,j=O+(B<<9&4294967295|B>>>23),B=H+(O^N&(j^O))+V[15]+3634488961&4294967295,H=j+(B<<14&4294967295|B>>>18),B=N+(j^O&(H^j))+V[4]+3889429448&4294967295,N=H+(B<<20&4294967295|B>>>12),B=O+(H^j&(N^H))+V[9]+568446438&4294967295,O=N+(B<<5&4294967295|B>>>27),B=j+(N^H&(O^N))+V[14]+3275163606&4294967295,j=O+(B<<9&4294967295|B>>>23),B=H+(O^N&(j^O))+V[3]+4107603335&4294967295,H=j+(B<<14&4294967295|B>>>18),B=N+(j^O&(H^j))+V[8]+1163531501&4294967295,N=H+(B<<20&4294967295|B>>>12),B=O+(H^j&(N^H))+V[13]+2850285829&4294967295,O=N+(B<<5&4294967295|B>>>27),B=j+(N^H&(O^N))+V[2]+4243563512&4294967295,j=O+(B<<9&4294967295|B>>>23),B=H+(O^N&(j^O))+V[7]+1735328473&4294967295,H=j+(B<<14&4294967295|B>>>18),B=N+(j^O&(H^j))+V[12]+2368359562&4294967295,N=H+(B<<20&4294967295|B>>>12),B=O+(N^H^j)+V[5]+4294588738&4294967295,O=N+(B<<4&4294967295|B>>>28),B=j+(O^N^H)+V[8]+2272392833&4294967295,j=O+(B<<11&4294967295|B>>>21),B=H+(j^O^N)+V[11]+1839030562&4294967295,H=j+(B<<16&4294967295|B>>>16),B=N+(H^j^O)+V[14]+4259657740&4294967295,N=H+(B<<23&4294967295|B>>>9),B=O+(N^H^j)+V[1]+2763975236&4294967295,O=N+(B<<4&4294967295|B>>>28),B=j+(O^N^H)+V[4]+1272893353&4294967295,j=O+(B<<11&4294967295|B>>>21),B=H+(j^O^N)+V[7]+4139469664&4294967295,H=j+(B<<16&4294967295|B>>>16),B=N+(H^j^O)+V[10]+3200236656&4294967295,N=H+(B<<23&4294967295|B>>>9),B=O+(N^H^j)+V[13]+681279174&4294967295,O=N+(B<<4&4294967295|B>>>28),B=j+(O^N^H)+V[0]+3936430074&4294967295,j=O+(B<<11&4294967295|B>>>21),B=H+(j^O^N)+V[3]+3572445317&4294967295,H=j+(B<<16&4294967295|B>>>16),B=N+(H^j^O)+V[6]+76029189&4294967295,N=H+(B<<23&4294967295|B>>>9),B=O+(N^H^j)+V[9]+3654602809&4294967295,O=N+(B<<4&4294967295|B>>>28),B=j+(O^N^H)+V[12]+3873151461&4294967295,j=O+(B<<11&4294967295|B>>>21),B=H+(j^O^N)+V[15]+530742520&4294967295,H=j+(B<<16&4294967295|B>>>16),B=N+(H^j^O)+V[2]+3299628645&4294967295,N=H+(B<<23&4294967295|B>>>9),B=O+(H^(N|~j))+V[0]+4096336452&4294967295,O=N+(B<<6&4294967295|B>>>26),B=j+(N^(O|~H))+V[7]+1126891415&4294967295,j=O+(B<<10&4294967295|B>>>22),B=H+(O^(j|~N))+V[14]+2878612391&4294967295,H=j+(B<<15&4294967295|B>>>17),B=N+(j^(H|~O))+V[5]+4237533241&4294967295,N=H+(B<<21&4294967295|B>>>11),B=O+(H^(N|~j))+V[12]+1700485571&4294967295,O=N+(B<<6&4294967295|B>>>26),B=j+(N^(O|~H))+V[3]+2399980690&4294967295,j=O+(B<<10&4294967295|B>>>22),B=H+(O^(j|~N))+V[10]+4293915773&4294967295,H=j+(B<<15&4294967295|B>>>17),B=N+(j^(H|~O))+V[1]+2240044497&4294967295,N=H+(B<<21&4294967295|B>>>11),B=O+(H^(N|~j))+V[8]+1873313359&4294967295,O=N+(B<<6&4294967295|B>>>26),B=j+(N^(O|~H))+V[15]+4264355552&4294967295,j=O+(B<<10&4294967295|B>>>22),B=H+(O^(j|~N))+V[6]+2734768916&4294967295,H=j+(B<<15&4294967295|B>>>17),B=N+(j^(H|~O))+V[13]+1309151649&4294967295,N=H+(B<<21&4294967295|B>>>11),B=O+(H^(N|~j))+V[4]+4149444226&4294967295,O=N+(B<<6&4294967295|B>>>26),B=j+(N^(O|~H))+V[11]+3174756917&4294967295,j=O+(B<<10&4294967295|B>>>22),B=H+(O^(j|~N))+V[2]+718787259&4294967295,H=j+(B<<15&4294967295|B>>>17),B=N+(j^(H|~O))+V[9]+3951481745&4294967295,b.g[0]=b.g[0]+O&4294967295,b.g[1]=b.g[1]+(H+(B<<21&4294967295|B>>>11))&4294967295,b.g[2]=b.g[2]+H&4294967295,b.g[3]=b.g[3]+j&4294967295}i.prototype.u=function(b,O){O===void 0&&(O=b.length);for(var N=O-this.blockSize,V=this.B,H=this.h,j=0;j<O;){if(H==0)for(;j<=N;)o(this,b,j),j+=this.blockSize;if(typeof b=="string"){for(;j<O;)if(V[H++]=b.charCodeAt(j++),H==this.blockSize){o(this,V),H=0;break}}else for(;j<O;)if(V[H++]=b[j++],H==this.blockSize){o(this,V),H=0;break}}this.h=H,this.o+=O},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var O=1;O<b.length-8;++O)b[O]=0;var N=8*this.o;for(O=b.length-8;O<b.length;++O)b[O]=N&255,N/=256;for(this.u(b),b=Array(16),O=N=0;4>O;++O)for(var V=0;32>V;V+=8)b[N++]=this.g[O]>>>V&255;return b};function l(b,O){var N=m;return Object.prototype.hasOwnProperty.call(N,b)?N[b]:N[b]=O(b)}function f(b,O){this.h=O;for(var N=[],V=!0,H=b.length-1;0<=H;H--){var j=b[H]|0;V&&j==O||(N[H]=j,V=!1)}this.g=N}var m={};function y(b){return-128<=b&&128>b?l(b,function(O){return new f([O|0],0>O?-1:0)}):new f([b|0],0>b?-1:0)}function x(b){if(isNaN(b)||!isFinite(b))return C;if(0>b)return $(x(-b));for(var O=[],N=1,V=0;b>=N;V++)O[V]=b/N|0,N*=4294967296;return new f(O,0)}function v(b,O){if(b.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(b.charAt(0)=="-")return $(v(b.substring(1),O));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=x(Math.pow(O,8)),V=C,H=0;H<b.length;H+=8){var j=Math.min(8,b.length-H),B=parseInt(b.substring(H,H+j),O);8>j?(j=x(Math.pow(O,j)),V=V.j(j).add(x(B))):(V=V.j(N),V=V.add(x(B)))}return V}var C=y(0),D=y(1),F=y(16777216);t=f.prototype,t.m=function(){if(G(this))return-$(this).m();for(var b=0,O=1,N=0;N<this.g.length;N++){var V=this.i(N);b+=(0<=V?V:4294967296+V)*O,O*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(X(this))return"0";if(G(this))return"-"+$(this).toString(b);for(var O=x(Math.pow(b,6)),N=this,V="";;){var H=Q(N,O).g;N=U(N,H.j(O));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(b);if(N=H,X(N))return j+V;for(;6>j.length;)j="0"+j;V=j+V}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function X(b){if(b.h!=0)return!1;for(var O=0;O<b.g.length;O++)if(b.g[O]!=0)return!1;return!0}function G(b){return b.h==-1}t.l=function(b){return b=U(this,b),G(b)?-1:X(b)?0:1};function $(b){for(var O=b.g.length,N=[],V=0;V<O;V++)N[V]=~b.g[V];return new f(N,~b.h).add(D)}t.abs=function(){return G(this)?$(this):this},t.add=function(b){for(var O=Math.max(this.g.length,b.g.length),N=[],V=0,H=0;H<=O;H++){var j=V+(this.i(H)&65535)+(b.i(H)&65535),B=(j>>>16)+(this.i(H)>>>16)+(b.i(H)>>>16);V=B>>>16,j&=65535,B&=65535,N[H]=B<<16|j}return new f(N,N[N.length-1]&-2147483648?-1:0)};function U(b,O){return b.add($(O))}t.j=function(b){if(X(this)||X(b))return C;if(G(this))return G(b)?$(this).j($(b)):$($(this).j(b));if(G(b))return $(this.j($(b)));if(0>this.l(F)&&0>b.l(F))return x(this.m()*b.m());for(var O=this.g.length+b.g.length,N=[],V=0;V<2*O;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var H=0;H<b.g.length;H++){var j=this.i(V)>>>16,B=this.i(V)&65535,et=b.i(H)>>>16,te=b.i(H)&65535;N[2*V+2*H]+=B*te,M(N,2*V+2*H),N[2*V+2*H+1]+=j*te,M(N,2*V+2*H+1),N[2*V+2*H+1]+=B*et,M(N,2*V+2*H+1),N[2*V+2*H+2]+=j*et,M(N,2*V+2*H+2)}for(V=0;V<O;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=O;V<2*O;V++)N[V]=0;return new f(N,0)};function M(b,O){for(;(b[O]&65535)!=b[O];)b[O+1]+=b[O]>>>16,b[O]&=65535,O++}function L(b,O){this.g=b,this.h=O}function Q(b,O){if(X(O))throw Error("division by zero");if(X(b))return new L(C,C);if(G(b))return O=Q($(b),O),new L($(O.g),$(O.h));if(G(O))return O=Q(b,$(O)),new L($(O.g),O.h);if(30<b.g.length){if(G(b)||G(O))throw Error("slowDivide_ only works with positive integers.");for(var N=D,V=O;0>=V.l(b);)N=ue(N),V=ue(V);var H=ie(N,1),j=ie(V,1);for(V=ie(V,2),N=ie(N,2);!X(V);){var B=j.add(V);0>=B.l(b)&&(H=H.add(N),j=B),V=ie(V,1),N=ie(N,1)}return O=U(b,H.j(O)),new L(H,O)}for(H=C;0<=b.l(O);){for(N=Math.max(1,Math.floor(b.m()/O.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),j=x(N),B=j.j(O);G(B)||0<B.l(b);)N-=V,j=x(N),B=j.j(O);X(j)&&(j=D),H=H.add(j),b=U(b,B)}return new L(H,b)}t.A=function(b){return Q(this,b).h},t.and=function(b){for(var O=Math.max(this.g.length,b.g.length),N=[],V=0;V<O;V++)N[V]=this.i(V)&b.i(V);return new f(N,this.h&b.h)},t.or=function(b){for(var O=Math.max(this.g.length,b.g.length),N=[],V=0;V<O;V++)N[V]=this.i(V)|b.i(V);return new f(N,this.h|b.h)},t.xor=function(b){for(var O=Math.max(this.g.length,b.g.length),N=[],V=0;V<O;V++)N[V]=this.i(V)^b.i(V);return new f(N,this.h^b.h)};function ue(b){for(var O=b.g.length+1,N=[],V=0;V<O;V++)N[V]=b.i(V)<<1|b.i(V-1)>>>31;return new f(N,b.h)}function ie(b,O){var N=O>>5;O%=32;for(var V=b.g.length-N,H=[],j=0;j<V;j++)H[j]=0<O?b.i(j+N)>>>O|b.i(j+N+1)<<32-O:b.i(j+N);return new f(H,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ey=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=x,f.fromString=v,Ks=f}).apply(typeof pg<"u"?pg:typeof self<"u"?self:typeof window<"u"?window:{});var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ty,Va,ny,Du,Qf,ry,iy,sy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,E,A){return g==Array.prototype||g==Object.prototype||(g[E]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof pu=="object"&&pu];for(var E=0;E<g.length;++E){var A=g[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function o(g,E){if(E)e:{var A=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var K=g[R];if(!(K in A))break e;A=A[K]}g=g[g.length-1],R=A[g],E=E(R),E!=R&&E!=null&&e(A,g,{configurable:!0,writable:!0,value:E})}}function l(g,E){g instanceof String&&(g+="");var A=0,R=!1,K={next:function(){if(!R&&A<g.length){var J=A++;return{value:E(J,g[J]),done:!1}}return R=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}o("Array.prototype.values",function(g){return g||function(){return l(this,function(E,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(g){var E=typeof g;return E=E!="object"?E:g?Array.isArray(g)?"array":E:"null",E=="array"||E=="object"&&typeof g.length=="number"}function x(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function v(g,E,A){return g.call.apply(g.bind,arguments)}function C(g,E,A){if(!g)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,R),g.apply(E,K)}}return function(){return g.apply(E,arguments)}}function D(g,E,A){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:C,D.apply(null,arguments)}function F(g,E){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function X(g,E){function A(){}A.prototype=E.prototype,g.aa=E.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(R,K,J){for(var he=Array(arguments.length-2),at=2;at<arguments.length;at++)he[at-2]=arguments[at];return E.prototype[K].apply(R,he)}}function G(g){const E=g.length;if(0<E){const A=Array(E);for(let R=0;R<E;R++)A[R]=g[R];return A}return[]}function $(g,E){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(y(R)){const K=g.length||0,J=R.length||0;g.length=K+J;for(let he=0;he<J;he++)g[K+he]=R[he]}else g.push(R)}}class U{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function M(g){return/^[\s\xa0]*$/.test(g)}function L(){var g=m.navigator;return g&&(g=g.userAgent)?g:""}function Q(g){return Q[" "](g),g}Q[" "]=function(){};var ue=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function ie(g,E,A){for(const R in g)E.call(A,g[R],R,g)}function b(g,E){for(const A in g)E.call(void 0,g[A],A,g)}function O(g){const E={};for(const A in g)E[A]=g[A];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,E){let A,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(A in R)g[A]=R[A];for(let J=0;J<N.length;J++)A=N[J],Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}}function H(g){var E=1;g=g.split(":");const A=[];for(;0<E&&g.length;)A.push(g.shift()),E--;return g.length&&A.push(g.join(":")),A}function j(g){m.setTimeout(()=>{throw g},0)}function B(){var g=Ce;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class et{constructor(){this.h=this.g=null}add(E,A){const R=te.get();R.set(E,A),this.h?this.h.next=R:this.g=R,this.h=R}}var te=new U(()=>new It,g=>g.reset());class It{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,pe=!1,Ce=new et,Oe=()=>{const g=m.Promise.resolve(void 0);Ne=()=>{g.then(gt)}};var gt=()=>{for(var g;g=B();){try{g.h.call(g.g)}catch(A){j(A)}var E=te;E.j(g),100>E.h&&(E.h++,g.next=E.g,E.g=g)}pe=!1};function Le(){this.s=this.s,this.C=this.C}Le.prototype.s=!1,Le.prototype.ma=function(){this.s||(this.s=!0,this.N())},Le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};m.addEventListener("test",A,E),m.removeEventListener("test",A,E)}catch{}return g}();function tr(g,E){if(st.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget){if(ue){e:{try{Q(E.nodeName);var K=!0;break e}catch{}K=!1}K||(E=null)}}else A=="mouseover"?E=g.fromElement:A=="mouseout"&&(E=g.toElement);this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ae[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&tr.aa.h.call(this)}}X(tr,st);var Ae={2:"touch",3:"pen",4:"mouse"};tr.prototype.h=function(){tr.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var nr="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function As(g,E,A,R,K){this.listener=g,this.proxy=null,this.src=E,this.type=A,this.capture=!!R,this.ha=K,this.key=++Kt,this.da=this.fa=!1}function Hr(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Zt(g){this.src=g,this.g={},this.h=0}Zt.prototype.add=function(g,E,A,R,K){var J=g.toString();g=this.g[J],g||(g=this.g[J]=[],this.h++);var he=Ge(g,E,R,K);return-1<he?(E=g[he],A||(E.fa=!1)):(E=new As(E,this.src,J,!!R,K),E.fa=A,g.push(E)),E};function Oi(g,E){var A=E.type;if(A in g.g){var R=g.g[A],K=Array.prototype.indexOf.call(R,E,void 0),J;(J=0<=K)&&Array.prototype.splice.call(R,K,1),J&&(Hr(E),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Ge(g,E,A,R){for(var K=0;K<g.length;++K){var J=g[K];if(!J.da&&J.listener==E&&J.capture==!!A&&J.ha==R)return K}return-1}var Gr="closure_lm_"+(1e6*Math.random()|0),jn={};function bi(g,E,A,R,K){if(Array.isArray(E)){for(var J=0;J<E.length;J++)bi(g,E[J],A,R,K);return null}return A=ho(A),g&&g[nr]?g.K(E,A,x(R)?!!R.capture:!!R,K):Jt(g,E,A,!1,R,K)}function Jt(g,E,A,R,K,J){if(!E)throw Error("Invalid event type");var he=x(K)?!!K.capture:!!K,at=co(g);if(at||(g[Gr]=at=new Zt(g)),A=at.add(E,A,R,he,J),A.proxy)return A;if(R=ut(),A.proxy=R,R.src=g,R.listener=A,g.addEventListener)yt||(K=he),K===void 0&&(K=!1),g.addEventListener(E.toString(),R,K);else if(g.attachEvent)g.attachEvent(_e(E.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ut(){function g(A){return E.call(g.src,g.listener,A)}const E=uo;return g}function ze(g,E,A,R,K){if(Array.isArray(E))for(var J=0;J<E.length;J++)ze(g,E[J],A,R,K);else R=x(R)?!!R.capture:!!R,A=ho(A),g&&g[nr]?(g=g.i,E=String(E).toString(),E in g.g&&(J=g.g[E],A=Ge(J,A,R,K),-1<A&&(Hr(J[A]),Array.prototype.splice.call(J,A,1),J.length==0&&(delete g.g[E],g.h--)))):g&&(g=co(g))&&(E=g.g[E.toString()],g=-1,E&&(g=Ge(E,A,R,K)),(A=-1<g?E[g]:null)&&Di(A))}function Di(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[nr])Oi(E.i,g);else{var A=g.type,R=g.proxy;E.removeEventListener?E.removeEventListener(A,R,g.capture):E.detachEvent?E.detachEvent(_e(A),R):E.addListener&&E.removeListener&&E.removeListener(R),(A=co(E))?(Oi(A,g),A.h==0&&(A.src=null,E[Gr]=null)):Hr(g)}}}function _e(g){return g in jn?jn[g]:jn[g]="on"+g}function uo(g,E){if(g.da)g=!0;else{E=new tr(E,this);var A=g.listener,R=g.ha||g.src;g.fa&&Di(g),g=A.call(R,E)}return g}function co(g){return g=g[Gr],g instanceof Zt?g:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ho(g){return typeof g=="function"?g:(g[rr]||(g[rr]=function(E){return g.handleEvent(E)}),g[rr])}function ct(){Le.call(this),this.i=new Zt(this),this.M=this,this.F=null}X(ct,Le),ct.prototype[nr]=!0,ct.prototype.removeEventListener=function(g,E,A,R){ze(this,g,E,A,R)};function cn(g,E){var A,R=g.F;if(R)for(A=[];R;R=R.F)A.push(R);if(g=g.M,R=E.type||E,typeof E=="string")E=new st(E,g);else if(E instanceof st)E.target=E.target||g;else{var K=E;E=new st(R,g),V(E,K)}if(K=!0,A)for(var J=A.length-1;0<=J;J--){var he=E.g=A[J];K=ir(he,R,!0,E)&&K}if(he=E.g=g,K=ir(he,R,!0,E)&&K,K=ir(he,R,!1,E)&&K,A)for(J=0;J<A.length;J++)he=E.g=A[J],K=ir(he,R,!1,E)&&K}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var g=this.i,E;for(E in g.g){for(var A=g.g[E],R=0;R<A.length;R++)Hr(A[R]);delete g.g[E],g.h--}}this.F=null},ct.prototype.K=function(g,E,A,R){return this.i.add(String(g),E,!1,A,R)},ct.prototype.L=function(g,E,A,R){return this.i.add(String(g),E,!0,A,R)};function ir(g,E,A,R){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();for(var K=!0,J=0;J<E.length;++J){var he=E[J];if(he&&!he.da&&he.capture==A){var at=he.listener,Pt=he.ha||he.src;he.fa&&Oi(g.i,he),K=at.call(Pt,R)!==!1&&K}}return K&&!R.defaultPrevented}function hn(g,E,A){if(typeof g=="function")A&&(g=D(g,A));else if(g&&typeof g.handleEvent=="function")g=D(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:m.setTimeout(g,E||0)}function ma(g){g.g=hn(()=>{g.g=null,g.i&&(g.i=!1,ma(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class fo extends Le{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ma(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(g){Le.call(this),this.h=g,this.g={}}X(vs,Le);var Ot=[];function fe(g){ie(g.g,function(E,A){this.g.hasOwnProperty(A)&&Di(E)},g),g.g={}}vs.prototype.N=function(){vs.aa.N.call(this),fe(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=m.JSON.stringify,ot=m.JSON.parse,Tt=class{stringify(g){return m.JSON.stringify(g,void 0)}parse(g){return m.JSON.parse(g,void 0)}};function ci(){}ci.prototype.h=null;function go(g){return g.h||(g.h=g.i())}function ya(){}var Ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){st.call(this,"d")}X(Or,st);function po(){st.call(this,"c")}X(po,st);var Xr={},Wn=null;function Pi(){return Wn=Wn||new ct}Xr.La="serverreachability";function en(g){st.call(this,Xr.La,g)}X(en,st);function wr(g){const E=Pi();cn(E,new en(E))}Xr.STAT_EVENT="statevent";function Cs(g,E){st.call(this,Xr.STAT_EVENT,g),this.stat=E}X(Cs,st);function pt(g){const E=Pi();cn(E,new Cs(E,g))}Xr.Ma="timingevent";function Vl(g,E){st.call(this,Xr.Ma,g),this.size=E}X(Vl,st);function sr(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){g()},E)}function hi(){this.g=!0}hi.prototype.xa=function(){this.g=!1};function Sn(g,E,A,R,K,J){g.info(function(){if(g.g)if(J)for(var he="",at=J.split("&"),Pt=0;Pt<at.length;Pt++){var Ke=at[Pt].split("=");if(1<Ke.length){var _t=Ke[0];Ke=Ke[1];var Ht=_t.split("_");he=2<=Ht.length&&Ht[1]=="type"?he+(_t+"="+Ke+"&"):he+(_t+"=redacted&")}}else he=null;else he=J;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+E+`
`+A+`
`+he})}function fi(g,E,A,R,K,J,he){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+E+`
`+A+`
`+J+" "+he})}function tn(g,E,A,R){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+ki(g,A)+(R?" "+R:"")})}function me(g,E){g.info(function(){return"TIMEOUT: "+E})}hi.prototype.info=function(){};function ki(g,E){if(!g.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var R=A[g];if(!(2>R.length)){var K=R[1];if(Array.isArray(K)&&!(1>K.length)){var J=K[0];if(J!="noop"&&J!="stop"&&J!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return bt(A)}catch{return E}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kr;function di(){}X(di,ci),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},Kr=new di;function or(g,E,A,R){this.j=g,this.i=E,this.l=A,this.R=R||1,this.U=new vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ar}function ar(){this.i=null,this.g="",this.h=!1}var Ul={},xa={};function Hn(g,E,A){g.L=1,g.v=Dt(je(E)),g.m=A,g.P=!0,fn(g,null)}function fn(g,E){g.F=Date.now(),lr(g),g.A=je(g.v);var A=g.A,R=g.R;Array.isArray(R)||(R=[String(R)]),Wt(A.i,"t",R),g.C=0,A=g.j.J,g.h=new ar,g.g=ql(g.j,A?E:null,!g.m),0<g.O&&(g.M=new fo(D(g.Y,g,g.g),g.O)),E=g.U,A=g.g,R=g.ca;var K="readystatechange";Array.isArray(K)||(K&&(Ot[0]=K.toString()),K=Ot);for(var J=0;J<K.length;J++){var he=bi(A,K[J],R||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=g.H?O(g.H):{},g.m?(g.u||(g.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,E)):(g.u="GET",g.g.ea(g.A,g.u,null,E)),wr(),Sn(g.i,g.u,g.A,g.l,g.R,g.m)}or.prototype.ca=function(g){g=g.target;const E=this.M;E&&Pr(g)==3?E.j():this.Y(g)},or.prototype.Y=function(g){try{if(g==this.g)e:{const Ht=Pr(this.g);var E=this.g.Ba();const sn=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Gl(this.g)))){this.J||Ht!=4||E==7||(E==8||0>=sn?wr(3):wr(2)),re(this);var A=this.g.Z();this.X=A;t:if(ft(this)){var R=Gl(this.g);g="";var K=R.length,J=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tt(this),Is(this);var he="";break t}this.h.i=new m.TextDecoder}for(E=0;E<K;E++)this.h.h=!0,g+=this.h.i.decode(R[E],{stream:!(J&&E==K-1)});R.length=0,this.h.g+=g,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=A==200,fi(this.i,this.u,this.A,this.l,this.R,Ht,A),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Pt=this.g;if((at=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(at)){var Ke=at;break t}}Ke=null}if(A=Ke)tn(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qr(this,A);else{this.o=!1,this.s=3,pt(12),tt(this),Is(this);break e}}if(this.P){A=!0;let Xn;for(;!this.J&&this.C<he.length;)if(Xn=zl(this,he),Xn==xa){Ht==4&&(this.s=4,pt(14),A=!1),tn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==Ul){this.s=4,pt(15),tn(this.i,this.l,he,"[Invalid Chunk]"),A=!1;break}else tn(this.i,this.l,Xn,null),qr(this,Xn);if(ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||he.length!=0||this.h.h||(this.s=1,pt(16),A=!1),this.o=this.o&&A,!A)tn(this.i,this.l,he,"[Invalid Chunked Response]"),tt(this),Is(this);else if(0<he.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Ls(_t),_t.M=!0,pt(11))}}else tn(this.i,this.l,he,null),qr(this,he);Ht==4&&tt(this),this.o&&!this.J&&(Ht==4?Et(this.j,this):(this.o=!1,lr(this)))}else nt(this.g),A==400&&0<he.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),tt(this),Is(this)}}}catch{}finally{}};function ft(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function zl(g,E){var A=g.C,R=E.indexOf(`
`,A);return R==-1?xa:(A=Number(E.substring(A,R)),isNaN(A)?Ul:(R+=1,R+A>E.length?xa:(E=E.slice(R,R+A),g.C=R+A,E)))}or.prototype.cancel=function(){this.J=!0,tt(this)};function lr(g){g.S=Date.now()+g.I,mo(g,g.I)}function mo(g,E){if(g.B!=null)throw Error("WatchDog timer not null");g.B=sr(D(g.ba,g),E)}function re(g){g.B&&(m.clearTimeout(g.B),g.B=null)}or.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(me(this.i,this.A),this.L!=2&&(wr(),pt(17)),tt(this),this.s=2,Is(this)):mo(this,this.S-g)};function Is(g){g.j.G==0||g.J||Et(g.j,g)}function tt(g){re(g);var E=g.M;E&&typeof E.ma=="function"&&E.ma(),g.M=null,fe(g.U),g.g&&(E=g.g,g.g=null,E.abort(),E.ma())}function qr(g,E){try{var A=g.j;if(A.G!=0&&(A.g==g||Ts(A.h,g))){if(!g.K&&Ts(A.h,g)&&A.G==3){try{var R=A.Da.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)Ui(A),wo(A);else break e;Aa(A),pt(18)}}else A.za=K[1],0<A.za-A.T&&37500>K[2]&&A.F&&A.v==0&&!A.C&&(A.C=sr(D(A.Za,A),6e3));if(1>=Fe(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ln(A,11)}else if((g.K||A.g==g)&&Ui(A),!M(E))for(K=A.Da.g.parse(E),E=0;E<K.length;E++){let Ke=K[E];if(A.T=Ke[0],Ke=Ke[1],A.G==2)if(Ke[0]=="c"){A.K=Ke[1],A.ia=Ke[2];const _t=Ke[3];_t!=null&&(A.la=_t,A.j.info("VER="+A.la));const Ht=Ke[4];Ht!=null&&(A.Aa=Ht,A.j.info("SVER="+A.Aa));const sn=Ke[5];sn!=null&&typeof sn=="number"&&0<sn&&(R=1.5*sn,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const Xn=g.g;if(Xn){const Bn=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bn){var J=R.h;J.g||Bn.indexOf("spdy")==-1&&Bn.indexOf("quic")==-1&&Bn.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ss(J,J.h),J.h=null))}if(R.D){const va=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(R.ya=va,de(R.I,R.D,va))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var he=g;if(R.qa=Ie(R,R.J?R.ia:null,R.W),he.K){yo(R.h,he);var at=he,Pt=R.L;Pt&&(at.I=Pt),at.B&&(re(at),lr(at)),R.g=he}else Kl(R);0<A.i.length&&ke(A)}else Ke[0]!="stop"&&Ke[0]!="close"||Ln(A,7);else A.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ln(A,7):_r(A):Ke[0]!="noop"&&A.l&&A.l.ta(Ke),A.v=0)}}wr(4)}catch{}}var sh=class{constructor(g,E){this.g=g,this.map=E}};function $e(g){this.l=g||10,m.PerformanceNavigationTiming?(g=m.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Fe(g){return g.h?1:g.g?g.g.size:0}function Ts(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function Ss(g,E){g.g?g.g.add(E):g.h=E}function yo(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}$e.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ft(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const A of g.g.values())E=E.concat(A.D);return E}return G(g.i)}function Yr(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(y(g)){for(var E=[],A=g.length,R=0;R<A;R++)E.push(g[R]);return E}E=[],A=0;for(R in g)E[A++]=g[R];return E}function oh(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(y(g)||typeof g=="string"){var E=[];g=g.length;for(var A=0;A<g;A++)E.push(A);return E}E=[],A=0;for(const R in g)E[A++]=R;return E}}}function St(g,E){if(g.forEach&&typeof g.forEach=="function")g.forEach(E,void 0);else if(y(g)||typeof g=="string")Array.prototype.forEach.call(g,E,void 0);else for(var A=oh(g),R=Yr(g),K=R.length,J=0;J<K;J++)E.call(void 0,R[J],A&&A[J],g)}var br=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ah(g,E){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var R=g[A].indexOf("="),K=null;if(0<=R){var J=g[A].substring(0,R);K=g[A].substring(R+1)}else J=g[A];E(J,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Gn(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Gn){this.h=g.h,jt(this,g.j),this.o=g.o,this.g=g.g,q(this,g.s),this.l=g.l;var E=g.i,A=new gi;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),P(this,A),this.m=g.m}else g&&(E=String(g).match(br))?(this.h=!1,jt(this,E[1]||"",!0),this.o=dn(E[2]||""),this.g=dn(E[3]||"",!0),q(this,E[4]),this.l=dn(E[5]||"",!0),P(this,E[6]||"",!0),this.m=dn(E[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}Gn.prototype.toString=function(){var g=[],E=this.j;E&&g.push(Rs(E,Mn,!0),":");var A=this.g;return(A||E=="file")&&(g.push("//"),(E=this.o)&&g.push(Rs(E,Mn,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Rs(A,A.charAt(0)=="/"?xt:ve,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Rs(A,lh)),g.join("")};function je(g){return new Gn(g)}function jt(g,E,A){g.j=A?dn(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function q(g,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);g.s=E}else g.s=null}function P(g,E,A){E instanceof gi?(g.i=E,Qr(g.i,g.h)):(A||(E=Rs(E,jl)),g.i=new gi(E,g.h))}function de(g,E,A){g.i.set(E,A)}function Dt(g){return de(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function dn(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Rs(g,E,A){return typeof g=="string"?(g=encodeURI(g).replace(E,wa),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function wa(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Mn=/[#\/\?@]/g,ve=/[#\?:]/g,xt=/[#\?]/g,jl=/[#\?@]/g,lh=/#/g;function gi(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function ur(g){g.g||(g.g=new Map,g.h=0,g.i&&ah(g.i,function(E,A){g.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}t=gi.prototype,t.add=function(g,E){ur(this),this.i=null,g=Er(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(E),this.h+=1,this};function xo(g,E){ur(g),E=Er(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function Wl(g,E){return ur(g),E=Er(g,E),g.g.has(E)}t.forEach=function(g,E){ur(this),this.g.forEach(function(A,R){A.forEach(function(K){g.call(E,K,R,this)},this)},this)},t.na=function(){ur(this);const g=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let R=0;R<E.length;R++){const K=g[R];for(let J=0;J<K.length;J++)A.push(E[R])}return A},t.V=function(g){ur(this);let E=[];if(typeof g=="string")Wl(this,g)&&(E=E.concat(this.g.get(Er(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)E=E.concat(g[A])}return E},t.set=function(g,E){return ur(this),this.i=null,g=Er(this,g),Wl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},t.get=function(g,E){return g?(g=this.V(g),0<g.length?String(g[0]):E):E};function Wt(g,E,A){xo(g,E),0<A.length&&(g.i=null,g.g.set(Er(g,E),G(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var R=E[A];const J=encodeURIComponent(String(R)),he=this.V(R);for(R=0;R<he.length;R++){var K=J;he[R]!==""&&(K+="="+encodeURIComponent(String(he[R]))),g.push(K)}}return this.i=g.join("&")};function Er(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Qr(g,E){E&&!g.j&&(ur(g),g.i=null,g.g.forEach(function(A,R){var K=R.toLowerCase();R!=K&&(xo(this,R),Wt(this,K,A))},g)),g.j=E}function Re(g,E){const A=new hi;if(m.Image){const R=new Image;R.onload=F(be,A,"TestLoadImage: loaded",!0,E,R),R.onerror=F(be,A,"TestLoadImage: error",!1,E,R),R.onabort=F(be,A,"TestLoadImage: abort",!1,E,R),R.ontimeout=F(be,A,"TestLoadImage: timeout",!1,E,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else E(!1)}function uh(g,E){const A=new hi,R=new AbortController,K=setTimeout(()=>{R.abort(),be(A,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:R.signal}).then(J=>{clearTimeout(K),J.ok?be(A,"TestPingServer: ok",!0,E):be(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),be(A,"TestPingServer: error",!1,E)})}function be(g,E,A,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(A)}catch{}}function nn(){this.g=new Tt}function ch(g,E,A){const R=A||"";try{St(g,function(K,J){let he=K;x(K)&&(he=bt(K)),E.push(R+J+"="+encodeURIComponent(he))})}catch(K){throw E.push(R+"type="+encodeURIComponent("_badmap")),K}}function Li(g){this.l=g.Ub||null,this.j=g.eb||!1}X(Li,ci),Li.prototype.g=function(){return new Ns(this.l,this.j)},Li.prototype.i=function(g){return function(){return g}}({});function Ns(g,E){ct.call(this),this.D=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(Ns,ct),t=Ns.prototype,t.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=E,this.readyState=1,Dr(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(E.body=g),(this.D||m).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$r(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function $r(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?Os(this):Dr(this),this.readyState==3&&$r(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Os(this))},t.Qa=function(g){this.g&&(this.response=g,Os(this))},t.ga=function(){this.g&&Os(this)};function Os(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Dr(g)}t.setRequestHeader=function(g,E){this.u.append(g,E)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=E.next();return g.join(`\r
`)};function Dr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Bi(g){let E="";return ie(g,function(A,R){E+=R,E+=":",E+=A,E+=`\r
`}),E}function pi(g,E,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=Bi(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):de(g,E,A))}function wt(g){ct.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(wt,ct);var bs=/^https?$/i,Ds=["POST","PUT"];t=wt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,E,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kr.g(),this.v=this.o?go(this.o):go(Kr),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(J){wn(this,J);return}if(g=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)A.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())A.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(J=>J.toLowerCase()=="content-type"),K=m.FormData&&g instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ds,E,void 0))||R||K||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of A)this.g.setRequestHeader(J,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hl(this),this.u=!0,this.g.send(g),this.u=!1}catch(J){wn(this,J)}};function wn(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.m=5,Ea(g),Ps(g)}function Ea(g){g.A||(g.A=!0,cn(g,"complete"),cn(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,cn(this,"complete"),cn(this,"abort"),Ps(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ps(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_a(this):this.bb())},t.bb=function(){_a(this)};function _a(g){if(g.h&&typeof f<"u"&&(!g.v[1]||Pr(g)!=4||g.Z()!=2)){if(g.u&&Pr(g)==4)hn(g.Ea,0,g);else if(cn(g,"readystatechange"),Pr(g)==4){g.h=!1;try{const he=g.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var R;if(R=he===0){var K=String(g.D).match(br)[1]||null;!K&&m.self&&m.self.location&&(K=m.self.location.protocol.slice(0,-1)),R=!bs.test(K?K.toLowerCase():"")}A=R}if(A)cn(g,"complete"),cn(g,"success");else{g.m=6;try{var J=2<Pr(g)?g.g.statusText:""}catch{J=""}g.l=J+" ["+g.Z()+"]",Ea(g)}}finally{Ps(g)}}}}function Ps(g,E){if(g.g){Hl(g);const A=g.g,R=g.v[0]?()=>{}:null;g.g=null,g.v=null,E||cn(g,"ready");try{A.onreadystatechange=R}catch{}}}function Hl(g){g.I&&(m.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Pr(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),ot(E)}};function Gl(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function nt(g){const E={};g=(g.g&&2<=Pr(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(M(g[R]))continue;var A=H(g[R]);const K=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const J=E[K]||[];E[K]=J,J.push(A)}b(E,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(g,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||E}function ks(g){this.Aa=0,this.i=[],this.j=new hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fi("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fi("baseRetryDelayMs",5e3,g),this.cb=Fi("retryDelaySeedMs",1e4,g),this.Wa=Fi("forwardChannelMaxRetries",2,g),this.wa=Fi("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(g&&g.concurrentRequestLimit),this.Da=new nn,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ks.prototype,t.la=8,t.G=1,t.connect=function(g,E,A,R){pt(0),this.W=g,this.H=E||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=Ie(this,null,this.W),ke(this)};function _r(g){if(Z(g),g.G==3){var E=g.U++,A=je(g.I);if(de(A,"SID",g.K),de(A,"RID",E),de(A,"TYPE","terminate"),Vi(g,A),E=new or(g,g.j,E),E.L=2,E.v=Dt(je(A)),A=!1,m.navigator&&m.navigator.sendBeacon)try{A=m.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&m.Image&&(new Image().src=E.v,A=!0),A||(E.g=ql(E.j,null),E.g.ea(E.v)),E.F=Date.now(),lr(E)}rt(g)}function wo(g){g.g&&(Ls(g),g.g.cancel(),g.g=null)}function Z(g){wo(g),g.u&&(m.clearTimeout(g.u),g.u=null),Ui(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&m.clearTimeout(g.s),g.s=null)}function ke(g){if(!Xe(g.h)&&!g.s){g.s=!0;var E=g.Ga;Ne||Oe(),pe||(Ne(),pe=!0),Ce.add(E,g),g.B=0}}function rn(g,E){return Fe(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=E.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=sr(D(g.Ga,g,E),Bs(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const K=new or(this,this.j,g);let J=this.o;if(this.S&&(J?(J=O(J),V(J,this.S)):J=this.S),this.m!==null||this.O||(K.H=J,J=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Xl(this,K,E),A=je(this.I),de(A,"RID",g),de(A,"CVER",22),this.D&&de(A,"X-HTTP-Session-Id",this.D),Vi(this,A),J&&(this.O?E="headers="+encodeURIComponent(String(Bi(J)))+"&"+E:this.m&&pi(A,this.m,J)),Ss(this.h,K),this.Ua&&de(A,"TYPE","init"),this.P?(de(A,"$req",E),de(A,"SID","null"),K.T=!0,Hn(K,A,null)):Hn(K,A,E),this.G=2}}else this.G==3&&(g?Ms(this,g):this.i.length==0||Xe(this.h)||Ms(this))};function Ms(g,E){var A;E?A=E.l:A=g.U++;const R=je(g.I);de(R,"SID",g.K),de(R,"RID",A),de(R,"AID",g.T),Vi(g,R),g.m&&g.o&&pi(R,g.m,g.o),A=new or(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),E&&(g.i=E.D.concat(g.i)),E=Xl(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ss(g.h,A),Hn(A,R,E)}function Vi(g,E){g.H&&ie(g.H,function(A,R){de(E,R,A)}),g.l&&St({},function(A,R){de(E,R,A)})}function Xl(g,E,A){A=Math.min(g.i.length,A);var R=g.l?D(g.l.Na,g.l,g):null;e:{var K=g.i;let J=-1;for(;;){const he=["count="+A];J==-1?0<A?(J=K[0].g,he.push("ofs="+J)):J=0:he.push("ofs="+J);let at=!0;for(let Pt=0;Pt<A;Pt++){let Ke=K[Pt].g;const _t=K[Pt].map;if(Ke-=J,0>Ke)J=Math.max(0,K[Pt].g-100),at=!1;else try{ch(_t,he,"req"+Ke+"_")}catch{R&&R(_t)}}if(at){R=he.join("&");break e}}}return g=g.i.splice(0,A),E.D=g,R}function Kl(g){if(!g.g&&!g.u){g.Y=1;var E=g.Fa;Ne||Oe(),pe||(Ne(),pe=!0),Ce.add(E,g),g.v=0}}function Aa(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=sr(D(g.Fa,g),Bs(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Vt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=sr(D(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),wo(this),Vt(this))};function Ls(g){g.A!=null&&(m.clearTimeout(g.A),g.A=null)}function Vt(g){g.g=new or(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var E=je(g.qa);de(E,"RID","rpc"),de(E,"SID",g.K),de(E,"AID",g.T),de(E,"CI",g.F?"0":"1"),!g.F&&g.ja&&de(E,"TO",g.ja),de(E,"TYPE","xmlhttp"),Vi(g,E),g.m&&g.o&&pi(E,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=Dt(je(E)),A.m=null,A.P=!0,fn(A,g)}t.Za=function(){this.C!=null&&(this.C=null,wo(this),Aa(this),pt(19))};function Ui(g){g.C!=null&&(m.clearTimeout(g.C),g.C=null)}function Et(g,E){var A=null;if(g.g==E){Ui(g),Ls(g),g.g=null;var R=2}else if(Ts(g.h,E))A=E.D,yo(g.h,E),R=1;else return;if(g.G!=0){if(E.o)if(R==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var K=g.B;R=Pi(),cn(R,new Vl(R,A)),ke(g)}else Kl(g);else if(K=E.s,K==3||K==0&&0<E.X||!(R==1&&rn(g,E)||R==2&&Aa(g)))switch(A&&0<A.length&&(E=g.h,E.i=E.i.concat(A)),K){case 1:Ln(g,5);break;case 4:Ln(g,10);break;case 3:Ln(g,6);break;default:Ln(g,2)}}}function Bs(g,E){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*E}function Ln(g,E){if(g.j.info("Error code "+E),E==2){var A=D(g.fb,g),R=g.Xa;const K=!R;R=new Gn(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||jt(R,"https"),Dt(R),K?Re(R.toString(),A):uh(R.toString(),A)}else pt(2);g.G=0,g.l&&g.l.sa(E),rt(g),Z(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function rt(g){if(g.G=0,g.ka=[],g.l){const E=Ft(g.h);(E.length!=0||g.i.length!=0)&&($(g.ka,E),$(g.ka,g.i),g.h.i.length=0,G(g.i),g.i.length=0),g.l.ra()}}function Ie(g,E,A){var R=A instanceof Gn?je(A):new Gn(A);if(R.g!="")E&&(R.g=E+"."+R.g),q(R,R.s);else{var K=m.location;R=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;var J=new Gn(null);R&&jt(J,R),E&&(J.g=E),K&&q(J,K),A&&(J.l=A),R=J}return A=g.D,E=g.ya,A&&E&&de(R,A,E),de(R,"VER",g.la),Vi(g,R),R}function ql(g,E,A){if(E&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Ca&&!g.pa?new wt(new Li({eb:A})):new wt(g.pa),E.Ha(g.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ht(){}t=ht.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ar(){}Ar.prototype.g=function(g,E){return new qt(g,E)};function qt(g,E){ct.call(this),this.g=new ks(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(g?g["X-WebChannel-Client-Profile"]=E.va:g={"X-WebChannel-Client-Profile":E.va}),this.g.S=g,(g=E&&E.Sb)&&!M(g)&&(this.g.m=g),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!M(E)&&(this.g.D=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new Zr(this)}X(qt,ct),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){_r(this.g)},qt.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=bt(g),g=A);E.i.push(new sh(E.Ya++,g)),E.G==3&&ke(E)},qt.prototype.N=function(){this.g.l=null,delete this.j,_r(this.g),delete this.g,qt.aa.N.call(this)};function Yl(g){Or.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const A in E){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}X(Yl,Or);function cr(){po.call(this),this.status=1}X(cr,po);function Zr(g){this.g=g}X(Zr,ht),Zr.prototype.ua=function(){cn(this.g,"a")},Zr.prototype.ta=function(g){cn(this.g,new Yl(g))},Zr.prototype.sa=function(g){cn(this.g,new cr)},Zr.prototype.ra=function(){cn(this.g,"b")},Ar.prototype.createWebChannel=Ar.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,sy=function(){return new Ar},iy=function(){return Pi()},ry=Xr,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,Du=Mi,xn.COMPLETE="complete",ny=xn,ya.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Va=ya,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,ty=wt}).apply(typeof pu<"u"?pu:typeof self<"u"?self:typeof window<"u"?window:{});const mg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="11.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new X2("@firebase/firestore");function vo(){return Js.logLevel}function ye(t,...e){if(Js.logLevel<=Ye.DEBUG){const n=e.map(d1);Js.debug(`Firestore (${fa}): ${t}`,...n)}}function Si(t,...e){if(Js.logLevel<=Ye.ERROR){const n=e.map(d1);Js.error(`Firestore (${fa}): ${t}`,...n)}}function ta(t,...e){if(Js.logLevel<=Ye.WARN){const n=e.map(d1);Js.warn(`Firestore (${fa}): ${t}`,...n)}}function d1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: `+t;throw Si(e),new Error(e)}function it(t,e){t||De()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends io{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bn.UNAUTHENTICATED))}shutdown(){}}class Pv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kv{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0);let i=this.i;const o=y=>this.i!==i?(i=this.i,n(y)):Promise.resolve();let l=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ls,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=l;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ls)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string"),new oy(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new bn(e)}}class Mv{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Lv{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Mv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){it(this.o===void 0);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.R;return this.R=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string"),this.R=n.token,new Bv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=Vv(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<n&&(i+=e.charAt(o[l]%e.length))}return i}}function Qe(t,e){return t<e?-1:t>e?1:0}function na(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new un(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new un(0,0))}static max(){return new Pe(new un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,i){n===void 0?n=0:n>e.length&&De(),i===void 0?i=e.length-n:i>e.length-n&&De(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Al?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const l=e.get(o),f=n.get(o);if(l<f)return-1;if(l>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends Al{construct(e,n,i){return new Nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const Uv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Al{construct(e,n,i){return new vn(e,n,i)}static isValidIdentifier(e){return Uv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Te(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Te(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Te(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(i+=m,o++):(l(),o++)}if(l(),f)throw new Te(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Nt.fromString(e))}static fromName(e){return new Se(Nt.fromString(e).popFirst(5))}static empty(){return new Se(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Nt(e.slice()))}}function zv(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new un(n+1,0):new un(n,i));return new gs(o,Se.empty(),e)}function jv(t){return new gs(t.readTime,t.key,-1)}class gs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new gs(Pe.min(),Se.empty(),-1)}static max(){return new gs(Pe.max(),Se.empty(),-1)}}function Wv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==Hv)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,i)=>{n(e)})}static reject(e){return new ne((n,i)=>{i(e)})}static waitFor(e){return new ne((n,i)=>{let o=0,l=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++l,f&&l===o&&n()},y=>i(y))}),f=!0,l===o&&n()})}static or(e){let n=ne.resolve(!1);for(const i of e)n=n.next(o=>o?ne.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,l)=>{i.push(n.call(this,o,l))}),this.waitFor(i)}static mapArray(e,n){return new ne((i,o)=>{const l=e.length,f=new Array(l);let m=0;for(let y=0;y<l;y++){const x=y;n(e[x]).next(v=>{f[x]=v,++m,m===l&&i(f)},v=>o(v))}})}static doWhile(e,n){return new ne((i,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):i()};l()})}}function Xv(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hc.oe=-1;function Gc(t){return t==null}function fc(t){return t===0&&1/t==-1/0}function Kv(t){return typeof t=="number"&&Number.isInteger(t)&&!fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yg(e)),e=Yv(t.get(n),e);return yg(e)}function Yv(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case"":n+="";break;default:n+=l}}return n}function yg(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function so(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ly(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??An.RED,this.left=o??An.EMPTY,this.right=l??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,l){return new An(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return An.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,i,o,l){return this}insert(e,n,i){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Vr([])}unionWith(e){let n=new yn(vn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new uy("Invalid base64 string: "+l):l}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(o){let l="";for(let f=0;f<o.length;++f)l+=String.fromCharCode(o[f]);return l}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const Qv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(t){if(it(!!t),typeof t=="string"){let e=0;const n=Qv.exec(t);if(it(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ms(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xc(t){const e=t.mapValue.fields.__previous_value__;return g1(e)?Xc(e):e}function vl(t){const e=ps(t.mapValue.fields.__local_write_time__.timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,i,o,l,f,m,y,x){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=x}}class Cl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?g1(t)?4:Jv(t)?9007199254740991:Zv(t)?10:11:De()}function li(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vl(t).isEqual(vl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const f=ps(o.timestampValue),m=ps(l.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return ms(o.bytesValue).isEqual(ms(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return Gt(o.geoPointValue.latitude)===Gt(l.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Gt(o.integerValue)===Gt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const f=Gt(o.doubleValue),m=Gt(l.doubleValue);return f===m?fc(f)===fc(m):isNaN(f)&&isNaN(m)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return function(o,l){const f=o.mapValue.fields||{},m=l.mapValue.fields||{};if(xg(f)!==xg(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!li(f[y],m[y])))return!1;return!0}(t,e);default:return De()}}function Il(t,e){return(t.values||[]).find(n=>li(n,e))!==void 0}function ra(t,e){if(t===e)return 0;const n=ys(t),i=ys(e);if(n!==i)return Qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(l,f){const m=Gt(l.integerValue||l.doubleValue),y=Gt(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(t,e);case 3:return Eg(t.timestampValue,e.timestampValue);case 4:return Eg(vl(t),vl(e));case 5:return Qe(t.stringValue,e.stringValue);case 6:return function(l,f){const m=ms(l),y=ms(f);return m.compareTo(y)}(t.bytesValue,e.bytesValue);case 7:return function(l,f){const m=l.split("/"),y=f.split("/");for(let x=0;x<m.length&&x<y.length;x++){const v=Qe(m[x],y[x]);if(v!==0)return v}return Qe(m.length,y.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,f){const m=Qe(Gt(l.latitude),Gt(f.latitude));return m!==0?m:Qe(Gt(l.longitude),Gt(f.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _g(t.arrayValue,e.arrayValue);case 10:return function(l,f){var m,y,x,v;const C=l.fields||{},D=f.fields||{},F=(m=C.value)===null||m===void 0?void 0:m.arrayValue,X=(y=D.value)===null||y===void 0?void 0:y.arrayValue,G=Qe(((x=F==null?void 0:F.values)===null||x===void 0?void 0:x.length)||0,((v=X==null?void 0:X.values)===null||v===void 0?void 0:v.length)||0);return G!==0?G:_g(F,X)}(t.mapValue,e.mapValue);case 11:return function(l,f){if(l===yu.mapValue&&f===yu.mapValue)return 0;if(l===yu.mapValue)return 1;if(f===yu.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),x=f.fields||{},v=Object.keys(x);y.sort(),v.sort();for(let C=0;C<y.length&&C<v.length;++C){const D=Qe(y[C],v[C]);if(D!==0)return D;const F=ra(m[y[C]],x[v[C]]);if(F!==0)return F}return Qe(y.length,v.length)}(t.mapValue,e.mapValue);default:throw De()}}function Eg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const n=ps(t),i=ps(e),o=Qe(n.seconds,i.seconds);return o!==0?o:Qe(n.nanos,i.nanos)}function _g(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const l=ra(n[o],i[o]);if(l)return l}return Qe(n.length,i.length)}function ia(t){return $f(t)}function $f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ps(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ms(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const l of n.values||[])o?o=!1:i+=",",i+=$f(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const f of i)l?l=!1:o+=",",o+=`${f}:${$f(n.fields[f])}`;return o+"}"}(t.mapValue):De()}function Pu(t){switch(ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xc(t);return e?16+Pu(e):16;case 5:return 2*t.stringValue.length;case 6:return ms(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Pu(l),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return so(i.fields,(l,f)=>{o+=l.length+Pu(f)}),o}(t.mapValue);default:throw De()}}function Zf(t){return!!t&&"integerValue"in t}function p1(t){return!!t&&"arrayValue"in t}function Ag(t){return!!t&&"nullValue"in t}function vg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ku(t){return!!t&&"mapValue"in t}function Zv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $a(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return so(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=$a(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$a(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Jv(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(n)}setAll(e){let n=vn.emptyPath(),i={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,i,o),i={},o=[],n=m.popLast()}f?i[m.lastSegment()]=$a(f):o.push(m.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,o)}delete(e){const n=this.field(e.popLast());ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];ku(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){so(n,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new Ir($a(this.value))}}function cy(t){const e=[];return so(t.fields,(n,i)=>{const o=new vn([n]);if(ku(i)){const l=cy(i.mapValue).fields;if(l.length===0)e.push(o);else for(const f of l)e.push(o.child(f))}else e.push(o)}),new Vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,i,o,l,f,m){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=l,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Pn(e,0,Pe.min(),Pe.min(),Pe.min(),Ir.empty(),0)}static newFoundDocument(e,n,i,o){return new Pn(e,1,n,Pe.min(),i,o,0)}static newNoDocument(e,n){return new Pn(e,2,n,Pe.min(),Pe.min(),Ir.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Pe.min(),Pe.min(),Ir.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.position=e,this.inclusive=n}}function Cg(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const l=e[o],f=t.position[o];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(f.referenceValue),n.key):i=ra(f,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ig(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function eC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{}class an extends hy{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new nC(e,n,i):n==="array-contains"?new sC(e,i):n==="in"?new oC(e,i):n==="not-in"?new aC(e,i):n==="array-contains-any"?new lC(e,i):new an(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rC(e,i):new iC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ra(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends hy{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ui(e,n)}matches(e){return fy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fy(t){return t.op==="and"}function dy(t){return tC(t)&&fy(t)}function tC(t){for(const e of t.filters)if(e instanceof ui)return!1;return!0}function Jf(t){if(t instanceof an)return t.field.canonicalString()+t.op.toString()+ia(t.value);if(dy(t))return t.filters.map(e=>Jf(e)).join(",");{const e=t.filters.map(n=>Jf(n)).join(",");return`${t.op}(${e})`}}function gy(t,e){return t instanceof an?function(i,o){return o instanceof an&&i.op===o.op&&i.field.isEqual(o.field)&&li(i.value,o.value)}(t,e):t instanceof ui?function(i,o){return o instanceof ui&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,f,m)=>l&&gy(f,o.filters[m]),!0):!1}(t,e):void De()}function py(t){return t instanceof an?function(n){return`${n.field.canonicalString()} ${n.op} ${ia(n.value)}`}(t):t instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(py).join(" ,")+"}"}(t):"Filter"}class nC extends an{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class rC extends an{constructor(e,n){super(e,"in",n),this.keys=my("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iC extends an{constructor(e,n){super(e,"not-in",n),this.keys=my("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function my(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Se.fromName(i.referenceValue))}class sC extends an{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return p1(n)&&Il(n.arrayValue,this.value)}}class oC extends an{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class aC extends an{constructor(e,n){super(e,"not-in",n)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Il(this.value.arrayValue,n)}}class lC extends an{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!p1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n=null,i=[],o=[],l=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=f,this.endAt=m,this.ue=null}}function Tg(t,e=null,n=[],i=[],o=null,l=null,f=null){return new uC(t,e,n,i,o,l,f)}function m1(t){const e=Me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Jf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ia(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ia(i)).join(",")),e.ue=n}return e.ue}function y1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ig(t.startAt,e.startAt)&&Ig(t.endAt,e.endAt)}function ed(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n=null,i=[],o=[],l=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=f,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cC(t,e,n,i,o,l,f,m){return new Kc(t,e,n,i,o,l,f,m)}function yy(t){return new Kc(t)}function Sg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hC(t){return t.collectionGroup!==null}function Za(t){const e=Me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new yn(vn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(x=>{x.isInequality()&&(m=m.add(x.field))})}),m})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new gc(l,i))}),n.has(vn.keyField().canonicalString())||e.ce.push(new gc(vn.keyField(),i))}return e.ce}function si(t){const e=Me(t);return e.le||(e.le=fC(e,Za(t))),e.le}function fC(t,e){if(t.limitType==="F")return Tg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new gc(o.field,l)});const n=t.endAt?new dc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new dc(t.startAt.position,t.startAt.inclusive):null;return Tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function td(t,e,n){return new Kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qc(t,e){return y1(si(t),si(e))&&t.limitType===e.limitType}function xy(t){return`${m1(si(t))}|lt:${t.limitType}`}function Co(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>py(o)).join(", ")}]`),Gc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>ia(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>ia(o)).join(",")),`Target(${i})`}(si(t))}; limitType=${t.limitType})`}function Yc(t,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,o){for(const l of Za(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(f,m,y){const x=Cg(f,m,y);return f.inclusive?x<=0:x<0}(i.startAt,Za(i),o)||i.endAt&&!function(f,m,y){const x=Cg(f,m,y);return f.inclusive?x>=0:x>0}(i.endAt,Za(i),o))}(t,e)}function dC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wy(t){return(e,n)=>{let i=!1;for(const o of Za(t)){const l=gC(o,e,n);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function gC(t,e,n){const i=t.field.isKeyField()?Se.comparator(e.key,n.key):function(l,f,m){const y=f.data.field(l),x=m.data.field(l);return y!==null&&x!==null?ra(y,x):De()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(n,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return ly(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Bt(Se.comparator);function Ri(){return pC}const Ey=new Bt(Se.comparator);function Ua(...t){let e=Ey;for(const n of t)e=e.insert(n.key,n);return e}function _y(t){let e=Ey;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Hs(){return Ja()}function Ay(){return Ja()}function Ja(){return new oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const mC=new Bt(Se.comparator),yC=new yn(Se.comparator);function He(...t){let e=yC;for(const n of t)e=e.add(n);return e}const xC=new yn(Qe);function wC(){return xC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function vy(t){return{integerValue:""+t}}function EC(t,e){return Kv(e)?vy(e):x1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this._=void 0}}function _C(t,e,n){return t instanceof pc?function(o,l){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&g1(l)&&(l=Xc(l)),l&&(f.fields.__previous_value__=l),{mapValue:f}}(n,e):t instanceof Tl?Iy(t,e):t instanceof Sl?Ty(t,e):function(o,l){const f=Cy(o,l),m=Rg(f)+Rg(o.Pe);return Zf(f)&&Zf(o.Pe)?vy(m):x1(o.serializer,m)}(t,e)}function AC(t,e,n){return t instanceof Tl?Iy(t,e):t instanceof Sl?Ty(t,e):n}function Cy(t,e){return t instanceof mc?function(i){return Zf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class pc extends Qc{}class Tl extends Qc{constructor(e){super(),this.elements=e}}function Iy(t,e){const n=Sy(e);for(const i of t.elements)n.some(o=>li(o,i))||n.push(i);return{arrayValue:{values:n}}}class Sl extends Qc{constructor(e){super(),this.elements=e}}function Ty(t,e){let n=Sy(e);for(const i of t.elements)n=n.filter(o=>!li(o,i));return{arrayValue:{values:n}}}class mc extends Qc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Rg(t){return Gt(t.integerValue||t.doubleValue)}function Sy(t){return p1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vC(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof Tl&&o instanceof Tl||i instanceof Sl&&o instanceof Sl?na(i.elements,o.elements,li):i instanceof mc&&o instanceof mc?li(i.Pe,o.Pe):i instanceof pc&&o instanceof pc}(t.transform,e.transform)}class CC{constructor(e,n){this.version=e,this.transformResults=n}}class oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $c{}function Ry(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new w1(t.key,oi.none()):new Ml(t.key,t.data,oi.none());{const n=t.data,i=Ir.empty();let o=new yn(vn.comparator);for(let l of e.fields)if(!o.has(l)){let f=n.field(l);f===null&&l.length>1&&(l=l.popLast(),f=n.field(l)),f===null?i.delete(l):i.set(l,f),o=o.add(l)}return new ao(t.key,i,new Vr(o.toArray()),oi.none())}}function IC(t,e,n){t instanceof Ml?function(o,l,f){const m=o.value.clone(),y=Og(o.fieldTransforms,l,f.transformResults);m.setAll(y),l.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(t,e,n):t instanceof ao?function(o,l,f){if(!Mu(o.precondition,l))return void l.convertToUnknownDocument(f.version);const m=Og(o.fieldTransforms,l,f.transformResults),y=l.data;y.setAll(Ny(o)),y.setAll(m),l.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(t,e,n):function(o,l,f){l.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function el(t,e,n,i){return t instanceof Ml?function(l,f,m,y){if(!Mu(l.precondition,f))return m;const x=l.value.clone(),v=bg(l.fieldTransforms,y,f);return x.setAll(v),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),null}(t,e,n,i):t instanceof ao?function(l,f,m,y){if(!Mu(l.precondition,f))return m;const x=bg(l.fieldTransforms,y,f),v=f.data;return v.setAll(Ny(l)),v.setAll(x),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(C=>C.field))}(t,e,n,i):function(l,f,m){return Mu(l.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(t,e,n)}function TC(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),l=Cy(i.transform,o||null);l!=null&&(n===null&&(n=Ir.empty()),n.set(i.field,l))}return n||null}function Ng(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&na(i,o,(l,f)=>vC(l,f))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ml extends $c{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ao extends $c{constructor(e,n,i,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ny(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Og(t,e,n){const i=new Map;it(t.length===n.length);for(let o=0;o<n.length;o++){const l=t[o],f=l.transform,m=e.data.field(l.field);i.set(l.field,AC(f,m,n[o]))}return i}function bg(t,e,n){const i=new Map;for(const o of t){const l=o.transform,f=n.data.field(o.field);i.set(o.field,_C(l,f,e))}return i}class w1 extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SC extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&IC(l,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=el(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=el(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ay();return this.mutations.forEach(o=>{const l=e.get(o.key),f=l.overlayedDocument;let m=this.applyToLocalView(f,l.mutatedFields);m=n.has(o.key)?null:m;const y=Ry(f,m);y!==null&&i.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,i)=>Ng(n,i))&&na(this.baseMutations,e.baseMutations,(n,i)=>Ng(n,i))}}class E1{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){it(e.mutations.length===i.length);let o=function(){return mC}();const l=e.mutations;for(let f=0;f<l.length;f++)o=o.insert(l[f].key,i[f].version);return new E1(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,qe;function bC(t){switch(t){default:return De();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function Oy(t){if(t===void 0)return Si("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Yt.OK:return oe.OK;case Yt.CANCELLED:return oe.CANCELLED;case Yt.UNKNOWN:return oe.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return oe.INTERNAL;case Yt.UNAVAILABLE:return oe.UNAVAILABLE;case Yt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Yt.NOT_FOUND:return oe.NOT_FOUND;case Yt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Yt.ABORTED:return oe.ABORTED;case Yt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Yt.DATA_LOSS:return oe.DATA_LOSS;default:return De()}}(qe=Yt||(Yt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Ks([4294967295,4294967295],0);function Dg(t){const e=DC().encode(t),n=new ey;return n.update(e),new Uint8Array(n.digest())}function Pg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ks([n,i],0),new Ks([o,l],0)]}class _1{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new za(`Invalid padding: ${n}`);if(i<0)throw new za(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new za(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ks.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(Ks.fromNumber(i)));return o.compare(PC)===1&&(o=new Ks([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Dg(e),[i,o]=Pg(n);for(let l=0;l<this.hashCount;l++){const f=this.Ee(i,o,l);if(!this.de(f))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new _1(l,o,n);return i.forEach(m=>f.insert(m)),f}insert(e){if(this.Ie===0)return;const n=Dg(e),[i,o]=Pg(n);for(let l=0;l<this.hashCount;l++){const f=this.Ee(i,o,l);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,i,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Zc(Pe.min(),o,new Bt(Qe),Ri(),He())}}class Ll{constructor(e,n,i,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ll(i,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class by{constructor(e,n){this.targetId=e,this.me=n}}class Dy{constructor(e,n,i=Tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class kg{constructor(){this.fe=0,this.ge=Lg(),this.pe=Tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),n=He(),i=He();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:De()}}),new Ll(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Lg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ri(),this.qe=Mg(),this.Qe=new Bt(Qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,o)=>{this.ze(o)&&n(o)})}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const l=o.target;if(ed(l))if(i===0){const f=new Se(l.path);this.Ue(n,f,Pn.newNoDocument(f,Pe.min()))}else it(i===1);else{const f=this.Ye(n);if(f!==i){const m=this.Ze(e),y=m?this.Xe(m,e,f):1;if(y!==0){this.je(n);const x=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,x)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=n;let f,m;try{f=ms(i).toUint8Array()}catch(y){if(y instanceof uy)return ta("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new _1(f,o,l)}catch(y){return ta(y instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Ie===0?null:m}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach(l=>{const f=this.Le.tt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.Ue(n,l,null),o++)}),o}rt(e){const n=new Map;this.Be.forEach((l,f)=>{const m=this.Je(f);if(m){if(l.current&&ed(m.target)){const y=new Se(m.target.path);this.ke.get(y)!==null||this.it(f,y)||this.Ue(f,y,Pn.newNoDocument(y,e))}l.be&&(n.set(f,l.ve()),l.Ce())}});let i=He();this.qe.forEach((l,f)=>{let m=!0;f.forEachWhile(y=>{const x=this.Je(y);return!x||x.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(l))}),this.ke.forEach((l,f)=>f.setReadTime(e));const o=new Zc(e,n,this.Qe,this.ke,i);return this.ke=Ri(),this.qe=Mg(),this.Qe=new Bt(Qe),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new kg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new yn(Qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new Bt(Se.comparator)}function Lg(){return new Bt(Se.comparator)}const MC={asc:"ASCENDING",desc:"DESCENDING"},LC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BC={and:"AND",or:"OR"};class FC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nd(t,e){return t.useProto3Json||Gc(e)?e:{value:e}}function yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Py(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VC(t,e){return yc(t,e.toTimestamp())}function ai(t){return it(!!t),Pe.fromTimestamp(function(n){const i=ps(n);return new un(i.seconds,i.nanos)}(t))}function A1(t,e){return rd(t,e).canonicalString()}function rd(t,e){const n=function(o){return new Nt(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ky(t){const e=Nt.fromString(t);return it(Vy(e)),e}function id(t,e){return A1(t.databaseId,e.path)}function Hh(t,e){const n=ky(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(Ly(n))}function My(t,e){return A1(t.databaseId,e)}function UC(t){const e=ky(t);return e.length===4?Nt.emptyPath():Ly(e)}function sd(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ly(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Bg(t,e,n){return{name:id(t,e),fields:n.value.mapValue.fields}}function zC(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(x,v){return x.useProto3Json?(it(v===void 0||typeof v=="string"),Tn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Tn.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(x){const v=x.code===void 0?oe.UNKNOWN:Oy(x.code);return new Te(v,x.message||"")}(f);n=new Dy(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Hh(t,i.document.name),l=ai(i.document.updateTime),f=i.document.createTime?ai(i.document.createTime):Pe.min(),m=new Ir({mapValue:{fields:i.document.fields}}),y=Pn.newFoundDocument(o,l,f,m),x=i.targetIds||[],v=i.removedTargetIds||[];n=new Lu(x,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Hh(t,i.document),l=i.readTime?ai(i.readTime):Pe.min(),f=Pn.newNoDocument(o,l),m=i.removedTargetIds||[];n=new Lu([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Hh(t,i.document),l=i.removedTargetIds||[];n=new Lu([],l,o,null)}else{if(!("filter"in e))return De();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,f=new OC(o,l),m=i.targetId;n=new by(m,f)}}return n}function jC(t,e){let n;if(e instanceof Ml)n={update:Bg(t,e.key,e.value)};else if(e instanceof w1)n={delete:id(t,e.key)};else if(e instanceof ao)n={update:Bg(t,e.key,e.data),updateMask:$C(e.fieldMask)};else{if(!(e instanceof SC))return De();n={verify:id(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,f){const m=f.transform;if(m instanceof pc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Tl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Sl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mc)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw De()}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:VC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De()}(t,e.precondition)),n}function WC(t,e){return t&&t.length>0?(it(e!==void 0),t.map(n=>function(o,l){let f=o.updateTime?ai(o.updateTime):ai(l);return f.isEqual(Pe.min())&&(f=ai(l)),new CC(f,o.transformResults||[])}(n,e))):[]}function HC(t,e){return{documents:[My(t,e.path)]}}function GC(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=My(t,o);const l=function(x){if(x.length!==0)return Fy(ui.create(x,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const f=function(x){if(x.length!==0)return x.map(v=>function(D){return{field:Io(D.field),direction:qC(D.dir)}}(v))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=nd(t,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(x){return{before:x.inclusive,values:x.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(e.endAt)),{_t:n,parent:o}}function XC(t){let e=UC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){it(i===1);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];n.where&&(l=function(C){const D=By(C);return D instanceof ui&&dy(D)?D.getFilters():[D]}(n.where));let f=[];n.orderBy&&(f=function(C){return C.map(D=>function(X){return new gc(To(X.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(D))}(n.orderBy));let m=null;n.limit&&(m=function(C){let D;return D=typeof C=="object"?C.value:C,Gc(D)?null:D}(n.limit));let y=null;n.startAt&&(y=function(C){const D=!!C.before,F=C.values||[];return new dc(F,D)}(n.startAt));let x=null;return n.endAt&&(x=function(C){const D=!C.before,F=C.values||[];return new dc(F,D)}(n.endAt)),cC(e,o,f,l,m,"F",y,x)}function KC(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function By(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=To(n.unaryFilter.field);return an.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=To(n.unaryFilter.field);return an.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=To(n.unaryFilter.field);return an.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=To(n.unaryFilter.field);return an.create(f,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return an.create(To(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(i=>By(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function qC(t){return MC[t]}function YC(t){return LC[t]}function QC(t){return BC[t]}function Io(t){return{fieldPath:t.canonicalString()}}function To(t){return vn.fromServerFormat(t.fieldPath)}function Fy(t){return t instanceof an?function(n){if(n.op==="=="){if(vg(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(Ag(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vg(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(Ag(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:YC(n.op),value:n.value}}}(t):t instanceof ui?function(n){const i=n.getFilters().map(o=>Fy(o));return i.length===1?i[0]:{compositeFilter:{op:QC(n.op),filters:i}}}(t):De()}function $C(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Vy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,i,o,l=Pe.min(),f=Pe.min(),m=Tn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.ct=e}}function JC(t){const e=XC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?td(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.un=new t3}addToCollectionParentIndex(e,n){return this.un.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(gs.min())}updateCollectionGroup(e,n,i){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class t3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new yn(Nt.comparator),l=!o.has(i);return this.index[n]=o.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new yn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yn{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(41943040,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new sa(0)}static kn(){return new sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg([t,e],[n,i]){const o=Qe(t,n);return o===0?Qe(e,i):o}class n3{constructor(e){this.Un=e,this.buffer=new yn(Vg),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Vg(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class r3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ga(n)?ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await da(n)}await this.Hn(3e5)})}}class i3{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Hc.oe);const i=new n3(n);return this.Jn.forEachTarget(e,o=>i.zn(o.sequenceNumber)).next(()=>this.Jn.Zn(e,o=>i.zn(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Fg)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fg):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,o,l,f,m,y,x;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),o=this.params.maximumSequenceNumbersToCollect):o=C,f=Date.now(),this.nthSequenceNumber(e,o))).next(C=>(i=C,m=Date.now(),this.removeTargets(e,i,n))).next(C=>(l=C,y=Date.now(),this.removeOrphanedDocuments(e,i))).next(C=>(x=Date.now(),vo()<=Ye.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${C} documents in `+(x-y)+`ms
Total Duration: ${x-v}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:C})))}}function s3(t,e){return new i3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&el(i.mutation,o,Vr.empty(),un.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,n,i=He()){const o=Hs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(l=>{let f=Ua();return l.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const i=Hs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,He()))}populateOverlays(e,n,i){const o=[];return i.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,i,o){let l=Ri();const f=Ja(),m=function(){return Ja()}();return n.forEach((y,x)=>{const v=i.get(x.key);o.has(x.key)&&(v===void 0||v.mutation instanceof ao)?l=l.insert(x.key,x):v!==void 0?(f.set(x.key,v.mutation.getFieldMask()),el(v.mutation,x,v.mutation.getFieldMask(),un.now())):f.set(x.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,l).next(y=>(y.forEach((x,v)=>f.set(x,v)),n.forEach((x,v)=>{var C;return m.set(x,new a3(v,(C=f.get(x))!==null&&C!==void 0?C:null))}),m))}recalculateAndSaveOverlays(e,n){const i=Ja();let o=new Bt((f,m)=>f-m),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(y=>{const x=n.get(y);if(x===null)return;let v=i.get(y)||Vr.empty();v=m.applyToLocalView(x,v),i.set(y,v);const C=(o.get(m.batchId)||He()).add(y);o=o.insert(m.batchId,C)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),x=y.key,v=y.value,C=Ay();v.forEach(D=>{if(!l.has(D)){const F=Ry(n.get(D),i.get(D));F!==null&&C.set(D,F),l=l.add(D)}}),f.push(this.documentOverlayCache.saveOverlays(e,x,C))}return ne.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(f){return Se.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(l=>{const f=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-l.size):ne.resolve(Hs());let m=-1,y=l;return f.next(x=>ne.forEach(x,(v,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),l.get(v)?ne.resolve():this.remoteDocumentCache.getEntry(e,v).next(D=>{y=y.insert(v,D)}))).next(()=>this.populateOverlays(e,x,l)).next(()=>this.computeViews(e,y,x,He())).next(v=>({batchId:m,changes:_y(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(i=>{let o=Ua();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const l=n.collectionGroup;let f=Ua();return this.indexManager.getCollectionParents(e,l).next(m=>ne.forEach(m,y=>{const x=function(C,D){return new Kc(D,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(n,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,x,i,o).next(v=>{v.forEach((C,D)=>{f=f.insert(C,D)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(f=>(l=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,o))).next(f=>{l.forEach((y,x)=>{const v=x.getKey();f.get(v)===null&&(f=f.insert(v,Pn.newInvalidDocument(v)))});let m=Ua();return f.forEach((y,x)=>{const v=l.get(y);v!==void 0&&el(v.mutation,x,Vr.empty(),un.now()),Yc(n,x)&&(m=m.insert(y,x))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ne.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ai(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:JC(o.bundledQuery),readTime:ai(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.overlays=new Bt(Se.comparator),this.Ir=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Hs();return ne.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,l)=>{this.ht(e,n,l)}),ne.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),ne.resolve()}getOverlaysForCollection(e,n,i){const o=Hs(),l=n.length+1,f=new Se(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,x=y.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let l=new Bt((x,v)=>x-v);const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>i){let v=l.get(x.largestBatchId);v===null&&(v=Hs(),l=l.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const m=Hs(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((x,v)=>m.set(x,v)),!(m.size()>=o)););return ne.resolve(m)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new NC(n,i));let l=this.Ir.get(n);l===void 0&&(l=He(),this.Ir.set(n,l)),this.Ir.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.Tr=new yn(gn.Er),this.dr=new yn(gn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new gn(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new gn(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Se(new Nt([])),i=new gn(n,e),o=new gn(n,e+1),l=[];return this.dr.forEachInRange([i,o],f=>{this.Vr(f),l.push(f.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Se(new Nt([])),i=new gn(n,e),o=new gn(n,e+1);let l=He();return this.dr.forEachInRange([i,o],f=>{l=l.add(f.key)}),l}containsKey(e){const n=new gn(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class gn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Se.comparator(e.key,n.key)||Qe(e.wr,n.wr)}static Ar(e,n){return Qe(e.wr,n.wr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new yn(gn.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new RC(l,n,i,o);this.mutationQueue.push(f);for(const m of o)this.br=this.br.add(new gn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(e,n){return ne.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new gn(n,0),o=new gn(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],f=>{const m=this.Dr(f.wr);l.push(m)}),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new yn(Qe);return n.forEach(o=>{const l=new gn(o,0),f=new gn(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,f],m=>{i=i.add(m.wr)})}),ne.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const f=new gn(new Se(l),0);let m=new yn(Qe);return this.br.forEachWhile(y=>{const x=y.key.path;return!!i.isPrefixOf(x)&&(x.length===o&&(m=m.add(y.wr)),!0)},f),ne.resolve(this.Cr(m))}Cr(e){const n=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){it(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ne.forEach(n.mutations,o=>{const l=new gn(o.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new gn(n,0),o=this.br.firstAfterOrEqual(i);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.Mr=e,this.docs=function(){return new Bt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),l=o?o.size:0,f=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let i=Ri();return n.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Pn.newInvalidDocument(o))}),ne.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let l=Ri();const f=n.path,m=new Se(f.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:x,value:{document:v}}=y.getNext();if(!f.isPrefixOf(x.path))break;x.path.length>f.length+1||Wv(jv(v),i)<=0||(o.has(v.key)||Yc(n,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,n,i,o){De()}Or(e,n){return ne.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new g3(this)}getSize(e){return ne.resolve(this.size)}}class g3 extends o3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),ne.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.persistence=e,this.Nr=new oo(n=>m1(n),y1),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new v1,this.targetCount=0,this.kr=sa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new sa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Kn(n),ne.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,i){let o=0;const l=[];return this.Nr.forEach((f,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.Nr.delete(f),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(l).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ne.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ne.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(f=>{l.push(o.markPotentiallyOrphaned(e,f))}),ne.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ne.resolve(i)}containsKey(e,n){return ne.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Hc(0),this.Kr=!1,this.Kr=!0,this.$r=new h3,this.referenceDelegate=e(this),this.Ur=new p3(this),this.indexManager=new e3,this.remoteDocumentCache=function(o){return new d3(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ZC(n),this.Gr=new u3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new c3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new f3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ye("MemoryPersistence","Starting transaction:",e);const o=new m3(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(l=>this.referenceDelegate.jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Hr(e,n){return ne.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class m3 extends Gv{constructor(e){super(),this.currentSequenceNumber=e}}class C1{constructor(e){this.persistence=e,this.Jr=new v1,this.Yr=null}static Zr(e){return new C1(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ne.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,i=>{const o=Se.fromPath(i);return this.ei(e,o).next(l=>{l||n.removeEntry(o,Pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ne.or([()=>ne.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class xc{constructor(e,n){this.persistence=e,this.ti=new oo(i=>qv(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=s3(this,n)}static Zr(e,n){return new xc(e,n)}zr(){}jr(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}Zn(e,n){return ne.forEach(this.ti,(i,o)=>this.nr(e,i,o).next(l=>l?ne.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Or(e,f=>this.nr(e,f,n).next(m=>{m||(i++,l.removeEntry(f,Pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.ti.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,i){return this.ti.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),ne.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pu(e.data.value)),n}nr(e,n,i){return ne.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.ti.get(n);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=He(),o=He();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new I1(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xA()?8:Xv(mA())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const l={result:null};return this.Yi(e,n).next(f=>{l.result=f}).next(()=>{if(!l.result)return this.Zi(e,n,o,i).next(f=>{l.result=f})}).next(()=>{if(l.result)return;const f=new y3;return this.Xi(e,n,f).next(m=>{if(l.result=m,this.zi)return this.es(e,n,f,m.size)})}).next(()=>l.result)}es(e,n,i,o){return i.documentReadCount<this.ji?(vo()<=Ye.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(vo()<=Ye.DEBUG&&ye("QueryEngine","Query:",Co(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(vo()<=Ye.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):ne.resolve())}Yi(e,n){if(Sg(n))return ne.resolve(null);let i=si(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=td(n,null,"F"),i=si(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const f=He(...l);return this.Ji.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,i).next(y=>{const x=this.ts(n,m);return this.ns(n,x,f,y.readTime)?this.Yi(e,td(n,null,"F")):this.rs(e,x,n,y)}))})))}Zi(e,n,i,o){return Sg(n)||o.isEqual(Pe.min())?ne.resolve(null):this.Ji.getDocuments(e,i).next(l=>{const f=this.ts(n,l);return this.ns(n,f,i,o)?ne.resolve(null):(vo()<=Ye.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Co(n)),this.rs(e,f,n,zv(o,-1)).next(m=>m))})}ts(e,n){let i=new yn(wy(e));return n.forEach((o,l)=>{Yc(e,l)&&(i=i.add(l))}),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,n,i){return vo()<=Ye.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Co(n)),this.Ji.getDocumentsMatchingQuery(e,n,gs.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(l=>(n.forEach(f=>{l=l.insert(f.key,f)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new Bt(Qe),this._s=new oo(l=>m1(l),y1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function E3(t,e,n,i){return new w3(t,e,n,i)}async function zy(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const f=[],m=[];let y=He();for(const x of o){f.push(x.batchId);for(const v of x.mutations)y=y.add(v.key)}for(const x of l){m.push(x.batchId);for(const v of x.mutations)y=y.add(v.key)}return n.localDocuments.getDocuments(i,y).next(x=>({hs:x,removedBatchIds:f,addedBatchIds:m}))})})}function _3(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return function(m,y,x,v){const C=x.batch,D=C.keys();let F=ne.resolve();return D.forEach(X=>{F=F.next(()=>v.getEntry(y,X)).next(G=>{const $=x.docVersions.get(X);it($!==null),G.version.compareTo($)<0&&(C.applyToRemoteDocument(G,x),G.isValidDocument()&&(G.setReadTime(x.commitVersion),v.addEntry(G)))})}),F.next(()=>m.mutationQueue.removeMutationBatch(y,C))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let y=He();for(let x=0;x<m.mutationResults.length;++x)m.mutationResults[x].transformResults.length>0&&(y=y.add(m.batch.mutations[x].key));return y}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function jy(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function A3(t,e){const n=Me(t),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const m=[];e.targetChanges.forEach((v,C)=>{const D=o.get(C);if(!D)return;m.push(n.Ur.removeMatchingKeys(l,v.removedDocuments,C).next(()=>n.Ur.addMatchingKeys(l,v.addedDocuments,C)));let F=D.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(C)!==null?F=F.withResumeToken(Tn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(v.resumeToken,i)),o=o.insert(C,F),function(G,$,U){return G.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(D,F,v)&&m.push(n.Ur.updateTargetData(l,F))});let y=Ri(),x=He();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(l,v))}),m.push(v3(l,f,e.documentUpdates).next(v=>{y=v.Ps,x=v.Is})),!i.isEqual(Pe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(l).next(C=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));m.push(v)}return ne.waitFor(m).next(()=>f.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,y,x)).next(()=>y)}).then(l=>(n.os=o,l))}function v3(t,e,n){let i=He(),o=He();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let f=Ri();return n.forEach((m,y)=>{const x=l.get(m);y.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Pe.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!x.isValidDocument()||y.version.compareTo(x.version)>0||y.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):ye("LocalStore","Ignoring outdated watch update for ",m,". Current version:",x.version," Watch version:",y.version)}),{Ps:f,Is:o}})}function C3(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function I3(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ur.getTargetData(i,e).next(l=>l?(o=l,ne.resolve(o)):n.Ur.allocateTargetId(i).next(f=>(o=new Yi(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function od(t,e,n){const i=Me(t),o=i.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!ga(f))throw f;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Ug(t,e,n){const i=Me(t);let o=Pe.min(),l=He();return i.persistence.runTransaction("Execute query","readwrite",f=>function(y,x,v){const C=Me(y),D=C._s.get(v);return D!==void 0?ne.resolve(C.os.get(D)):C.Ur.getTargetData(x,v)}(i,f,si(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(f,m.targetId).next(y=>{l=y})}).next(()=>i.ss.getDocumentsMatchingQuery(f,e,n?o:Pe.min(),n?l:He())).next(m=>(T3(i,dC(e),m),{documents:m,Ts:l})))}function T3(t,e,n){let i=t.us.get(e)||Pe.min();n.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.us.set(e,i)}class zg{constructor(){this.activeTargetIds=wC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S3{constructor(){this.so=new zg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zg,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu=null;function Gh(){return xu===null?xu=function(){return 268435456+Math.round(2147483648*Math.random())}():xu++,"0x"+xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class b3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(n,i,o,l,f){const m=Gh(),y=this.xo(n,i.toUriEncodedString());ye("RestConnection",`Sending RPC '${n}' ${m}:`,y,o);const x={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(x,l,f),this.No(n,y,x,o).then(v=>(ye("RestConnection",`Received RPC '${n}' ${m}: `,v),v),v=>{throw ta("RestConnection",`RPC '${n}' ${m} failed with error: `,v,"url: ",y,"request:",o),v})}Lo(n,i,o,l,f,m){return this.Mo(n,i,o,l,f)}Oo(n,i,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,f)=>n[f]=l),o&&o.headers.forEach((l,f)=>n[f]=l)}xo(n,i){const o=N3[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const l=Gh();return new Promise((f,m)=>{const y=new ty;y.setWithCredentials(!0),y.listenOnce(ny.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Du.NO_ERROR:const v=y.getResponseJson();ye(On,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),f(v);break;case Du.TIMEOUT:ye(On,`RPC '${e}' ${l} timed out`),m(new Te(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:const C=y.getStatus();if(ye(On,`RPC '${e}' ${l} failed with status:`,C,"response text:",y.getResponseText()),C>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const F=D==null?void 0:D.error;if(F&&F.status&&F.message){const X=function($){const U=$.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(U)>=0?U:oe.UNKNOWN}(F.status);m(new Te(X,F.message))}else m(new Te(oe.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new Te(oe.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ye(On,`RPC '${e}' ${l} completed.`)}});const x=JSON.stringify(o);ye(On,`RPC '${e}' ${l} sending request:`,o),y.send(n,"POST",x,i,15)})}Bo(e,n,i){const o=Gh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=sy(),m=iy(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(y.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,n,i),y.encodeInitMessageHeaders=!0;const v=l.join("");ye(On,`Creating RPC '${e}' stream ${o}: ${v}`,y);const C=f.createWebChannel(v,y);let D=!1,F=!1;const X=new O3({Io:$=>{F?ye(On,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(D||(ye(On,`Opening RPC '${e}' stream ${o} transport.`),C.open(),D=!0),ye(On,`RPC '${e}' stream ${o} sending:`,$),C.send($))},To:()=>C.close()}),G=($,U,M)=>{$.listen(U,L=>{try{M(L)}catch(Q){setTimeout(()=>{throw Q},0)}})};return G(C,Va.EventType.OPEN,()=>{F||(ye(On,`RPC '${e}' stream ${o} transport opened.`),X.yo())}),G(C,Va.EventType.CLOSE,()=>{F||(F=!0,ye(On,`RPC '${e}' stream ${o} transport closed`),X.So())}),G(C,Va.EventType.ERROR,$=>{F||(F=!0,ta(On,`RPC '${e}' stream ${o} transport errored:`,$),X.So(new Te(oe.UNAVAILABLE,"The operation could not be completed")))}),G(C,Va.EventType.MESSAGE,$=>{var U;if(!F){const M=$.data[0];it(!!M);const L=M,Q=L.error||((U=L[0])===null||U===void 0?void 0:U.error);if(Q){ye(On,`RPC '${e}' stream ${o} received error:`,Q);const ue=Q.status;let ie=function(N){const V=Yt[N];if(V!==void 0)return Oy(V)}(ue),b=Q.message;ie===void 0&&(ie=oe.INTERNAL,b="Unknown error status: "+ue+" with message "+Q.message),F=!0,X.So(new Te(ie,b)),C.close()}else ye(On,`RPC '${e}' stream ${o} received:`,M),X.bo(M)}}),G(m,ry.STAT_EVENT,$=>{$.stat===Qf.PROXY?ye(On,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Qf.NOPROXY&&ye(On,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{X.wo()},0),X}}function Xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){return new FC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n,i,o,l,f,m,y){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wy(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===n&&this.P_(i,o)},i=>{e(()=>{const o=new Te(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D3 extends Hy{constructor(e,n,i,o,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zC(this.serializer,e),i=function(l){if(!("targetChange"in l))return Pe.min();const f=l.targetChange;return f.targetIds&&f.targetIds.length?Pe.min():f.readTime?ai(f.readTime):Pe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=sd(this.serializer),n.addTarget=function(l,f){let m;const y=f.target;if(m=ed(y)?{documents:HC(l,y)}:{query:GC(l,y)._t},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Py(l,f.resumeToken);const x=nd(l,f.expectedCount);x!==null&&(m.expectedCount=x)}else if(f.snapshotVersion.compareTo(Pe.min())>0){m.readTime=yc(l,f.snapshotVersion.toTimestamp());const x=nd(l,f.expectedCount);x!==null&&(m.expectedCount=x)}return m}(this.serializer,e);const i=KC(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=sd(this.serializer),n.removeTarget=e,this.a_(n)}}class P3 extends Hy{constructor(e,n,i,o,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=WC(e.writeResults,e.commitTime),i=ai(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=sd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>jC(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3 extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Mo(e,rd(n,i),o,l,f)).catch(l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(oe.UNKNOWN,l.toString())})}Lo(e,n,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Lo(e,rd(n,i),o,f,m,l)).catch(f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Te(oe.UNKNOWN,f.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class M3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Si(n),this.D_=!1):ye("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n,i,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(f=>{i.enqueueAndForget(async()=>{lo(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(y){const x=Me(y);x.L_.add(4),await Bl(x),x.q_.set("Unknown"),x.L_.delete(4),await eh(x)}(this))})}),this.q_=new M3(i,o)}}async function eh(t){if(lo(t))for(const e of t.B_)await e(!0)}async function Bl(t){for(const e of t.B_)await e(!1)}function Gy(t,e){const n=Me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),N1(n)?R1(n):pa(n).r_()&&S1(n,e))}function T1(t,e){const n=Me(t),i=pa(n);n.N_.delete(e),i.r_()&&Xy(n,e),n.N_.size===0&&(i.r_()?i.o_():lo(n)&&n.q_.set("Unknown"))}function S1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).A_(e)}function Xy(t,e){t.Q_.xe(e),pa(t).R_(e)}function R1(t){t.Q_=new kC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.q_.v_()}function N1(t){return lo(t)&&!pa(t).n_()&&t.N_.size>0}function lo(t){return Me(t).L_.size===0}function Ky(t){t.Q_=void 0}async function B3(t){t.q_.set("Online")}async function F3(t){t.N_.forEach((e,n)=>{S1(t,e)})}async function V3(t,e){Ky(t),N1(t)?(t.q_.M_(e),R1(t)):t.q_.set("Unknown")}async function U3(t,e,n){if(t.q_.set("Online"),e instanceof Dy&&e.state===2&&e.cause)try{await async function(o,l){const f=l.cause;for(const m of l.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.N_.delete(m),o.Q_.removeTarget(m))}(t,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wc(t,i)}else if(e instanceof Lu?t.Q_.Ke(e):e instanceof by?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Pe.min()))try{const i=await jy(t.localStore);n.compareTo(i)>=0&&await function(l,f){const m=l.Q_.rt(f);return m.targetChanges.forEach((y,x)=>{if(y.resumeToken.approximateByteSize()>0){const v=l.N_.get(x);v&&l.N_.set(x,v.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,x)=>{const v=l.N_.get(y);if(!v)return;l.N_.set(y,v.withResumeToken(Tn.EMPTY_BYTE_STRING,v.snapshotVersion)),Xy(l,y);const C=new Yi(v.target,y,x,v.sequenceNumber);S1(l,C)}),l.remoteSyncer.applyRemoteEvent(m)}(t,n)}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),await wc(t,i)}}async function wc(t,e,n){if(!ga(e))throw e;t.L_.add(1),await Bl(t),t.q_.set("Offline"),n||(n=()=>jy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await eh(t)})}function qy(t,e){return e().catch(n=>wc(t,n,e))}async function th(t){const e=Me(t),n=xs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;z3(e);)try{const o=await C3(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,j3(e,o)}catch(o){await wc(e,o)}Yy(e)&&Qy(e)}function z3(t){return lo(t)&&t.O_.length<10}function j3(t,e){t.O_.push(e);const n=xs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Yy(t){return lo(t)&&!xs(t).n_()&&t.O_.length>0}function Qy(t){xs(t).start()}async function W3(t){xs(t).p_()}async function H3(t){const e=xs(t);for(const n of t.O_)e.m_(n.mutations)}async function G3(t,e,n){const i=t.O_.shift(),o=E1.from(i,e,n);await qy(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await th(t)}async function X3(t,e){e&&xs(t).V_&&await async function(i,o){if(function(f){return bC(f)&&f!==oe.ABORTED}(o.code)){const l=i.O_.shift();xs(i).s_(),await qy(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await th(i)}}(t,e),Yy(t)&&Qy(t)}async function Wg(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const i=lo(n);n.L_.add(3),await Bl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await eh(n)}async function K3(t,e){const n=Me(t);e?(n.L_.delete(2),await eh(n)):e||(n.L_.add(2),await Bl(n),n.q_.set("Unknown"))}function pa(t){return t.K_||(t.K_=function(n,i,o){const l=Me(n);return l.w_(),new D3(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Eo:B3.bind(null,t),Ro:F3.bind(null,t),mo:V3.bind(null,t),d_:U3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),N1(t)?R1(t):t.q_.set("Unknown")):(await t.K_.stop(),Ky(t))})),t.K_}function xs(t){return t.U_||(t.U_=function(n,i,o){const l=Me(n);return l.w_(),new P3(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:W3.bind(null,t),mo:X3.bind(null,t),f_:H3.bind(null,t),g_:G3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await th(t)):(await t.U_.stop(),t.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n,i,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,l){const f=Date.now()+i,m=new O1(e,n,f,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b1(t,e){if(Si("AsyncQueue",`${e}: ${t}`),ga(t))return new Te(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=Ua(),this.sortedSet=new Bt(this.comparator)}static emptySet(e){return new Xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Xo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.W_=new Bt(Se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class oa{constructor(e,n,i,o,l,f,m,y,x){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=x}static fromInitialDocuments(e,n,i,o,l){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new oa(e,n,Xo.emptySet(n),f,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Y3{constructor(){this.queries=Gg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=Me(n),l=o.queries;o.queries=Gg(),l.forEach((f,m)=>{for(const y of m.j_)y.onError(i)})})(this,new Te(oe.ABORTED,"Firestore shutting down"))}}function Gg(){return new oo(t=>xy(t),qc)}async function Q3(t,e){const n=Me(t);let i=3;const o=e.query;let l=n.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new q3,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await n.onListen(o,!0);break;case 1:l.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=b1(f,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&D1(n)}async function $3(t,e){const n=Me(t),i=e.query;let o=3;const l=n.queries.get(i);if(l){const f=l.j_.indexOf(e);f>=0&&(l.j_.splice(f,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Z3(t,e){const n=Me(t);let i=!1;for(const o of e){const l=o.query,f=n.queries.get(l);if(f){for(const m of f.j_)m.X_(o)&&(i=!0);f.z_=o}}i&&D1(n)}function J3(t,e,n){const i=Me(t),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(n);i.queries.delete(e)}function D1(t){t.Y_.forEach(e=>{e.next()})}var ad,Xg;(Xg=ad||(ad={})).ea="default",Xg.Cache="cache";class eI{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new oa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ad.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this.key=e}}class Zy{constructor(e){this.key=e}}class tI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=He(),this.mutatedKeys=He(),this.Aa=wy(e),this.Ra=new Xo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Hg,o=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,C)=>{const D=o.get(v),F=Yc(this.query,C)?C:null,X=!!D&&this.mutatedKeys.has(D.key),G=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let $=!1;D&&F?D.data.isEqual(F.data)?X!==G&&(i.track({type:3,doc:F}),$=!0):this.ga(D,F)||(i.track({type:2,doc:F}),$=!0,(y&&this.Aa(F,y)>0||x&&this.Aa(F,x)<0)&&(m=!0)):!D&&F?(i.track({type:0,doc:F}),$=!0):D&&!F&&(i.track({type:1,doc:D}),$=!0,(y||x)&&(m=!0)),$&&(F?(f=f.add(F),l=G?l.add(v):l.delete(v)):(f=f.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Ra:f,fa:i,ns:m,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort((v,C)=>function(F,X){const G=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return G(F)-G(X)}(v.type,C.type)||this.Aa(v.doc,C.doc)),this.pa(i),o=o!=null&&o;const m=n&&!o?this.ya():[],y=this.da.size===0&&this.current&&!o?1:0,x=y!==this.Ea;return this.Ea=y,f.length!==0||x?{snapshot:new oa(this.query,e.Ra,l,f,e.mutatedKeys,y===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=He(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Zy(i))}),this.da.forEach(i=>{e.has(i)||n.push(new $y(i))}),n}ba(e){this.Ta=e.Ts,this.da=He();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rI{constructor(e){this.key=e,this.va=!1}}class iI{constructor(e,n,i,o,l,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new oo(m=>xy(m),qc),this.Ma=new Map,this.xa=new Set,this.Oa=new Bt(Se.comparator),this.Na=new Map,this.La=new v1,this.Ba={},this.ka=new Map,this.qa=sa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sI(t,e,n=!0){const i=ix(t);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Jy(i,e,n,!0),o}async function oI(t,e){const n=ix(t);await Jy(n,e,!0,!1)}async function Jy(t,e,n,i){const o=await I3(t.localStore,si(e)),l=o.targetId,f=t.sharedClientState.addLocalQueryTarget(l,n);let m;return i&&(m=await aI(t,e,l,f==="current",o.resumeToken)),t.isPrimaryClient&&n&&Gy(t.remoteStore,o),m}async function aI(t,e,n,i,o){t.Ka=(C,D,F)=>async function(G,$,U,M){let L=$.view.ma(U);L.ns&&(L=await Ug(G.localStore,$.query,!1).then(({documents:b})=>$.view.ma(b,L)));const Q=M&&M.targetChanges.get($.targetId),ue=M&&M.targetMismatches.get($.targetId)!=null,ie=$.view.applyChanges(L,G.isPrimaryClient,Q,ue);return qg(G,$.targetId,ie.wa),ie.snapshot}(t,C,D,F);const l=await Ug(t.localStore,e,!0),f=new tI(e,l.Ts),m=f.ma(l.documents),y=Ll.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),x=f.applyChanges(m,t.isPrimaryClient,y);qg(t,n,x.wa);const v=new nI(e,n,f);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),x.snapshot}async function lI(t,e,n){const i=Me(t),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter(f=>!qc(f,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await od(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&T1(i.remoteStore,o.targetId),ld(i,o.targetId)}).catch(da)):(ld(i,o.targetId),await od(i.localStore,o.targetId,!0))}async function uI(t,e){const n=Me(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),T1(n.remoteStore,i.targetId))}async function cI(t,e,n){const i=yI(t);try{const o=await function(f,m){const y=Me(f),x=un.now(),v=m.reduce((F,X)=>F.add(X.key),He());let C,D;return y.persistence.runTransaction("Locally write mutations","readwrite",F=>{let X=Ri(),G=He();return y.cs.getEntries(F,v).next($=>{X=$,X.forEach((U,M)=>{M.isValidDocument()||(G=G.add(U))})}).next(()=>y.localDocuments.getOverlayedDocuments(F,X)).next($=>{C=$;const U=[];for(const M of m){const L=TC(M,C.get(M.key).overlayedDocument);L!=null&&U.push(new ao(M.key,L,cy(L.value.mapValue),oi.exists(!0)))}return y.mutationQueue.addMutationBatch(F,x,U,m)}).next($=>{D=$;const U=$.applyToLocalDocumentSet(C,G);return y.documentOverlayCache.saveOverlays(F,$.batchId,U)})}).then(()=>({batchId:D.batchId,changes:_y(C)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let x=f.Ba[f.currentUser.toKey()];x||(x=new Bt(Qe)),x=x.insert(m,y),f.Ba[f.currentUser.toKey()]=x}(i,o.batchId,n),await Fl(i,o.changes),await th(i.remoteStore)}catch(o){const l=b1(o,"Failed to persist write");n.reject(l)}}async function ex(t,e){const n=Me(t);try{const i=await A3(n.localStore,e);e.targetChanges.forEach((o,l)=>{const f=n.Na.get(l);f&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.va=!0:o.modifiedDocuments.size>0?it(f.va):o.removedDocuments.size>0&&(it(f.va),f.va=!1))}),await Fl(n,i,e)}catch(i){await da(i)}}function Kg(t,e,n){const i=Me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach((l,f)=>{const m=f.view.Z_(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Me(f);y.onlineState=m;let x=!1;y.queries.forEach((v,C)=>{for(const D of C.j_)D.Z_(m)&&(x=!0)}),x&&D1(y)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hI(t,e,n){const i=Me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),l=o&&o.key;if(l){let f=new Bt(Se.comparator);f=f.insert(l,Pn.newNoDocument(l,Pe.min()));const m=He().add(l),y=new Zc(Pe.min(),new Map,new Bt(Qe),f,m);await ex(i,y),i.Oa=i.Oa.remove(l),i.Na.delete(e),P1(i)}else await od(i.localStore,e,!1).then(()=>ld(i,e,n)).catch(da)}async function fI(t,e){const n=Me(t),i=e.batch.batchId;try{const o=await _3(n.localStore,e);nx(n,i,null),tx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Fl(n,o)}catch(o){await da(o)}}async function dI(t,e,n){const i=Me(t);try{const o=await function(f,m){const y=Me(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let v;return y.mutationQueue.lookupMutationBatch(x,m).next(C=>(it(C!==null),v=C.keys(),y.mutationQueue.removeMutationBatch(x,C))).next(()=>y.mutationQueue.performConsistencyCheck(x)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(x,v,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v)).next(()=>y.localDocuments.getDocuments(x,v))})}(i.localStore,e);nx(i,e,n),tx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Fl(i,o)}catch(o){await da(o)}}function tx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nx(t,e,n){const i=Me(t);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||rx(t,i)})}function rx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(T1(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),P1(t))}function qg(t,e,n){for(const i of n)i instanceof $y?(t.La.addReference(i.key,e),gI(t,i)):i instanceof Zy?(ye("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||rx(t,i.key)):De()}function gI(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ye("SyncEngine","New document in limbo: "+n),t.xa.add(i),P1(t))}function P1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Se(Nt.fromString(e)),i=t.qa.next();t.Na.set(i,new rI(n)),t.Oa=t.Oa.insert(n,i),Gy(t.remoteStore,new Yi(si(yy(n.path)),i,"TargetPurposeLimboResolution",Hc.oe))}}async function Fl(t,e,n){const i=Me(t),o=[],l=[],f=[];i.Fa.isEmpty()||(i.Fa.forEach((m,y)=>{f.push(i.Ka(y,e,n).then(x=>{var v;if((x||n)&&i.isPrimaryClient){const C=x?!x.fromCache:(v=n==null?void 0:n.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(y.targetId,C?"current":"not-current")}if(x){o.push(x);const C=I1.Wi(y.targetId,x);l.push(C)}}))}),await Promise.all(f),i.Ca.d_(o),await async function(y,x){const v=Me(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>ne.forEach(x,D=>ne.forEach(D.$i,F=>v.persistence.referenceDelegate.addReference(C,D.targetId,F)).next(()=>ne.forEach(D.Ui,F=>v.persistence.referenceDelegate.removeReference(C,D.targetId,F)))))}catch(C){if(!ga(C))throw C;ye("LocalStore","Failed to update sequence numbers: "+C)}for(const C of x){const D=C.targetId;if(!C.fromCache){const F=v.os.get(D),X=F.snapshotVersion,G=F.withLastLimboFreeSnapshotVersion(X);v.os=v.os.insert(D,G)}}}(i.localStore,l))}async function pI(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const i=await zy(n.localStore,e);n.currentUser=e,function(l,f){l.ka.forEach(m=>{m.forEach(y=>{y.reject(new Te(oe.CANCELLED,f))})}),l.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fl(n,i.hs)}}function mI(t,e){const n=Me(t),i=n.Na.get(e);if(i&&i.va)return He().add(i.key);{let o=He();const l=n.Ma.get(e);if(!l)return o;for(const f of l){const m=n.Fa.get(f);o=o.unionWith(m.view.Va)}return o}}function ix(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hI.bind(null,e),e.Ca.d_=Z3.bind(null,e.eventManager),e.Ca.$a=J3.bind(null,e.eventManager),e}function yI(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dI.bind(null,e),e}class Ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return E3(this.persistence,new x3,e.initialUser,this.serializer)}Ga(e){return new Uy(C1.Zr,this.serializer)}Wa(e){return new S3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ec.provider={build:()=>new Ec};class xI extends Ec{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){it(this.persistence.referenceDelegate instanceof xc);const i=this.persistence.referenceDelegate.garbageCollector;return new r3(i,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new Uy(i=>xc.Zr(i,n),this.serializer)}}class ud{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Kg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pI.bind(null,this.syncEngine),await K3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y3}()}createDatastore(e){const n=Jc(e.databaseInfo.databaseId),i=function(l){return new b3(l)}(e.databaseInfo);return function(l,f,m,y){return new k3(l,f,m,y)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,l,f,m){return new L3(i,o,l,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Kg(this.syncEngine,n,0),function(){return jg.D()?new jg:new R3}())}createSyncEngine(e,n){return function(o,l,f,m,y,x,v){const C=new iI(o,l,f,m,y,x);return v&&(C.Qa=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=Me(o);ye("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Bl(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ud.provider={build:()=>new ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,i,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=bn.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async f=>{ye("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(i,f=>(ye("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=b1(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kh(t,e){t.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await zy(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _I(t);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Wg(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>Wg(e.remoteStore,o)),t._onlineComponents=e}async function _I(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ta("Error using user provided cache. Falling back to memory cache: "+n),await Kh(t,new Ec)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Kh(t,new xI(void 0));return t._offlineComponents}async function sx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await Yg(t,t._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await Yg(t,new ud))),t._onlineComponents}function AI(t){return sx(t).then(e=>e.syncEngine)}async function vI(t){const e=await sx(t),n=e.eventManager;return n.onListen=sI.bind(null,e.syncEngine),n.onUnlisten=lI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uI.bind(null,e.syncEngine),n}function CI(t,e,n={}){const i=new ls;return t.asyncQueue.enqueueAndForget(async()=>function(l,f,m,y,x){const v=new wI({next:D=>{v.Za(),f.enqueueAndForget(()=>$3(l,C)),D.fromCache&&y.source==="server"?x.reject(new Te(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(D)},error:D=>x.reject(D)}),C=new eI(m,v,{includeMetadataChanges:!0,_a:!0});return Q3(l,C)}(await vI(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e,n){if(!n)throw new Te(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function II(t,e,n,i){if(e===!0&&i===!0)throw new Te(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $g(t){if(!Se.isDocumentKey(t))throw new Te(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zg(t){if(Se.isDocumentKey(t))throw new Te(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function k1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function Rl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=k1(t);throw new Te(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}II("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ox((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Dv;switch(i.type){case"firstParty":return new Lv(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Qg.get(n);i&&(ye("ComponentProvider","Removing Datastore"),Qg.delete(n),i.terminate())}(this),Promise.resolve()}}function TI(t,e,n,i={}){var o;const l=(t=Rl(t,nh))._getSettings(),f=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==f&&ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:f,ssl:!1})),i.mockUserToken){let m,y;if(typeof i.mockUserToken=="string")m=i.mockUserToken,y=bn.MOCK_USER;else{m=pA(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Te(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new bn(x)}t._authCredentials=new Pv(new oy(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new rh(this.firestore,e,this._query)}}class jr{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jr(this.firestore,e,this._key)}}class us extends rh{constructor(e,n,i){super(e,n,yy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jr(this.firestore,null,new Se(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function lx(t,e,...n){if(t=ds(t),ax("collection","path",e),t instanceof nh){const i=Nt.fromString(e,...n);return Zg(i),new us(t,null,i)}{if(!(t instanceof jr||t instanceof us))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return Zg(i),new us(t.firestore,null,i)}}function ux(t,e,...n){if(t=ds(t),arguments.length===1&&(e=ay.newId()),ax("doc","path",e),t instanceof nh){const i=Nt.fromString(e,...n);return $g(i),new jr(t,null,new Se(i))}{if(!(t instanceof jr||t instanceof us))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return $g(i),new jr(t.firestore,t instanceof us?t.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wy(this,"async_queue_retry"),this.Vu=()=>{const i=Xh();i&&ye("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ls;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ga(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(i);throw Si("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=O1.createAndSchedule(this,e,n,i,l=>this.yu(l));return this.Tu.push(o),o}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ih extends nh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new ep,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ep(e),this._firestoreClient=void 0,await e}}}function SI(t,e){const n=typeof t=="object"?t:$2(),i=typeof t=="string"?t:"(default)",o=Y2(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=W2("firestore");l&&TI(o,...l)}return o}function cx(t){if(t._terminated)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RI(t),t._firestoreClient}function RI(t){var e,n,i;const o=t._freezeSettings(),l=function(m,y,x,v){return new $v(m,y,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ox(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new EI(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(Tn.fromBase64String(e))}catch(n){throw new Te(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new aa(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=/^__.*__$/;class OI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ml(e,this.data,n,this.fieldTransforms)}}function fx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class F1{constructor(e,n,i,o,l,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new F1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _c(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fx(this.Cu)&&NI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Jc(e)}Qu(e,n,i,o=!1){return new F1({Cu:e,methodName:n,qu:i,path:vn.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DI(t){const e=t._freezeSettings(),n=Jc(t._databaseId);return new bI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PI(t,e,n,i,o,l={}){const f=t.Qu(l.merge||l.mergeFields?2:0,e,n,o);mx("Data must be an object, but it was:",f,i);const m=gx(i,f);let y,x;if(l.merge)y=new Vr(f.fieldMask),x=f.fieldTransforms;else if(l.mergeFields){const v=[];for(const C of l.mergeFields){const D=kI(e,C,n);if(!f.contains(D))throw new Te(oe.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);LI(v,D)||v.push(D)}y=new Vr(v),x=f.fieldTransforms.filter(C=>y.covers(C.field))}else y=null,x=f.fieldTransforms;return new OI(new Ir(m),y,x)}function dx(t,e){if(px(t=ds(t)))return mx("Unsupported field value:",e,t),gx(t,e);if(t instanceof hx)return function(i,o){if(!fx(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,o){const l=[];let f=0;for(const m of i){let y=dx(m,o.Lu(f));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),f++}return{arrayValue:{values:l}}}(t,e)}return function(i,o){if((i=ds(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return EC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=un.fromDate(i);return{timestampValue:yc(o.serializer,l)}}if(i instanceof un){const l=new un(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yc(o.serializer,l)}}if(i instanceof L1)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof aa)return{bytesValue:Py(o.serializer,i._byteString)};if(i instanceof jr){const l=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(l))throw o.Bu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:A1(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof B1)return function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw m.Bu("VectorValues must only contain numeric values.");return x1(m.serializer,y)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${k1(i)}`)}(t,e)}function gx(t,e){const n={};return ly(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(t,(i,o)=>{const l=dx(o,e.Mu(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function px(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof un||t instanceof L1||t instanceof aa||t instanceof jr||t instanceof hx||t instanceof B1)}function mx(t,e,n){if(!px(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=k1(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function kI(t,e,n){if((e=ds(e))instanceof M1)return e._internalPath;if(typeof e=="string")return yx(t,e);throw _c("Field path arguments must be of type string or ",t,!1,void 0,n)}const MI=new RegExp("[~\\*/\\[\\]]");function yx(t,e,n){if(e.search(MI)>=0)throw _c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new M1(...e.split("."))._internalPath}catch{throw _c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _c(t,e,n,i,o){const l=i&&!i.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||f)&&(y+=" (found",l&&(y+=` in field ${i}`),f&&(y+=` in document ${o}`),y+=")"),new Te(oe.INVALID_ARGUMENT,m+t+y)}function LI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,i,o,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BI extends xx{data(){return super.data()}}function wx(t,e){return typeof e=="string"?yx(t,e):e instanceof M1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VI{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return so(e,(o,l)=>{i[o]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,o;const l=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(f=>Gt(f.doubleValue));return new B1(l)}convertGeoPoint(e){return new L1(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Xc(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const n=ps(e);return new un(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Nt.fromString(e);it(Vy(i));const o=new Cl(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return o.isEqual(n)||Si(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zI extends xx{constructor(e,n,i,o,l,f){super(e,n,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(wx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Bu extends zI{data(e={}){return super.data(e)}}class jI{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new wu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Bu(this._firestore,this._userDataWriter,i.key,i,new wu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new Bu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const y=new Bu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,v=-1;return m.type!==0&&(x=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:WI(m.type),doc:y,oldIndex:x,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function WI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}class HI extends VI{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jr(this.firestore,null,n)}}function GI(t){t=Rl(t,rh);const e=Rl(t.firestore,ih),n=cx(e),i=new HI(e);return FI(t._query),CI(n,t._query).then(o=>new jI(e,i,t,o))}function XI(t){return Ex(Rl(t.firestore,ih),[new w1(t._key,oi.none())])}function KI(t,e){const n=Rl(t.firestore,ih),i=ux(t),o=UI(t.converter,e);return Ex(n,[PI(DI(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,oi.exists(!1))]).then(()=>i)}function Ex(t,e){return function(i,o){const l=new ls;return i.asyncQueue.enqueueAndForget(async()=>cI(await AI(i),o,l)),l.promise}(cx(t),e)}(function(e,n=!0){(function(o){fa=o})(Av),El(new ea("firestore",(i,{instanceIdentifier:o,options:l})=>{const f=i.getProvider("app").getImmediate(),m=new ih(new kv(i.getProvider("auth-internal")),new Fv(i.getProvider("app-check-internal")),function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Te(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(x.options.projectId,v)}(f,o),f);return l=Object.assign({useFetchStreams:n},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),as(mg,"4.7.4",e),as(mg,"4.7.4","esm2017")})();var qI="firebase",YI="11.0.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(qI,YI,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="type.googleapis.com/google.protobuf.Int64Value",$I="type.googleapis.com/google.protobuf.UInt64Value";function _x(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function cd(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>cd(e));if(typeof t=="function"||typeof t=="object")return _x(t,e=>cd(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ac(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case QI:case $I:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ac(e)):typeof t=="function"||typeof t=="object"?_x(t,e=>Ac(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cs extends io{constructor(e,n,i){super(`${V1}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,cs.prototype)}}function ZI(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function JI(t,e){let n=ZI(t),i=n,o;try{const l=e&&e.error;if(l){const f=l.status;if(typeof f=="string"){if(!tp[f])return new cs("internal","internal");n=tp[f],i=f}const m=l.message;typeof m=="string"&&(i=m),o=l.details,o!==void 0&&(o=Ac(o))}}catch{}return n==="ok"?null:new cs(n,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="us-central1";function tT(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new cs("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class nT{constructor(e,n,i,o,l=hd){this.app=e,this.emulatorOrigin=null,this.contextProvider=new eT(n,i,o),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(l);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=hd}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function rT(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function iT(t,e,n){return i=>oT(t,e,i,{})}async function sT(t,e,n){n["Content-Type"]="application/json";let i;try{i=await fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}function oT(t,e,n,i){const o=t._url(e);return aT(t,o,n,i)}async function aT(t,e,n,i){n=cd(n);const o={data:n},l={},f=await t.contextProvider.getContext(i.limitedUseAppCheckTokens);f.authToken&&(l.Authorization="Bearer "+f.authToken),f.messagingToken&&(l["Firebase-Instance-ID-Token"]=f.messagingToken),f.appCheckToken!==null&&(l["X-Firebase-AppCheck"]=f.appCheckToken);const m=i.timeout||7e4,y=tT(m),x=await Promise.race([sT(e,o,l),y.promise,t.cancelAllRequests]);if(y.cancel(),!x)throw new cs("cancelled","Firebase Functions instance was deleted.");const v=JI(x.status,x.json);if(v)throw v;if(!x.json)throw new cs("internal","Response is not valid JSON object.");let C=x.json.data;if(typeof C>"u"&&(C=x.json.result),typeof C>"u")throw new cs("internal","Response is missing data field.");return{data:Ac(C)}}const np="@firebase/functions",rp="0.11.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="auth-internal",uT="app-check-internal",cT="messaging-internal";function hT(t){const e=(n,{instanceIdentifier:i})=>{const o=n.getProvider("app").getImmediate(),l=n.getProvider(lT),f=n.getProvider(cT),m=n.getProvider(uT);return new nT(o,l,f,m,i)};El(new ea(V1,e,"PUBLIC").setMultipleInstances(!0)),as(np,rp,t),as(np,rp,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t=$2(),e=hd){const i=Y2(ds(t),V1).getImmediate({identifier:e}),o=W2("functions");return o&&dT(i,...o),i}function dT(t,e,n){rT(ds(t),e,n)}function gT(t,e,n){return iT(ds(t),e)}hT();const pT={apiKey:"AIzaSyDyHoMrqMyToffOdOm0XAxn6wu6g7CRTTc",authDomain:"controllween-api.firebaseapp.com",projectId:"controllween-api",storageBucket:"controllween-api.appspot.com",messagingSenderId:"206952565752",appId:"1:206952565752:web:cf5df98f54b7999e17e40d"},Ax=Q2(pT),fd=SI(Ax),mT=fT(Ax);function yT(){const[t,e]=ge.useState(""),[n,i]=ge.useState(""),[o,l]=ge.useState(""),f=async()=>{if(!t||!n){l("Nome e telefone são obrigatórios!");return}try{const m=await KI(lx(fd,"convidados"),{nome:t,telefone:n,validado:!1});l("Convidado cadastrado com sucesso!"),e(""),i(""),console.log("Convidado cadastrado com ID:",m.id)}catch(m){console.error("Erro ao cadastrar convidado:",m),l("Erro ao cadastrar convidado.")}};return xe.jsxs("div",{children:[xe.jsx("h2",{children:"Cadastrar Convidado"}),o&&xe.jsx("p",{children:o}),xe.jsx("input",{type:"text",placeholder:"Nome",value:t,onChange:m=>e(m.target.value)}),xe.jsx("input",{type:"text",placeholder:"Telefone",value:n,onChange:m=>i(m.target.value)}),xe.jsx("button",{onClick:f,children:"Cadastrar"})]})}function xT(){const[t,e]=ge.useState([]),[n,i]=ge.useState(""),[o,l]=ge.useState(0),[f,m]=ge.useState(0);ge.useEffect(()=>{(async()=>{try{const D=(await GI(lx(fd,"convidados"))).docs.map(F=>({id:F.id,...F.data()}));e(D),l(D.length),m(D.filter(F=>F.validado).length)}catch(C){console.error("Erro ao buscar convidados:",C),i("Erro ao carregar a lista de convidados.")}})()},[]);const y=async v=>{if(window.confirm("Tem certeza que deseja excluir?"))try{await XI(ux(fd,"convidados",v)),e(C=>C.filter(D=>D.id!==v)),i("Convidado excluído com sucesso."),l(C=>C-1)}catch(C){console.error("Erro ao excluir convidado:",C),i("Erro ao excluir o convidado.")}},x=async(v,C)=>{try{const G=`Olá, você está recebendo o seu QR Code para entrada na festa de Halloween. Guarde para garantir sua entrada. Acesse seu QR Code aqui: ${(await gT(mT,"generateQrCode")({id:v})).data.qrcodeUrl}`,$=`https://api.whatsapp.com/send?phone=${C}&text=${encodeURIComponent(G)}`;window.open($,"_blank")}catch(D){console.error("Erro ao gerar e enviar QR Code:",D),i("Erro ao gerar e enviar o QR Code.")}};return xe.jsxs("div",{children:[xe.jsx("h2",{children:"Lista de Convidados"}),n&&xe.jsx("p",{children:n}),xe.jsxs("div",{children:[xe.jsxs("p",{children:["Usuários cadastrados: ",o]}),xe.jsxs("p",{children:["Usuários validados: ",f]})]}),xe.jsxs("table",{children:[xe.jsx("thead",{children:xe.jsxs("tr",{children:[xe.jsx("th",{children:"ID"}),xe.jsx("th",{children:"Nome"}),xe.jsx("th",{children:"Telefone"}),xe.jsx("th",{children:"Ações"}),xe.jsx("th",{children:"Validado"})]})}),xe.jsx("tbody",{children:t.map(v=>xe.jsxs("tr",{children:[xe.jsx("td",{children:v.id}),xe.jsx("td",{children:v.nome}),xe.jsx("td",{children:v.telefone}),xe.jsxs("td",{children:[xe.jsx("button",{onClick:()=>y(v.id),children:"Excluir"}),xe.jsx("button",{onClick:()=>x(v.id,v.telefone),children:"Enviar QR"})]}),xe.jsx("td",{children:v.validado?"Sim":"Não"})]},v.id))})]})]})}var we;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var ip=new Map([[we.QR_CODE,"QR_CODE"],[we.AZTEC,"AZTEC"],[we.CODABAR,"CODABAR"],[we.CODE_39,"CODE_39"],[we.CODE_93,"CODE_93"],[we.CODE_128,"CODE_128"],[we.DATA_MATRIX,"DATA_MATRIX"],[we.MAXICODE,"MAXICODE"],[we.ITF,"ITF"],[we.EAN_13,"EAN_13"],[we.EAN_8,"EAN_8"],[we.PDF_417,"PDF_417"],[we.RSS_14,"RSS_14"],[we.RSS_EXPANDED,"RSS_EXPANDED"],[we.UPC_A,"UPC_A"],[we.UPC_E,"UPC_E"],[we.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),sp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(sp||(sp={}));function wT(t){return Object.values(we).includes(t)}var vc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(vc||(vc={}));var ET=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[vc.SCAN_TYPE_CAMERA,vc.SCAN_TYPE_FILE],t}(),vx=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!ip.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,ip.get(e))},t}(),op=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),dd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(dd||(dd={}));var _T=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:dd.UNKWOWN_ERROR}},t}(),AT=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function mi(t){return typeof t>"u"||t===null}var Vo=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Cx=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),m=0,y=f;m<y.length;m++){var x=y[m];if(l.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),gd={exports:{}};(function(t,e){(function(n,i){i(e)})(Ia,function(n){function i(I){return I==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,r){I.__proto__=r}||function(I,r){for(var s in r)r.hasOwnProperty(s)&&(I[s]=r[s])};function l(I,r){o(I,r);function s(){this.constructor=I}I.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(I,r){var s=Object.setPrototypeOf;s?s(I,r):I.__proto__=r}function m(I,r){r===void 0&&(r=I.constructor);var s=Error.captureStackTrace;s&&s(I,r)}var y=function(I){l(r,I);function r(s){var a=this.constructor,u=I.call(this,s)||this;return Object.defineProperty(u,"name",{value:a.name,enumerable:!1}),f(u,a.prototype),m(u),u}return r}(Error);class x extends y{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}x.kind="Exception";class v extends x{}v.kind="ArgumentException";class C extends x{}C.kind="IllegalArgumentException";class D{constructor(r){if(this.binarizer=r,r===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,u){const c=this.binarizer.getLuminanceSource().crop(r,s,a,u);return new D(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new D(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new D(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class F extends x{static getChecksumInstance(){return new F}}F.kind="ChecksumException";class X{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class G{static arraycopy(r,s,a,u,c){for(;c--;)a[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class $ extends x{}$.kind="IndexOutOfBoundsException";class U extends ${constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}U.kind="ArrayIndexOutOfBoundsException";class M{static fill(r,s){for(let a=0,u=r.length;a<u;a++)r[a]=s}static fillWithin(r,s,a,u){M.rangeCheck(r.length,s,a);for(let c=s;c<a;c++)r[c]=u}static rangeCheck(r,s,a){if(s>a)throw new C("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new U(s);if(a>r)throw new U(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(c=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(c=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,u=r.length;a<u;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const u=a-s,c=new Int32Array(u);return G.arraycopy(r,s,c,0,u),c}static binarySearch(r,s,a){a===void 0&&(a=M.numberComparator);let u=0,c=r.length-1;for(;u<=c;){const h=c+u>>1,d=a(s,r[h]);if(d>0)u=h+1;else if(d<0)c=h-1;else return h}return-u-1}static numberComparator(r,s){return r-s}}class L{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}L.MIN_VALUE_32_BITS=-2147483648,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=Q.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=Q.makeArray(r);G.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let u=Math.floor(r/32),c=a[u];c&=~((1<<(r&31))-1);const h=a.length;for(;c===0;){if(++u===h)return s;c=a[u]}const d=u*32+L.numberOfTrailingZeros(c);return d>s?s:d}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let u=Math.floor(r/32),c=~a[u];c&=~((1<<(r&31))-1);const h=a.length;for(;c===0;){if(++u===h)return s;c=~a[u]}const d=u*32+L.numberOfTrailingZeros(c);return d>s?s:d}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new C;if(s===r)return;s--;const a=Math.floor(r/32),u=Math.floor(s/32),c=this.bits;for(let h=a;h<=u;h++){const d=h>a?0:r&31,w=(2<<(h<u?31:s&31))-(1<<d);c[h]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new C;if(s===r)return!0;s--;const u=Math.floor(r/32),c=Math.floor(s/32),h=this.bits;for(let d=u;d<=c;d++){const p=d>u?0:r&31,_=(2<<(d<c?31:s&31))-(1<<p)&4294967295;if((h[d]&_)!==(a?_:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new C("Sizes don't match");const s=this.bits;for(let a=0,u=s.length;a<u;a++)s[a]^=r.bits[a]}toBytes(r,s,a,u){for(let c=0;c<u;c++){let h=0;for(let d=0;d<8;d++)this.get(r)&&(h|=1<<7-d),r++;s[a+c]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,u=this.bits;for(let c=0;c<a;c++){let h=u[c];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[s-c]=h}if(this.size!==a*32){const c=a*32-this.size;let h=r[0]>>>c;for(let d=1;d<a;d++){const p=r[d];h|=p<<32-c,r[d-1]=h,h=p>>>c}r[a-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Q))return!1;const s=r;return this.size===s.size&&M.equals(this.bits,s.bits)}hashCode(){return 31*this.size+M.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new Q(this.size,this.bits.slice())}}var ue;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ue||(ue={}));var ie=ue;class b extends x{static getFormatInstance(){return new b}}b.kind="FormatException";var O;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(O||(O={}));class N{constructor(r,s,a,...u){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,N.VALUE_IDENTIFIER_TO_ECI.set(r,this),N.NAME_TO_ECI.set(a,this);const c=this.values;for(let h=0,d=c.length;h!==d;h++){const p=c[h];N.VALUES_TO_ECI.set(p,this)}for(const h of u)N.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new b("incorect value");const s=N.VALUES_TO_ECI.get(r);if(s===void 0)throw new b("incorect value");return s}static getCharacterSetECIByName(r){const s=N.NAME_TO_ECI.get(r);if(s===void 0)throw new b("incorect value");return s}equals(r){if(!(r instanceof N))return!1;const s=r;return this.getName()===s.getName()}}N.VALUE_IDENTIFIER_TO_ECI=new Map,N.VALUES_TO_ECI=new Map,N.NAME_TO_ECI=new Map,N.Cp437=new N(O.Cp437,Int32Array.from([0,2]),"Cp437"),N.ISO8859_1=new N(O.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),N.ISO8859_2=new N(O.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),N.ISO8859_3=new N(O.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),N.ISO8859_4=new N(O.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),N.ISO8859_5=new N(O.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),N.ISO8859_6=new N(O.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),N.ISO8859_7=new N(O.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),N.ISO8859_8=new N(O.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),N.ISO8859_9=new N(O.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),N.ISO8859_10=new N(O.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),N.ISO8859_11=new N(O.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),N.ISO8859_13=new N(O.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),N.ISO8859_14=new N(O.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),N.ISO8859_15=new N(O.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),N.ISO8859_16=new N(O.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),N.SJIS=new N(O.SJIS,20,"SJIS","Shift_JIS"),N.Cp1250=new N(O.Cp1250,21,"Cp1250","windows-1250"),N.Cp1251=new N(O.Cp1251,22,"Cp1251","windows-1251"),N.Cp1252=new N(O.Cp1252,23,"Cp1252","windows-1252"),N.Cp1256=new N(O.Cp1256,24,"Cp1256","windows-1256"),N.UnicodeBigUnmarked=new N(O.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),N.UTF8=new N(O.UTF8,26,"UTF8","UTF-8"),N.ASCII=new N(O.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),N.Big5=new N(O.Big5,28,"Big5"),N.GB18030=new N(O.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),N.EUC_KR=new N(O.EUC_KR,30,"EUC_KR","EUC-KR");class V extends x{}V.kind="UnsupportedOperationException";class H{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!H.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof N?r:N.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(H.isDecodeFallbackSupported(a)){let u="";for(let c=0,h=r.length;c<h;c++){let d=r[c].toString(16);d.length<2&&(d="0"+d),u+="%"+d}return decodeURIComponent(u)}if(a.equals(N.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new V(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(N.UTF8)||r.equals(N.ISO8859_1)||r.equals(N.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let c=0;c<a.length;c++)u.push(a[c].charCodeAt(0));return new Uint8Array(u)}}class j{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return H.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(ie.CHARACTER_SET)!==void 0)return s.get(ie.CHARACTER_SET).toString();const a=r.length;let u=!0,c=!0,h=!0,d=0,p=0,w=0,_=0,T=0,S=0,k=0,z=0,W=0,Y=0,ee=0;const le=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ce=0;ce<a&&(u||c||h);ce++){const se=r[ce]&255;h&&(d>0?se&128?d--:h=!1:se&128&&(se&64?(d++,se&32?(d++,se&16?(d++,se&8?h=!1:_++):w++):p++):h=!1)),u&&(se>127&&se<160?u=!1:se>159&&(se<192||se===215||se===247)&&ee++),c&&(T>0?se<64||se===127||se>252?c=!1:T--:se===128||se===160||se>239?c=!1:se>160&&se<224?(S++,z=0,k++,k>W&&(W=k)):se>127?(T++,k=0,z++,z>Y&&(Y=z)):(k=0,z=0))}return h&&d>0&&(h=!1),c&&T>0&&(c=!1),h&&(le||p+w+_>0)?j.UTF8:c&&(j.ASSUME_SHIFT_JIS||W>=3||Y>=3)?j.SHIFT_JIS:u&&c?W===2&&S===2||ee*10>=a?j.SHIFT_JIS:j.ISO88591:u?j.ISO88591:c?j.SHIFT_JIS:h?j.UTF8:j.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function u(h,d,p,w,_,T){if(h==="%%")return"%";if(s[++a]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let S=_?parseInt(_.substr(1)):void 0,k;switch(T){case"s":k=s[a];break;case"c":k=s[a][0];break;case"f":k=parseFloat(s[a]).toFixed(h);break;case"p":k=parseFloat(s[a]).toPrecision(h);break;case"e":k=parseFloat(s[a]).toExponential(h);break;case"x":k=parseInt(s[a]).toString(S||16);break;case"d":k=parseFloat(parseInt(s[a],S||10).toPrecision(h)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(S);let z=parseInt(p),W=p&&p[0]+""=="0"?"0":" ";for(;k.length<z;)k=d!==void 0?k+W:W+k;return k}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,u)}static getBytes(r,s){return H.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}j.SHIFT_JIS=N.SJIS.getName(),j.GB2312="GB2312",j.ISO88591=N.ISO8859_1.getName(),j.EUC_JP="EUC_JP",j.UTF8=N.UTF8.getName(),j.PLATFORM_DEFAULT_ENCODING=j.UTF8,j.ASSUME_SHIFT_JIS=!1;class B{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=j.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let u=s;s<s+a;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class et{constructor(r,s,a,u){if(this.width=r,this.height=s,this.rowSize=a,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new C("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,u=new et(a,s);for(let c=0;c<s;c++){const h=r[c];for(let d=0;d<a;d++)h[d]&&u.set(d,c)}return u}static parseFromString(r,s,a){if(r===null)throw new C("stringRepresentation cannot be null");const u=new Array(r.length);let c=0,h=0,d=-1,p=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(c>h){if(d===-1)d=c-h;else if(c-h!==d)throw new C("row lengths do not match");h=c,p++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,u[c]=!0,c++;else if(r.substring(w,w+a.length)===a)w+=a.length,u[c]=!1,c++;else throw new C("illegal character encountered: "+r.substring(w));if(c>h){if(d===-1)d=c-h;else if(c-h!==d)throw new C("row lengths do not match");p++}const _=new et(d,p);for(let T=0;T<c;T++)u[T]&&_.set(Math.floor(T%d),Math.floor(T/d));return _}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new C("input matrix dimensions do not match");const s=new Q(Math.floor(this.width/32)+1),a=this.rowSize,u=this.bits;for(let c=0,h=this.height;c<h;c++){const d=c*a,p=r.getRow(c,s).getBitArray();for(let w=0;w<a;w++)u[d+w]^=p[w]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,u){if(s<0||r<0)throw new C("Left and top must be nonnegative");if(u<1||a<1)throw new C("Height and width must be at least 1");const c=r+a,h=s+u;if(h>this.height||c>this.width)throw new C("The region must fit inside the matrix");const d=this.rowSize,p=this.bits;for(let w=s;w<h;w++){const _=w*d;for(let T=r;T<c;T++)p[_+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new Q(this.width):s.clear();const a=this.rowSize,u=this.bits,c=r*a;for(let h=0;h<a;h++)s.setBulk(h*32,u[c+h]);return s}setRow(r,s){G.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new Q(r),u=new Q(r);for(let c=0,h=Math.floor((s+1)/2);c<h;c++)a=this.getRow(c,a),u=this.getRow(s-1-c,u),a.reverse(),u.reverse(),this.setRow(c,u),this.setRow(s-1-c,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,u=this.bits;let c=r,h=s,d=-1,p=-1;for(let w=0;w<s;w++)for(let _=0;_<a;_++){const T=u[w*a+_];if(T!==0){if(w<h&&(h=w),w>p&&(p=w),_*32<c){let S=0;for(;!(T<<31-S&4294967295);)S++;_*32+S<c&&(c=_*32+S)}if(_*32+31>d){let S=31;for(;!(T>>>S);)S--;_*32+S>d&&(d=_*32+S)}}}return d<c||p<h?null:Int32Array.from([c,h,d-c+1,p-h+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const u=a/r;let c=a%r*32;const h=s[a];let d=0;for(;!(h<<31-d&4294967295);)d++;return c+=d,Int32Array.from([c,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const u=Math.floor(a/r);let c=Math.floor(a%r)*32;const h=s[a];let d=31;for(;!(h>>>d);)d--;return c+=d,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof et))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&M.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+M.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let u=new B;for(let c=0,h=this.height;c<h;c++){for(let d=0,p=this.width;d<p;d++)u.append(this.get(d,c)?r:s);u.append(a)}return u.toString()}clone(){return new et(this.width,this.height,this.rowSize,this.bits.slice())}}class te extends x{static getNotFoundInstance(){return new te}}te.kind="NotFoundException";class It extends X{constructor(r){super(r),this.luminances=It.EMPTY,this.buckets=new Int32Array(It.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),u=a.getWidth();s==null||s.getSize()<u?s=new Q(u):s.clear(),this.initArrays(u);const c=a.getRow(r,this.luminances),h=this.buckets;for(let p=0;p<u;p++)h[(c[p]&255)>>It.LUMINANCE_SHIFT]++;const d=It.estimateBlackPoint(h);if(u<3)for(let p=0;p<u;p++)(c[p]&255)<d&&s.set(p);else{let p=c[0]&255,w=c[1]&255;for(let _=1;_<u-1;_++){const T=c[_+1]&255;(w*4-p-T)/2<d&&s.set(_),p=w,w=T}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),u=new et(s,a);this.initArrays(s);const c=this.buckets;for(let p=1;p<5;p++){const w=Math.floor(a*p/5),_=r.getRow(w,this.luminances),T=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<T;S++){const k=_[S]&255;c[k>>It.LUMINANCE_SHIFT]++}}const h=It.estimateBlackPoint(c),d=r.getMatrix();for(let p=0;p<a;p++){const w=p*s;for(let _=0;_<s;_++)(d[w+_]&255)<h&&u.set(_,p)}return u}createBinarizer(r){return new It(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<It.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,u=0,c=0;for(let _=0;_<s;_++)r[_]>c&&(u=_,c=r[_]),r[_]>a&&(a=r[_]);let h=0,d=0;for(let _=0;_<s;_++){const T=_-u,S=r[_]*T*T;S>d&&(h=_,d=S)}if(u>h){const _=u;u=h,h=_}if(h-u<=s/16)throw new te;let p=h-1,w=-1;for(let _=h-1;_>u;_--){const T=_-u,S=T*T*(h-_)*(a-r[_]);S>w&&(p=_,w=S)}return p<<It.LUMINANCE_SHIFT}}It.LUMINANCE_BITS=5,It.LUMINANCE_SHIFT=8-It.LUMINANCE_BITS,It.LUMINANCE_BUCKETS=1<<It.LUMINANCE_BITS,It.EMPTY=Uint8ClampedArray.from([0]);class Ne extends It{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=Ne.MINIMUM_DIMENSION&&a>=Ne.MINIMUM_DIMENSION){const u=r.getMatrix();let c=s>>Ne.BLOCK_SIZE_POWER;s&Ne.BLOCK_SIZE_MASK&&c++;let h=a>>Ne.BLOCK_SIZE_POWER;a&Ne.BLOCK_SIZE_MASK&&h++;const d=Ne.calculateBlackPoints(u,c,h,s,a),p=new et(s,a);Ne.calculateThresholdForBlock(u,c,h,s,a,d,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Ne(r)}static calculateThresholdForBlock(r,s,a,u,c,h,d){const p=c-Ne.BLOCK_SIZE,w=u-Ne.BLOCK_SIZE;for(let _=0;_<a;_++){let T=_<<Ne.BLOCK_SIZE_POWER;T>p&&(T=p);const S=Ne.cap(_,2,a-3);for(let k=0;k<s;k++){let z=k<<Ne.BLOCK_SIZE_POWER;z>w&&(z=w);const W=Ne.cap(k,2,s-3);let Y=0;for(let le=-2;le<=2;le++){const ce=h[S+le];Y+=ce[W-2]+ce[W-1]+ce[W]+ce[W+1]+ce[W+2]}const ee=Y/25;Ne.thresholdBlock(r,z,T,ee,u,d)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,u,c,h){for(let d=0,p=a*c+s;d<Ne.BLOCK_SIZE;d++,p+=c)for(let w=0;w<Ne.BLOCK_SIZE;w++)(r[p+w]&255)<=u&&h.set(s+w,a+d)}static calculateBlackPoints(r,s,a,u,c){const h=c-Ne.BLOCK_SIZE,d=u-Ne.BLOCK_SIZE,p=new Array(a);for(let w=0;w<a;w++){p[w]=new Int32Array(s);let _=w<<Ne.BLOCK_SIZE_POWER;_>h&&(_=h);for(let T=0;T<s;T++){let S=T<<Ne.BLOCK_SIZE_POWER;S>d&&(S=d);let k=0,z=255,W=0;for(let ee=0,le=_*u+S;ee<Ne.BLOCK_SIZE;ee++,le+=u){for(let ce=0;ce<Ne.BLOCK_SIZE;ce++){const se=r[le+ce]&255;k+=se,se<z&&(z=se),se>W&&(W=se)}if(W-z>Ne.MIN_DYNAMIC_RANGE)for(ee++,le+=u;ee<Ne.BLOCK_SIZE;ee++,le+=u)for(let ce=0;ce<Ne.BLOCK_SIZE;ce++)k+=r[le+ce]&255}let Y=k>>Ne.BLOCK_SIZE_POWER*2;if(W-z<=Ne.MIN_DYNAMIC_RANGE&&(Y=z/2,w>0&&T>0)){const ee=(p[w-1][T]+2*p[w][T-1]+p[w-1][T-1])/4;z<ee&&(Y=ee)}p[w][T]=Y}}return p}}Ne.BLOCK_SIZE_POWER=3,Ne.BLOCK_SIZE=1<<Ne.BLOCK_SIZE_POWER,Ne.BLOCK_SIZE_MASK=Ne.BLOCK_SIZE-1,Ne.MINIMUM_DIMENSION=Ne.BLOCK_SIZE*5,Ne.MIN_DYNAMIC_RANGE=24;class pe{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,u){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new B;for(let a=0;a<this.height;a++){const u=this.getRow(a,r);for(let c=0;c<this.width;c++){const h=u[c]&255;let d;h<64?d="#":h<128?d="+":h<192?d=".":d=" ",s.append(d)}s.append(`
`)}return s.toString()}}class Ce extends pe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),u=this.getWidth();for(let c=0;c<u;c++)a[c]=255-(a[c]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let u=0;u<s;u++)a[u]=255-(r[u]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,u){return new Ce(this.delegate.crop(r,s,a,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ce(this.delegate.rotateCounterClockwise45())}}class Oe extends pe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Oe.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return Oe.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const u=new Uint8ClampedArray(s*a);for(let c=0,h=0,d=r.length;c<d;c+=4,h++){let p;if(r[c+3]===0)p=255;else{const _=r[c],T=r[c+1],S=r[c+2];p=306*_+601*T+117*S+512>>10}u[h]=p}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const a=this.getWidth(),u=r*a;return s===null?s=this.buffer.slice(u,u+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(u,u+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,u){return super.crop(r,s,a,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),u=r*Oe.DEGREE_TO_RADIANS,c=this.canvas.width,h=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*h),p=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*h);return s.width=d,s.height=p,a.translate(d/2,p/2),a.rotate(u),a.drawImage(this.canvas,c/-2,h/-2),this.buffer=Oe.makeBufferFromCanvasImageData(s),this}invert(){return new Ce(this)}}Oe.DEGREE_TO_RADIANS=Math.PI/180;class gt{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Le=(globalThis||Ia||self||window||void 0)&&(globalThis||Ia||self||window||void 0).__awaiter||function(I,r,s,a){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function d(_){try{w(a.next(_))}catch(T){h(T)}}function p(_){try{w(a.throw(_))}catch(T){h(T)}}function w(_){_.done?c(_.value):u(_.value).then(d,p)}w((a=a.apply(I,r||[])).next())})};class st{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const u=a.kind==="video"?"videoinput":a.kind;if(u!=="videoinput")continue;const c=a.deviceId||a.id,h=a.label||`Video device ${s.length+1}`,d=a.groupId,p={deviceId:c,label:h,kind:u,groupId:d};s.push(p)}return s})}getVideoInputDevices(){return Le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new gt(s.deviceId,s.label))})}findDeviceById(r){return Le(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Le(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Le(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return Le(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return Le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return Le(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,s,a)})}decodeFromConstraints(r,s,a){return Le(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,a)})}decodeFromStream(r,s,a){return Le(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Le(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Le(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new v(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new v(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new v("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new v("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new v("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new v("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(a,s);return a.src=r,u}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const u=(c,h)=>{if(this._stopAsyncDecode){h(new te("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(r);c(d)}catch(d){const p=s&&d instanceof te,_=(d instanceof F||d instanceof b)&&a;if(p||_)return setTimeout(u,this._timeBetweenDecodingAttempts,c,h);h(d)}};return new Promise((c,h)=>u(c,h))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(a,this.timeBetweenScansMillis)}catch(u){s(null,u);const c=u instanceof F||u instanceof b,h=u instanceof te;(c||h)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new Oe(s),u=new Ne(a);return new D(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=u+"px",s.width=a,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class yt{constructor(r,s,a=s==null?0:8*s.length,u,c,h=G.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=u,this.format=c,this.timestamp=h,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=u,this.format=c,this.resultMetadata=null,h==null?this.timestamp=G.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);G.arraycopy(s,0,a,0,s.length),G.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var tr;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tr||(tr={}));var Ae=tr,nr;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nr||(nr={}));var Kt=nr;class As{constructor(r,s,a,u,c=-1,h=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Hr{exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Zt{constructor(r,s){if(s.length===0)throw new C;this.field=r;const a=s.length;if(a>1&&s[0]===0){let u=1;for(;u<a&&s[u]===0;)u++;u===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-u),G.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let h=0,d=s.length;h!==d;h++){const p=s[h];a=Hr.addOrSubtract(a,p)}return a}a=s[0];const u=s.length,c=this.field;for(let h=1;h<u;h++)a=Hr.addOrSubtract(c.multiply(r,a),s[h]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const h=s;s=a,a=h}let u=new Int32Array(a.length);const c=a.length-s.length;G.arraycopy(a,0,u,0,c);for(let h=c;h<a.length;h++)u[h]=Hr.addOrSubtract(s[h-c],a[h]);return new Zt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,u=r.coefficients,c=u.length,h=new Int32Array(a+c-1),d=this.field;for(let p=0;p<a;p++){const w=s[p];for(let _=0;_<c;_++)h[p+_]=Hr.addOrSubtract(h[p+_],d.multiply(w,u[_]))}return new Zt(d,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,u=new Int32Array(s),c=this.coefficients;for(let h=0;h<s;h++)u[h]=a.multiply(c[h],r);return new Zt(a,u)}multiplyByMonomial(r,s){if(r<0)throw new C;if(s===0)return this.field.getZero();const a=this.coefficients,u=a.length,c=new Int32Array(u+r),h=this.field;for(let d=0;d<u;d++)c[d]=h.multiply(a[d],s);return new Zt(h,c)}divide(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new C("Divide by 0");const s=this.field;let a=s.getZero(),u=this;const c=r.getCoefficient(r.getDegree()),h=s.inverse(c);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const d=u.getDegree()-r.getDegree(),p=s.multiply(u.getCoefficient(u.getDegree()),h),w=r.multiplyByMonomial(d,p),_=s.buildMonomial(d,p);a=a.addOrSubtract(_),u=u.addOrSubtract(w)}return[a,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const u=this.field.log(a);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Oi extends x{}Oi.kind="ArithmeticException";class Ge extends Hr{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const u=new Int32Array(s);let c=1;for(let d=0;d<s;d++)u[d]=c,c*=2,c>=s&&(c^=r,c&=s-1);this.expTable=u;const h=new Int32Array(s);for(let d=0;d<s-1;d++)h[u[d]]=d;this.logTable=h,this.zero=new Zt(this,Int32Array.from([0])),this.one=new Zt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new C;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new Zt(this,a)}inverse(r){if(r===0)throw new Oi;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ge.AZTEC_DATA_12=new Ge(4201,4096,1),Ge.AZTEC_DATA_10=new Ge(1033,1024,1),Ge.AZTEC_DATA_6=new Ge(67,64,1),Ge.AZTEC_PARAM=new Ge(19,16,1),Ge.QR_CODE_FIELD_256=new Ge(285,256,0),Ge.DATA_MATRIX_FIELD_256=new Ge(301,256,1),Ge.AZTEC_DATA_8=Ge.DATA_MATRIX_FIELD_256,Ge.MAXICODE_FIELD_64=Ge.AZTEC_DATA_6;class Gr extends x{}Gr.kind="ReedSolomonException";class jn extends x{}jn.kind="IllegalStateException";class bi{constructor(r){this.field=r}decode(r,s){const a=this.field,u=new Zt(a,r),c=new Int32Array(s);let h=!0;for(let k=0;k<s;k++){const z=u.evaluateAt(a.exp(k+a.getGeneratorBase()));c[c.length-1-k]=z,z!==0&&(h=!1)}if(h)return;const d=new Zt(a,c),p=this.runEuclideanAlgorithm(a.buildMonomial(s,1),d,s),w=p[0],_=p[1],T=this.findErrorLocations(w),S=this.findErrorMagnitudes(_,T);for(let k=0;k<T.length;k++){const z=r.length-1-a.log(T[k]);if(z<0)throw new Gr("Bad error location");r[z]=Ge.addOrSubtract(r[z],S[k])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const k=r;r=s,s=k}const u=this.field;let c=r,h=s,d=u.getZero(),p=u.getOne();for(;h.getDegree()>=(a/2|0);){let k=c,z=d;if(c=h,d=p,c.isZero())throw new Gr("r_{i-1} was zero");h=k;let W=u.getZero();const Y=c.getCoefficient(c.getDegree()),ee=u.inverse(Y);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){const le=h.getDegree()-c.getDegree(),ce=u.multiply(h.getCoefficient(h.getDegree()),ee);W=W.addOrSubtract(u.buildMonomial(le,ce)),h=h.addOrSubtract(c.multiplyByMonomial(le,ce))}if(p=W.multiply(d).addOrSubtract(z),h.getDegree()>=c.getDegree())throw new jn("Division algorithm failed to reduce polynomial?")}const w=p.getCoefficient(0);if(w===0)throw new Gr("sigmaTilde(0) was zero");const _=u.inverse(w),T=p.multiplyScalar(_),S=h.multiplyScalar(_);return[T,S]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let u=0;const c=this.field;for(let h=1;h<c.getSize()&&u<s;h++)r.evaluateAt(h)===0&&(a[u]=c.inverse(h),u++);if(u!==s)throw new Gr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,u=new Int32Array(a),c=this.field;for(let h=0;h<a;h++){const d=c.inverse(s[h]);let p=1;for(let w=0;w<a;w++)if(h!==w){const _=c.multiply(s[w],d),T=_&1?_&-2:_|1;p=c.multiply(p,T)}u[h]=c.multiply(r.evaluateAt(d),c.inverse(p)),c.getGeneratorBase()!==0&&(u[h]=c.multiply(u[h],d))}return u}}var Jt;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Jt||(Jt={}));class ut{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),u=this.correctBits(a),c=ut.convertBoolArrayToByteArray(u),h=ut.getEncodedData(u),d=new As(c,h,null,null);return d.setNumBits(u.length),d}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Jt.UPPER,u=Jt.UPPER,c="",h=0;for(;h<s;)if(u===Jt.BINARY){if(s-h<5)break;let d=ut.readCode(r,h,5);if(h+=5,d===0){if(s-h<11)break;d=ut.readCode(r,h,11)+31,h+=11}for(let p=0;p<d;p++){if(s-h<8){h=s;break}const w=ut.readCode(r,h,8);c+=j.castAsNonUtf8Char(w),h+=8}u=a}else{let d=u===Jt.DIGIT?4:5;if(s-h<d)break;let p=ut.readCode(r,h,d);h+=d;let w=ut.getCharacter(u,p);w.startsWith("CTRL_")?(a=u,u=ut.getTable(w.charAt(5)),w.charAt(6)==="L"&&(a=u)):(c+=w,u=a)}return c}static getTable(r){switch(r){case"L":return Jt.LOWER;case"P":return Jt.PUNCT;case"M":return Jt.MIXED;case"D":return Jt.DIGIT;case"B":return Jt.BINARY;case"U":default:return Jt.UPPER}}static getCharacter(r,s){switch(r){case Jt.UPPER:return ut.UPPER_TABLE[s];case Jt.LOWER:return ut.LOWER_TABLE[s];case Jt.MIXED:return ut.MIXED_TABLE[s];case Jt.PUNCT:return ut.PUNCT_TABLE[s];case Jt.DIGIT:return ut.DIGIT_TABLE[s];default:throw new jn("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Ge.AZTEC_DATA_10):(a=12,s=Ge.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=r.length/a;if(c<u)throw new b;let h=r.length%a,d=new Int32Array(c);for(let S=0;S<c;S++,h+=a)d[S]=ut.readCode(r,h,a);try{new bi(s).decode(d,c-u)}catch(S){throw new b(S)}let p=(1<<a)-1,w=0;for(let S=0;S<u;S++){let k=d[S];if(k===0||k===p)throw new b;(k===1||k===p-1)&&w++}let _=new Array(u*a-w),T=0;for(let S=0;S<u;S++){let k=d[S];if(k===1||k===p-1)_.fill(k>1,T,T+a-1),T+=a-1;else for(let z=a-1;z>=0;--z)_[T++]=(k&1<<z)!==0}return _}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),u=(s?11:14)+a*4,c=new Int32Array(u),h=new Array(this.totalBitsInLayer(a,s));if(s)for(let d=0;d<c.length;d++)c[d]=d;else{let d=u+1+2*L.truncDivision(L.truncDivision(u,2)-1,15),p=u/2,w=L.truncDivision(d,2);for(let _=0;_<p;_++){let T=_+L.truncDivision(_,15);c[p-_-1]=w-T-1,c[p+_]=w+T+1}}for(let d=0,p=0;d<a;d++){let w=(a-d)*4+(s?9:12),_=d*2,T=u-1-_;for(let S=0;S<w;S++){let k=S*2;for(let z=0;z<2;z++)h[p+k+z]=r.get(c[_+z],c[_+S]),h[p+2*w+k+z]=r.get(c[_+S],c[T-z]),h[p+4*w+k+z]=r.get(c[T-z],c[T-S]),h[p+6*w+k+z]=r.get(c[T-S],c[_+z])}p+=w*8}return h}static readCode(r,s,a){let u=0;for(let c=s;c<s+a;c++)u<<=1,r[c]&&(u|=1);return u}static readByte(r,s){let a=r.length-s;return a>=8?ut.readCode(r,s,8):ut.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=ut.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ze{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,u){const c=r-a,h=s-u;return Math.sqrt(c*c+h*h)}static sum(r){let s=0;for(let a=0,u=r.length;a!==u;a++){const c=r[a];s+=c}return s}}class Di{static floatToIntBits(r){return r}}Di.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof _e){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Di.floatToIntBits(this.x)+Di.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let c,h,d;if(a>=s&&a>=u?(h=r[0],c=r[1],d=r[2]):u>=a&&u>=s?(h=r[1],c=r[0],d=r[2]):(h=r[2],c=r[0],d=r[1]),this.crossProductZ(c,h,d)<0){const p=c;c=d,d=p}r[0]=c,r[1]=h,r[2]=d}static distance(r,s){return ze.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const u=s.x,c=s.y;return(a.x-u)*(r.y-c)-(a.y-c)*(r.x-u)}}class uo{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class co extends uo{constructor(r,s,a,u,c){super(r,s),this.compact=a,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class rr{constructor(r,s,a,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=rr.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const c=s/2|0;if(this.leftInit=a-c,this.rightInit=a+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new te}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,u=this.downInit,c=!1,h=!0,d=!1,p=!1,w=!1,_=!1,T=!1;const S=this.width,k=this.height;for(;h;){h=!1;let z=!0;for(;(z||!p)&&s<S;)z=this.containsBlackPoint(a,u,s,!1),z?(s++,h=!0,p=!0):p||s++;if(s>=S){c=!0;break}let W=!0;for(;(W||!w)&&u<k;)W=this.containsBlackPoint(r,s,u,!0),W?(u++,h=!0,w=!0):w||u++;if(u>=k){c=!0;break}let Y=!0;for(;(Y||!_)&&r>=0;)Y=this.containsBlackPoint(a,u,r,!1),Y?(r--,h=!0,_=!0):_||r--;if(r<0){c=!0;break}let ee=!0;for(;(ee||!T)&&a>=0;)ee=this.containsBlackPoint(r,s,a,!0),ee?(a--,h=!0,T=!0):T||a--;if(a<0){c=!0;break}h&&(d=!0)}if(!c&&d){const z=s-r;let W=null;for(let ce=1;W===null&&ce<z;ce++)W=this.getBlackPointOnSegment(r,u-ce,r+ce,u);if(W==null)throw new te;let Y=null;for(let ce=1;Y===null&&ce<z;ce++)Y=this.getBlackPointOnSegment(r,a+ce,r+ce,a);if(Y==null)throw new te;let ee=null;for(let ce=1;ee===null&&ce<z;ce++)ee=this.getBlackPointOnSegment(s,a+ce,s-ce,a);if(ee==null)throw new te;let le=null;for(let ce=1;le===null&&ce<z;ce++)le=this.getBlackPointOnSegment(s,u-ce,s-ce,u);if(le==null)throw new te;return this.centerEdges(le,W,ee,Y)}else throw new te}getBlackPointOnSegment(r,s,a,u){const c=ze.round(ze.distance(r,s,a,u)),h=(a-r)/c,d=(u-s)/c,p=this.image;for(let w=0;w<c;w++){const _=ze.round(r+w*h),T=ze.round(s+w*d);if(p.get(_,T))return new _e(_,T)}return null}centerEdges(r,s,a,u){const c=r.getX(),h=r.getY(),d=s.getX(),p=s.getY(),w=a.getX(),_=a.getY(),T=u.getX(),S=u.getY(),k=rr.CORR;return c<this.width/2?[new _e(T-k,S+k),new _e(d+k,p+k),new _e(w-k,_-k),new _e(c+k,h-k)]:[new _e(T+k,S+k),new _e(d+k,p-k),new _e(w-k,_+k),new _e(c-k,h-k)]}containsBlackPoint(r,s,a,u){const c=this.image;if(u){for(let h=r;h<=s;h++)if(c.get(h,a))return!0}else for(let h=r;h<=s;h++)if(c.get(a,h))return!0;return!1}}rr.INIT_SIZE=10,rr.CORR=1;class ho{static checkAndNudgePoints(r,s){const a=r.getWidth(),u=r.getHeight();let c=!0;for(let h=0;h<s.length&&c;h+=2){const d=Math.floor(s[h]),p=Math.floor(s[h+1]);if(d<-1||d>a||p<-1||p>u)throw new te;c=!1,d===-1?(s[h]=0,c=!0):d===a&&(s[h]=a-1,c=!0),p===-1?(s[h+1]=0,c=!0):p===u&&(s[h+1]=u-1,c=!0)}c=!0;for(let h=s.length-2;h>=0&&c;h-=2){const d=Math.floor(s[h]),p=Math.floor(s[h+1]);if(d<-1||d>a||p<-1||p>u)throw new te;c=!1,d===-1?(s[h]=0,c=!0):d===a&&(s[h]=a-1,c=!0),p===-1?(s[h+1]=0,c=!0):p===u&&(s[h+1]=u-1,c=!0)}}}class ct{constructor(r,s,a,u,c,h,d,p,w){this.a11=r,this.a21=s,this.a31=a,this.a12=u,this.a22=c,this.a32=h,this.a13=d,this.a23=p,this.a33=w}static quadrilateralToQuadrilateral(r,s,a,u,c,h,d,p,w,_,T,S,k,z,W,Y){const ee=ct.quadrilateralToSquare(r,s,a,u,c,h,d,p);return ct.squareToQuadrilateral(w,_,T,S,k,z,W,Y).times(ee)}transformPoints(r){const s=r.length,a=this.a11,u=this.a12,c=this.a13,h=this.a21,d=this.a22,p=this.a23,w=this.a31,_=this.a32,T=this.a33;for(let S=0;S<s;S+=2){const k=r[S],z=r[S+1],W=c*k+p*z+T;r[S]=(a*k+h*z+w)/W,r[S+1]=(u*k+d*z+_)/W}}transformPointsWithValues(r,s){const a=this.a11,u=this.a12,c=this.a13,h=this.a21,d=this.a22,p=this.a23,w=this.a31,_=this.a32,T=this.a33,S=r.length;for(let k=0;k<S;k++){const z=r[k],W=s[k],Y=c*z+p*W+T;r[k]=(a*z+h*W+w)/Y,s[k]=(u*z+d*W+_)/Y}}static squareToQuadrilateral(r,s,a,u,c,h,d,p){const w=r-a+c-d,_=s-u+h-p;if(w===0&&_===0)return new ct(a-r,c-a,r,u-s,h-u,s,0,0,1);{const T=a-c,S=d-c,k=u-h,z=p-h,W=T*z-S*k,Y=(w*z-S*_)/W,ee=(T*_-w*k)/W;return new ct(a-r+Y*a,d-r+ee*d,r,u-s+Y*u,p-s+ee*p,s,Y,ee,1)}}static quadrilateralToSquare(r,s,a,u,c,h,d,p){return ct.squareToQuadrilateral(r,s,a,u,c,h,d,p).buildAdjoint()}buildAdjoint(){return new ct(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new ct(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class cn extends ho{sampleGrid(r,s,a,u,c,h,d,p,w,_,T,S,k,z,W,Y,ee,le,ce){const se=ct.quadrilateralToQuadrilateral(u,c,h,d,p,w,_,T,S,k,z,W,Y,ee,le,ce);return this.sampleGridWithTransform(r,s,a,se)}sampleGridWithTransform(r,s,a,u){if(s<=0||a<=0)throw new te;const c=new et(s,a),h=new Float32Array(2*s);for(let d=0;d<a;d++){const p=h.length,w=d+.5;for(let _=0;_<p;_+=2)h[_]=_/2+.5,h[_+1]=w;u.transformPoints(h),ho.checkAndNudgePoints(r,h);try{for(let _=0;_<p;_+=2)r.get(Math.floor(h[_]),Math.floor(h[_+1]))&&c.set(_/2,d)}catch{throw new te}}return c}}class ir{static setGridSampler(r){ir.gridSampler=r}static getInstance(){return ir.gridSampler}}ir.gridSampler=new cn;class hn{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new _e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ma{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let h=a[0];a[0]=a[2],a[2]=h}this.extractParameters(a);let u=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),c=this.getMatrixCornerPoints(a);return new co(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new te;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let u=0;for(let h=0;h<4;h++){let d=a[(this.shift+h)%4];this.compact?(u<<=7,u+=d>>1&127):(u<<=10,u+=(d>>2&992)+(d>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(r,s){let a=0;r.forEach((u,c,h)=>{let d=(u>>s-2<<1)+(u&1);a=(a<<3)+d}),a=((a&1)<<11)+(a>>1);for(let u=0;u<4;u++)if(L.bitCount(a^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new te}getCorrectedParameterData(r,s){let a,u;s?(a=7,u=2):(a=10,u=4);let c=a-u,h=new Int32Array(a);for(let p=a-1;p>=0;--p)h[p]=r&15,r>>=4;try{new bi(Ge.AZTEC_PARAM).decode(h,c)}catch{throw new te}let d=0;for(let p=0;p<u;p++)d=(d<<4)+h[p];return d}getBullsEyeCorners(r){let s=r,a=r,u=r,c=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(s,h,1,-1),S=this.getFirstDifferent(a,h,1,1),k=this.getFirstDifferent(u,h,-1,1),z=this.getFirstDifferent(c,h,-1,-1);if(this.nbCenterLayers>2){let W=this.distancePoint(z,T)*this.nbCenterLayers/(this.distancePoint(c,s)*(this.nbCenterLayers+2));if(W<.75||W>1.25||!this.isWhiteOrBlackRectangle(T,S,k,z))break}s=T,a=S,u=k,c=z,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new te;this.compact=this.nbCenterLayers===5;let d=new _e(s.getX()+.5,s.getY()-.5),p=new _e(a.getX()+.5,a.getY()+.5),w=new _e(u.getX()-.5,u.getY()+.5),_=new _e(c.getX()-.5,c.getY()-.5);return this.expandSquare([d,p,w,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,u;try{let d=new rr(this.image).detect();r=d[0],s=d[1],a=d[2],u=d[3]}catch{let p=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new hn(p+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new hn(p+7,w+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new hn(p-7,w+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new hn(p-7,w-7),!1,-1,-1).toResultPoint()}let c=ze.round((r.getX()+u.getX()+s.getX()+a.getX())/4),h=ze.round((r.getY()+u.getY()+s.getY()+a.getY())/4);try{let d=new rr(this.image,15,c,h).detect();r=d[0],s=d[1],a=d[2],u=d[3]}catch{r=this.getFirstDifferent(new hn(c+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new hn(c+7,h+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new hn(c-7,h+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new hn(c-7,h-7),!1,-1,-1).toResultPoint()}return c=ze.round((r.getX()+u.getX()+s.getX()+a.getX())/4),h=ze.round((r.getY()+u.getY()+s.getY()+a.getY())/4),new hn(c,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,u,c){let h=ir.getInstance(),d=this.getDimension(),p=d/2-this.nbCenterLayers,w=d/2+this.nbCenterLayers;return h.sampleGrid(r,d,d,p,p,w,p,w,w,p,w,s.getX(),s.getY(),a.getX(),a.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(r,s,a){let u=0,c=this.distanceResultPoint(r,s),h=c/a,d=r.getX(),p=r.getY(),w=h*(s.getX()-r.getX())/c,_=h*(s.getY()-r.getY())/c;for(let T=0;T<a;T++)this.image.get(ze.round(d+T*w),ze.round(p+T*_))&&(u|=1<<a-T-1);return u}isWhiteOrBlackRectangle(r,s,a,u){let c=3;r=new hn(r.getX()-c,r.getY()+c),s=new hn(s.getX()-c,s.getY()-c),a=new hn(a.getX()+c,a.getY()-c),u=new hn(u.getX()+c,u.getY()+c);let h=this.getColor(u,r);if(h===0)return!1;let d=this.getColor(r,s);return d!==h||(d=this.getColor(s,a),d!==h)?!1:(d=this.getColor(a,u),d===h)}getColor(r,s){let a=this.distancePoint(r,s),u=(s.getX()-r.getX())/a,c=(s.getY()-r.getY())/a,h=0,d=r.getX(),p=r.getY(),w=this.image.get(r.getX(),r.getY()),_=Math.ceil(a);for(let S=0;S<_;S++)d+=u,p+=c,this.image.get(ze.round(d),ze.round(p))!==w&&h++;let T=h/a;return T>.1&&T<.9?0:T<=.1===w?1:-1}getFirstDifferent(r,s,a,u){let c=r.getX()+a,h=r.getY()+u;for(;this.isValid(c,h)&&this.image.get(c,h)===s;)c+=a,h+=u;for(c-=a,h-=u;this.isValid(c,h)&&this.image.get(c,h)===s;)c+=a;for(c-=a;this.isValid(c,h)&&this.image.get(c,h)===s;)h+=u;return h-=u,new hn(c,h)}expandSquare(r,s,a){let u=a/(2*s),c=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),d=(r[0].getX()+r[2].getX())/2,p=(r[0].getY()+r[2].getY())/2,w=new _e(d+u*c,p+u*h),_=new _e(d-u*c,p-u*h);c=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),d=(r[1].getX()+r[3].getX())/2,p=(r[1].getY()+r[3].getY())/2;let T=new _e(d+u*c,p+u*h),S=new _e(d-u*c,p-u*h);return[w,T,_,S]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ze.round(r.getX()),a=ze.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return ze.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ze.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class fo{decode(r,s=null){let a=null,u=new ma(r.getBlackMatrix()),c=null,h=null;try{let _=u.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(s,c),h=new ut().decode(_)}catch(_){a=_}if(h==null)try{let _=u.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(s,c),h=new ut().decode(_)}catch(_){throw a??_}let d=new yt(h.getText(),h.getRawBytes(),h.getNumBits(),c,Ae.AZTEC,G.currentTimeMillis()),p=h.getByteSegments();p!=null&&d.putMetadata(Kt.BYTE_SEGMENTS,p);let w=h.getECLevel();return w!=null&&d.putMetadata(Kt.ERROR_CORRECTION_LEVEL,w),d}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(ie.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((u,c,h)=>{a.foundPossibleResultPoint(u)})}}reset(){}}class vs extends st{constructor(r=500){super(new fo,r)}}class Ot{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(ie.TRY_HARDER)===!0&&r.isRotateSupported()){const c=r.rotateCounterClockwise(),h=this.doDecode(c,s),d=h.getResultMetadata();let p=270;d!==null&&d.get(Kt.ORIENTATION)===!0&&(p=p+d.get(Kt.ORIENTATION)%360),h.putMetadata(Kt.ORIENTATION,p);const w=h.getResultPoints();if(w!==null){const _=c.getHeight();for(let T=0;T<w.length;T++)w[T]=new _e(_-w[T].getY()-1,w[T].getX())}return h}else throw new te}}reset(){}doDecode(r,s){const a=r.getWidth(),u=r.getHeight();let c=new Q(a);const h=s&&s.get(ie.TRY_HARDER)===!0,d=Math.max(1,u>>(h?8:5));let p;h?p=u:p=15;const w=Math.trunc(u/2);for(let _=0;_<p;_++){const T=Math.trunc((_+1)/2),S=(_&1)===0,k=w+d*(S?T:-T);if(k<0||k>=u)break;try{c=r.getBlackRow(k,c)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(c.reverse(),s&&s.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const W=new Map;s.forEach((Y,ee)=>W.set(ee,Y)),W.delete(ie.NEED_RESULT_POINT_CALLBACK),s=W}try{const W=this.decodeRow(k,c,s);if(z===1){W.putMetadata(Kt.ORIENTATION,180);const Y=W.getResultPoints();Y!==null&&(Y[0]=new _e(a-Y[0].getX()-1,Y[0].getY()),Y[1]=new _e(a-Y[1].getX()-1,Y[1].getY()))}return W}catch{}}}throw new te}static recordPattern(r,s,a){const u=a.length;for(let w=0;w<u;w++)a[w]=0;const c=r.getSize();if(s>=c)throw new te;let h=!r.get(s),d=0,p=s;for(;p<c;){if(r.get(p)!==h)a[d]++;else{if(++d===u)break;a[d]=1,h=!h}p++}if(!(d===u||d===u-1&&p===c))throw new te}static recordPatternInReverse(r,s,a){let u=a.length,c=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==c&&(u--,c=!c);if(u>=0)throw new te;Ot.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const u=r.length;let c=0,h=0;for(let w=0;w<u;w++)c+=r[w],h+=s[w];if(c<h)return Number.POSITIVE_INFINITY;const d=c/h;a*=d;let p=0;for(let w=0;w<u;w++){const _=r[w],T=s[w]*d,S=_>T?_-T:T-_;if(S>a)return Number.POSITIVE_INFINITY;p+=S}return p/c}}class fe extends Ot{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),h=a,d=!1;const p=6;for(let w=a;w<s;w++)if(r.get(w)!==d)c[u]++;else{if(u===p-1){let _=fe.MAX_AVG_VARIANCE,T=-1;for(let S=fe.CODE_START_A;S<=fe.CODE_START_C;S++){const k=Ot.patternMatchVariance(c,fe.CODE_PATTERNS[S],fe.MAX_INDIVIDUAL_VARIANCE);k<_&&(_=k,T=S)}if(T>=0&&r.isRange(Math.max(0,h-(w-h)/2),h,!1))return Int32Array.from([h,w,T]);h+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,d=!d}throw new te}static decodeCode(r,s,a){Ot.recordPattern(r,a,s);let u=fe.MAX_AVG_VARIANCE,c=-1;for(let h=0;h<fe.CODE_PATTERNS.length;h++){const d=fe.CODE_PATTERNS[h],p=this.patternMatchVariance(s,d,fe.MAX_INDIVIDUAL_VARIANCE);p<u&&(u=p,c=h)}if(c>=0)return c;throw new te}decodeRow(r,s,a){const u=a&&a.get(ie.ASSUME_GS1)===!0,c=fe.findStartPattern(s),h=c[2];let d=0;const p=new Uint8Array(20);p[d++]=h;let w;switch(h){case fe.CODE_START_A:w=fe.CODE_CODE_A;break;case fe.CODE_START_B:w=fe.CODE_CODE_B;break;case fe.CODE_START_C:w=fe.CODE_CODE_C;break;default:throw new b}let _=!1,T=!1,S="",k=c[0],z=c[1];const W=Int32Array.from([0,0,0,0,0,0]);let Y=0,ee=0,le=h,ce=0,se=!0,We=!1,Be=!1;for(;!_;){const _o=T;switch(T=!1,Y=ee,ee=fe.decodeCode(s,W,z),p[d++]=ee,ee!==fe.CODE_STOP&&(se=!0),ee!==fe.CODE_STOP&&(ce++,le+=ce*ee),k=z,z+=W.reduce((Rx,Nx)=>Rx+Nx,0),ee){case fe.CODE_START_A:case fe.CODE_START_B:case fe.CODE_START_C:throw new b}switch(w){case fe.CODE_CODE_A:if(ee<64)Be===We?S+=String.fromCharCode(32+ee):S+=String.fromCharCode(32+ee+128),Be=!1;else if(ee<96)Be===We?S+=String.fromCharCode(ee-64):S+=String.fromCharCode(ee+64),Be=!1;else switch(ee!==fe.CODE_STOP&&(se=!1),ee){case fe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_A:!We&&Be?(We=!0,Be=!1):We&&Be?(We=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:T=!0,w=fe.CODE_CODE_B;break;case fe.CODE_CODE_B:w=fe.CODE_CODE_B;break;case fe.CODE_CODE_C:w=fe.CODE_CODE_C;break;case fe.CODE_STOP:_=!0;break}break;case fe.CODE_CODE_B:if(ee<96)Be===We?S+=String.fromCharCode(32+ee):S+=String.fromCharCode(32+ee+128),Be=!1;else switch(ee!==fe.CODE_STOP&&(se=!1),ee){case fe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_B:!We&&Be?(We=!0,Be=!1):We&&Be?(We=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:T=!0,w=fe.CODE_CODE_A;break;case fe.CODE_CODE_A:w=fe.CODE_CODE_A;break;case fe.CODE_CODE_C:w=fe.CODE_CODE_C;break;case fe.CODE_STOP:_=!0;break}break;case fe.CODE_CODE_C:if(ee<100)ee<10&&(S+="0"),S+=ee;else switch(ee!==fe.CODE_STOP&&(se=!1),ee){case fe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case fe.CODE_CODE_A:w=fe.CODE_CODE_A;break;case fe.CODE_CODE_B:w=fe.CODE_CODE_B;break;case fe.CODE_STOP:_=!0;break}break}_o&&(w=w===fe.CODE_CODE_A?fe.CODE_CODE_B:fe.CODE_CODE_A)}const Kn=z-k;if(z=s.getNextUnset(z),!s.isRange(z,Math.min(s.getSize(),z+(z-k)/2),!1))throw new te;if(le-=ce*Y,le%103!==Y)throw new F;const kr=S.length;if(kr===0)throw new te;kr>0&&se&&(w===fe.CODE_CODE_C?S=S.substring(0,kr-2):S=S.substring(0,kr-1));const qn=(c[1]+c[0])/2,dt=k+Kn/2,En=p.length,hr=new Uint8Array(En);for(let _o=0;_o<En;_o++)hr[_o]=p[_o];const Eo=[new _e(qn,r),new _e(dt,r)];return new yt(S,hr,0,Eo,Ae.CODE_128,new Date().getTime())}}fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],fe.MAX_AVG_VARIANCE=.25,fe.MAX_INDIVIDUAL_VARIANCE=.7,fe.CODE_SHIFT=98,fe.CODE_CODE_C=99,fe.CODE_CODE_B=100,fe.CODE_CODE_A=101,fe.CODE_FNC_1=102,fe.CODE_FNC_2=97,fe.CODE_FNC_3=96,fe.CODE_FNC_4_A=101,fe.CODE_FNC_4_B=100,fe.CODE_START_A=103,fe.CODE_START_B=104,fe.CODE_START_C=105,fe.CODE_STOP=106;class bt extends Ot{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=bt.findAsteriskPattern(s,u),h=s.getNextSet(c[1]),d=s.getSize(),p,w;do{bt.recordPattern(s,h,u);let W=bt.toNarrowWidePattern(u);if(W<0)throw new te;p=bt.patternToChar(W),this.decodeRowResult+=p,w=h;for(let Y of u)h+=Y;h=s.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let W of u)_+=W;let T=h-w-_;if(h!==d&&T*2<_)throw new te;if(this.usingCheckDigit){let W=this.decodeRowResult.length-1,Y=0;for(let ee=0;ee<W;ee++)Y+=bt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ee));if(this.decodeRowResult.charAt(W)!==bt.ALPHABET_STRING.charAt(Y%43))throw new F;this.decodeRowResult=this.decodeRowResult.substring(0,W)}if(this.decodeRowResult.length===0)throw new te;let S;this.extendedMode?S=bt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let k=(c[1]+c[0])/2,z=w+_/2;return new yt(S,null,0,[new _e(k,r),new _e(z,r)],Ae.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),u=r.getNextSet(0),c=0,h=u,d=!1,p=s.length;for(let w=u;w<a;w++)if(r.get(w)!==d)s[c]++;else{if(c===p-1){if(this.toNarrowWidePattern(s)===bt.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((w-h)/2)),h,!1))return[h,w];h+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,d=!d}throw new te}static toNarrowWidePattern(r){let s=r.length,a=0,u;do{let c=2147483647;for(let p of r)p<c&&p>a&&(c=p);a=c,u=0;let h=0,d=0;for(let p=0;p<s;p++){let w=r[p];w>a&&(d|=1<<s-1-p,u++,h+=w)}if(u===3){for(let p=0;p<s&&u>0;p++){let w=r[p];if(w>a&&(u--,w*2>=h))return-1}return d}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<bt.CHARACTER_ENCODINGS.length;s++)if(bt.CHARACTER_ENCODINGS[s]===r)return bt.ALPHABET_STRING.charAt(s);if(r===bt.ASTERISK_ENCODING)return"*";throw new te}static decodeExtended(r){let s=r.length,a="";for(let u=0;u<s;u++){let c=r.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let h=r.charAt(u+1),d="\0";switch(c){case"+":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)+32);else throw new b;break;case"$":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)-64);else throw new b;break;case"%":if(h>="A"&&h<="E")d=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")d=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")d=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")d="\0";else if(h==="V")d="@";else if(h==="W")d="`";else if(h==="X"||h==="Y"||h==="Z")d="";else throw new b;break;case"/":if(h>="A"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")d=":";else throw new b;break}a+=d,u++}else a+=c}return a}}bt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",bt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],bt.ASTERISK_ENCODING=148;class ot extends Ot{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let u=this.decodeStart(s),c=this.decodeEnd(s),h=new B;ot.decodeMiddle(s,u[1],c[0],h);let d=h.toString(),p=null;a!=null&&(p=a.get(ie.ALLOWED_LENGTHS)),p==null&&(p=ot.DEFAULT_ALLOWED_LENGTHS);let w=d.length,_=!1,T=0;for(let z of p){if(w===z){_=!0;break}z>T&&(T=z)}if(!_&&w>T&&(_=!0),!_)throw new b;const S=[new _e(u[1],r),new _e(c[0],r)];return new yt(d,null,0,S,Ae.ITF,new Date().getTime())}static decodeMiddle(r,s,a,u){let c=new Int32Array(10),h=new Int32Array(5),d=new Int32Array(5);for(c.fill(0),h.fill(0),d.fill(0);s<a;){Ot.recordPattern(r,s,c);for(let w=0;w<5;w++){let _=2*w;h[w]=c[_],d[w]=c[_+1]}let p=ot.decodeDigit(h);u.append(p.toString()),p=this.decodeDigit(d),u.append(p.toString()),c.forEach(function(w){s+=w})}}decodeStart(r){let s=ot.skipWhiteSpace(r),a=ot.findGuardPattern(r,s,ot.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let u=s-1;a>0&&u>=0&&!r.get(u);u--)a--;if(a!==0)throw new te}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new te;return a}decodeEnd(r){r.reverse();try{let s=ot.skipWhiteSpace(r),a;try{a=ot.findGuardPattern(r,s,ot.END_PATTERN_REVERSED[0])}catch(c){c instanceof te&&(a=ot.findGuardPattern(r,s,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let u=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-u,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let u=a.length,c=new Int32Array(u),h=r.getSize(),d=!1,p=0,w=s;c.fill(0);for(let _=s;_<h;_++)if(r.get(_)!==d)c[p]++;else{if(p===u-1){if(Ot.patternMatchVariance(c,a,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[w,_];w+=c[0]+c[1],G.arraycopy(c,2,c,0,p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,d=!d}throw new te}static decodeDigit(r){let s=ot.MAX_AVG_VARIANCE,a=-1,u=ot.PATTERNS.length;for(let c=0;c<u;c++){let h=ot.PATTERNS[c],d=Ot.patternMatchVariance(r,h,ot.MAX_INDIVIDUAL_VARIANCE);d<s?(s=d,a=c):d===s&&(a=-1)}if(a>=0)return a%10;throw new te}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends Ot{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,u=0,c=Int32Array.from([0,0,0]);for(;!s;){c=Int32Array.from([0,0,0]),a=Tt.findGuardPattern(r,u,!1,this.START_END_PATTERN,c);let h=a[0];u=a[1];let d=h-(u-h);d>=0&&(s=r.isRange(d,h,!1))}return a}static checkChecksum(r){return Tt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Tt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let u=s-1;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new b;a+=c}a*=3;for(let u=s-2;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new b;a+=c}return(1e3-a)%10}static decodeEnd(r,s){return Tt.findGuardPattern(r,s,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,u){return this.findGuardPattern(r,s,a,u,new Int32Array(u.length))}static findGuardPattern(r,s,a,u,c){let h=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let d=0,p=s,w=u.length,_=a;for(let T=s;T<h;T++)if(r.get(T)!==_)c[d]++;else{if(d===w-1){if(Ot.patternMatchVariance(c,u,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([p,T]);p+=c[0]+c[1];let S=c.slice(2,c.length-1);for(let k=0;k<d-1;k++)c[k]=S[k];c[d-1]=0,c[d]=0,d--}else d++;c[d]=1,_=!_}throw new te}static decodeDigit(r,s,a,u){this.recordPattern(r,a,s);let c=this.MAX_AVG_VARIANCE,h=-1,d=u.length;for(let p=0;p<d;p++){let w=u[p],_=Ot.patternMatchVariance(s,w,Tt.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,h=p)}if(h>=0)return h;throw new te}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ci{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(s,a,u),h=u.toString(),d=ci.parseExtensionString(h),p=[new _e((a[0]+a[1])/2,r),new _e(c,r)],w=new yt(h,null,0,p,Ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1],d=0;for(let w=0;w<5&&h<c;w++){let _=Tt.decodeDigit(r,u,h,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let T of u)h+=T;_>=10&&(d|=1<<4-w),w!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==5)throw new te;let p=this.determineCheckDigit(d);if(ci.extensionChecksum(a.toString())!==p)throw new te;return h}static extensionChecksum(r){let s=r.length,a=0;for(let u=s-2;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;a*=3;for(let u=s-1;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new te}static parseExtensionString(r){if(r.length!==5)return null;let s=ci.parseExtension5String(r);return s==null?null:new Map([[Kt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),u=(a/100).toString(),c=a%100,h=c<10?"0"+c:c.toString();return s+u+"."+h}}class go{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(s,a,u),h=u.toString(),d=go.parseExtensionString(h),p=[new _e((a[0]+a[1])/2,r),new _e(c,r)],w=new yt(h,null,0,p,Ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1],d=0;for(let p=0;p<2&&h<c;p++){let w=Tt.decodeDigit(r,u,h,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+w%10);for(let _ of u)h+=_;w>=10&&(d|=1<<1-p),p!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==2)throw new te;if(parseInt(a.toString())%4!==d)throw new te;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[Kt.ISSUE_NUMBER,parseInt(r)]])}}class ya{static decodeRow(r,s,a){let u=Tt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ci().decodeRow(r,s,u)}catch{return new go().decodeRow(r,s,u)}}}ya.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ve extends Tt{constructor(){super(),this.decodeRowStringBuffer="",Ve.L_AND_G_PATTERNS=Ve.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Ve.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let u=0;u<s.length;u++)a[u]=s[s.length-u-1];Ve.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let u=Ve.findStartGuardPattern(s),c=a==null?null:a.get(ie.NEED_RESULT_POINT_CALLBACK);if(c!=null){const se=new _e((u[0]+u[1])/2,r);c.foundPossibleResultPoint(se)}let h=this.decodeMiddle(s,u,this.decodeRowStringBuffer),d=h.rowOffset,p=h.resultString;if(c!=null){const se=new _e(d,r);c.foundPossibleResultPoint(se)}let w=this.decodeEnd(s,d);if(c!=null){const se=new _e((w[0]+w[1])/2,r);c.foundPossibleResultPoint(se)}let _=w[1],T=_+(_-w[0]);if(T>=s.getSize()||!s.isRange(_,T,!1))throw new te;let S=p.toString();if(S.length<8)throw new b;if(!Ve.checkChecksum(S))throw new F;let k=(u[1]+u[0])/2,z=(w[1]+w[0])/2,W=this.getBarcodeFormat(),Y=[new _e(k,r),new _e(z,r)],ee=new yt(S,null,0,Y,W,new Date().getTime()),le=0;try{let se=ya.decodeRow(r,s,w[1]);ee.putMetadata(Kt.UPC_EAN_EXTENSION,se.getText()),ee.putAllMetadata(se.getResultMetadata()),ee.addResultPoints(se.getResultPoints()),le=se.getText().length}catch{}let ce=a==null?null:a.get(ie.ALLOWED_EAN_EXTENSIONS);if(ce!=null){let se=!1;for(let We in ce)if(le.toString()===We){se=!0;break}if(!se)throw new te}return ee}decodeEnd(r,s){return Ve.findGuardPattern(r,s,!1,Ve.START_END_PATTERN,new Int32Array(Ve.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Ve.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Ve.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let u=s-1;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new b;a+=c}a*=3;for(let u=s-2;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new b;a+=c}return(1e3-a)%10}}class Or extends Ve{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1],d=0;for(let w=0;w<6&&h<c;w++){let _=Ve.decodeDigit(r,u,h,Ve.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let T of u)h+=T;_>=10&&(d|=1<<5-w)}a=Or.determineFirstDigit(a,d),h=Ve.findGuardPattern(r,h,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&h<c;w++){let _=Ve.decodeDigit(r,u,h,Ve.L_PATTERNS);a+=String.fromCharCode(48+_);for(let T of u)h+=T}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return Ae.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new te}}Or.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class po extends Ve{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1];for(let p=0;p<4&&h<c;p++){let w=Ve.decodeDigit(r,u,h,Ve.L_PATTERNS);a+=String.fromCharCode(48+w);for(let _ of u)h+=_}h=Ve.findGuardPattern(r,h,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&h<c;p++){let w=Ve.decodeDigit(r,u,h,Ve.L_PATTERNS);a+=String.fromCharCode(48+w);for(let _ of u)h+=_}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return Ae.EAN_8}}class Xr extends Ve{constructor(){super(...arguments),this.ean13Reader=new Or}getBarcodeFormat(){return Ae.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new yt(s.substring(1),null,null,r.getResultPoints(),Ae.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new te}reset(){this.ean13Reader.reset()}}class Wn extends Ve{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const u=this.decodeMiddleCounters.map(w=>w);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=r.getSize();let h=s[1],d=0;for(let w=0;w<6&&h<c;w++){const _=Wn.decodeDigit(r,u,h,Wn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let T of u)h+=T;_>=10&&(d|=1<<5-w)}let p=Wn.determineNumSysAndCheckDigit(a,d);return{rowOffset:h,resultString:p}}decodeEnd(r,s){return Wn.findGuardPatternWithoutCounters(r,s,!0,Wn.MIDDLE_END_PATTERN)}checkChecksum(r){return Ve.checkChecksum(Wn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][u]){let c=String.fromCharCode(48+a),h=String.fromCharCode(48+u);return c+r+h}throw te.getNotFoundInstance()}getBarcodeFormat(){return Ae.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(c=>c.charCodeAt(0)),a=new B;a.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(u),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(u);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}Wn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Pi extends Ot{constructor(r){super();let s=r==null?null:r.get(ie.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new Or),a.push(new Xr),a.push(new po),a.push(new Wn)):(s.indexOf(Ae.EAN_13)>-1&&a.push(new Or),s.indexOf(Ae.UPC_A)>-1&&a.push(new Xr),s.indexOf(Ae.EAN_8)>-1&&a.push(new po),s.indexOf(Ae.UPC_E)>-1&&a.push(new Wn)),this.readers=a}decodeRow(r,s,a){for(let u of this.readers)try{const c=u.decodeRow(r,s,a),h=c.getBarcodeFormat()===Ae.EAN_13&&c.getText().charAt(0)==="0",d=a==null?null:a.get(ie.POSSIBLE_FORMATS),p=d==null||d.includes(Ae.UPC_A);if(h&&p){const w=c.getRawBytes(),_=new yt(c.getText().substring(1),w,w?w.length:null,c.getResultPoints(),Ae.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new te}reset(){for(let r of this.readers)r.reset()}}class en extends Ot{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(Ot.patternMatchVariance(r,s[a],en.MAX_INDIVIDUAL_VARIANCE)<en.MAX_AVG_VARIANCE)return a;throw new te}static count(r){return ze.sum(new Int32Array(r))}static increment(r,s){let a=0,u=s[0];for(let c=1;c<r.length;c++)s[c]>u&&(u=s[c],a=c);r[a]++}static decrement(r,s){let a=0,u=s[0];for(let c=1;c<r.length;c++)s[c]<u&&(u=s[c],a=c);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],u=s/a;if(u>=en.MIN_FINDER_PATTERN_RATIO&&u<=en.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d of r)d>h&&(h=d),d<c&&(c=d);return h<10*c}return!1}}en.MAX_AVG_VARIANCE=.2,en.MAX_INDIVIDUAL_VARIANCE=.45,en.MIN_FINDER_PATTERN_RATIO=9.5/12,en.MAX_FINDER_PATTERN_RATIO=12.5/14;class wr{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof wr))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cs{constructor(r,s,a,u,c){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new _e(a,c)),this.resultPoints.push(new _e(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Cs))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class pt{constructor(){}static getRSSvalue(r,s,a){let u=0;for(let p of r)u+=p;let c=0,h=0,d=r.length;for(let p=0;p<d-1;p++){let w;for(w=1,h|=1<<p;w<r[p];w++,h&=~(1<<p)){let _=pt.combins(u-w-1,d-p-2);if(a&&h===0&&u-w-(d-p-1)>=d-p-1&&(_-=pt.combins(u-w-(d-p),d-p-2)),d-p-1>1){let T=0;for(let S=u-w-(d-p-2);S>s;S--)T+=pt.combins(u-w-S-1,d-p-3);_-=T*(d-1-p)}else u-w>s&&_--;c+=_}u-=w}return c}static combins(r,s){let a,u;r-s>s?(u=s,a=r-s):(u=r-s,a=s);let c=1,h=1;for(let d=r;d>a;d--)c*=d,h<=u&&(c/=h,h++);for(;h<=u;)c/=h,h++;return c}}class Vl{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,u=new Q(a),c=0,d=r[0].getRightChar().getValue();for(let p=11;p>=0;--p)d&1<<p&&u.set(c),c++;for(let p=1;p<r.length;++p){let w=r[p],_=w.getLeftChar().getValue();for(let T=11;T>=0;--T)_&1<<T&&u.set(c),c++;if(w.getRightChar()!=null){let T=w.getRightChar().getValue();for(let S=11;S>=0;--S)T&1<<S&&u.set(c),c++}}return u}}class sr{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class hi{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Sn extends hi{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Sn.FNC1}}Sn.FNC1="$";class fi extends hi{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class tn extends hi{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new b;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===tn.FNC1}isSecondDigitFNC1(){return this.secondDigit===tn.FNC1}isAnyFNC1(){return this.firstDigit===tn.FNC1||this.secondDigit===tn.FNC1}}tn.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new te;let s=r.substring(0,2);for(let c of me.TWO_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,c[2],r):me.processFixedAI(2,c[1],r);if(r.length<3)throw new te;let a=r.substring(0,3);for(let c of me.THREE_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,c[2],r):me.processFixedAI(3,c[1],r);for(let c of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,c[2],r):me.processFixedAI(4,c[1],r);if(r.length<4)throw new te;let u=r.substring(0,4);for(let c of me.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,c[2],r):me.processFixedAI(4,c[1],r);throw new te}static processFixedAI(r,s,a){if(a.length<r)throw new te;let u=a.substring(0,r);if(a.length<r+s)throw new te;let c=a.substring(r,r+s),h=a.substring(r+s),d="("+u+")"+c,p=me.parseFieldsInGeneralPurpose(h);return p==null?d:d+p}static processVariableAI(r,s,a){let u=a.substring(0,r),c;a.length<r+s?c=a.length:c=r+s;let h=a.substring(r,c),d=a.substring(c),p="("+u+")"+h,w=me.parseFieldsInGeneralPurpose(d);return w==null?p:p+w}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class ki{constructor(r){this.buffer=new B,this.information=r}decodeAllCodes(r,s){let a=s,u=null;do{let c=this.decodeGeneralPurposeField(a,u),h=me.parseFieldsInGeneralPurpose(c.getNewString());if(h!=null&&r.append(h),c.isRemaining()?u=""+c.getRemainingValue():u=null,a===c.getNewPosition())break;a=c.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(r,4);return c===0?new tn(this.information.getSize(),tn.FNC1,tn.FNC1):new tn(this.information.getSize(),c-1,tn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,u=(s-8)%11;return new tn(r+7,a,u)}extractNumericValueFromBitArray(r,s){return ki.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let u=0;for(let c=0;c<a;++c)r.get(s+c)&&(u|=1<<a-c-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new fi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new fi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new fi(this.current.getPosition(),this.buffer.toString()):s=new fi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new sr(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new fi(this.current.getPosition(),this.buffer.toString());return new sr(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new sr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new fi(this.current.getPosition(),this.buffer.toString());return new sr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new sr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new fi(this.current.getPosition(),this.buffer.toString());return new sr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new sr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Sn(r+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new Sn(r+7,""+(a+1));if(a>=90&&a<116)return new Sn(r+7,""+(a+7));let u=this.extractNumericValueFromBitArray(r,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new b}return new Sn(r+8,c)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Sn(r+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new Sn(r+6,""+(a+33));let u;switch(a){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new jn("Decoding invalid alphanumeric value: "+a)}return new Sn(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Mi{constructor(r){this.information=r,this.generalDecoder=new ki(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xn extends Mi{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);c/100===0&&r.append("0"),c/10===0&&r.append("0"),r.append(c)}xn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let u=0;u<13;u++){let c=r.charAt(u+s).charCodeAt(0)-48;a+=u&1?c:3*c}a=10-a%10,a===10&&(a=0),r.append(a)}}xn.GTIN_SIZE=40;class Kr extends xn{constructor(r){super(r)}parseInformation(){let r=new B;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Kr.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Kr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Kr.HEADER_SIZE+44)}}Kr.HEADER_SIZE=4;class di extends Mi{constructor(r){super(r)}parseInformation(){let r=new B;return this.getGeneralDecoder().decodeAllCodes(r,di.HEADER_SIZE)}}di.HEADER_SIZE=5;class or extends xn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,u);let c=this.checkWeight(u),h=1e5;for(let d=0;d<5;++d)c/h===0&&r.append("0"),h/=10;r.append(c)}}class ar extends or{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+or.GTIN_SIZE+ar.WEIGHT_SIZE)throw new te;let r=new B;return this.encodeCompressedGtin(r,ar.HEADER_SIZE),this.encodeCompressedWeight(r,ar.HEADER_SIZE+or.GTIN_SIZE,ar.WEIGHT_SIZE),r.toString()}}ar.HEADER_SIZE=5,ar.WEIGHT_SIZE=15;class Ul extends ar{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class xa extends ar{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Hn extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Hn.HEADER_SIZE+xn.GTIN_SIZE)throw new te;let r=new B;this.encodeCompressedGtin(r,Hn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Hn.HEADER_SIZE+xn.GTIN_SIZE,Hn.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Hn.HEADER_SIZE+xn.GTIN_SIZE+Hn.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Hn.HEADER_SIZE=8,Hn.LAST_DIGIT_SIZE=2;class fn extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<fn.HEADER_SIZE+xn.GTIN_SIZE)throw new te;let r=new B;this.encodeCompressedGtin(r,fn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+xn.GTIN_SIZE,fn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+xn.GTIN_SIZE+fn.LAST_DIGIT_SIZE,fn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let u=this.getGeneralDecoder().decodeGeneralPurposeField(fn.HEADER_SIZE+xn.GTIN_SIZE+fn.LAST_DIGIT_SIZE+fn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}fn.HEADER_SIZE=8,fn.LAST_DIGIT_SIZE=2,fn.FIRST_THREE_DIGITS_SIZE=10;class ft extends or{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE+ft.DATE_SIZE)throw new te;let r=new B;return this.encodeCompressedGtin(r,ft.HEADER_SIZE),this.encodeCompressedWeight(r,ft.HEADER_SIZE+ft.GTIN_SIZE,ft.WEIGHT_SIZE),this.encodeCompressedDate(r,ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ft.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=a%32;a/=32;let c=a%12+1;a/=12;let h=a;h/10==0&&r.append("0"),r.append(h),c/10==0&&r.append("0"),r.append(c),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ft.HEADER_SIZE=8,ft.WEIGHT_SIZE=20,ft.DATE_SIZE=16;function zl(I){try{if(I.get(1))return new Kr(I);if(!I.get(2))return new di(I);switch(ki.extractNumericValueFromBitArray(I,1,4)){case 4:return new Ul(I);case 5:return new xa(I)}switch(ki.extractNumericValueFromBitArray(I,1,5)){case 12:return new Hn(I);case 13:return new fn(I)}switch(ki.extractNumericValueFromBitArray(I,1,7)){case 56:return new ft(I,"310","11");case 57:return new ft(I,"320","11");case 58:return new ft(I,"310","13");case 59:return new ft(I,"320","13");case 60:return new ft(I,"310","15");case 61:return new ft(I,"320","15");case 62:return new ft(I,"310","17");case 63:return new ft(I,"320","17")}}catch(r){throw console.log(r),new jn("unknown decoder: "+I)}}class lr{constructor(r,s,a,u){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof lr?lr.equalsOrNull(r.leftchar,s.leftchar)&&lr.equalsOrNull(r.rightchar,s.rightchar)&&lr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:lr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class mo{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof mo?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((u,c)=>{s.forEach(h=>{u.getLeftChar().getValue()===h.getLeftChar().getValue()&&u.getRightChar().getValue()===h.getRightChar().getValue()&&u.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(a=!0)})}),a}}class re extends en{constructor(r){super(...arguments),this.pairs=new Array(re.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return re.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,re.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(c){if(c instanceof te){if(!this.pairs.length)throw new te;a=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new te}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let u=this.rows[a];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(u.getPairs()),!re.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(r);c.push(u);try{return this.checkRows(c,a+1)}catch(h){this.verbose&&console.log(h)}}throw new te}static isValidSequence(r){for(let s of re.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,u=!1,c=!1;for(;a<this.rows.length;){let h=this.rows[a];if(h.getRowNumber()>r){c=h.isEquivalent(this.pairs);break}u=h.isEquivalent(this.pairs),a++}c||u||re.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new mo(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let u of a.getPairs())for(let c of r)if(lr.equals(u,c))break}}static isPartialRow(r,s){for(let a of s){let u=!0;for(let c of r){let h=!1;for(let d of a.getPairs())if(c.equals(d)){h=!0;break}if(!h){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Vl.buildBitArray(r),u=zl(s).parseInformation(),c=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),d=[c[0],c[1],h[0],h[1]];return new yt(u,null,null,d,Ae.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let u=a.getChecksumPortion(),c=2;for(let d=1;d<this.pairs.size();++d){let p=this.pairs.get(d);u+=p.getLeftChar().getChecksumPortion(),c++;let w=p.getRightChar();w!=null&&(u+=w.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let u=s.length%2==0;this.startFromEven&&(u=!u);let c,h=!0,d=-1;do this.findNextPair(r,s,d),c=this.parseFoundFinderPattern(r,a,u),c==null?d=re.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let p=this.decodeDataCharacter(r,c,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new te;let w;try{w=this.decodeDataCharacter(r,c,u,!1)}catch(_){w=null,this.verbose&&console.log(_)}return new lr(p,w,c,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h;a>=0?h=a:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let d=s.length%2!=0;this.startFromEven&&(d=!d);let p=!1;for(;h<c&&(p=!r.get(h),!!p);)h++;let w=0,_=h;for(let T=h;T<c;T++)if(r.get(T)!=p)u[w]++;else{if(w==3){if(d&&re.reverseCounters(u),re.isFinderPattern(u)){this.startEnd[0]=_,this.startEnd[1]=T;return}d&&re.reverseCounters(u),_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,w--}else w++;u[w]=1,p=!p}throw new te}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let u=r[a];r[a]=r[s-a-1],r[s-a-1]=u}}parseFoundFinderPattern(r,s,a){let u,c,h;if(a){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,u=this.startEnd[0]-w,c=w,h=this.startEnd[1]}else c=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),u=h-this.startEnd[1];let d=this.getDecodeFinderCounters();G.arraycopy(d,0,d,1,d.length-1),d[0]=u;let p;try{p=this.parseFinderValue(d,re.FINDER_PATTERNS)}catch{return null}return new Cs(p,[c,h],c,h,s)}decodeDataCharacter(r,s,a,u){let c=this.getDataCharacterCounters();for(let dt=0;dt<c.length;dt++)c[dt]=0;if(u)re.recordPatternInReverse(r,s.getStartEnd()[0],c);else{re.recordPattern(r,s.getStartEnd()[1],c);for(let dt=0,En=c.length-1;dt<En;dt++,En--){let hr=c[dt];c[dt]=c[En],c[En]=hr}}let h=17,d=ze.sum(new Int32Array(c))/h,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new te;let w=this.getOddCounts(),_=this.getEvenCounts(),T=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let dt=0;dt<c.length;dt++){let En=1*c[dt]/d,hr=En+.5;if(hr<1){if(En<.3)throw new te;hr=1}else if(hr>8){if(En>8.7)throw new te;hr=8}let Eo=dt/2;dt&1?(_[Eo]=hr,S[Eo]=En-hr):(w[Eo]=hr,T[Eo]=En-hr)}this.adjustOddEvenCounts(h);let k=4*s.getValue()+(a?0:2)+(u?0:1)-1,z=0,W=0;for(let dt=w.length-1;dt>=0;dt--){if(re.isNotA1left(s,a,u)){let En=re.WEIGHTS[k][2*dt];W+=w[dt]*En}z+=w[dt]}let Y=0;for(let dt=_.length-1;dt>=0;dt--)if(re.isNotA1left(s,a,u)){let En=re.WEIGHTS[k][2*dt+1];Y+=_[dt]*En}let ee=W+Y;if(z&1||z>13||z<4)throw new te;let le=(13-z)/2,ce=re.SYMBOL_WIDEST[le],se=9-ce,We=pt.getRSSvalue(w,ce,!0),Be=pt.getRSSvalue(_,se,!1),Kn=re.EVEN_TOTAL_SUBSET[le],kr=re.GSUM[le],qn=We*Kn+Be+kr;return new wr(qn,ee)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=ze.sum(new Int32Array(this.getOddCounts())),a=ze.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;s>13?c=!0:s<4&&(u=!0);let h=!1,d=!1;a>13?d=!0:a<4&&(h=!0);let p=s+a-r,w=(s&1)==1,_=(a&1)==0;if(p==1)if(w){if(_)throw new te;c=!0}else{if(!_)throw new te;d=!0}else if(p==-1)if(w){if(_)throw new te;u=!0}else{if(!_)throw new te;h=!0}else if(p==0){if(w){if(!_)throw new te;s<a?(u=!0,d=!0):(c=!0,h=!0)}else if(_)throw new te}else throw new te;if(u){if(c)throw new te;re.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&re.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new te;re.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&re.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}re.SYMBOL_WIDEST=[7,5,4,3,1],re.EVEN_TOTAL_SUBSET=[4,20,52,104,204],re.GSUM=[0,348,1388,2948,3988],re.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],re.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],re.FINDER_PAT_A=0,re.FINDER_PAT_B=1,re.FINDER_PAT_C=2,re.FINDER_PAT_D=3,re.FINDER_PAT_E=4,re.FINDER_PAT_F=5,re.FINDER_PATTERN_SEQUENCES=[[re.FINDER_PAT_A,re.FINDER_PAT_A],[re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B],[re.FINDER_PAT_A,re.FINDER_PAT_C,re.FINDER_PAT_B,re.FINDER_PAT_D],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_C],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_D,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_D],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_E],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F]],re.MAX_PAIRS=11;class Is extends wr{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class tt extends en{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const u=this.decodePair(s,!1,r,a);tt.addOrTally(this.possibleLeftPairs,u),s.reverse();let c=this.decodePair(s,!0,r,a);tt.addOrTally(this.possibleRightPairs,c),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&tt.checkChecksum(h,d))return tt.constructResult(h,d)}throw new te}static addOrTally(r,s){if(s==null)return;let a=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),u=new String(a).toString(),c=new B;for(let w=13-u.length;w>0;w--)c.append("0");c.append(u);let h=0;for(let w=0;w<13;w++){let _=c.charAt(w).charCodeAt(0)-48;h+=w&1?_:3*_}h=10-h%10,h===10&&(h=0),c.append(h.toString());let d=r.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new yt(c.toString(),null,0,[d[0],d[1],p[0],p[1]],Ae.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,a===u}decodePair(r,s,a,u){try{let c=this.findFinderPattern(r,s),h=this.parseFoundFinderPattern(r,a,s,c),d=u==null?null:u.get(ie.NEED_RESULT_POINT_CALLBACK);if(d!=null){let _=(c[0]+c[1])/2;s&&(_=r.getSize()-1-_),d.foundPossibleResultPoint(new _e(_,a))}let p=this.decodeDataCharacter(r,h,!0),w=this.decodeDataCharacter(r,h,!1);return new Is(1597*p.getValue()+w.getValue(),p.getChecksumPortion()+4*w.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,s,a){let u=this.getDataCharacterCounters();for(let Y=0;Y<u.length;Y++)u[Y]=0;if(a)Ot.recordPatternInReverse(r,s.getStartEnd()[0],u);else{Ot.recordPattern(r,s.getStartEnd()[1]+1,u);for(let Y=0,ee=u.length-1;Y<ee;Y++,ee--){let le=u[Y];u[Y]=u[ee],u[ee]=le}}let c=a?16:15,h=ze.sum(new Int32Array(u))/c,d=this.getOddCounts(),p=this.getEvenCounts(),w=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let Y=0;Y<u.length;Y++){let ee=u[Y]/h,le=Math.floor(ee+.5);le<1?le=1:le>8&&(le=8);let ce=Math.floor(Y/2);Y&1?(p[ce]=le,_[ce]=ee-le):(d[ce]=le,w[ce]=ee-le)}this.adjustOddEvenCounts(a,c);let T=0,S=0;for(let Y=d.length-1;Y>=0;Y--)S*=9,S+=d[Y],T+=d[Y];let k=0,z=0;for(let Y=p.length-1;Y>=0;Y--)k*=9,k+=p[Y],z+=p[Y];let W=S+3*k;if(a){if(T&1||T>12||T<4)throw new te;let Y=(12-T)/2,ee=tt.OUTSIDE_ODD_WIDEST[Y],le=9-ee,ce=pt.getRSSvalue(d,ee,!1),se=pt.getRSSvalue(p,le,!0),We=tt.OUTSIDE_EVEN_TOTAL_SUBSET[Y],Be=tt.OUTSIDE_GSUM[Y];return new wr(ce*We+se+Be,W)}else{if(z&1||z>10||z<4)throw new te;let Y=(10-z)/2,ee=tt.INSIDE_ODD_WIDEST[Y],le=9-ee,ce=pt.getRSSvalue(d,ee,!0),se=pt.getRSSvalue(p,le,!1),We=tt.INSIDE_ODD_TOTAL_SUBSET[Y],Be=tt.INSIDE_GSUM[Y];return new wr(se*We+ce+Be,W)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=r.getSize(),c=!1,h=0;for(;h<u&&(c=!r.get(h),s!==c);)h++;let d=0,p=h;for(let w=h;w<u;w++)if(r.get(w)!==c)a[d]++;else{if(d===3){if(en.isFinderPattern(a))return[p,w];p+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,d--}else d++;a[d]=1,c=!c}throw new te}parseFoundFinderPattern(r,s,a,u){let c=r.get(u[0]),h=u[0]-1;for(;h>=0&&c!==r.get(h);)h--;h++;const d=u[0]-h,p=this.getDecodeFinderCounters(),w=new Int32Array(p.length);G.arraycopy(p,0,w,1,p.length-1),w[0]=d;const _=this.parseFinderValue(w,tt.FINDER_PATTERNS);let T=h,S=u[1];return a&&(T=r.getSize()-1-T,S=r.getSize()-1-S),new Cs(_,[h,u[1]],T,S,s)}adjustOddEvenCounts(r,s){let a=ze.sum(new Int32Array(this.getOddCounts())),u=ze.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1,d=!1,p=!1;r?(a>12?h=!0:a<4&&(c=!0),u>12?p=!0:u<4&&(d=!0)):(a>11?h=!0:a<5&&(c=!0),u>10?p=!0:u<4&&(d=!0));let w=a+u-s,_=(a&1)===(r?1:0),T=(u&1)===1;if(w===1)if(_){if(T)throw new te;h=!0}else{if(!T)throw new te;p=!0}else if(w===-1)if(_){if(T)throw new te;c=!0}else{if(!T)throw new te;d=!0}else if(w===0){if(_){if(!T)throw new te;a<u?(c=!0,p=!0):(h=!0,d=!0)}else if(T)throw new te}else throw new te;if(c){if(h)throw new te;en.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&en.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new te;en.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&en.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],tt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],tt.OUTSIDE_GSUM=[0,161,961,2015,2715],tt.INSIDE_GSUM=[0,336,1036,1516],tt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],tt.INSIDE_ODD_WIDEST=[2,4,6,8],tt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class qr extends Ot{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(ie.POSSIBLE_FORMATS):null,u=r&&r.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Ae.EAN_13)||a.includes(Ae.UPC_A)||a.includes(Ae.EAN_8)||a.includes(Ae.UPC_E))&&this.readers.push(new Pi(r)),a.includes(Ae.CODE_39)&&this.readers.push(new bt(u)),a.includes(Ae.CODE_128)&&this.readers.push(new fe),a.includes(Ae.ITF)&&this.readers.push(new ot),a.includes(Ae.RSS_14)&&this.readers.push(new tt),a.includes(Ae.RSS_EXPANDED)&&this.readers.push(new re(this.verbose))):(this.readers.push(new Pi(r)),this.readers.push(new bt),this.readers.push(new Pi(r)),this.readers.push(new fe),this.readers.push(new ot),this.readers.push(new tt),this.readers.push(new re(this.verbose)))}decodeRow(r,s,a){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,a)}catch{}throw new te}reset(){this.readers.forEach(r=>r.reset())}}class sh extends st{constructor(r=500,s){super(new qr(s),r,s)}}class $e{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Xe{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(r,s,a,u,c,h){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=h;let d=0;const p=h.getECCodewords(),w=h.getECBlocks();for(let _ of w)d+=_.getCount()*(_.getDataCodewords()+p);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new b;for(let a of Fe.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new b}toString(){return""+this.versionNumber}static buildVersions(){return[new Fe(1,10,10,8,8,new $e(5,new Xe(1,3))),new Fe(2,12,12,10,10,new $e(7,new Xe(1,5))),new Fe(3,14,14,12,12,new $e(10,new Xe(1,8))),new Fe(4,16,16,14,14,new $e(12,new Xe(1,12))),new Fe(5,18,18,16,16,new $e(14,new Xe(1,18))),new Fe(6,20,20,18,18,new $e(18,new Xe(1,22))),new Fe(7,22,22,20,20,new $e(20,new Xe(1,30))),new Fe(8,24,24,22,22,new $e(24,new Xe(1,36))),new Fe(9,26,26,24,24,new $e(28,new Xe(1,44))),new Fe(10,32,32,14,14,new $e(36,new Xe(1,62))),new Fe(11,36,36,16,16,new $e(42,new Xe(1,86))),new Fe(12,40,40,18,18,new $e(48,new Xe(1,114))),new Fe(13,44,44,20,20,new $e(56,new Xe(1,144))),new Fe(14,48,48,22,22,new $e(68,new Xe(1,174))),new Fe(15,52,52,24,24,new $e(42,new Xe(2,102))),new Fe(16,64,64,14,14,new $e(56,new Xe(2,140))),new Fe(17,72,72,16,16,new $e(36,new Xe(4,92))),new Fe(18,80,80,18,18,new $e(48,new Xe(4,114))),new Fe(19,88,88,20,20,new $e(56,new Xe(4,144))),new Fe(20,96,96,22,22,new $e(68,new Xe(4,174))),new Fe(21,104,104,24,24,new $e(56,new Xe(6,136))),new Fe(22,120,120,18,18,new $e(68,new Xe(6,175))),new Fe(23,132,132,20,20,new $e(62,new Xe(8,163))),new Fe(24,144,144,22,22,new $e(62,new Xe(8,156),new Xe(2,155))),new Fe(25,8,18,6,16,new $e(7,new Xe(1,5))),new Fe(26,8,32,6,14,new $e(11,new Xe(1,10))),new Fe(27,12,26,10,24,new $e(14,new Xe(1,16))),new Fe(28,12,36,10,16,new $e(18,new Xe(1,22))),new Fe(29,16,36,14,16,new $e(24,new Xe(1,32))),new Fe(30,16,48,14,22,new $e(28,new Xe(1,49)))]}}Fe.VERSIONS=Fe.buildVersions();class Ts{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new b;this.version=Ts.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new et(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Fe.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,u=0;const c=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let d=!1,p=!1,w=!1,_=!1;do if(a===c&&u===0&&!d)r[s++]=this.readCorner1(c,h)&255,a-=2,u+=2,d=!0;else if(a===c-2&&u===0&&h&3&&!p)r[s++]=this.readCorner2(c,h)&255,a-=2,u+=2,p=!0;else if(a===c+4&&u===2&&!(h&7)&&!w)r[s++]=this.readCorner3(c,h)&255,a-=2,u+=2,w=!0;else if(a===c-2&&u===0&&(h&7)===4&&!_)r[s++]=this.readCorner4(c,h)&255,a-=2,u+=2,_=!0;else{do a<c&&u>=0&&!this.readMappingMatrix.get(u,a)&&(r[s++]=this.readUtah(a,u,c,h)&255),a-=2,u+=2;while(a>=0&&u<h);a+=1,u+=3;do a>=0&&u<h&&!this.readMappingMatrix.get(u,a)&&(r[s++]=this.readUtah(a,u,c,h)&255),a+=2,u-=2;while(a<c&&u>=0);a+=3,u+=1}while(a<c||u<h);if(s!==this.version.getTotalCodewords())throw new b;return r}readModule(r,s,a,u){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,u){let c=0;return this.readModule(r-2,s-2,a,u)&&(c|=1),c<<=1,this.readModule(r-2,s-1,a,u)&&(c|=1),c<<=1,this.readModule(r-1,s-2,a,u)&&(c|=1),c<<=1,this.readModule(r-1,s-1,a,u)&&(c|=1),c<<=1,this.readModule(r-1,s,a,u)&&(c|=1),c<<=1,this.readModule(r,s-2,a,u)&&(c|=1),c<<=1,this.readModule(r,s-1,a,u)&&(c|=1),c<<=1,this.readModule(r,s,a,u)&&(c|=1),c}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new C("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),h=s/u|0,d=a/c|0,p=h*u,w=d*c,_=new et(w,p);for(let T=0;T<h;++T){const S=T*u;for(let k=0;k<d;++k){const z=k*c;for(let W=0;W<u;++W){const Y=T*(u+2)+1+W,ee=S+W;for(let le=0;le<c;++le){const ce=k*(c+2)+1+le;if(r.get(ce,Y)){const se=z+le;_.set(se,ee)}}}}}return _}}class Ss{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let u=0;const c=a.getECBlocks();for(let W of c)u+=W.getCount();const h=new Array(u);let d=0;for(let W of c)for(let Y=0;Y<W.getCount();Y++){const ee=W.getDataCodewords(),le=a.getECCodewords()+ee;h[d++]=new Ss(ee,new Uint8Array(le))}const w=h[0].codewords.length-a.getECCodewords(),_=w-1;let T=0;for(let W=0;W<_;W++)for(let Y=0;Y<d;Y++)h[Y].codewords[W]=r[T++];const S=s.getVersionNumber()===24,k=S?8:d;for(let W=0;W<k;W++)h[W].codewords[w-1]=r[T++];const z=h[0].codewords.length;for(let W=w;W<z;W++)for(let Y=0;Y<d;Y++){const ee=S?(Y+8)%d:Y,le=S&&ee>7?W-1:W;h[ee].codewords[le]=r[T++]}if(T!==r.length)throw new C;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class yo{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new C(""+r);let s=0,a=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(a>0){const h=8-a,d=r<h?r:h,p=h-d,w=255>>8-d<<p;s=(c[u]&w)>>p,r-=d,a+=d,a===8&&(a=0,u++)}if(r>0){for(;r>=8;)s=s<<8|c[u]&255,u++,r-=8;if(r>0){const h=8-r,d=255>>h<<h;s=s<<r|(c[u]&d)>>h,a+=r}}return this.bitOffset=a,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ft;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));class Yr{static decode(r){const s=new yo(r),a=new B,u=new B,c=new Array;let h=Ft.ASCII_ENCODE;do if(h===Ft.ASCII_ENCODE)h=this.decodeAsciiSegment(s,a,u);else{switch(h){case Ft.C40_ENCODE:this.decodeC40Segment(s,a);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(s,a,c);break;default:throw new b}h=Ft.ASCII_ENCODE}while(h!==Ft.PAD_ENCODE&&s.available()>0);return u.length()>0&&a.append(u.toString()),new As(r,a.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(r,s,a){let u=!1;do{let c=r.readBits(8);if(c===0)throw new b;if(c<=128)return u&&(c+=128),s.append(String.fromCharCode(c-1)),Ft.ASCII_ENCODE;if(c===129)return Ft.PAD_ENCODE;if(c<=229){const h=c-130;h<10&&s.append("0"),s.append(""+h)}else switch(c){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(c!==254||r.available()!==0)throw new b;break}}while(r.available()>0);return Ft.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const u=[];let c=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),u);for(let d=0;d<3;d++){const p=u[d];switch(c){case 0:if(p<3)c=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new b;break;case 1:a?(s.append(String.fromCharCode(p+128)),a=!1):s.append(String.fromCharCode(p)),c=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(p){case 27:s.append("");break;case 30:a=!0;break;default:throw new b}c=0;break;case 3:a?(s.append(String.fromCharCode(p+224)),a=!1):s.append(String.fromCharCode(p+96)),c=0;break;default:throw new b}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,u=[],c=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),u);for(let d=0;d<3;d++){const p=u[d];switch(c){case 0:if(p<3)c=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new b;break;case 1:a?(s.append(String.fromCharCode(p+128)),a=!1):s.append(String.fromCharCode(p)),c=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(p){case 27:s.append("");break;case 30:a=!0;break;default:throw new b}c=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w),c=0}else throw new b;break;default:throw new b}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),a);for(let c=0;c<3;c++){const h=a[c];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new b;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let u=(r<<8)+s-1,c=Math.floor(u/1600);a[0]=c,u-=c*1600,c=Math.floor(u/40),a[1]=c,a[2]=u-c*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let u=r.readBits(6);if(u===31){const c=8-r.getBitOffset();c!==8&&r.readBits(c);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let u=1+r.getByteOffset();const c=this.unrandomize255State(r.readBits(8),u++);let h;if(c===0?h=r.available()/8|0:c<250?h=c:h=250*(c-249)+this.unrandomize255State(r.readBits(8),u++),h<0)throw new b;const d=new Uint8Array(h);for(let p=0;p<h;p++){if(r.available()<8)throw new b;d[p]=this.unrandomize255State(r.readBits(8),u++)}a.push(d);try{s.append(H.decode(d,j.ISO88591))}catch(p){throw new jn("Platform does not support required encoding: "+p.message)}}static unrandomize255State(r,s){const a=149*s%255+1,u=r-a;return u>=0?u:u+256}}Yr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yr.TEXT_SHIFT2_SET_CHARS=Yr.C40_SHIFT2_SET_CHARS,Yr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class oh{constructor(){this.rsDecoder=new bi(Ge.DATA_MATRIX_FIELD_256)}decode(r){const s=new Ts(r),a=s.getVersion(),u=s.readCodewords(),c=Ss.getDataBlocks(u,a);let h=0;for(let w of c)h+=w.getNumDataCodewords();const d=new Uint8Array(h),p=c.length;for(let w=0;w<p;w++){const _=c[w],T=_.getCodewords(),S=_.getNumDataCodewords();this.correctErrors(T,S);for(let k=0;k<S;k++)d[k*p+w]=T[k]}return Yr.decode(d)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new F}for(let u=0;u<s;u++)r[u]=a[u]}}class St{constructor(r){this.image=r,this.rectangleDetector=new rr(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new te;s=this.shiftToModuleCenter(s);const a=s[0],u=s[1],c=s[2],h=s[3];let d=this.transitionsBetween(a,h)+1,p=this.transitionsBetween(c,h)+1;(d&1)===1&&(d+=1),(p&1)===1&&(p+=1),4*d<7*p&&4*p<7*d&&(d=p=Math.max(d,p));let w=St.sampleGrid(this.image,a,u,c,h,d,p);return new uo(w,[a,u,c,h])}static shiftPoint(r,s,a){let u=(s.getX()-r.getX())/(a+1),c=(s.getY()-r.getY())/(a+1);return new _e(r.getX()+u,r.getY()+c)}static moveAway(r,s,a){let u=r.getX(),c=r.getY();return u<s?u-=1:u+=1,c<a?c-=1:c+=1,new _e(u,c)}detectSolid1(r){let s=r[0],a=r[1],u=r[3],c=r[2],h=this.transitionsBetween(s,a),d=this.transitionsBetween(a,u),p=this.transitionsBetween(u,c),w=this.transitionsBetween(c,s),_=h,T=[c,s,a,u];return _>d&&(_=d,T[0]=s,T[1]=a,T[2]=u,T[3]=c),_>p&&(_=p,T[0]=a,T[1]=u,T[2]=c,T[3]=s),_>w&&(T[0]=u,T[1]=c,T[2]=s,T[3]=a),T}detectSolid2(r){let s=r[0],a=r[1],u=r[2],c=r[3],h=this.transitionsBetween(s,c),d=St.shiftPoint(a,u,(h+1)*4),p=St.shiftPoint(u,a,(h+1)*4),w=this.transitionsBetween(d,s),_=this.transitionsBetween(p,c);return w<_?(r[0]=s,r[1]=a,r[2]=u,r[3]=c):(r[0]=a,r[1]=u,r[2]=c,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],u=r[2],c=r[3],h=this.transitionsBetween(s,c),d=this.transitionsBetween(a,c),p=St.shiftPoint(s,a,(d+1)*4),w=St.shiftPoint(u,a,(h+1)*4);h=this.transitionsBetween(p,c),d=this.transitionsBetween(w,c);let _=new _e(c.getX()+(u.getX()-a.getX())/(h+1),c.getY()+(u.getY()-a.getY())/(h+1)),T=new _e(c.getX()+(s.getX()-a.getX())/(d+1),c.getY()+(s.getY()-a.getY())/(d+1));if(!this.isValid(_))return this.isValid(T)?T:null;if(!this.isValid(T))return _;let S=this.transitionsBetween(p,_)+this.transitionsBetween(w,_),k=this.transitionsBetween(p,T)+this.transitionsBetween(w,T);return S>k?_:T}shiftToModuleCenter(r){let s=r[0],a=r[1],u=r[2],c=r[3],h=this.transitionsBetween(s,c)+1,d=this.transitionsBetween(u,c)+1,p=St.shiftPoint(s,a,d*4),w=St.shiftPoint(u,a,h*4);h=this.transitionsBetween(p,c)+1,d=this.transitionsBetween(w,c)+1,(h&1)===1&&(h+=1),(d&1)===1&&(d+=1);let _=(s.getX()+a.getX()+u.getX()+c.getX())/4,T=(s.getY()+a.getY()+u.getY()+c.getY())/4;s=St.moveAway(s,_,T),a=St.moveAway(a,_,T),u=St.moveAway(u,_,T),c=St.moveAway(c,_,T);let S,k;return p=St.shiftPoint(s,a,d*4),p=St.shiftPoint(p,c,h*4),S=St.shiftPoint(a,s,d*4),S=St.shiftPoint(S,u,h*4),w=St.shiftPoint(u,c,d*4),w=St.shiftPoint(w,a,h*4),k=St.shiftPoint(c,u,d*4),k=St.shiftPoint(k,s,h*4),[p,S,w,k]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,u,c,h,d){return ir.getInstance().sampleGrid(r,h,d,.5,.5,h-.5,.5,h-.5,d-.5,.5,d-.5,s.getX(),s.getY(),c.getX(),c.getY(),u.getX(),u.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),c=Math.trunc(s.getX()),h=Math.trunc(s.getY()),d=Math.abs(h-u)>Math.abs(c-a);if(d){let W=a;a=u,u=W,W=c,c=h,h=W}let p=Math.abs(c-a),w=Math.abs(h-u),_=-p/2,T=u<h?1:-1,S=a<c?1:-1,k=0,z=this.image.get(d?u:a,d?a:u);for(let W=a,Y=u;W!==c;W+=S){let ee=this.image.get(d?Y:W,d?W:Y);if(ee!==z&&(k++,z=ee),_+=w,_>0){if(Y===h)break;Y+=T,_-=p}}return k}}class br{constructor(){this.decoder=new oh}decode(r,s=null){let a,u;if(s!=null&&s.has(ie.PURE_BARCODE)){const w=br.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(w),u=br.NO_POINTS}else{const w=new St(r.getBlackMatrix()).detect();a=this.decoder.decode(w.getBits()),u=w.getPoints()}const c=a.getRawBytes(),h=new yt(a.getText(),c,8*c.length,u,Ae.DATA_MATRIX,G.currentTimeMillis()),d=a.getByteSegments();d!=null&&h.putMetadata(Kt.BYTE_SEGMENTS,d);const p=a.getECLevel();return p!=null&&h.putMetadata(Kt.ERROR_CORRECTION_LEVEL,p),h}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new te;const u=this.moduleSize(s,r);let c=s[1];const h=a[1];let d=s[0];const w=(a[0]-d+1)/u,_=(h-c+1)/u;if(w<=0||_<=0)throw new te;const T=u/2;c+=T,d+=T;const S=new et(w,_);for(let k=0;k<_;k++){const z=c+k*u;for(let W=0;W<w;W++)r.get(d+W*u,z)&&S.set(W,k)}return S}static moduleSize(r,s){const a=s.getWidth();let u=r[0];const c=r[1];for(;u<a&&s.get(u,c);)u++;if(u===a)throw new te;const h=u-r[0];if(h===0)throw new te;return h}}br.NO_POINTS=[];class ah extends st{constructor(r=500){super(new br,r)}}var Gn;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Gn||(Gn={}));class je{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,je.FOR_BITS.set(a,this),je.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return je.L;case"M":return je.M;case"Q":return je.Q;case"H":return je.H;default:throw new v(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof je))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=je.FOR_BITS.size)throw new C;return je.FOR_BITS.get(r)}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.L=new je(Gn.L,"L",1),je.M=new je(Gn.M,"M",0),je.Q=new je(Gn.Q,"Q",3),je.H=new je(Gn.H,"H",2);class jt{constructor(r){this.errorCorrectionLevel=je.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return L.bitCount(r^s)}static decodeFormatInformation(r,s){const a=jt.doDecodeFormatInformation(r,s);return a!==null?a:jt.doDecodeFormatInformation(r^jt.FORMAT_INFO_MASK_QR,s^jt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,u=0;for(const c of jt.FORMAT_INFO_DECODE_LOOKUP){const h=c[0];if(h===r||h===s)return new jt(c[1]);let d=jt.numBitsDiffering(r,h);d<a&&(u=c[1],a=d),r!==s&&(d=jt.numBitsDiffering(s,h),d<a&&(u=c[1],a=d))}return a<=3?new jt(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof jt))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}jt.FORMAT_INFO_MASK_QR=21522,jt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class q{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class P{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let u=0;const c=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();for(const d of h)u+=d.getCount()*(d.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new b;try{return this.getVersionForNumber((r-17)/4)}catch{throw new b}}static getVersionForNumber(r){if(r<1||r>40)throw new C;return de.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let u=0;u<de.VERSION_DECODE_INFO.length;u++){const c=de.VERSION_DECODE_INFO[u];if(c===r)return de.getVersionForNumber(u+7);const h=jt.numBitsDiffering(r,c);h<s&&(a=u+7,s=h)}return s<=3?de.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new et(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let u=0;u<a;u++){const c=this.alignmentPatternCenters[u]-2;for(let h=0;h<a;h++)u===0&&(h===0||h===a-1)||u===a-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,c,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}de.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),de.VERSIONS=[new de(1,new Int32Array(0),new q(7,new P(1,19)),new q(10,new P(1,16)),new q(13,new P(1,13)),new q(17,new P(1,9))),new de(2,Int32Array.from([6,18]),new q(10,new P(1,34)),new q(16,new P(1,28)),new q(22,new P(1,22)),new q(28,new P(1,16))),new de(3,Int32Array.from([6,22]),new q(15,new P(1,55)),new q(26,new P(1,44)),new q(18,new P(2,17)),new q(22,new P(2,13))),new de(4,Int32Array.from([6,26]),new q(20,new P(1,80)),new q(18,new P(2,32)),new q(26,new P(2,24)),new q(16,new P(4,9))),new de(5,Int32Array.from([6,30]),new q(26,new P(1,108)),new q(24,new P(2,43)),new q(18,new P(2,15),new P(2,16)),new q(22,new P(2,11),new P(2,12))),new de(6,Int32Array.from([6,34]),new q(18,new P(2,68)),new q(16,new P(4,27)),new q(24,new P(4,19)),new q(28,new P(4,15))),new de(7,Int32Array.from([6,22,38]),new q(20,new P(2,78)),new q(18,new P(4,31)),new q(18,new P(2,14),new P(4,15)),new q(26,new P(4,13),new P(1,14))),new de(8,Int32Array.from([6,24,42]),new q(24,new P(2,97)),new q(22,new P(2,38),new P(2,39)),new q(22,new P(4,18),new P(2,19)),new q(26,new P(4,14),new P(2,15))),new de(9,Int32Array.from([6,26,46]),new q(30,new P(2,116)),new q(22,new P(3,36),new P(2,37)),new q(20,new P(4,16),new P(4,17)),new q(24,new P(4,12),new P(4,13))),new de(10,Int32Array.from([6,28,50]),new q(18,new P(2,68),new P(2,69)),new q(26,new P(4,43),new P(1,44)),new q(24,new P(6,19),new P(2,20)),new q(28,new P(6,15),new P(2,16))),new de(11,Int32Array.from([6,30,54]),new q(20,new P(4,81)),new q(30,new P(1,50),new P(4,51)),new q(28,new P(4,22),new P(4,23)),new q(24,new P(3,12),new P(8,13))),new de(12,Int32Array.from([6,32,58]),new q(24,new P(2,92),new P(2,93)),new q(22,new P(6,36),new P(2,37)),new q(26,new P(4,20),new P(6,21)),new q(28,new P(7,14),new P(4,15))),new de(13,Int32Array.from([6,34,62]),new q(26,new P(4,107)),new q(22,new P(8,37),new P(1,38)),new q(24,new P(8,20),new P(4,21)),new q(22,new P(12,11),new P(4,12))),new de(14,Int32Array.from([6,26,46,66]),new q(30,new P(3,115),new P(1,116)),new q(24,new P(4,40),new P(5,41)),new q(20,new P(11,16),new P(5,17)),new q(24,new P(11,12),new P(5,13))),new de(15,Int32Array.from([6,26,48,70]),new q(22,new P(5,87),new P(1,88)),new q(24,new P(5,41),new P(5,42)),new q(30,new P(5,24),new P(7,25)),new q(24,new P(11,12),new P(7,13))),new de(16,Int32Array.from([6,26,50,74]),new q(24,new P(5,98),new P(1,99)),new q(28,new P(7,45),new P(3,46)),new q(24,new P(15,19),new P(2,20)),new q(30,new P(3,15),new P(13,16))),new de(17,Int32Array.from([6,30,54,78]),new q(28,new P(1,107),new P(5,108)),new q(28,new P(10,46),new P(1,47)),new q(28,new P(1,22),new P(15,23)),new q(28,new P(2,14),new P(17,15))),new de(18,Int32Array.from([6,30,56,82]),new q(30,new P(5,120),new P(1,121)),new q(26,new P(9,43),new P(4,44)),new q(28,new P(17,22),new P(1,23)),new q(28,new P(2,14),new P(19,15))),new de(19,Int32Array.from([6,30,58,86]),new q(28,new P(3,113),new P(4,114)),new q(26,new P(3,44),new P(11,45)),new q(26,new P(17,21),new P(4,22)),new q(26,new P(9,13),new P(16,14))),new de(20,Int32Array.from([6,34,62,90]),new q(28,new P(3,107),new P(5,108)),new q(26,new P(3,41),new P(13,42)),new q(30,new P(15,24),new P(5,25)),new q(28,new P(15,15),new P(10,16))),new de(21,Int32Array.from([6,28,50,72,94]),new q(28,new P(4,116),new P(4,117)),new q(26,new P(17,42)),new q(28,new P(17,22),new P(6,23)),new q(30,new P(19,16),new P(6,17))),new de(22,Int32Array.from([6,26,50,74,98]),new q(28,new P(2,111),new P(7,112)),new q(28,new P(17,46)),new q(30,new P(7,24),new P(16,25)),new q(24,new P(34,13))),new de(23,Int32Array.from([6,30,54,78,102]),new q(30,new P(4,121),new P(5,122)),new q(28,new P(4,47),new P(14,48)),new q(30,new P(11,24),new P(14,25)),new q(30,new P(16,15),new P(14,16))),new de(24,Int32Array.from([6,28,54,80,106]),new q(30,new P(6,117),new P(4,118)),new q(28,new P(6,45),new P(14,46)),new q(30,new P(11,24),new P(16,25)),new q(30,new P(30,16),new P(2,17))),new de(25,Int32Array.from([6,32,58,84,110]),new q(26,new P(8,106),new P(4,107)),new q(28,new P(8,47),new P(13,48)),new q(30,new P(7,24),new P(22,25)),new q(30,new P(22,15),new P(13,16))),new de(26,Int32Array.from([6,30,58,86,114]),new q(28,new P(10,114),new P(2,115)),new q(28,new P(19,46),new P(4,47)),new q(28,new P(28,22),new P(6,23)),new q(30,new P(33,16),new P(4,17))),new de(27,Int32Array.from([6,34,62,90,118]),new q(30,new P(8,122),new P(4,123)),new q(28,new P(22,45),new P(3,46)),new q(30,new P(8,23),new P(26,24)),new q(30,new P(12,15),new P(28,16))),new de(28,Int32Array.from([6,26,50,74,98,122]),new q(30,new P(3,117),new P(10,118)),new q(28,new P(3,45),new P(23,46)),new q(30,new P(4,24),new P(31,25)),new q(30,new P(11,15),new P(31,16))),new de(29,Int32Array.from([6,30,54,78,102,126]),new q(30,new P(7,116),new P(7,117)),new q(28,new P(21,45),new P(7,46)),new q(30,new P(1,23),new P(37,24)),new q(30,new P(19,15),new P(26,16))),new de(30,Int32Array.from([6,26,52,78,104,130]),new q(30,new P(5,115),new P(10,116)),new q(28,new P(19,47),new P(10,48)),new q(30,new P(15,24),new P(25,25)),new q(30,new P(23,15),new P(25,16))),new de(31,Int32Array.from([6,30,56,82,108,134]),new q(30,new P(13,115),new P(3,116)),new q(28,new P(2,46),new P(29,47)),new q(30,new P(42,24),new P(1,25)),new q(30,new P(23,15),new P(28,16))),new de(32,Int32Array.from([6,34,60,86,112,138]),new q(30,new P(17,115)),new q(28,new P(10,46),new P(23,47)),new q(30,new P(10,24),new P(35,25)),new q(30,new P(19,15),new P(35,16))),new de(33,Int32Array.from([6,30,58,86,114,142]),new q(30,new P(17,115),new P(1,116)),new q(28,new P(14,46),new P(21,47)),new q(30,new P(29,24),new P(19,25)),new q(30,new P(11,15),new P(46,16))),new de(34,Int32Array.from([6,34,62,90,118,146]),new q(30,new P(13,115),new P(6,116)),new q(28,new P(14,46),new P(23,47)),new q(30,new P(44,24),new P(7,25)),new q(30,new P(59,16),new P(1,17))),new de(35,Int32Array.from([6,30,54,78,102,126,150]),new q(30,new P(12,121),new P(7,122)),new q(28,new P(12,47),new P(26,48)),new q(30,new P(39,24),new P(14,25)),new q(30,new P(22,15),new P(41,16))),new de(36,Int32Array.from([6,24,50,76,102,128,154]),new q(30,new P(6,121),new P(14,122)),new q(28,new P(6,47),new P(34,48)),new q(30,new P(46,24),new P(10,25)),new q(30,new P(2,15),new P(64,16))),new de(37,Int32Array.from([6,28,54,80,106,132,158]),new q(30,new P(17,122),new P(4,123)),new q(28,new P(29,46),new P(14,47)),new q(30,new P(49,24),new P(10,25)),new q(30,new P(24,15),new P(46,16))),new de(38,Int32Array.from([6,32,58,84,110,136,162]),new q(30,new P(4,122),new P(18,123)),new q(28,new P(13,46),new P(32,47)),new q(30,new P(48,24),new P(14,25)),new q(30,new P(42,15),new P(32,16))),new de(39,Int32Array.from([6,26,54,82,110,138,166]),new q(30,new P(20,117),new P(4,118)),new q(28,new P(40,47),new P(7,48)),new q(30,new P(43,24),new P(22,25)),new q(30,new P(10,15),new P(67,16))),new de(40,Int32Array.from([6,30,58,86,114,142,170]),new q(30,new P(19,118),new P(6,119)),new q(28,new P(18,47),new P(31,48)),new q(30,new P(34,24),new P(34,25)),new q(30,new P(20,15),new P(61,16)))];var Dt;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(Dt||(Dt={}));class dn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let u=0;u<s;u++)this.isMasked(a,u)&&r.flip(u,a)}}dn.values=new Map([[Dt.DATA_MASK_000,new dn(Dt.DATA_MASK_000,(I,r)=>(I+r&1)===0)],[Dt.DATA_MASK_001,new dn(Dt.DATA_MASK_001,(I,r)=>(I&1)===0)],[Dt.DATA_MASK_010,new dn(Dt.DATA_MASK_010,(I,r)=>r%3===0)],[Dt.DATA_MASK_011,new dn(Dt.DATA_MASK_011,(I,r)=>(I+r)%3===0)],[Dt.DATA_MASK_100,new dn(Dt.DATA_MASK_100,(I,r)=>(Math.floor(I/2)+Math.floor(r/3)&1)===0)],[Dt.DATA_MASK_101,new dn(Dt.DATA_MASK_101,(I,r)=>I*r%6===0)],[Dt.DATA_MASK_110,new dn(Dt.DATA_MASK_110,(I,r)=>I*r%6<3)],[Dt.DATA_MASK_111,new dn(Dt.DATA_MASK_111,(I,r)=>(I+r+I*r%3&1)===0)]]);class Rs{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new b;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let c=0;c<6;c++)r=this.copyBit(c,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let c=5;c>=0;c--)r=this.copyBit(8,c,r);const s=this.bitMatrix.getHeight();let a=0;const u=s-7;for(let c=s-1;c>=u;c--)a=this.copyBit(8,c,a);for(let c=s-8;c<s;c++)a=this.copyBit(c,8,a);if(this.parsedFormatInfo=jt.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new b}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return de.getVersionForNumber(s);let a=0;const u=r-11;for(let h=5;h>=0;h--)for(let d=r-9;d>=u;d--)a=this.copyBit(d,h,a);let c=de.decodeVersionInformation(a);if(c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;a=0;for(let h=5;h>=0;h--)for(let d=r-9;d>=u;d--)a=this.copyBit(h,d,a);if(c=de.decodeVersionInformation(a),c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;throw new b}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=dn.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u);const c=s.buildFunctionPattern();let h=!0;const d=new Uint8Array(s.getTotalCodewords());let p=0,w=0,_=0;for(let T=u-1;T>0;T-=2){T===6&&T--;for(let S=0;S<u;S++){const k=h?u-1-S:S;for(let z=0;z<2;z++)c.get(T-z,k)||(_++,w<<=1,this.bitMatrix.get(T-z,k)&&(w|=1),_===8&&(d[p++]=w,_=0,w=0))}h=!h}if(p!==s.getTotalCodewords())throw new b;return d}remask(){if(this.parsedFormatInfo===null)return;const r=dn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let u=s+1,c=r.getHeight();u<c;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class wa{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new C;const u=s.getECBlocksForLevel(a);let c=0;const h=u.getECBlocks();for(const z of h)c+=z.getCount();const d=new Array(c);let p=0;for(const z of h)for(let W=0;W<z.getCount();W++){const Y=z.getDataCodewords(),ee=u.getECCodewordsPerBlock()+Y;d[p++]=new wa(Y,new Uint8Array(ee))}const w=d[0].codewords.length;let _=d.length-1;for(;_>=0&&d[_].codewords.length!==w;)_--;_++;const T=w-u.getECCodewordsPerBlock();let S=0;for(let z=0;z<T;z++)for(let W=0;W<p;W++)d[W].codewords[z]=r[S++];for(let z=_;z<p;z++)d[z].codewords[T]=r[S++];const k=d[0].codewords.length;for(let z=T;z<k;z++)for(let W=0;W<p;W++){const Y=W<_?z:z+1;d[W].codewords[Y]=r[S++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Mn||(Mn={}));class ve{constructor(r,s,a,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=u,ve.FOR_BITS.set(u,this),ve.FOR_VALUE.set(r,this)}static forBits(r){const s=ve.FOR_BITS.get(r);if(s===void 0)throw new C;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof ve))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}ve.FOR_BITS=new Map,ve.FOR_VALUE=new Map,ve.TERMINATOR=new ve(Mn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ve.NUMERIC=new ve(Mn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ve.ALPHANUMERIC=new ve(Mn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ve.STRUCTURED_APPEND=new ve(Mn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ve.BYTE=new ve(Mn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ve.ECI=new ve(Mn.ECI,"ECI",Int32Array.from([0,0,0]),7),ve.KANJI=new ve(Mn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ve.FNC1_FIRST_POSITION=new ve(Mn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ve.FNC1_SECOND_POSITION=new ve(Mn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ve.HANZI=new ve(Mn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class xt{static decode(r,s,a,u){const c=new yo(r);let h=new B;const d=new Array;let p=-1,w=-1;try{let _=null,T=!1,S;do{if(c.available()<4)S=ve.TERMINATOR;else{const k=c.readBits(4);S=ve.forBits(k)}switch(S){case ve.TERMINATOR:break;case ve.FNC1_FIRST_POSITION:case ve.FNC1_SECOND_POSITION:T=!0;break;case ve.STRUCTURED_APPEND:if(c.available()<16)throw new b;p=c.readBits(8),w=c.readBits(8);break;case ve.ECI:const k=xt.parseECIValue(c);if(_=N.getCharacterSetECIByValue(k),_===null)throw new b;break;case ve.HANZI:const z=c.readBits(4),W=c.readBits(S.getCharacterCountBits(s));z===xt.GB2312_SUBSET&&xt.decodeHanziSegment(c,h,W);break;default:const Y=c.readBits(S.getCharacterCountBits(s));switch(S){case ve.NUMERIC:xt.decodeNumericSegment(c,h,Y);break;case ve.ALPHANUMERIC:xt.decodeAlphanumericSegment(c,h,Y,T);break;case ve.BYTE:xt.decodeByteSegment(c,h,Y,_,d,u);break;case ve.KANJI:xt.decodeKanjiSegment(c,h,Y);break;default:throw new b}break}}while(S!==ve.TERMINATOR)}catch{throw new b}return new As(r,h.toString(),d.length===0?null:d,a===null?null:a.toString(),p,w)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new b;const u=new Uint8Array(2*a);let c=0;for(;a>0;){const h=r.readBits(13);let d=h/96<<8&4294967295|h%96;d<959?d+=41377:d+=42657,u[c]=d>>8&255,u[c+1]=d&255,c+=2,a--}try{s.append(H.decode(u,j.GB2312))}catch(h){throw new b(h)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new b;const u=new Uint8Array(2*a);let c=0;for(;a>0;){const h=r.readBits(13);let d=h/192<<8&4294967295|h%192;d<7936?d+=33088:d+=49472,u[c]=d>>8,u[c+1]=d,c+=2,a--}try{s.append(H.decode(u,j.SHIFT_JIS))}catch(h){throw new b(h)}}static decodeByteSegment(r,s,a,u,c,h){if(8*a>r.available())throw new b;const d=new Uint8Array(a);for(let w=0;w<a;w++)d[w]=r.readBits(8);let p;u===null?p=j.guessEncoding(d,h):p=u.getName();try{s.append(H.decode(d,p))}catch(w){throw new b(w)}c.push(d)}static toAlphaNumericChar(r){if(r>=xt.ALPHANUMERIC_CHARS.length)throw new b;return xt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,u){const c=s.length();for(;a>1;){if(r.available()<11)throw new b;const h=r.readBits(11);s.append(xt.toAlphaNumericChar(Math.floor(h/45))),s.append(xt.toAlphaNumericChar(h%45)),a-=2}if(a===1){if(r.available()<6)throw new b;s.append(xt.toAlphaNumericChar(r.readBits(6)))}if(u)for(let h=c;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new b;const u=r.readBits(10);if(u>=1e3)throw new b;s.append(xt.toAlphaNumericChar(Math.floor(u/100))),s.append(xt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(xt.toAlphaNumericChar(u%10)),a-=3}if(a===2){if(r.available()<7)throw new b;const u=r.readBits(7);if(u>=100)throw new b;s.append(xt.toAlphaNumericChar(Math.floor(u/10))),s.append(xt.toAlphaNumericChar(u%10))}else if(a===1){if(r.available()<4)throw new b;const u=r.readBits(4);if(u>=10)throw new b;s.append(xt.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new b}}xt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",xt.GB2312_SUBSET=1;class jl{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class lh{constructor(){this.rsDecoder=new bi(Ge.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(et.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new Rs(r);let u=null;try{return this.decodeBitMatrixParser(a,s)}catch(c){u=c}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const c=this.decodeBitMatrixParser(a,s);return c.setOther(new jl(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(r,s){const a=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),c=r.readCodewords(),h=wa.getDataBlocks(c,a,u);let d=0;for(const _ of h)d+=_.getNumDataCodewords();const p=new Uint8Array(d);let w=0;for(const _ of h){const T=_.getCodewords(),S=_.getNumDataCodewords();this.correctErrors(T,S);for(let k=0;k<S;k++)p[w++]=T[k]}return xt.decode(p,a,u,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new F}for(let u=0;u<s;u++)r[u]=a[u]}}class gi extends _e{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const u=(this.getX()+s)/2,c=(this.getY()+r)/2,h=(this.estimatedModuleSize+a)/2;return new gi(u,c,h)}}class ur{constructor(r,s,a,u,c,h,d){this.image=r,this.startX=s,this.startY=a,this.width=u,this.height=c,this.moduleSize=h,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,u=r+a,c=this.startY+s/2,h=new Int32Array(3),d=this.image;for(let p=0;p<s;p++){const w=c+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));h[0]=0,h[1]=0,h[2]=0;let _=r;for(;_<u&&!d.get(_,w);)_++;let T=0;for(;_<u;){if(d.get(_,w))if(T===1)h[1]++;else if(T===2){if(this.foundPatternCross(h)){const S=this.handlePossibleCenter(h,w,_);if(S!==null)return S}h[0]=h[2],h[1]=1,h[2]=0,T=1}else h[++T]++;else T===1&&T++,h[T]++;_++}if(this.foundPatternCross(h)){const S=this.handlePossibleCenter(h,w,u);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new te}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=a)return!1;return!0}crossCheckVertical(r,s,a,u){const c=this.image,h=c.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let p=r;for(;p>=0&&c.get(s,p)&&d[1]<=a;)d[1]++,p--;if(p<0||d[1]>a)return NaN;for(;p>=0&&!c.get(s,p)&&d[0]<=a;)d[0]++,p--;if(d[0]>a)return NaN;for(p=r+1;p<h&&c.get(s,p)&&d[1]<=a;)d[1]++,p++;if(p===h||d[1]>a)return NaN;for(;p<h&&!c.get(s,p)&&d[2]<=a;)d[2]++,p++;if(d[2]>a)return NaN;const w=d[0]+d[1]+d[2];return 5*Math.abs(w-u)>=2*u?NaN:this.foundPatternCross(d)?ur.centerFromEnd(d,p):NaN}handlePossibleCenter(r,s,a){const u=r[0]+r[1]+r[2],c=ur.centerFromEnd(r,a),h=this.crossCheckVertical(s,c,2*r[1],u);if(!isNaN(h)){const d=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(d,h,c))return w.combineEstimate(h,c,d);const p=new gi(c,h,d);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class xo extends _e{constructor(r,s,a,u){super(r,s),this.estimatedModuleSize=a,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const u=this.count+1,c=(this.count*this.getX()+s)/u,h=(this.count*this.getY()+r)/u,d=(this.count*this.estimatedModuleSize+a)/u;return new xo(c,h,d,u)}}class Wl{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Wt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(ie.TRY_HARDER)!==void 0,a=r!=null&&r.get(ie.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),h=u.getWidth();let d=Math.floor(3*c/(4*Wt.MAX_MODULES));(d<Wt.MIN_SKIP||s)&&(d=Wt.MIN_SKIP);let p=!1;const w=new Int32Array(5);for(let T=d-1;T<c&&!p;T+=d){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let S=0;for(let k=0;k<h;k++)if(u.get(k,T))(S&1)===1&&S++,w[S]++;else if(S&1)w[S]++;else if(S===4)if(Wt.foundPatternCross(w)){if(this.handlePossibleCenter(w,T,k,a)===!0)if(d=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const W=this.findRowSkip();W>w[2]&&(T+=W-w[2]-d,k=h-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,S=3;continue}S=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,S=3;else w[++S]++;Wt.foundPatternCross(w)&&this.handlePossibleCenter(w,T,h,a)===!0&&(d=w[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return _e.orderBestPatterns(_),new Wl(_)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let c=0;c<5;c++){const h=r[c];if(h===0)return!1;s+=h}if(s<7)return!1;const a=s/7,u=a/2;return Math.abs(a-r[0])<u&&Math.abs(a-r[1])<u&&Math.abs(3*a-r[2])<3*u&&Math.abs(a-r[3])<u&&Math.abs(a-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,u){const c=this.getCrossCheckStateCount();let h=0;const d=this.image;for(;r>=h&&s>=h&&d.get(s-h,r-h);)c[2]++,h++;if(r<h||s<h)return!1;for(;r>=h&&s>=h&&!d.get(s-h,r-h)&&c[1]<=a;)c[1]++,h++;if(r<h||s<h||c[1]>a)return!1;for(;r>=h&&s>=h&&d.get(s-h,r-h)&&c[0]<=a;)c[0]++,h++;if(c[0]>a)return!1;const p=d.getHeight(),w=d.getWidth();for(h=1;r+h<p&&s+h<w&&d.get(s+h,r+h);)c[2]++,h++;if(r+h>=p||s+h>=w)return!1;for(;r+h<p&&s+h<w&&!d.get(s+h,r+h)&&c[3]<a;)c[3]++,h++;if(r+h>=p||s+h>=w||c[3]>=a)return!1;for(;r+h<p&&s+h<w&&d.get(s+h,r+h)&&c[4]<a;)c[4]++,h++;if(c[4]>=a)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-u)<2*u&&Wt.foundPatternCross(c)}crossCheckVertical(r,s,a,u){const c=this.image,h=c.getHeight(),d=this.getCrossCheckStateCount();let p=r;for(;p>=0&&c.get(s,p);)d[2]++,p--;if(p<0)return NaN;for(;p>=0&&!c.get(s,p)&&d[1]<=a;)d[1]++,p--;if(p<0||d[1]>a)return NaN;for(;p>=0&&c.get(s,p)&&d[0]<=a;)d[0]++,p--;if(d[0]>a)return NaN;for(p=r+1;p<h&&c.get(s,p);)d[2]++,p++;if(p===h)return NaN;for(;p<h&&!c.get(s,p)&&d[3]<a;)d[3]++,p++;if(p===h||d[3]>=a)return NaN;for(;p<h&&c.get(s,p)&&d[4]<a;)d[4]++,p++;if(d[4]>=a)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-u)>=2*u?NaN:Wt.foundPatternCross(d)?Wt.centerFromEnd(d,p):NaN}crossCheckHorizontal(r,s,a,u){const c=this.image,h=c.getWidth(),d=this.getCrossCheckStateCount();let p=r;for(;p>=0&&c.get(p,s);)d[2]++,p--;if(p<0)return NaN;for(;p>=0&&!c.get(p,s)&&d[1]<=a;)d[1]++,p--;if(p<0||d[1]>a)return NaN;for(;p>=0&&c.get(p,s)&&d[0]<=a;)d[0]++,p--;if(d[0]>a)return NaN;for(p=r+1;p<h&&c.get(p,s);)d[2]++,p++;if(p===h)return NaN;for(;p<h&&!c.get(p,s)&&d[3]<a;)d[3]++,p++;if(p===h||d[3]>=a)return NaN;for(;p<h&&c.get(p,s)&&d[4]<a;)d[4]++,p++;if(d[4]>=a)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-u)>=u?NaN:Wt.foundPatternCross(d)?Wt.centerFromEnd(d,p):NaN}handlePossibleCenter(r,s,a,u){const c=r[0]+r[1]+r[2]+r[3]+r[4];let h=Wt.centerFromEnd(r,a),d=this.crossCheckVertical(s,Math.floor(h),r[2],c);if(!isNaN(d)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(d),r[2],c),!isNaN(h)&&(!u||this.crossCheckDiagonal(Math.floor(d),Math.floor(h),r[2],c)))){const p=c/7;let w=!1;const _=this.possibleCenters;for(let T=0,S=_.length;T<S;T++){const k=_[T];if(k.aboutEquals(p,d,h)){_[T]=k.combineEstimate(d,h,p),w=!0;break}}if(!w){const T=new xo(h,d,p);_.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=Wt.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=Wt.CENTER_QUORUM&&(r++,s+=h.getEstimatedModuleSize());if(r<3)return!1;const u=s/a;let c=0;for(const h of this.possibleCenters)c+=Math.abs(h.getEstimatedModuleSize()-u);return c<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new te;const s=this.possibleCenters;let a;if(r>3){let u=0,c=0;for(const p of this.possibleCenters){const w=p.getEstimatedModuleSize();u+=w,c+=w*w}a=u/r;let h=Math.sqrt(c/r-a*a);s.sort((p,w)=>{const _=Math.abs(w.getEstimatedModuleSize()-a),T=Math.abs(p.getEstimatedModuleSize()-a);return _<T?-1:_>T?1:0});const d=Math.max(.2*a,h);for(let p=0;p<s.length&&s.length>3;p++){const w=s[p];Math.abs(w.getEstimatedModuleSize()-a)>d&&(s.splice(p,1),p--)}}if(s.length>3){let u=0;for(const c of s)u+=c.getEstimatedModuleSize();a=u/s.length,s.sort((c,h)=>{if(h.getCount()===c.getCount()){const d=Math.abs(h.getEstimatedModuleSize()-a),p=Math.abs(c.getEstimatedModuleSize()-a);return d<p?1:d>p?-1:0}else return h.getCount()-c.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Wt.CENTER_QUORUM=2,Wt.MIN_SKIP=3,Wt.MAX_MODULES=57;class Er{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ie.NEED_RESULT_POINT_CALLBACK);const a=new Wt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),u=r.getBottomLeft(),c=this.calculateModuleSize(s,a,u);if(c<1)throw new te("No pattern found in proccess finder.");const h=Er.computeDimension(s,a,u,c),d=de.getProvisionalVersionForDimension(h),p=d.getDimensionForVersion()-7;let w=null;if(d.getAlignmentPatternCenters().length>0){const k=a.getX()-s.getX()+u.getX(),z=a.getY()-s.getY()+u.getY(),W=1-3/p,Y=Math.floor(s.getX()+W*(k-s.getX())),ee=Math.floor(s.getY()+W*(z-s.getY()));for(let le=4;le<=16;le<<=1)try{w=this.findAlignmentInRegion(c,Y,ee,le);break}catch(ce){if(!(ce instanceof te))throw ce}}const _=Er.createTransform(s,a,u,w,h),T=Er.sampleGrid(this.image,_,h);let S;return w===null?S=[u,s,a]:S=[u,s,a,w],new uo(T,S)}static createTransform(r,s,a,u,c){const h=c-3.5;let d,p,w,_;return u!==null?(d=u.getX(),p=u.getY(),w=h-3,_=w):(d=s.getX()-r.getX()+a.getX(),p=s.getY()-r.getY()+a.getY(),w=h,_=h),ct.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,w,_,3.5,h,r.getX(),r.getY(),s.getX(),s.getY(),d,p,a.getX(),a.getY())}static sampleGrid(r,s,a){return ir.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,u){const c=ze.round(_e.distance(r,s)/u),h=ze.round(_e.distance(r,a)/u);let d=Math.floor((c+h)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new te("Dimensions could be not found.")}return d}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?u/7:isNaN(u)?a/7:(a+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,u){let c=this.sizeOfBlackWhiteBlackRun(r,s,a,u),h=1,d=r-(a-r);d<0?(h=r/(r-d),d=0):d>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(d-r),d=this.image.getWidth()-1);let p=Math.floor(s-(u-s)*h);return h=1,p<0?(h=s/(s-p),p=0):p>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),d=Math.floor(r+(d-r)*h),c+=this.sizeOfBlackWhiteBlackRun(r,s,d,p),c-1}sizeOfBlackWhiteBlackRun(r,s,a,u){const c=Math.abs(u-s)>Math.abs(a-r);if(c){let k=r;r=s,s=k,k=a,a=u,u=k}const h=Math.abs(a-r),d=Math.abs(u-s);let p=-h/2;const w=r<a?1:-1,_=s<u?1:-1;let T=0;const S=a+w;for(let k=r,z=s;k!==S;k+=w){const W=c?z:k,Y=c?k:z;if(T===1===this.image.get(W,Y)){if(T===2)return ze.distance(k,z,r,s);T++}if(p+=d,p>0){if(z===u)break;z+=_,p-=h}}return T===2?ze.distance(a+w,u,r,s):NaN}findAlignmentInRegion(r,s,a,u){const c=Math.floor(u*r),h=Math.max(0,s-c),d=Math.min(this.image.getWidth()-1,s+c);if(d-h<r*3)throw new te("Alignment top exceeds estimated module size.");const p=Math.max(0,a-c),w=Math.min(this.image.getHeight()-1,a+c);if(w-p<r*3)throw new te("Alignment bottom exceeds estimated module size.");return new ur(this.image,h,p,d-h,w-p,r,this.resultPointCallback).find()}}class Qr{constructor(){this.decoder=new lh}getDecoder(){return this.decoder}decode(r,s){let a,u;if(s!=null&&s.get(ie.PURE_BARCODE)!==void 0){const p=Qr.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(p,s),u=Qr.NO_POINTS}else{const p=new Er(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(p.getBits(),s),u=p.getPoints()}a.getOther()instanceof jl&&a.getOther().applyMirroredCorrection(u);const c=new yt(a.getText(),a.getRawBytes(),void 0,u,Ae.QR_CODE,void 0),h=a.getByteSegments();h!==null&&c.putMetadata(Kt.BYTE_SEGMENTS,h);const d=a.getECLevel();return d!==null&&c.putMetadata(Kt.ERROR_CORRECTION_LEVEL,d),a.hasStructuredAppend()&&(c.putMetadata(Kt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),c.putMetadata(Kt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),c}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new te;const u=this.moduleSize(s,r);let c=s[1],h=a[1],d=s[0],p=a[0];if(d>=p||c>=h)throw new te;if(h-c!==p-d&&(p=d+(h-c),p>=r.getWidth()))throw new te;const w=Math.round((p-d+1)/u),_=Math.round((h-c+1)/u);if(w<=0||_<=0)throw new te;if(_!==w)throw new te;const T=Math.floor(u/2);c+=T,d+=T;const S=d+Math.floor((w-1)*u)-p;if(S>0){if(S>T)throw new te;d-=S}const k=c+Math.floor((_-1)*u)-h;if(k>0){if(k>T)throw new te;c-=k}const z=new et(w,_);for(let W=0;W<_;W++){const Y=c+Math.floor(W*u);for(let ee=0;ee<w;ee++)r.get(d+Math.floor(ee*u),Y)&&z.set(ee,W)}return z}static moduleSize(r,s){const a=s.getHeight(),u=s.getWidth();let c=r[0],h=r[1],d=!0,p=0;for(;c<u&&h<a;){if(d!==s.get(c,h)){if(++p===5)break;d=!d}c++,h++}if(c===u||h===a)throw new te;return(c-r[0])/7}}Qr.NO_POINTS=new Array;class Re{PDF417Common(){}static getBitCountSum(r){return ze.sum(r)}static toIntArray(r){if(r==null||!r.length)return Re.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const u of r)s[a++]=u;return s}static getCodeword(r){const s=M.binarySearch(Re.SYMBOL_TABLE,r&262143);return s<0?-1:(Re.CODEWORD_TABLE[s]-1)%Re.NUMBER_OF_CODEWORDS}}Re.NUMBER_OF_CODEWORDS=929,Re.MAX_CODEWORDS_IN_BARCODE=Re.NUMBER_OF_CODEWORDS-1,Re.MIN_ROWS_IN_BARCODE=3,Re.MAX_ROWS_IN_BARCODE=90,Re.MODULES_IN_CODEWORD=17,Re.MODULES_IN_STOP_PATTERN=18,Re.BARS_IN_MODULE=8,Re.EMPTY_INT_ARRAY=new Int32Array([]),Re.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Re.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class uh{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class be{static detectMultiple(r,s,a){let u=r.getBlackMatrix(),c=be.detect(a,u);return c.length||(u=u.clone(),u.rotate180(),c=be.detect(a,u)),new uh(u,c)}static detect(r,s){const a=new Array;let u=0,c=0,h=!1;for(;u<s.getHeight();){const d=be.findVertices(s,u,c);if(d[0]==null&&d[3]==null){if(!h)break;h=!1,c=0;for(const p of a)p[1]!=null&&(u=Math.trunc(Math.max(u,p[1].getY()))),p[3]!=null&&(u=Math.max(u,Math.trunc(p[3].getY())));u+=be.ROW_STEP;continue}if(h=!0,a.push(d),!r)break;d[2]!=null?(c=Math.trunc(d[2].getX()),u=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),u=Math.trunc(d[4].getY()))}return a}static findVertices(r,s,a){const u=r.getHeight(),c=r.getWidth(),h=new Array(8);return be.copyToResult(h,be.findRowsWithPattern(r,u,c,s,a,be.START_PATTERN),be.INDEXES_START_PATTERN),h[4]!=null&&(a=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),be.copyToResult(h,be.findRowsWithPattern(r,u,c,s,a,be.STOP_PATTERN),be.INDEXES_STOP_PATTERN),h}static copyToResult(r,s,a){for(let u=0;u<a.length;u++)r[a[u]]=s[u]}static findRowsWithPattern(r,s,a,u,c,h){const d=new Array(4);let p=!1;const w=new Int32Array(h.length);for(;u<s;u+=be.ROW_STEP){let T=be.findGuardPattern(r,c,u,a,!1,h,w);if(T!=null){for(;u>0;){const S=be.findGuardPattern(r,c,--u,a,!1,h,w);if(S!=null)T=S;else{u++;break}}d[0]=new _e(T[0],u),d[1]=new _e(T[1],u),p=!0;break}}let _=u+1;if(p){let T=0,S=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;_<s;_++){const k=be.findGuardPattern(r,S[0],_,a,!1,h,w);if(k!=null&&Math.abs(S[0]-k[0])<be.MAX_PATTERN_DRIFT&&Math.abs(S[1]-k[1])<be.MAX_PATTERN_DRIFT)S=k,T=0;else{if(T>be.SKIPPED_ROW_COUNT_MAX)break;T++}}_-=T+1,d[2]=new _e(S[0],_),d[3]=new _e(S[1],_)}return _-u<be.BARCODE_MIN_HEIGHT&&M.fill(d,null),d}static findGuardPattern(r,s,a,u,c,h,d){M.fillWithin(d,0,d.length,0);let p=s,w=0;for(;r.get(p,a)&&p>0&&w++<be.MAX_PIXEL_DRIFT;)p--;let _=p,T=0,S=h.length;for(let k=c;_<u;_++)if(r.get(_,a)!==k)d[T]++;else{if(T===S-1){if(be.patternMatchVariance(d,h,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE)return new Int32Array([p,_]);p+=d[0]+d[1],G.arraycopy(d,2,d,0,T-1),d[T-1]=0,d[T]=0,T--}else T++;d[T]=1,k=!k}return T===S-1&&be.patternMatchVariance(d,h,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE?new Int32Array([p,_-1]):null}static patternMatchVariance(r,s,a){let u=r.length,c=0,h=0;for(let w=0;w<u;w++)c+=r[w],h+=s[w];if(c<h)return 1/0;let d=c/h;a*=d;let p=0;for(let w=0;w<u;w++){let _=r[w],T=s[w]*d,S=_>T?_-T:T-_;if(S>a)return 1/0;p+=S}return p/c}}be.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),be.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),be.MAX_AVG_VARIANCE=.42,be.MAX_INDIVIDUAL_VARIANCE=.8,be.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),be.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),be.MAX_PIXEL_DRIFT=3,be.MAX_PATTERN_DRIFT=5,be.SKIPPED_ROW_COUNT_MAX=25,be.ROW_STEP=5,be.BARCODE_MIN_HEIGHT=10;class nn{constructor(r,s){if(s.length===0)throw new C;this.field=r;let a=s.length;if(a>1&&s[0]===0){let u=1;for(;u<a&&s[u]===0;)u++;u===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-u),G.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let s=this.coefficients[0],a=this.coefficients.length;for(let u=1;u<a;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let h=s;s=a,a=h}let u=new Int32Array(a.length),c=a.length-s.length;G.arraycopy(a,0,u,0,c);for(let h=c;h<a.length;h++)u[h]=this.field.add(s[h-c],a[h]);return new nn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof nn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new nn(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,u=r.coefficients,c=u.length,h=new Int32Array(a+c-1);for(let d=0;d<a;d++){let p=s[d];for(let w=0;w<c;w++)h[d+w]=this.field.add(h[d+w],this.field.multiply(p,u[w]))}return new nn(this.field,h)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new nn(this.field,s)}multiplyScalar(r){if(r===0)return new nn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let u=0;u<s;u++)a[u]=this.field.multiply(this.coefficients[u],r);return new nn(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new C;if(s===0)return new nn(this.field,new Int32Array([0]));let a=this.coefficients.length,u=new Int32Array(a+r);for(let c=0;c<a;c++)u[c]=this.field.multiply(this.coefficients[c],s);return new nn(this.field,u)}toString(){let r=new B;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class ch{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}inverse(r){if(r===0)throw new Oi;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Li extends ch{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let u=0;u<r;u++)this.expTable[u]=a,a=a*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new nn(this,new Int32Array([0])),this.one=new nn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new C;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new nn(this,a)}}Li.PDF417_GF=new Li(Re.NUMBER_OF_CODEWORDS,3);class Ns{constructor(){this.field=Li.PDF417_GF}decode(r,s,a){let u=new nn(this.field,r),c=new Int32Array(s),h=!1;for(let z=s;z>0;z--){let W=u.evaluateAt(this.field.exp(z));c[s-z]=W,W!==0&&(h=!0)}if(!h)return 0;let d=this.field.getOne();if(a!=null)for(const z of a){let W=this.field.exp(r.length-1-z),Y=new nn(this.field,new Int32Array([this.field.subtract(0,W),1]));d=d.multiply(Y)}let p=new nn(this.field,c),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),_=w[0],T=w[1],S=this.findErrorLocations(_),k=this.findErrorMagnitudes(T,_,S);for(let z=0;z<S.length;z++){let W=r.length-1-this.field.log(S[z]);if(W<0)throw F.getChecksumInstance();r[W]=this.field.subtract(r[W],k[z])}return S.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let S=r;r=s,s=S}let u=r,c=s,h=this.field.getZero(),d=this.field.getOne();for(;c.getDegree()>=Math.round(a/2);){let S=u,k=h;if(u=c,h=d,u.isZero())throw F.getChecksumInstance();c=S;let z=this.field.getZero(),W=u.getCoefficient(u.getDegree()),Y=this.field.inverse(W);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let ee=c.getDegree()-u.getDegree(),le=this.field.multiply(c.getCoefficient(c.getDegree()),Y);z=z.add(this.field.buildMonomial(ee,le)),c=c.subtract(u.multiplyByMonomial(ee,le))}d=z.multiply(h).subtract(k).negative()}let p=d.getCoefficient(0);if(p===0)throw F.getChecksumInstance();let w=this.field.inverse(p),_=d.multiply(w),T=c.multiply(w);return[_,T]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),u=0;for(let c=1;c<this.field.getSize()&&u<s;c++)r.evaluateAt(c)===0&&(a[u]=this.field.inverse(c),u++);if(u!==s)throw F.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let u=s.getDegree(),c=new Int32Array(u);for(let w=1;w<=u;w++)c[u-w]=this.field.multiply(w,s.getCoefficient(w));let h=new nn(this.field,c),d=a.length,p=new Int32Array(d);for(let w=0;w<d;w++){let _=this.field.inverse(a[w]),T=this.field.subtract(0,r.evaluateAt(_)),S=this.field.inverse(h.evaluateAt(_));p[w]=this.field.multiply(T,S)}return p}}class $r{constructor(r,s,a,u,c){r instanceof $r?this.constructor_2(r):this.constructor_1(r,s,a,u,c)}constructor_1(r,s,a,u,c){const h=s==null||a==null,d=u==null||c==null;if(h&&d)throw new te;h?(s=new _e(0,u.getY()),a=new _e(0,c.getY())):d&&(u=new _e(r.getWidth()-1,s.getY()),c=new _e(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(a.getY(),c.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new $r(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let u=this.topLeft,c=this.bottomLeft,h=this.topRight,d=this.bottomRight;if(r>0){let p=a?this.topLeft:this.topRight,w=Math.trunc(p.getY()-r);w<0&&(w=0);let _=new _e(p.getX(),w);a?u=_:h=_}if(s>0){let p=a?this.bottomLeft:this.bottomRight,w=Math.trunc(p.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let _=new _e(p.getX(),w);a?c=_:d=_}return new $r(this.image,u,c,h,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Os{constructor(r,s,a,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Dr{constructor(){this.buffer=""}static form(r,s){let a=-1;function u(h,d,p,w,_,T){if(h==="%%")return"%";if(s[++a]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let S=_?parseInt(_.substr(1)):void 0,k;switch(T){case"s":k=s[a];break;case"c":k=s[a][0];break;case"f":k=parseFloat(s[a]).toFixed(h);break;case"p":k=parseFloat(s[a]).toPrecision(h);break;case"e":k=parseFloat(s[a]).toExponential(h);break;case"x":k=parseInt(s[a]).toString(S||16);break;case"d":k=parseFloat(parseInt(s[a],S||10).toPrecision(h)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(S);let z=parseInt(p),W=p&&p[0]+""=="0"?"0":" ";for(;k.length<z;)k=d!==void 0?k+W:W+k;return k}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,u)}format(r,...s){this.buffer+=Dr.form(r,s)}toString(){return this.buffer}}class Bi{constructor(r){this.boundingBox=new $r(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<Bi.MAX_NEARBY_DISTANCE;a++){let u=this.imageRowToCodewordIndex(r)-a;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+a,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Dr;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}Bi.MAX_NEARBY_DISTANCE=5;class pi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,u]of this.values.entries()){const c={getKey:()=>a,getValue:()=>u};c.getValue()>r?(r=c.getValue(),s=[],s.push(c.getKey())):c.getValue()===r&&s.push(c.getKey())}return Re.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class wt extends Bi{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),u=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=-1,w=1,_=0;for(let T=h;T<d;T++){if(s[T]==null)continue;let S=s[T],k=S.getRowNumber()-p;if(k===0)_++;else if(k===1)w=Math.max(w,_),_=1,p=S.getRowNumber();else if(k<0||S.getRowNumber()>=r.getRowCount()||k>T)s[T]=null;else{let z;w>2?z=(w-2)*k:z=k;let W=z>=T;for(let Y=1;Y<=z&&!W;Y++)W=s[T-Y]!=null;W?s[T]=null:(p=S.getRowNumber(),_=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let u=a.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),d=this.getCodewords(),p=-1;for(let w=c;w<h;w++){if(d[w]==null)continue;let _=d[w];_.setRowNumberAsRowIndicatorColumn();let T=_.getRowNumber()-p;T===0||(T===1?p=_.getRowNumber():_.getRowNumber()>=r.getRowCount()?d[w]=null:p=_.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new pi,a=new pi,u=new pi,c=new pi;for(let d of r){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let p=d.getValue()%30,w=d.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:a.setValue(p*3+1);break;case 1:c.setValue(p/3),u.setValue(p%3);break;case 2:s.setValue(p+1);break}}if(s.getValue().length===0||a.getValue().length===0||u.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+u.getValue()[0]<Re.MIN_ROWS_IN_BARCODE||a.getValue()[0]+u.getValue()[0]>Re.MAX_ROWS_IN_BARCODE)return null;let h=new Os(s.getValue()[0],a.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let u=r[a];if(r[a]==null)continue;let c=u.getValue()%30,h=u.getRowNumber();if(h>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:c*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(c/3)!==s.getErrorCorrectionLevel()||c%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:c+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class bs{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Re.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let u=0;u<a.length;u++)a[u]!=null&&(a[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[a];c!=null&&(c.setRowNumber(r[a].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let u=s[a].getRowNumber(),c=0;for(let h=this.barcodeColumnCount+1;h>0&&c<this.ADJUST_ROW_NUMBER_SKIP;h--){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(c=bs.adjustRowNumberIfValid(u,c,d),d.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let u=s[a].getRowNumber(),c=0;for(let h=1;h<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;h++){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(c=bs.adjustRowNumberIfValid(u,c,d),d.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let u=a[s],c=this.detectionResultColumns[r-1].getCodewords(),h=c;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let d=new Array(14);d[2]=c[s],d[3]=h[s],s>0&&(d[0]=a[s-1],d[4]=c[s-1],d[5]=h[s-1]),s>1&&(d[8]=a[s-2],d[10]=c[s-2],d[11]=h[s-2]),s<a.length-1&&(d[1]=a[s+1],d[6]=c[s+1],d[7]=h[s+1]),s<a.length-2&&(d[9]=a[s+2],d[12]=c[s+2],d[13]=h[s+2]);for(let p of d)if(bs.adjustRowNumber(u,p))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Dr;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[a];if(c==null){s.format("    |   ");continue}s.format(" %3d|%3d",c.getRowNumber(),c.getValue())}s.format("%n")}return s.toString()}}class Ds{constructor(r,s,a,u){this.rowNumber=Ds.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ds.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ds.BARCODE_ROW_UNKNOWN=-1;class wn{static initialize(){for(let r=0;r<Re.SYMBOL_TABLE.length;r++){let s=Re.SYMBOL_TABLE[r],a=s&1;for(let u=0;u<Re.BARS_IN_MODULE;u++){let c=0;for(;(s&1)===a;)c+=1,s>>=1;a=s&1,wn.RATIOS_TABLE[r]||(wn.RATIOS_TABLE[r]=new Array(Re.BARS_IN_MODULE)),wn.RATIOS_TABLE[r][Re.BARS_IN_MODULE-u-1]=Math.fround(c/Re.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=wn.getDecodedCodewordValue(wn.sampleBitCounts(r));return s!==-1?s:wn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ze.sum(r),a=new Int32Array(Re.BARS_IN_MODULE),u=0,c=0;for(let h=0;h<Re.MODULES_IN_CODEWORD;h++){let d=s/(2*Re.MODULES_IN_CODEWORD)+h*s/Re.MODULES_IN_CODEWORD;c+r[u]<=d&&(c+=r[u],u++),a[u]++}return a}static getDecodedCodewordValue(r){let s=wn.getBitValue(r);return Re.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let u=0;u<r[a];u++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ze.sum(r),a=new Array(Re.BARS_IN_MODULE);if(s>1)for(let h=0;h<a.length;h++)a[h]=Math.fround(r[h]/s);let u=Di.MAX_VALUE,c=-1;this.bSymbolTableReady||wn.initialize();for(let h=0;h<wn.RATIOS_TABLE.length;h++){let d=0,p=wn.RATIOS_TABLE[h];for(let w=0;w<Re.BARS_IN_MODULE;w++){let _=Math.fround(p[w]-a[w]);if(d+=Math.fround(_*_),d>=u)break}d<u&&(u=d,c=Re.SYMBOL_TABLE[h])}return c}}wn.bSymbolTableReady=!1,wn.RATIOS_TABLE=new Array(Re.SYMBOL_TABLE.length).map(I=>new Array(Re.BARS_IN_MODULE));class Ea{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class _a{static parseLong(r,s=void 0){return parseInt(r,s)}}class Ps extends x{}Ps.kind="NullPointerException";class Hl{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new Ps;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new $;if(a===0)return;for(let u=0;u<a;u++)this.write(r[s+u])}flush(){}close(){}}class Pr extends x{}class Gl extends Hl{constructor(r=32){if(super(),this.count=0,r<0)throw new C("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new Pr;a=L.MAX_VALUE}this.buf=M.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new $;this.ensureCapacity(this.count+a),G.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return M.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var nt;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(nt||(nt={}));function Fi(){if(typeof window<"u")return window.BigInt||null;if(typeof Ia<"u")return Ia.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ks;function _r(I){if(typeof ks>"u"&&(ks=Fi()),ks===null)throw new Error("BigInt is not supported!");return ks(I)}function wo(){let I=[];I[0]=_r(1);let r=_r(900);I[1]=r;for(let s=2;s<16;s++)I[s]=I[s-1]*r;return I}class Z{static decode(r,s){let a=new B(""),u=N.ISO8859_1;a.enableDecoding(u);let c=1,h=r[c++],d=new Ea;for(;c<r[0];){switch(h){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(r,c,a);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(h,r,u,c,a);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(r,c,a);break;case Z.ECI_CHARSET:N.getCharacterSetECIByValue(r[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(r,c,d);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new b;default:c--,c=Z.textCompaction(r,c,a);break}if(c<r.length)h=r[c++];else throw b.getFormatInstance()}if(a.length()===0)throw b.getFormatInstance();let p=new As(null,a.toString(),null,s);return p.setOther(d),p}static decodeMacroBlock(r,s,a){if(s+Z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw b.getFormatInstance();let u=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<Z.NUMBER_OF_SEQUENCE_CODEWORDS;d++,s++)u[d]=r[s];a.setSegmentIndex(L.parseInt(Z.decodeBase900toBase10(u,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new B;s=Z.textCompaction(r,s,c),a.setFileId(c.toString());let h=-1;for(r[s]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<r[0];)switch(r[s]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new B;s=Z.textCompaction(r,s+1,d),a.setFileName(d.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new B;s=Z.textCompaction(r,s+1,p),a.setSender(p.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new B;s=Z.textCompaction(r,s+1,w),a.setAddressee(w.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new B;s=Z.numericCompaction(r,s+1,_),a.setSegmentCount(L.parseInt(_.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new B;s=Z.numericCompaction(r,s+1,T),a.setTimestamp(_a.parseLong(T.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new B;s=Z.numericCompaction(r,s+1,S),a.setChecksum(L.parseInt(S.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let k=new B;s=Z.numericCompaction(r,s+1,k),a.setFileSize(_a.parseLong(k.toString()));break;default:throw b.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw b.getFormatInstance()}if(h!==-1){let d=s-h;a.isLastSegment()&&d--,a.setOptionalData(M.copyOfRange(r,h,h+d))}return s}static textCompaction(r,s,a){let u=new Int32Array((r[0]-s)*2),c=new Int32Array((r[0]-s)*2),h=0,d=!1;for(;s<r[0]&&!d;){let p=r[s++];if(p<Z.TEXT_COMPACTION_MODE_LATCH)u[h]=p/30,u[h+1]=p%30,h+=2;else switch(p){case Z.TEXT_COMPACTION_MODE_LATCH:u[h++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,d=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[h]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=r[s++],c[h]=p,h++;break}}return Z.decodeTextCompaction(u,c,h,a),s}static decodeTextCompaction(r,s,a,u){let c=nt.ALPHA,h=nt.ALPHA,d=0;for(;d<a;){let p=r[d],w="";switch(c){case nt.ALPHA:if(p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case Z.LL:c=nt.LOWER;break;case Z.ML:c=nt.MIXED;break;case Z.PS:h=c,c=nt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.LOWER:if(p<26)w=String.fromCharCode(97+p);else switch(p){case 26:w=" ";break;case Z.AS:h=c,c=nt.ALPHA_SHIFT;break;case Z.ML:c=nt.MIXED;break;case Z.PS:h=c,c=nt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.MIXED:if(p<Z.PL)w=Z.MIXED_CHARS[p];else switch(p){case Z.PL:c=nt.PUNCT;break;case 26:w=" ";break;case Z.LL:c=nt.LOWER;break;case Z.AL:c=nt.ALPHA;break;case Z.PS:h=c,c=nt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.PUNCT:if(p<Z.PAL)w=Z.PUNCT_CHARS[p];else switch(p){case Z.PAL:c=nt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.ALPHA_SHIFT:if(c=h,p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.PUNCT_SHIFT:if(c=h,p<Z.PAL)w=Z.PUNCT_CHARS[p];else switch(p){case Z.PAL:c=nt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break}w!==""&&u.append(w),d++}}static byteCompaction(r,s,a,u,c){let h=new Gl,d=0,p=0,w=!1;switch(r){case Z.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),T=s[u++];for(;u<s[0]&&!w;)switch(_[d++]=T,p=900*p+T,T=s[u++],T){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,w=!0;break;default:if(d%5===0&&d>0){for(let S=0;S<6;++S)h.write(Number(_r(p)>>_r(8*(5-S))));p=0,d=0}break}u===s[0]&&T<Z.TEXT_COMPACTION_MODE_LATCH&&(_[d++]=T);for(let S=0;S<d;S++)h.write(_[S]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!w;){let S=s[u++];if(S<Z.TEXT_COMPACTION_MODE_LATCH)d++,p=900*p+S;else switch(S){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,w=!0;break}if(d%5===0&&d>0){for(let k=0;k<6;++k)h.write(Number(_r(p)>>_r(8*(5-k))));p=0,d=0}}break}return c.append(H.decode(h.toByteArray(),a)),u}static numericCompaction(r,s,a){let u=0,c=!1,h=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!c;){let d=r[s++];if(s===r[0]&&(c=!0),d<Z.TEXT_COMPACTION_MODE_LATCH)h[u]=d,u++;else switch(d){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,c=!0;break}(u%Z.MAX_NUMERIC_CODEWORDS===0||d===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(a.append(Z.decodeBase900toBase10(h,u)),u=0)}return s}static decodeBase900toBase10(r,s){let a=_r(0);for(let c=0;c<s;c++)a+=Z.EXP900[s-c-1]*_r(r[c]);let u=a.toString();if(u.charAt(0)!=="1")throw new b;return u.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=Fi()?wo():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ke{constructor(){}static decode(r,s,a,u,c,h,d){let p=new $r(r,s,a,u,c),w=null,_=null,T;for(let z=!0;;z=!1){if(s!=null&&(w=ke.getRowIndicatorColumn(r,p,s,!0,h,d)),u!=null&&(_=ke.getRowIndicatorColumn(r,p,u,!1,h,d)),T=ke.merge(w,_),T==null)throw te.getNotFoundInstance();let W=T.getBoundingBox();if(z&&W!=null&&(W.getMinY()<p.getMinY()||W.getMaxY()>p.getMaxY()))p=W;else break}T.setBoundingBox(p);let S=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,w),T.setDetectionResultColumn(S,_);let k=w!=null;for(let z=1;z<=S;z++){let W=k?z:S-z;if(T.getDetectionResultColumn(W)!==void 0)continue;let Y;W===0||W===S?Y=new wt(p,W===0):Y=new Bi(p),T.setDetectionResultColumn(W,Y);let ee=-1,le=ee;for(let ce=p.getMinY();ce<=p.getMaxY();ce++){if(ee=ke.getStartColumn(T,W,ce,k),ee<0||ee>p.getMaxX()){if(le===-1)continue;ee=le}let se=ke.detectCodeword(r,p.getMinX(),p.getMaxX(),k,ee,ce,h,d);se!=null&&(Y.setCodeword(ce,se),le=ee,h=Math.min(h,se.getWidth()),d=Math.max(d,se.getWidth()))}}return ke.createDecoderResult(T)}static merge(r,s){if(r==null&&s==null)return null;let a=ke.getBarcodeMetadata(r,s);if(a==null)return null;let u=$r.merge(ke.adjustBoundingBox(r),ke.adjustBoundingBox(s));return new bs(a,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=ke.getMax(s),u=0;for(let d of s)if(u+=a-d,d>0)break;let c=r.getCodewords();for(let d=0;u>0&&c[d]==null;d++)u--;let h=0;for(let d=s.length-1;d>=0&&(h+=a-s[d],!(s[d]>0));d--);for(let d=c.length-1;h>0&&c[d]==null;d--)h--;return r.getBoundingBox().addMissingRows(u,h,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==u.getColumnCount()&&a.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&a.getRowCount()!==u.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,u,c,h){let d=new wt(s,u);for(let p=0;p<2;p++){let w=p===0?1:-1,_=Math.trunc(Math.trunc(a.getX()));for(let T=Math.trunc(Math.trunc(a.getY()));T<=s.getMaxY()&&T>=s.getMinY();T+=w){let S=ke.detectCodeword(r,0,r.getWidth(),u,_,T,c,h);S!=null&&(d.setCodeword(T,S),u?_=S.getStartX():_=S.getEndX())}}return d}static adjustCodewordCount(r,s){let a=s[0][1],u=a.getValue(),c=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-ke.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(c<1||c>Re.MAX_CODEWORDS_IN_BARCODE)throw te.getNotFoundInstance();a.setValue(c)}else u[0]!==c&&a.setValue(c)}static createDecoderResult(r){let s=ke.createBarcodeMatrix(r);ke.adjustCodewordCount(r,s);let a=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),c=[],h=new Array;for(let p=0;p<r.getBarcodeRowCount();p++)for(let w=0;w<r.getBarcodeColumnCount();w++){let _=s[p][w+1].getValue(),T=p*r.getBarcodeColumnCount()+w;_.length===0?a.push(T):_.length===1?u[T]=_[0]:(h.push(T),c.push(_))}let d=new Array(c.length);for(let p=0;p<d.length;p++)d[p]=c[p];return ke.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,Re.toIntArray(a),Re.toIntArray(h),d)}static createDecoderResultFromAmbiguousValues(r,s,a,u,c){let h=new Int32Array(u.length),d=100;for(;d-- >0;){for(let p=0;p<h.length;p++)s[u[p]]=c[p][h[p]];try{return ke.decodeCodewords(s,r,a)}catch(p){if(!(p instanceof F))throw p}if(h.length===0)throw F.getChecksumInstance();for(let p=0;p<h.length;p++)if(h[p]<c[p].length-1){h[p]++;break}else if(h[p]=0,p===h.length-1)throw F.getChecksumInstance()}throw F.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let c=0;c<s[u].length;c++)s[u][c]=new pi;let a=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][a].setValue(c.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,u){let c=u?1:-1,h=null;if(ke.isValidBarcodeColumn(r,s-c)&&(h=r.getDetectionResultColumn(s-c).getCodeword(a)),h!=null)return u?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(s).getCodewordNearby(a),h!=null)return u?h.getStartX():h.getEndX();if(ke.isValidBarcodeColumn(r,s-c)&&(h=r.getDetectionResultColumn(s-c).getCodewordNearby(a)),h!=null)return u?h.getEndX():h.getStartX();let d=0;for(;ke.isValidBarcodeColumn(r,s-c);){s-=c;for(let p of r.getDetectionResultColumn(s).getCodewords())if(p!=null)return(u?p.getEndX():p.getStartX())+c*d*(p.getEndX()-p.getStartX());d++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,u,c,h,d,p){c=ke.adjustCodewordStartColumn(r,s,a,u,c,h);let w=ke.getModuleBitCount(r,s,a,u,c,h);if(w==null)return null;let _,T=ze.sum(w);if(u)_=c+T;else{for(let z=0;z<w.length/2;z++){let W=w[z];w[z]=w[w.length-1-z],w[w.length-1-z]=W}_=c,c=_-T}if(!ke.checkCodewordSkew(T,d,p))return null;let S=wn.getDecodedValue(w),k=Re.getCodeword(S);return k===-1?null:new Ds(c,_,ke.getCodewordBucketNumber(S),k)}static getModuleBitCount(r,s,a,u,c,h){let d=c,p=new Int32Array(8),w=0,_=u?1:-1,T=u;for(;(u?d<a:d>=s)&&w<p.length;)r.get(d,h)===T?(p[w]++,d+=_):(w++,T=!T);return w===p.length||d===(u?a:s)&&w===p.length-1?p:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,u,c,h){let d=c,p=u?-1:1;for(let w=0;w<2;w++){for(;(u?d>=s:d<a)&&u===r.get(d,h);){if(Math.abs(c-d)>ke.CODEWORD_SKEW_SIZE)return c;d+=p}p=-p,u=!u}return d}static checkCodewordSkew(r,s,a){return s-ke.CODEWORD_SKEW_SIZE<=r&&r<=a+ke.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw b.getFormatInstance();let u=1<<s+1,c=ke.correctErrors(r,a,u);ke.verifyCodewordCount(r,u);let h=Z.decode(r,""+s);return h.setErrorsCorrected(c),h.setErasures(a.length),h}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+ke.MAX_ERRORS||a<0||a>ke.MAX_EC_CODEWORDS)throw F.getChecksumInstance();return ke.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw b.getFormatInstance();let a=r[0];if(a>r.length)throw b.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw b.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,u=s.length-1;for(;!((r&1)!==a&&(a=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return ke.getCodewordBucketNumber(ke.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Dr;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let u=0;u<r[a].length;u++){let c=r[a][u];c.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}s.format("%n")}return s.toString()}}ke.CODEWORD_SKEW_SIZE=2,ke.MAX_ERRORS=3,ke.MAX_EC_CODEWORDS=512,ke.errorCorrection=new Ns;class rn{decode(r,s=null){let a=rn.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw te.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return rn.decode(r,s,!0)}catch(a){throw a instanceof b||a instanceof F?te.getNotFoundInstance():a}}static decode(r,s,a){const u=new Array,c=be.detectMultiple(r,s,a);for(const h of c.getPoints()){const d=ke.decode(c.getBits(),h[4],h[5],h[6],h[7],rn.getMinCodewordWidth(h),rn.getMaxCodewordWidth(h)),p=new yt(d.getText(),d.getRawBytes(),void 0,h,Ae.PDF_417);p.putMetadata(Kt.ERROR_CORRECTION_LEVEL,d.getECLevel());const w=d.getOther();w!=null&&p.putMetadata(Kt.PDF417_EXTRA_METADATA,w),u.push(p)}return u.map(h=>h)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?L.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(rn.getMaxWidth(r[0],r[4]),rn.getMaxWidth(r[6],r[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.max(rn.getMaxWidth(r[1],r[5]),rn.getMaxWidth(r[7],r[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(rn.getMinWidth(r[0],r[4]),rn.getMinWidth(r[6],r[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.min(rn.getMinWidth(r[1],r[5]),rn.getMinWidth(r[7],r[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ms extends x{}Ms.kind="ReaderException";class Vi{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(ie.TRY_HARDER)===!0,a=i(r)?null:r.get(ie.POSSIBLE_FORMATS),u=new Array;if(!i(a)){const c=a.some(h=>h===Ae.UPC_A||h===Ae.UPC_E||h===Ae.EAN_13||h===Ae.EAN_8||h===Ae.CODABAR||h===Ae.CODE_39||h===Ae.CODE_93||h===Ae.CODE_128||h===Ae.ITF||h===Ae.RSS_14||h===Ae.RSS_EXPANDED);c&&!s&&u.push(new qr(r,this.verbose)),a.includes(Ae.QR_CODE)&&u.push(new Qr),a.includes(Ae.DATA_MATRIX)&&u.push(new br),a.includes(Ae.AZTEC)&&u.push(new fo),a.includes(Ae.PDF_417)&&u.push(new rn),c&&s&&u.push(new qr(r,this.verbose))}u.length===0&&(s||u.push(new qr(r,this.verbose)),u.push(new Qr),u.push(new br),u.push(new fo),u.push(new rn),s&&u.push(new qr(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ms("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Ms)continue}throw new te("No MultiFormat Readers were able to detect the code.")}}class Xl extends st{constructor(r=null,s=500){const a=new Vi;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Kl extends st{constructor(r=500){super(new rn,r)}}class Aa extends st{constructor(r=500){super(new Qr,r)}}var Ls;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(Ls||(Ls={}));var Vt=Ls;class Ui{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Zt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const u=this.field;for(let c=s.length;c<=r;c++){const h=a.multiply(new Zt(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));s.push(h),a=h}}return s[r]}encode(r,s){if(s===0)throw new C("No error correction bytes");const a=r.length-s;if(a<=0)throw new C("No data bytes provided");const u=this.buildGenerator(s),c=new Int32Array(a);G.arraycopy(r,0,c,0,a);let h=new Zt(this.field,c);h=h.multiplyByMonomial(s,1);const p=h.divide(u)[1].getCoefficients(),w=s-p.length;for(let _=0;_<w;_++)r[a+_]=0;G.arraycopy(p,0,r,a+w,p.length)}}class Et{constructor(){}static applyMaskPenaltyRule1(r){return Et.applyMaskPenaltyRule1Internal(r,!0)+Et.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),u=r.getWidth(),c=r.getHeight();for(let h=0;h<c-1;h++){const d=a[h];for(let p=0;p<u-1;p++){const w=d[p];w===d[p+1]&&w===a[h+1][p]&&w===a[h+1][p+1]&&s++}}return Et.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),u=r.getWidth(),c=r.getHeight();for(let h=0;h<c;h++)for(let d=0;d<u;d++){const p=a[h];d+6<u&&p[d]===1&&p[d+1]===0&&p[d+2]===1&&p[d+3]===1&&p[d+4]===1&&p[d+5]===0&&p[d+6]===1&&(Et.isWhiteHorizontal(p,d-4,d)||Et.isWhiteHorizontal(p,d+7,d+11))&&s++,h+6<c&&a[h][d]===1&&a[h+1][d]===0&&a[h+2][d]===1&&a[h+3][d]===1&&a[h+4][d]===1&&a[h+5][d]===0&&a[h+6][d]===1&&(Et.isWhiteVertical(a,d,h-4,h)||Et.isWhiteVertical(a,d,h+7,h+11))&&s++}return s*Et.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let u=s;u<a;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,a,u){a=Math.max(a,0),u=Math.min(u,r.length);for(let c=a;c<u;c++)if(r[c][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),u=r.getWidth(),c=r.getHeight();for(let p=0;p<c;p++){const w=a[p];for(let _=0;_<u;_++)w[_]===1&&s++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*Et.N4}static getDataMaskBit(r,s,a){let u,c;switch(r){case 0:u=a+s&1;break;case 1:u=a&1;break;case 2:u=s%3;break;case 3:u=(a+s)%3;break;case 4:u=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:c=a*s,u=(c&1)+c%3;break;case 6:c=a*s,u=(c&1)+c%3&1;break;case 7:c=a*s,u=c%3+(a+s&1)&1;break;default:throw new C("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const u=s?r.getHeight():r.getWidth(),c=s?r.getWidth():r.getHeight(),h=r.getArray();for(let d=0;d<u;d++){let p=0,w=-1;for(let _=0;_<c;_++){const T=s?h[d][_]:h[_][d];T===w?p++:(p>=5&&(a+=Et.N1+(p-5)),p=1,w=T)}p>=5&&(a+=Et.N1+(p-5))}return a}}Et.N1=3,Et.N2=3,Et.N3=40,Et.N4=10;class Bs{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let u=0;u!==s;u++)a[u]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)M.fill(s,r)}equals(r){if(!(r instanceof Bs))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,u=this.height;a<u;++a){const c=this.bytes[a],h=s.bytes[a];for(let d=0,p=this.width;d<p;++d)if(c[d]!==h[d])return!1}return!0}toString(){const r=new B;for(let s=0,a=this.height;s<a;++s){const u=this.bytes[s];for(let c=0,h=this.width;c<h;++c)switch(u[c]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Ln{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new B;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Ln.NUM_MASK_PATTERNS}}Ln.NUM_MASK_PATTERNS=8;class rt extends x{}rt.kind="WriterException";class Ie{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,u,c){Ie.clearMatrix(c),Ie.embedBasicPatterns(a,c),Ie.embedTypeInfo(s,u,c),Ie.maybeEmbedVersionInfo(a,c),Ie.embedDataBits(r,u,c)}static embedBasicPatterns(r,s){Ie.embedPositionDetectionPatternsAndSeparators(s),Ie.embedDarkDotAtLeftBottomCorner(s),Ie.maybeEmbedPositionAdjustmentPatterns(r,s),Ie.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const u=new Q;Ie.makeTypeInfoBits(r,s,u);for(let c=0,h=u.getSize();c<h;++c){const d=u.get(u.getSize()-1-c),p=Ie.TYPE_INFO_COORDINATES[c],w=p[0],_=p[1];if(a.setBoolean(w,_,d),c<8){const T=a.getWidth()-c-1;a.setBoolean(T,8,d)}else{const S=a.getHeight()-7+(c-8);a.setBoolean(8,S,d)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new Q;Ie.makeVersionInfoBits(r,a);let u=6*3-1;for(let c=0;c<6;++c)for(let h=0;h<3;++h){const d=a.get(u);u--,s.setBoolean(c,s.getHeight()-11+h,d),s.setBoolean(s.getHeight()-11+h,c,d)}}static embedDataBits(r,s,a){let u=0,c=-1,h=a.getWidth()-1,d=a.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);d>=0&&d<a.getHeight();){for(let p=0;p<2;++p){const w=h-p;if(!Ie.isEmpty(a.get(w,d)))continue;let _;u<r.getSize()?(_=r.get(u),++u):_=!1,s!==255&&Et.getDataMaskBit(s,w,d)&&(_=!_),a.setBoolean(w,d,_)}d+=c}c=-c,d+=c,h-=2}if(u!==r.getSize())throw new rt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-L.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new C("0 polynomial");const a=Ie.findMSBSet(s);for(r<<=a-1;Ie.findMSBSet(r)>=a;)r^=s<<Ie.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!Ln.isValidMaskPattern(s))throw new rt("Invalid mask pattern");const u=r.getBits()<<3|s;a.appendBits(u,5);const c=Ie.calculateBCHCode(u,Ie.TYPE_INFO_POLY);a.appendBits(c,10);const h=new Q;if(h.appendBits(Ie.TYPE_INFO_MASK_PATTERN,15),a.xor(h),a.getSize()!==15)throw new rt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Ie.calculateBCHCode(r.getVersionNumber(),Ie.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new rt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Ie.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Ie.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new rt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let u=0;u<8;++u){if(!Ie.isEmpty(a.get(r+u,s)))throw new rt;a.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let u=0;u<7;++u){if(!Ie.isEmpty(a.get(r,s+u)))throw new rt;a.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let u=0;u<5;++u){const c=Ie.POSITION_ADJUSTMENT_PATTERN[u];for(let h=0;h<5;++h)a.setNumber(r+h,s+u,c[h])}}static embedPositionDetectionPattern(r,s,a){for(let u=0;u<7;++u){const c=Ie.POSITION_DETECTION_PATTERN[u];for(let h=0;h<7;++h)a.setNumber(r+h,s+u,c[h])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Ie.POSITION_DETECTION_PATTERN[0].length;Ie.embedPositionDetectionPattern(0,0,r),Ie.embedPositionDetectionPattern(r.getWidth()-s,0,r),Ie.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Ie.embedHorizontalSeparationPattern(0,a-1,r),Ie.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Ie.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const u=7;Ie.embedVerticalSeparationPattern(u,0,r),Ie.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),Ie.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,u=Ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let c=0,h=u.length;c!==h;c++){const d=u[c];if(d>=0)for(let p=0;p!==h;p++){const w=u[p];w>=0&&Ie.isEmpty(s.get(w,d))&&Ie.embedPositionAdjustmentPattern(w-2,d-2,s)}}}}Ie.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ie.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ie.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ie.VERSION_INFO_POLY=7973,Ie.TYPE_INFO_POLY=1335,Ie.TYPE_INFO_MASK_PATTERN=21522;class ql{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ht{constructor(){}static calculateMaskPenalty(r){return Et.applyMaskPenaltyRule1(r)+Et.applyMaskPenaltyRule2(r)+Et.applyMaskPenaltyRule3(r)+Et.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let u=ht.DEFAULT_BYTE_MODE_ENCODING;const c=a!==null&&a.get(Vt.CHARACTER_SET)!==void 0;c&&(u=a.get(Vt.CHARACTER_SET).toString());const h=this.chooseMode(r,u),d=new Q;if(h===ve.BYTE&&(c||ht.DEFAULT_BYTE_MODE_ENCODING!==u)){const ce=N.getCharacterSetECIByName(u);ce!==void 0&&this.appendECI(ce,d)}this.appendModeInfo(h,d);const p=new Q;this.appendBytes(r,h,p,u);let w;if(a!==null&&a.get(Vt.QR_VERSION)!==void 0){const ce=Number.parseInt(a.get(Vt.QR_VERSION).toString(),10);w=de.getVersionForNumber(ce);const se=this.calculateBitsNeeded(h,d,p,w);if(!this.willFit(se,w,s))throw new rt("Data too big for requested version")}else w=this.recommendVersion(s,h,d,p);const _=new Q;_.appendBitArray(d);const T=h===ve.BYTE?p.getSizeInBytes():r.length;this.appendLengthInfo(T,w,h,_),_.appendBitArray(p);const S=w.getECBlocksForLevel(s),k=w.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(k,_);const z=this.interleaveWithECBytes(_,w.getTotalCodewords(),k,S.getNumBlocks()),W=new Ln;W.setECLevel(s),W.setMode(h),W.setVersion(w);const Y=w.getDimensionForVersion(),ee=new Bs(Y,Y),le=this.chooseMaskPattern(z,s,w,ee);return W.setMaskPattern(le),Ie.buildMatrix(z,s,w,le,ee),W.setMatrix(ee),W}static recommendVersion(r,s,a,u){const c=this.calculateBitsNeeded(s,a,u,de.getVersionForNumber(1)),h=this.chooseVersion(c,r),d=this.calculateBitsNeeded(s,a,u,h);return this.chooseVersion(d,r)}static calculateBitsNeeded(r,s,a,u){return s.getSize()+r.getCharacterCountBits(u)+a.getSize()}static getAlphanumericCode(r){return r<ht.ALPHANUMERIC_TABLE.length?ht.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(N.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return ve.KANJI;let a=!1,u=!1;for(let c=0,h=r.length;c<h;++c){const d=r.charAt(c);if(ht.isDigit(d))a=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)u=!0;else return ve.BYTE}return u?ve.ALPHANUMERIC:a?ve.NUMERIC:ve.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=H.encode(r,N.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let u=0;u<a;u+=2){const c=s[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(r,s,a,u){let c=Number.MAX_SAFE_INTEGER,h=-1;for(let d=0;d<Ln.NUM_MASK_PATTERNS;d++){Ie.buildMatrix(r,s,a,d,u);let p=this.calculateMaskPenalty(u);p<c&&(c=p,h=d)}return h}static chooseVersion(r,s){for(let a=1;a<=40;a++){const u=de.getVersionForNumber(a);if(ht.willFit(r,u,s))return u}throw new rt("Data too big")}static willFit(r,s,a){const u=s.getTotalCodewords(),h=s.getECBlocksForLevel(a).getTotalECCodewords(),d=u-h,p=(r+7)/8;return d>=p}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new rt("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let h=0;h<4&&s.getSize()<a;++h)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let h=u;h<8;h++)s.appendBit(!1);const c=r-s.getSizeInBytes();for(let h=0;h<c;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==a)throw new rt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,u,c,h){if(u>=a)throw new rt("Block ID too large");const d=r%a,p=a-d,w=Math.floor(r/a),_=w+1,T=Math.floor(s/a),S=T+1,k=w-T,z=_-S;if(k!==z)throw new rt("EC bytes mismatch");if(a!==p+d)throw new rt("RS blocks mismatch");if(r!==(T+k)*p+(S+z)*d)throw new rt("Total bytes mismatch");u<p?(c[0]=T,h[0]=k):(c[0]=S,h[0]=z)}static interleaveWithECBytes(r,s,a,u){if(r.getSizeInBytes()!==a)throw new rt("Number of bits and data bytes does not match");let c=0,h=0,d=0;const p=new Array;for(let _=0;_<u;++_){const T=new Int32Array(1),S=new Int32Array(1);ht.getNumDataBytesAndNumECBytesForBlockID(s,a,u,_,T,S);const k=T[0],z=new Uint8Array(k);r.toBytes(8*c,z,0,k);const W=ht.generateECBytes(z,S[0]);p.push(new ql(z,W)),h=Math.max(h,k),d=Math.max(d,W.length),c+=T[0]}if(a!==c)throw new rt("Data bytes does not match offset");const w=new Q;for(let _=0;_<h;++_)for(const T of p){const S=T.getDataBytes();_<S.length&&w.appendBits(S[_],8)}for(let _=0;_<d;++_)for(const T of p){const S=T.getErrorCorrectionBytes();_<S.length&&w.appendBits(S[_],8)}if(s!==w.getSizeInBytes())throw new rt("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const a=r.length,u=new Int32Array(a+s);for(let h=0;h<a;h++)u[h]=r[h]&255;new Ui(Ge.QR_CODE_FIELD_256).encode(u,s);const c=new Uint8Array(s);for(let h=0;h<s;h++)c[h]=u[a+h];return c}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,u){const c=a.getCharacterCountBits(s);if(r>=1<<c)throw new rt(r+" is bigger than "+((1<<c)-1));u.appendBits(r,c)}static appendBytes(r,s,a,u){switch(s){case ve.NUMERIC:ht.appendNumericBytes(r,a);break;case ve.ALPHANUMERIC:ht.appendAlphanumericBytes(r,a);break;case ve.BYTE:ht.append8BitBytes(r,a,u);break;case ve.KANJI:ht.appendKanjiBytes(r,a);break;default:throw new rt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ht.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let u=0;for(;u<a;){const c=ht.getDigit(r.charAt(u));if(u+2<a){const h=ht.getDigit(r.charAt(u+1)),d=ht.getDigit(r.charAt(u+2));s.appendBits(c*100+h*10+d,10),u+=3}else if(u+1<a){const h=ht.getDigit(r.charAt(u+1));s.appendBits(c*10+h,7),u+=2}else s.appendBits(c,4),u++}}static appendAlphanumericBytes(r,s){const a=r.length;let u=0;for(;u<a;){const c=ht.getAlphanumericCode(r.charCodeAt(u));if(c===-1)throw new rt;if(u+1<a){const h=ht.getAlphanumericCode(r.charCodeAt(u+1));if(h===-1)throw new rt;s.appendBits(c*45+h,11),u+=2}else s.appendBits(c,6),u++}}static append8BitBytes(r,s,a){let u;try{u=H.encode(r,a)}catch(c){throw new rt(c)}for(let c=0,h=u.length;c!==h;c++){const d=u[c];s.appendBits(d,8)}}static appendKanjiBytes(r,s){let a;try{a=H.encode(r,N.SJIS)}catch(c){throw new rt(c)}const u=a.length;for(let c=0;c<u;c+=2){const h=a[c]&255,d=a[c+1]&255,p=h<<8&4294967295|d;let w=-1;if(p>=33088&&p<=40956?w=p-33088:p>=57408&&p<=60351&&(w=p-49472),w===-1)throw new rt("Invalid byte sequence");const _=(w>>8)*192+(w&255);s.appendBits(_,13)}}static appendECI(r,s){s.appendBits(ve.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ht.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ht.DEFAULT_BYTE_MODE_ENCODING=N.UTF8.getName();class Ar{write(r,s,a,u=null){if(r.length===0)throw new C("Found empty contents");if(s<0||a<0)throw new C("Requested dimensions are too small: "+s+"x"+a);let c=je.L,h=Ar.QUIET_ZONE_SIZE;u!==null&&(u.get(Vt.ERROR_CORRECTION)!==void 0&&(c=je.fromString(u.get(Vt.ERROR_CORRECTION).toString())),u.get(Vt.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Vt.MARGIN).toString(),10)));const d=ht.encode(r,c,u);return this.renderResult(d,s,a,h)}writeToDom(r,s,a,u,c=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(s,a,u,c);r&&r.appendChild(h)}renderResult(r,s,a,u){const c=r.getMatrix();if(c===null)throw new jn;const h=c.getWidth(),d=c.getHeight(),p=h+u*2,w=d+u*2,_=Math.max(s,p),T=Math.max(a,w),S=Math.min(Math.floor(_/p),Math.floor(T/w)),k=Math.floor((_-h*S)/2),z=Math.floor((T-d*S)/2),W=this.createSVGElement(_,T);for(let Y=0,ee=z;Y<d;Y++,ee+=S)for(let le=0,ce=k;le<h;le++,ce+=S)if(c.get(le,Y)===1){const se=this.createSvgRectElement(ce,ee,S,S);W.appendChild(se)}return W}createSVGElement(r,s){const a=document.createElementNS(Ar.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,u){const c=document.createElementNS(Ar.SVG_NS,"rect");return c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"height",a.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ar.QUIET_ZONE_SIZE=4,Ar.SVG_NS="http://www.w3.org/2000/svg";class qt{encode(r,s,a,u,c){if(r.length===0)throw new C("Found empty contents");if(s!==Ae.QR_CODE)throw new C("Can only encode QR_CODE, but got "+s);if(a<0||u<0)throw new C(`Requested dimensions are too small: ${a}x${u}`);let h=je.L,d=qt.QUIET_ZONE_SIZE;c!==null&&(c.get(Vt.ERROR_CORRECTION)!==void 0&&(h=je.fromString(c.get(Vt.ERROR_CORRECTION).toString())),c.get(Vt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Vt.MARGIN).toString(),10)));const p=ht.encode(r,h,c);return qt.renderResult(p,a,u,d)}static renderResult(r,s,a,u){const c=r.getMatrix();if(c===null)throw new jn;const h=c.getWidth(),d=c.getHeight(),p=h+u*2,w=d+u*2,_=Math.max(s,p),T=Math.max(a,w),S=Math.min(Math.floor(_/p),Math.floor(T/w)),k=Math.floor((_-h*S)/2),z=Math.floor((T-d*S)/2),W=new et(_,T);for(let Y=0,ee=z;Y<d;Y++,ee+=S)for(let le=0,ce=k;le<h;le++,ce+=S)c.get(le,Y)===1&&W.setRegion(ce,ee,S,S);return W}}qt.QUIET_ZONE_SIZE=4;class Yl{encode(r,s,a,u,c){let h;switch(s){case Ae.QR_CODE:h=new qt;break;default:throw new C("No encoder available for format "+s)}return h.encode(r,s,a,u,c)}}class cr extends pe{constructor(r,s,a,u,c,h,d,p){if(super(h,d),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=u,this.top=c,u+h>s||c+d>a)throw new C("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(h,d)}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return G.arraycopy(this.yuvData,u,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,u=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return G.arraycopy(this.yuvData,c,u,0,a),u;for(let h=0;h<s;h++){const d=h*r;G.arraycopy(this.yuvData,c,u,d,r),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,a,u){return new cr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,u,!1)}renderThumbnail(){const r=this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const d=h*r;for(let p=0;p<r;p++){const w=u[c+p*cr.THUMBNAIL_SCALE_FACTOR]&255;a[d+p]=4278190080|w*65793}c+=this.dataWidth*cr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<s;u++,c+=this.dataWidth){const h=c+r/2;for(let d=c,p=c+r-1;d<h;d++,p--){const w=a[d];a[d]=a[p],a[p]=w}}}invert(){return new Ce(this)}}cr.THUMBNAIL_SCALE_FACTOR=2;class Zr extends pe{constructor(r,s,a,u,c,h,d){if(super(s,a),this.dataWidth=u,this.dataHeight=c,this.left=h,this.top=d,r.BYTES_PER_ELEMENT===4){const p=s*a,w=new Uint8ClampedArray(p);for(let _=0;_<p;_++){const T=r[_],S=T>>16&255,k=T>>7&510,z=T&255;w[_]=(S+k+z)/4&255}this.luminances=w}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),c===void 0&&(this.dataHeight=a),h===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return G.arraycopy(this.luminances,u,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,u=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return G.arraycopy(this.luminances,c,u,0,a),u;for(let h=0;h<s;h++){const d=h*r;G.arraycopy(this.luminances,c,u,d,r),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,a,u){return new Zr(this.luminances,a,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Ce(this)}}class g extends N{static forName(r){return this.getCharacterSetECIByName(r)}}class E{}E.ISO_8859_1=N.ISO8859_1;class A{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class R{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class K{constructor(r){this.previous=r}getPrevious(){return this.previous}}class J extends K{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new J(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new J(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+L.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class he extends J{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new he(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function at(I,r,s){return new he(I,r,s)}function Pt(I,r,s){return new J(I,r,s)}const Ke=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_t=0,Ht=1,sn=2,Xn=3,Bn=4,va=new J(null,0,0),hh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Tx(I){for(let r of I)M.fill(r,-1);return I[_t][Bn]=0,I[Ht][Bn]=0,I[Ht][_t]=28,I[Xn][Bn]=0,I[sn][Bn]=0,I[sn][_t]=15,I}const z1=Tx(M.createInt32Array(6,6));class Jr{constructor(r,s,a,u){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,u=this.token;if(r!==this.mode){let h=hh[this.mode][r];u=Pt(u,h&65535,h>>16),a+=h>>16}let c=r===sn?4:5;return u=Pt(u,s,c),new Jr(u,r,0,a+c)}shiftAndAppend(r,s){let a=this.token,u=this.mode===sn?4:5;return a=Pt(a,z1[this.mode][r],u),a=Pt(a,s,5),new Jr(a,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,u=this.bitCount;if(this.mode===Bn||this.mode===sn){let d=hh[a][_t];s=Pt(s,d&65535,d>>16),u+=d>>16,a=_t}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Jr(s,a,this.binaryShiftByteCount+1,u+c);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=at(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Jr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(hh[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Jr.calculateBinaryShiftCost(r)-Jr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let a=new Q;for(const u of s)u.appendTo(a,r);return a}toString(){return j.format("%s bits=%d bytes=%d",Ke[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Jr.INITIAL_STATE=new Jr(va,_t,0,0);function Sx(I){const r=j.getCharCode(" "),s=j.getCharCode("."),a=j.getCharCode(",");I[_t][r]=1;const u=j.getCharCode("Z"),c=j.getCharCode("A");for(let S=c;S<=u;S++)I[_t][S]=S-c+2;I[Ht][r]=1;const h=j.getCharCode("z"),d=j.getCharCode("a");for(let S=d;S<=h;S++)I[Ht][S]=S-d+2;I[sn][r]=1;const p=j.getCharCode("9"),w=j.getCharCode("0");for(let S=w;S<=p;S++)I[sn][S]=S-w+2;I[sn][a]=12,I[sn][s]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<_.length;S++)I[Xn][j.getCharCode(_[S])]=S;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<T.length;S++)j.getCharCode(T[S])>0&&(I[Bn][j.getCharCode(T[S])]=S);return I}const fh=Sx(M.createInt32Array(5,256));class Ca{constructor(r){this.text=r}encode(){const r=j.getCharCode(" "),s=j.getCharCode(`
`);let a=R.singletonList(Jr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let h,d=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case j.getCharCode("\r"):h=d===s?2:0;break;case j.getCharCode("."):h=d===r?3:0;break;case j.getCharCode(","):h=d===r?4:0;break;case j.getCharCode(":"):h=d===r?5:0;break;default:h=0}h>0?(a=Ca.updateStateListForPair(a,c,h),c++):a=this.updateStateListForChar(a,c)}return R.min(a,(c,h)=>c.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let u of r)this.updateStateForChar(u,s,a);return Ca.simplifyStates(a)}updateStateForChar(r,s,a){let u=this.text[s]&255,c=fh[r.getMode()][u]>0,h=null;for(let d=0;d<=Bn;d++){let p=fh[d][u];if(p>0){if(h==null&&(h=r.endBinaryShift(s)),!c||d===r.getMode()||d===sn){const w=h.latchAndAppend(d,p);a.push(w)}if(!c&&z1[r.getMode()][d]>=0){const w=h.shiftAndAppend(d,p);a.push(w)}}}if(r.getBinaryShiftByteCount()>0||fh[r.getMode()][u]===0){let d=r.addBinaryShiftChar(s);a.push(d)}}static updateStateListForPair(r,s,a){const u=[];for(let c of r)this.updateStateForPair(c,s,a,u);return this.simplifyStates(u)}static updateStateForPair(r,s,a,u){let c=r.endBinaryShift(s);if(u.push(c.latchAndAppend(Bn,a)),r.getMode()!==Bn&&u.push(c.shiftAndAppend(Bn,a)),a===3||a===4){let h=c.latchAndAppend(sn,16-a).latchAndAppend(sn,1);u.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(h)}}static simplifyStates(r){let s=[];for(const a of r){let u=!0;for(const c of s){if(c.isBetterThanOrEqualTo(a)){u=!1;break}a.isBetterThanOrEqualTo(c)&&(s=s.filter(h=>h!==c))}u&&s.push(a)}return s}}class Ze{constructor(){}static encodeBytes(r){return Ze.encode(r,Ze.DEFAULT_EC_PERCENT,Ze.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let u=new Ca(r).encode(),c=L.truncDivision(u.getSize()*s,100)+11,h=u.getSize()+c,d,p,w,_,T;if(a!==Ze.DEFAULT_AZTEC_LAYERS){if(d=a<0,p=Math.abs(a),p>(d?Ze.MAX_NB_BITS_COMPACT:Ze.MAX_NB_BITS))throw new C(j.format("Illegal value %s for layers",a));w=Ze.totalBitsInLayer(p,d),_=Ze.WORD_SIZE[p];let se=w-w%_;if(T=Ze.stuffBits(u,_),T.getSize()+c>se)throw new C("Data to large for user specified layer");if(d&&T.getSize()>_*64)throw new C("Data to large for user specified layer")}else{_=0,T=null;for(let se=0;;se++){if(se>Ze.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(d=se<=3,p=d?se+1:se,w=Ze.totalBitsInLayer(p,d),h>w)continue;(T==null||_!==Ze.WORD_SIZE[p])&&(_=Ze.WORD_SIZE[p],T=Ze.stuffBits(u,_));let We=w-w%_;if(!(d&&T.getSize()>_*64)&&T.getSize()+c<=We)break}}let S=Ze.generateCheckWords(T,w,_),k=T.getSize()/_,z=Ze.generateModeMessage(d,p,k),W=(d?11:14)+p*4,Y=new Int32Array(W),ee;if(d){ee=W;for(let se=0;se<Y.length;se++)Y[se]=se}else{ee=W+1+2*L.truncDivision(L.truncDivision(W,2)-1,15);let se=L.truncDivision(W,2),We=L.truncDivision(ee,2);for(let Be=0;Be<se;Be++){let Kn=Be+L.truncDivision(Be,15);Y[se-Be-1]=We-Kn-1,Y[se+Be]=We+Kn+1}}let le=new et(ee);for(let se=0,We=0;se<p;se++){let Be=(p-se)*4+(d?9:12);for(let Kn=0;Kn<Be;Kn++){let kr=Kn*2;for(let qn=0;qn<2;qn++)S.get(We+kr+qn)&&le.set(Y[se*2+qn],Y[se*2+Kn]),S.get(We+Be*2+kr+qn)&&le.set(Y[se*2+Kn],Y[W-1-se*2-qn]),S.get(We+Be*4+kr+qn)&&le.set(Y[W-1-se*2-qn],Y[W-1-se*2-Kn]),S.get(We+Be*6+kr+qn)&&le.set(Y[W-1-se*2-Kn],Y[se*2+qn])}We+=Be*8}if(Ze.drawModeMessage(le,d,ee,z),d)Ze.drawBullsEye(le,L.truncDivision(ee,2),5);else{Ze.drawBullsEye(le,L.truncDivision(ee,2),7);for(let se=0,We=0;se<L.truncDivision(W,2)-1;se+=15,We+=16)for(let Be=L.truncDivision(ee,2)&1;Be<ee;Be+=2)le.set(L.truncDivision(ee,2)-We,Be),le.set(L.truncDivision(ee,2)+We,Be),le.set(Be,L.truncDivision(ee,2)-We),le.set(Be,L.truncDivision(ee,2)+We)}let ce=new A;return ce.setCompact(d),ce.setSize(ee),ce.setLayers(p),ce.setCodeWords(k),ce.setMatrix(le),ce}static drawBullsEye(r,s,a){for(let u=0;u<a;u+=2)for(let c=s-u;c<=s+u;c++)r.set(c,s-u),r.set(c,s+u),r.set(s-u,c),r.set(s+u,c);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let u=new Q;return r?(u.appendBits(s-1,2),u.appendBits(a-1,6),u=Ze.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(a-1,11),u=Ze.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,a,u){let c=L.truncDivision(a,2);if(s)for(let h=0;h<7;h++){let d=c-3+h;u.get(h)&&r.set(d,c-5),u.get(h+7)&&r.set(c+5,d),u.get(20-h)&&r.set(d,c+5),u.get(27-h)&&r.set(c-5,d)}else for(let h=0;h<10;h++){let d=c-5+h+L.truncDivision(h,5);u.get(h)&&r.set(d,c-7),u.get(h+10)&&r.set(c+7,d),u.get(29-h)&&r.set(d,c+7),u.get(39-h)&&r.set(c-7,d)}}static generateCheckWords(r,s,a){let u=r.getSize()/a,c=new Ui(Ze.getGF(a)),h=L.truncDivision(s,a),d=Ze.bitsToWords(r,a,h);c.encode(d,h-u);let p=s%a,w=new Q;w.appendBits(0,p);for(const _ of Array.from(d))w.appendBits(_,a);return w}static bitsToWords(r,s,a){let u=new Int32Array(a),c,h;for(c=0,h=r.getSize()/s;c<h;c++){let d=0;for(let p=0;p<s;p++)d|=r.get(c*s+p)?1<<s-p-1:0;u[c]=d}return u}static getGF(r){switch(r){case 4:return Ge.AZTEC_PARAM;case 6:return Ge.AZTEC_DATA_6;case 8:return Ge.AZTEC_DATA_8;case 10:return Ge.AZTEC_DATA_10;case 12:return Ge.AZTEC_DATA_12;default:throw new C("Unsupported word size "+r)}}static stuffBits(r,s){let a=new Q,u=r.getSize(),c=(1<<s)-2;for(let h=0;h<u;h+=s){let d=0;for(let p=0;p<s;p++)(h+p>=u||r.get(h+p))&&(d|=1<<s-1-p);(d&c)===c?(a.appendBits(d&c,s),h--):d&c?a.appendBits(d,s):(a.appendBits(d|1,s),h--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Ze.DEFAULT_EC_PERCENT=33,Ze.DEFAULT_AZTEC_LAYERS=0,Ze.MAX_NB_BITS=32,Ze.MAX_NB_BITS_COMPACT=4,Ze.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ql{encode(r,s,a,u){return this.encodeWithHints(r,s,a,u,null)}encodeWithHints(r,s,a,u,c){let h=E.ISO_8859_1,d=Ze.DEFAULT_EC_PERCENT,p=Ze.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Vt.CHARACTER_SET)&&(h=g.forName(c.get(Vt.CHARACTER_SET).toString())),c.has(Vt.ERROR_CORRECTION)&&(d=L.parseInt(c.get(Vt.ERROR_CORRECTION).toString())),c.has(Vt.AZTEC_LAYERS)&&(p=L.parseInt(c.get(Vt.AZTEC_LAYERS).toString()))),Ql.encodeLayers(r,s,a,u,h,d,p)}static encodeLayers(r,s,a,u,c,h,d){if(s!==Ae.AZTEC)throw new C("Can only encode AZTEC, but got "+s);let p=Ze.encode(j.getBytes(r,c),h,d);return Ql.renderResult(p,a,u)}static renderResult(r,s,a){let u=r.getMatrix();if(u==null)throw new jn;let c=u.getWidth(),h=u.getHeight(),d=Math.max(s,c),p=Math.max(a,h),w=Math.min(d/c,p/h),_=(d-c*w)/2,T=(p-h*w)/2,S=new et(d,p);for(let k=0,z=T;k<h;k++,z+=w)for(let W=0,Y=_;W<c;W++,Y+=w)u.get(W,k)&&S.setRegion(Y,z,w,w);return S}}n.AbstractExpandedDecoder=Mi,n.ArgumentException=v,n.ArithmeticException=Oi,n.AztecCode=A,n.AztecCodeReader=fo,n.AztecCodeWriter=Ql,n.AztecDecoder=ut,n.AztecDetector=ma,n.AztecDetectorResult=co,n.AztecEncoder=Ze,n.AztecHighLevelEncoder=Ca,n.AztecPoint=hn,n.BarcodeFormat=Ae,n.Binarizer=X,n.BinaryBitmap=D,n.BitArray=Q,n.BitMatrix=et,n.BitSource=yo,n.BrowserAztecCodeReader=vs,n.BrowserBarcodeReader=sh,n.BrowserCodeReader=st,n.BrowserDatamatrixCodeReader=ah,n.BrowserMultiFormatReader=Xl,n.BrowserPDF417Reader=Kl,n.BrowserQRCodeReader=Aa,n.BrowserQRCodeSvgWriter=Ar,n.CharacterSetECI=N,n.ChecksumException=F,n.Code128Reader=fe,n.Code39Reader=bt,n.DataMatrixDecodedBitStreamParser=Yr,n.DataMatrixReader=br,n.DecodeHintType=ie,n.DecoderResult=As,n.DefaultGridSampler=cn,n.DetectorResult=uo,n.EAN13Reader=Or,n.EncodeHintType=Vt,n.Exception=x,n.FormatException=b,n.GenericGF=Ge,n.GenericGFPoly=Zt,n.GlobalHistogramBinarizer=It,n.GridSampler=ho,n.GridSamplerInstance=ir,n.HTMLCanvasElementLuminanceSource=Oe,n.HybridBinarizer=Ne,n.ITFReader=ot,n.IllegalArgumentException=C,n.IllegalStateException=jn,n.InvertedLuminanceSource=Ce,n.LuminanceSource=pe,n.MathUtils=ze,n.MultiFormatOneDReader=qr,n.MultiFormatReader=Vi,n.MultiFormatWriter=Yl,n.NotFoundException=te,n.OneDReader=Ot,n.PDF417DecodedBitStreamParser=Z,n.PDF417DecoderErrorCorrection=Ns,n.PDF417Reader=rn,n.PDF417ResultMetadata=Ea,n.PerspectiveTransform=ct,n.PlanarYUVLuminanceSource=cr,n.QRCodeByteMatrix=Bs,n.QRCodeDataMask=dn,n.QRCodeDecodedBitStreamParser=xt,n.QRCodeDecoderErrorCorrectionLevel=je,n.QRCodeDecoderFormatInformation=jt,n.QRCodeEncoder=ht,n.QRCodeEncoderQRCode=Ln,n.QRCodeMaskUtil=Et,n.QRCodeMatrixUtil=Ie,n.QRCodeMode=ve,n.QRCodeReader=Qr,n.QRCodeVersion=de,n.QRCodeWriter=qt,n.RGBLuminanceSource=Zr,n.RSS14Reader=tt,n.RSSExpandedReader=re,n.ReaderException=Ms,n.ReedSolomonDecoder=bi,n.ReedSolomonEncoder=Ui,n.ReedSolomonException=Gr,n.Result=yt,n.ResultMetadataType=Kt,n.ResultPoint=_e,n.StringUtils=j,n.UnsupportedOperationException=V,n.VideoInputDevice=gt,n.WhiteRectangleDetector=rr,n.WriterException=rt,n.ZXingArrays=M,n.ZXingCharset=g,n.ZXingInteger=L,n.ZXingStandardCharsets=E,n.ZXingStringBuilder=B,n.ZXingStringEncoding=H,n.ZXingSystem=G,n.createAbstractExpandedDecoder=zl,Object.defineProperty(n,"__esModule",{value:!0})})})(gd,gd.exports);var vt=gd.exports;const vT=mp(vt),CT=pp({__proto__:null,default:vT},[vt]);var ap=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,vt.BarcodeFormat.QR_CODE],[we.AZTEC,vt.BarcodeFormat.AZTEC],[we.CODABAR,vt.BarcodeFormat.CODABAR],[we.CODE_39,vt.BarcodeFormat.CODE_39],[we.CODE_93,vt.BarcodeFormat.CODE_93],[we.CODE_128,vt.BarcodeFormat.CODE_128],[we.DATA_MATRIX,vt.BarcodeFormat.DATA_MATRIX],[we.MAXICODE,vt.BarcodeFormat.MAXICODE],[we.ITF,vt.BarcodeFormat.ITF],[we.EAN_13,vt.BarcodeFormat.EAN_13],[we.EAN_8,vt.BarcodeFormat.EAN_8],[we.PDF_417,vt.BarcodeFormat.PDF_417],[we.RSS_14,vt.BarcodeFormat.RSS_14],[we.RSS_EXPANDED,vt.BarcodeFormat.RSS_EXPANDED],[we.UPC_A,vt.BarcodeFormat.UPC_A],[we.UPC_E,vt.BarcodeFormat.UPC_E],[we.UPC_EAN_EXTENSION,vt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!CT)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(vt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(vt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new vt.MultiFormatReader(this.verbose,this.hints),i=new vt.HTMLCanvasElementLuminanceSource(e),o=new vt.BinaryBitmap(new vt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:vx.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),IT=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(v){try{x(i.next(v))}catch(C){f(C)}}function y(v){try{x(i.throw(v))}catch(C){f(C)}}function x(v){v.done?l(v.value):o(v.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},TT=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(v){return y([x,v])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},lp=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,"qr_code"],[we.AZTEC,"aztec"],[we.CODABAR,"codabar"],[we.CODE_39,"code_39"],[we.CODE_93,"code_93"],[we.CODE_128,"code_128"],[we.DATA_MATRIX,"data_matrix"],[we.ITF,"itf"],[we.EAN_13,"ean_13"],[we.EAN_8,"ean_8"],[we.PDF_417,"pdf417"],[we.UPC_A,"upc_a"],[we.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return IT(this,void 0,void 0,function(){var n,i;return TT(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:vx.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],m=f.boundingBox.width*f.boundingBox.height;m>i&&(i=m,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),up=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(v){try{x(i.next(v))}catch(C){f(C)}}function y(v){try{x(i.throw(v))}catch(C){f(C)}}function x(v){v.done?l(v.value):o(v.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},cp=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(v){return y([x,v])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},ST=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&lp.isSupported()?(this.primaryDecoder=new lp(e,i,o),this.secondaryDecoder=new ap(e,i,o)):this.primaryDecoder=new ap(e,i,o)}return t.prototype.decodeAsync=function(e){return up(this,void 0,void 0,function(){var n;return cp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return up(this,void 0,void 0,function(){var n,i;return cp(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),U1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Cc=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(v){try{x(i.next(v))}catch(C){f(C)}}function y(v){try{x(i.throw(v))}catch(C){f(C)}}function x(v){v.done?l(v.value):o(v.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},Ic=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(v){return y([x,v])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Ix=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),RT=function(t){U1(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Ix),NT=function(t){U1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(RT),OT=function(t){U1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Ix),bT=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new NT(this.track)},t.prototype.torchFeature=function(){return new OT(this.track)},t}(),DT=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return Cc(this,void 0,void 0,function(){var l,f;return Ic(this,function(m){switch(m.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:m.sent(),m.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Cc(this,void 0,void 0,function(){return Ic(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(m){e.mediaStream.removeTrack(m),m.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new bT(this.getFirstTrackOrFail())},t}(),PT=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Cc(this,void 0,void 0,function(){return Ic(this,function(o){return[2,DT.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Cc(this,void 0,void 0,function(){var n,i;return Ic(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),hp=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(v){try{x(i.next(v))}catch(C){f(C)}}function y(v){try{x(i.throw(v))}catch(C){f(C)}}function x(v){v.done?l(v.value):o(v.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},fp=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(v){return y([x,v])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},kT=function(){function t(){}return t.failIfNotSupported=function(){return hp(this,void 0,void 0,function(){return fp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return hp(this,void 0,void 0,function(){return fp(this,function(n){return[2,PT.create(e)]})})},t}(),MT=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(v){try{x(i.next(v))}catch(C){f(C)}}function y(v){try{x(i.throw(v))}catch(C){f(C)}}function x(v){v.done?l(v.value):o(v.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},LT=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(v){return y([x,v])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},BT=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Vo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Vo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return MT(this,void 0,void 0,function(){var e,n,i,o,l,f,m;return LT(this,function(y){switch(y.label){case 0:return e=function(x){for(var v=x.getVideoTracks(),C=0,D=v;C<D.length;C++){var F=D[C];F.enabled=!1,F.stop(),x.removeTrack(F)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=y.sent(),o=[],l=0,f=i;l<f.length;l++)m=f[l],m.kind==="videoinput"&&o.push({id:m.deviceId,label:m.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],m=0,y=l;m<y.length;m++){var x=y[m];x.kind==="video"&&f.push({id:x.id,label:x.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),Ut;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Ut||(Ut={}));var FT=function(){function t(){this.state=Ut.NOT_STARTED,this.onGoingTransactionNewState=Ut.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ut.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ut.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ut.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Ut.UNKNOWN:throw"Transition from unknown is not allowed";case Ut.NOT_STARTED:this.failIfNewStateIs(e,[Ut.PAUSED]);break;case Ut.SCANNING:break;case Ut.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),VT=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Ut.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Ut.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ut.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Ut.PAUSED},t}(),UT=function(){function t(){}return t.create=function(){return new VT(new FT)},t}(),zT=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),fr=function(t){zT(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(ET),jT=function(){function t(e,n){this.logger=n,this.fps=fr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=fr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Cx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!mi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),dp=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new AT(this.verbose),this.qrcode=new ST(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=UT.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var m=jT.create(n,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=y,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:fr.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var C=this,D=this.stateManagerProxy.startTransition(Ut.SCANNING);return new Promise(function(F,X){var G=x?m.videoConstraints:C.createVideoConstraints(e);if(!G){D.cancel(),X("videoConstraints should be defined");return}var $={};(!x||m.aspectRatio)&&($.aspectRatio=m.aspectRatio);var U={onRenderSurfaceReady:function(M,L){C.setupUi(M,L,m),C.isScanning=!0,C.foreverScan(m,i,f)}};kT.failIfNotSupported().then(function(M){M.create(G).then(function(L){return L.render(l.element,$,U).then(function(Q){C.renderedCamera=Q,D.execute(),F(null)}).catch(function(Q){D.cancel(),X(Q)})}).catch(function(L){D.cancel(),X(Vo.errorGettingUserMedia(L))})}).catch(function(M){D.cancel(),X(Vo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ut.PAUSED),this.showPausedState(),(mi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Ut.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ut.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(fr.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(mi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var m=f.width,y=f.height,x=document.getElementById(i.elementId),v=x.clientWidth?x.clientWidth:fr.DEFAULT_WIDTH,C=Math.max(x.clientHeight?x.clientHeight:y,fr.FILE_SCAN_MIN_HEIGHT),D=i.computeCanvasDrawConfig(m,y,v,C);if(n){var F=i.createCanvasElement(v,C,"qr-canvas-visible");F.style.display="inline-block",x.appendChild(F);var X=F.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=v,X.canvas.height=C,X.drawImage(f,0,0,m,y,D.x,D.y,D.width,D.height)}var G=fr.FILE_SCAN_HIDDEN_CANVAS_PADDING,$=Math.max(f.width,D.width),U=Math.max(f.height,D.height),M=$+2*G,L=U+2*G,Q=i.createCanvasElement(M,L);x.appendChild(Q);var ue=Q.getContext("2d");if(!ue)throw"Unable to get 2d context from canvas";ue.canvas.width=M,ue.canvas.height=L,ue.drawImage(f,0,0,m,y,G,G,$,U);try{i.qrcode.decodeRobustlyAsync(Q).then(function(ie){o(op.createFromQrcodeResult(ie))}).catch(l)}catch(ie){l("QR code parse error, error = ".concat(ie))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return BT.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Cx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[we.QR_CODE,we.AZTEC,we.CODABAR,we.CODE_39,we.CODE_93,we.CODE_128,we.DATA_MATRIX,we.MAXICODE,we.ITF,we.EAN_13,we.EAN_8,we.PDF_417,we.RSS_14,we.RSS_EXPANDED,we.UPC_A,we.UPC_E,we.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];wT(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(mi(e))return!0;if(!mi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(mi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return mi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),m=function(x){if(x<fr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(fr.MIN_QR_BOX_SIZE,"px.")},y=function(x){return x>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};m(f.width),m(f.height),f.width=y(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=mi(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,m={x:0,y:0,width:e,height:n},y=f?this.getShadedRegionBounds(e,n,l):m,x=this.createCanvasElement(y.width,y.height),v={willReadFrequently:!0},C=x.getContext("2d",v);C.canvas.width=y.width,C.canvas.height=y.height,this.element.append(x),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=C,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Vo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,op.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Vo.codeParseError(o);return n(l,_T.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,m=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*f,x=this.qrRegion.height*m,v=this.qrRegion.x*f,C=this.qrRegion.y*m;this.context.drawImage(l,v,C,y,x,0,0,this.qrRegion.width,this.qrRegion.height);var D=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(F){!F&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){D()})):D()}).catch(function(F){o.logger.logError("Error happend while scanning context",F),D()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(X){if(X in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},m=Object.keys(e);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var y=Object.keys(e)[0];if(y!==n&&y!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(y===n){var x=e.facingMode;if(typeof x=="string"){if(f(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(f(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var v=typeof x;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(l in C)return{deviceId:{exact:C["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var D=typeof C;throw"Invalid type of 'deviceId' = ".concat(D)}}}var F=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(F)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var m=e,y=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(y)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?fr.BORDER_SHADER_MATCH_COLOR:fr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=mi(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,m=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(fr.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var y=5,x=40;this.insertShaderBorders(l,x,y,-y,null,0,!0),this.insertShaderBorders(l,x,y,-y,null,0,!1),this.insertShaderBorders(l,x,y,null,-y,0,!0),this.insertShaderBorders(l,x,y,null,-y,0,!1),this.insertShaderBorders(l,y,x+y,-y,null,-y,!0),this.insertShaderBorders(l,y,x+y,null,-y,-y,!0),this.insertShaderBorders(l,y,x+y,-y,null,-y,!1),this.insertShaderBorders(l,y,x+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=fr.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(n,"px"),y.style.height="".concat(i,"px"),o!==null&&(y.style.top="".concat(o,"px")),l!==null&&(y.style.bottom="".concat(l,"px")),m?y.style.left="".concat(f,"px"):y.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),gp;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(gp||(gp={}));function WT(){const[t,e]=ge.useState(""),[n,i]=ge.useState(!1),[o,l]=ge.useState(!1);ge.useRef(null),ge.useEffect(()=>{const m=new dp("qr-reader");return m.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},y=>{try{m.stop().then(()=>{l(!0);try{const v=new URL(y).searchParams.get("id");if(!v){e("QR Code inválido. ID não encontrado."),i(!0),l(!1);return}fetch("https://controllween.onrender.com/validar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v})}).then(C=>C.json()).then(C=>{e(C.message||"Erro ao validar o convidado."),i(!0),l(!1)}).catch(C=>{console.error("Erro ao validar:",C),e("Erro ao validar o convidado."),i(!0),l(!1)})}catch(x){console.error("Erro ao processar a URL do QR Code:",x),e("Erro ao processar a URL do QR Code."),i(!0),l(!1)}})}catch(x){console.error("Erro ao processar o QR Code:",x),e("Erro ao processar o QR Code."),i(!0)}},y=>{console.warn("Erro na leitura do QR Code:",y)}),()=>{m.stop().catch(y=>console.error("Erro ao parar QR Code Reader:",y))}},[]);const f=()=>{i(!1),e(""),l(!1),new dp("qr-reader").start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},y=>{},y=>{console.warn("Erro na leitura do QR Code:",y)}).catch(y=>{console.error("Erro ao reiniciar o QR Code Reader:",y)})};return xe.jsxs("div",{children:[xe.jsx("h2",{children:"Validar QR Code"}),xe.jsx("div",{id:"qr-reader",style:{width:"300px"}}),o&&xe.jsx("p",{children:"Processando..."}),n&&xe.jsx("div",{className:"modal",children:xe.jsxs("div",{className:"modal-content",children:[xe.jsx("p",{style:{color:"black"},children:t}),xe.jsx("button",{onClick:f,children:"Fechar"})]})}),xe.jsx("style",{jsx:!0,children:`
        .modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
        }
        .modal-content {
          background: #1a1a1a; /* Fundo escuro para melhor contraste */
          padding: 20px;
          border-radius: 5px;
          text-align: center;
          color: #ffffff; /* Texto branco para visibilidade */
        }
        .modal-content p {
          margin-bottom: 10px;
          color: #ffffff; /* Texto branco */
        }
        .modal-content button {
          padding: 10px 20px;
          border: none;
          background: #007bff; /* Cor de fundo do botão */
          color: white; /* Texto branco */
          border-radius: 5px;
          cursor: pointer;
        }
        .modal-content button:hover {
          background: #0056b3; /* Cor de fundo do botão ao passar o mouse */
        }
      `})]})}function HT(){return xe.jsx("header",{className:"header",children:xe.jsx("nav",{children:xe.jsxs("ul",{className:"menu",children:[xe.jsx("li",{children:xe.jsx(gu,{to:"/",children:"Home"})}),xe.jsx("li",{children:xe.jsx(gu,{to:"/cadastrar",children:"Cadastrar"})}),xe.jsx("li",{children:xe.jsx(gu,{to:"/consultar",children:"Consultar"})}),xe.jsx("li",{children:xe.jsx(gu,{to:"/validar",children:"Validar"})})]})})})}function GT(){return xe.jsxs(J_,{children:[xe.jsx(HT,{}),xe.jsx("main",{children:xe.jsxs(X_,{children:[xe.jsx(Fa,{path:"/",element:xe.jsx(iA,{})}),xe.jsx(Fa,{path:"/cadastrar",element:xe.jsx(yT,{})}),xe.jsx(Fa,{path:"/consultar",element:xe.jsx(xT,{})}),xe.jsx(Fa,{path:"/validar",element:xe.jsx(WT,{})})]})})]})}N2(document.getElementById("root")).render(xe.jsx(ge.StrictMode,{children:xe.jsx(GT,{})}));
