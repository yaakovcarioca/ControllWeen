function rm(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function im(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sm={exports:{}},jc={},om={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),Lx=Symbol.for("react.portal"),Bx=Symbol.for("react.fragment"),Fx=Symbol.for("react.strict_mode"),Vx=Symbol.for("react.profiler"),Ux=Symbol.for("react.provider"),zx=Symbol.for("react.context"),jx=Symbol.for("react.forward_ref"),Hx=Symbol.for("react.suspense"),Wx=Symbol.for("react.memo"),Gx=Symbol.for("react.lazy"),R0=Symbol.iterator;function Xx(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var am={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lm=Object.assign,um={};function ma(t,e,n){this.props=t,this.context=e,this.refs=um,this.updater=n||am}ma.prototype.isReactComponent={};ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cm(){}cm.prototype=ma.prototype;function Xd(t,e,n){this.props=t,this.context=e,this.refs=um,this.updater=n||am}var Kd=Xd.prototype=new cm;Kd.constructor=Xd;lm(Kd,ma.prototype);Kd.isPureReactComponent=!0;var N0=Array.isArray,hm=Object.prototype.hasOwnProperty,qd={current:null},fm={key:!0,ref:!0,__self:!0,__source:!0};function dm(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)hm.call(e,i)&&!fm.hasOwnProperty(i)&&(o[i]=e[i]);var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){for(var m=Array(p),w=0;w<p;w++)m[w]=arguments[w+2];o.children=m}if(t&&t.defaultProps)for(i in p=t.defaultProps,p)o[i]===void 0&&(o[i]=p[i]);return{$$typeof:zl,type:t,key:l,ref:f,props:o,_owner:qd.current}}function Kx(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yd(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function qx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var b0=/\/+/g;function Lh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qx(""+t.key):e.toString(36)}function ku(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case zl:case Lx:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+Lh(f,0):i,N0(o)?(n="",t!=null&&(n=t.replace(b0,"$&/")+"/"),ku(o,e,n,"",function(w){return w})):o!=null&&(Yd(o)&&(o=Kx(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(b0,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",N0(t))for(var p=0;p<t.length;p++){l=t[p];var m=i+Lh(l,p);f+=ku(l,e,n,m,o)}else if(m=Xx(t),typeof m=="function")for(t=m.call(t),p=0;!(l=t.next()).done;)l=l.value,m=i+Lh(l,p++),f+=ku(l,e,n,m,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function hu(t,e,n){if(t==null)return t;var i=[],o=0;return ku(t,i,"","",function(l){return e.call(n,l,o++)}),i}function Yx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},Lu={transition:null},Qx={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:qd};function gm(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:hu,forEach:function(t,e,n){hu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hu(t,function(){e++}),e},toArray:function(t){return hu(t,function(e){return e})||[]},only:function(t){if(!Yd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=ma;Ue.Fragment=Bx;Ue.Profiler=Vx;Ue.PureComponent=Xd;Ue.StrictMode=Fx;Ue.Suspense=Hx;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qx;Ue.act=gm;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=lm({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=qd.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(m in e)hm.call(e,m)&&!fm.hasOwnProperty(m)&&(i[m]=e[m]===void 0&&p!==void 0?p[m]:e[m])}var m=arguments.length-2;if(m===1)i.children=n;else if(1<m){p=Array(m);for(var w=0;w<m;w++)p[w]=arguments[w+2];i.children=p}return{$$typeof:zl,type:t.type,key:o,ref:l,props:i,_owner:f}};Ue.createContext=function(t){return t={$$typeof:zx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ux,_context:t},t.Consumer=t};Ue.createElement=dm;Ue.createFactory=function(t){var e=dm.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:jx,render:t}};Ue.isValidElement=Yd;Ue.lazy=function(t){return{$$typeof:Gx,_payload:{_status:-1,_result:t},_init:Yx}};Ue.memo=function(t,e){return{$$typeof:Wx,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=Lu.transition;Lu.transition={};try{t()}finally{Lu.transition=e}};Ue.unstable_act=gm;Ue.useCallback=function(t,e){return Un.current.useCallback(t,e)};Ue.useContext=function(t){return Un.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Un.current.useEffect(t,e)};Ue.useId=function(){return Un.current.useId()};Ue.useImperativeHandle=function(t,e,n){return Un.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Un.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return Un.current.useReducer(t,e,n)};Ue.useRef=function(t){return Un.current.useRef(t)};Ue.useState=function(t){return Un.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return Un.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return Un.current.useTransition()};Ue.version="18.3.1";om.exports=Ue;var de=om.exports;const $x=im(de),Zx=rm({__proto__:null,default:$x},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=de,eE=Symbol.for("react.element"),tE=Symbol.for("react.fragment"),nE=Object.prototype.hasOwnProperty,rE=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iE={key:!0,ref:!0,__self:!0,__source:!0};function pm(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)nE.call(e,i)&&!iE.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:eE,type:t,key:l,ref:f,props:o,_owner:rE.current}}jc.Fragment=tE;jc.jsx=pm;jc.jsxs=pm;sm.exports=jc;var me=sm.exports,mm={exports:{}},Er={},ym={exports:{}},wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,Ie){var be=pe.length;pe.push(Ie);e:for(;0<be;){var gt=be-1>>>1,Le=pe[gt];if(0<o(Le,Ie))pe[gt]=Ie,pe[be]=Le,be=gt;else break e}}function n(pe){return pe.length===0?null:pe[0]}function i(pe){if(pe.length===0)return null;var Ie=pe[0],be=pe.pop();if(be!==Ie){pe[0]=be;e:for(var gt=0,Le=pe.length,st=Le>>>1;gt<st;){var yt=2*(gt+1)-1,nr=pe[yt],Ae=yt+1,rr=pe[Ae];if(0>o(nr,be))Ae<Le&&0>o(rr,nr)?(pe[gt]=rr,pe[Ae]=be,gt=Ae):(pe[gt]=nr,pe[yt]=be,gt=yt);else if(Ae<Le&&0>o(rr,be))pe[gt]=rr,pe[Ae]=be,gt=Ae;else break e}}return Ie}function o(pe,Ie){var be=pe.sortIndex-Ie.sortIndex;return be!==0?be:pe.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var m=[],w=[],_=1,C=null,R=3,L=!1,j=!1,z=!1,q=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(pe){for(var Ie=n(w);Ie!==null;){if(Ie.callback===null)i(w);else if(Ie.startTime<=pe)i(w),Ie.sortIndex=Ie.expirationTime,e(m,Ie);else break;Ie=n(w)}}function K(pe){if(z=!1,M(pe),!j)if(n(m)!==null)j=!0,It(re);else{var Ie=n(w);Ie!==null&&Ne(K,Ie.startTime-pe)}}function re(pe,Ie){j=!1,z&&(z=!1,F(D),D=-1),L=!0;var be=R;try{for(M(Ie),C=n(m);C!==null&&(!(C.expirationTime>Ie)||pe&&!G());){var gt=C.callback;if(typeof gt=="function"){C.callback=null,R=C.priorityLevel;var Le=gt(C.expirationTime<=Ie);Ie=t.unstable_now(),typeof Le=="function"?C.callback=Le:C===n(m)&&i(m),M(Ie)}else i(m);C=n(m)}if(C!==null)var st=!0;else{var yt=n(w);yt!==null&&Ne(K,yt.startTime-Ie),st=!1}return st}finally{C=null,R=be,L=!1}}var ne=!1,N=null,D=-1,b=5,U=-1;function G(){return!(t.unstable_now()-U<b)}function W(){if(N!==null){var pe=t.unstable_now();U=pe;var Ie=!0;try{Ie=N(!0,pe)}finally{Ie?V():(ne=!1,N=null)}}else ne=!1}var V;if(typeof O=="function")V=function(){O(W)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,te=et.port2;et.port1.onmessage=W,V=function(){te.postMessage(null)}}else V=function(){q(W,0)};function It(pe){N=pe,ne||(ne=!0,V())}function Ne(pe,Ie){D=q(function(){pe(t.unstable_now())},Ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){j||L||(j=!0,It(re))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(pe){switch(R){case 1:case 2:case 3:var Ie=3;break;default:Ie=R}var be=R;R=Ie;try{return pe()}finally{R=be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,Ie){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var be=R;R=pe;try{return Ie()}finally{R=be}},t.unstable_scheduleCallback=function(pe,Ie,be){var gt=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?gt+be:gt):be=gt,pe){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=be+Le,pe={id:_++,callback:Ie,priorityLevel:pe,startTime:be,expirationTime:Le,sortIndex:-1},be>gt?(pe.sortIndex=be,e(w,pe),n(m)===null&&pe===n(w)&&(z?(F(D),D=-1):z=!0,Ne(K,be-gt))):(pe.sortIndex=Le,e(m,pe),j||L||(j=!0,It(re))),pe},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(pe){var Ie=R;return function(){var be=R;R=Ie;try{return pe.apply(this,arguments)}finally{R=be}}}})(wm);ym.exports=wm;var sE=ym.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE=de,xr=sE;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xm=new Set,fl={};function ao(t,e){$o(t,e),$o(t+"Capture",e)}function $o(t,e){for(fl[t]=e,t=0;t<e.length;t++)xm.add(e[t])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cf=Object.prototype.hasOwnProperty,aE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D0={},P0={};function lE(t){return Cf.call(P0,t)?!0:Cf.call(D0,t)?!1:aE.test(t)?P0[t]=!0:(D0[t]=!0,!1)}function uE(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cE(t,e,n,i){if(e===null||typeof e>"u"||uE(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){In[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];In[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){In[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){In[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){In[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){In[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){In[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){In[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){In[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qd=/[\-:]([a-z])/g;function $d(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qd,$d);In[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qd,$d);In[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qd,$d);In[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){In[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});In.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){In[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zd(t,e,n,i){var o=In.hasOwnProperty(e)?In[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cE(e,n,o,i)&&(n=null),i||o===null?lE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mi=oE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fu=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Po=Symbol.for("react.fragment"),Jd=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),Em=Symbol.for("react.provider"),_m=Symbol.for("react.context"),e1=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),t1=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),Am=Symbol.for("react.offscreen"),O0=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var Lt=Object.assign,Bh;function Wa(t){if(Bh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bh=e&&e[1]||""}return`
`+Bh+t}var Fh=!1;function Vh(t,e){if(!t||Fh)return"";Fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var i=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){i=w}t.call(e.prototype)}else{try{throw Error()}catch(w){i=w}t()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var o=w.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,p=l.length-1;1<=f&&0<=p&&o[f]!==l[p];)p--;for(;1<=f&&0<=p;f--,p--)if(o[f]!==l[p]){if(f!==1||p!==1)do if(f--,p--,0>p||o[f]!==l[p]){var m=`
`+o[f].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=f&&0<=p);break}}}finally{Fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wa(t):""}function hE(t){switch(t.tag){case 5:return Wa(t.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return t=Vh(t.type,!1),t;case 11:return t=Vh(t.type.render,!1),t;case 1:return t=Vh(t.type,!0),t;default:return""}}function Sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Po:return"Fragment";case Do:return"Portal";case vf:return"Profiler";case Jd:return"StrictMode";case If:return"Suspense";case Tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _m:return(t.displayName||"Context")+".Consumer";case Em:return(t._context.displayName||"Context")+".Provider";case e1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t1:return e=t.displayName||null,e!==null?e:Sf(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return Sf(t(e))}catch{}}return null}function fE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sf(e);case 8:return e===Jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dE(t){var e=Cm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function du(t){t._valueTracker||(t._valueTracker=dE(t))}function vm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Cm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rf(t,e){var n=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Im(t,e){e=e.checked,e!=null&&Zd(t,"checked",e,!1)}function Nf(t,e){Im(t,e);var n=ps(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bf(t,e.type,n):e.hasOwnProperty("defaultValue")&&bf(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bf(t,e,n){(e!=="number"||Ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ga=Array.isArray;function Wo(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Df(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Ga(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function Tm(t,e){var n=ps(e.value),i=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function B0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gu,Rm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gu=gu||document.createElement("div"),gu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gE=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){gE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function Nm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function bm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Nm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var pE=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Of(t,e){if(e){if(pE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Mf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kf=null;function n1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lf=null,Go=null,Xo=null;function F0(t){if(t=Wl(t)){if(typeof Lf!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Kc(e),Lf(t.stateNode,t.type,e))}}function Dm(t){Go?Xo?Xo.push(t):Xo=[t]:Go=t}function Pm(){if(Go){var t=Go,e=Xo;if(Xo=Go=null,F0(t),e)for(t=0;t<e.length;t++)F0(e[t])}}function Om(t,e){return t(e)}function Mm(){}var Uh=!1;function km(t,e,n){if(Uh)return t(e,n);Uh=!0;try{return Om(t,e,n)}finally{Uh=!1,(Go!==null||Xo!==null)&&(Mm(),Pm())}}function gl(t,e){var n=t.stateNode;if(n===null)return null;var i=Kc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var Bf=!1;if(Ti)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Bf=!1}function mE(t,e,n,i,o,l,f,p,m){var w=Array.prototype.slice.call(arguments,3);try{e.apply(n,w)}catch(_){this.onError(_)}}var Ja=!1,ec=null,tc=!1,Ff=null,yE={onError:function(t){Ja=!0,ec=t}};function wE(t,e,n,i,o,l,f,p,m){Ja=!1,ec=null,mE.apply(yE,arguments)}function xE(t,e,n,i,o,l,f,p,m){if(wE.apply(this,arguments),Ja){if(Ja){var w=ec;Ja=!1,ec=null}else throw Error(le(198));tc||(tc=!0,Ff=w)}}function lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Lm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(lo(t)!==t)throw Error(le(188))}function EE(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return V0(o),t;if(l===i)return V0(o),e;l=l.sibling}throw Error(le(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,p=o.child;p;){if(p===n){f=!0,n=o,i=l;break}if(p===i){f=!0,i=o,n=l;break}p=p.sibling}if(!f){for(p=l.child;p;){if(p===n){f=!0,n=l,i=o;break}if(p===i){f=!0,i=l,n=o;break}p=p.sibling}if(!f)throw Error(le(189))}}if(n.alternate!==i)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function Bm(t){return t=EE(t),t!==null?Fm(t):null}function Fm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fm(t);if(e!==null)return e;t=t.sibling}return null}var Vm=xr.unstable_scheduleCallback,U0=xr.unstable_cancelCallback,_E=xr.unstable_shouldYield,AE=xr.unstable_requestPaint,Xt=xr.unstable_now,CE=xr.unstable_getCurrentPriorityLevel,r1=xr.unstable_ImmediatePriority,Um=xr.unstable_UserBlockingPriority,nc=xr.unstable_NormalPriority,vE=xr.unstable_LowPriority,zm=xr.unstable_IdlePriority,Hc=null,si=null;function IE(t){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(Hc,t,void 0,(t.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:RE,TE=Math.log,SE=Math.LN2;function RE(t){return t>>>=0,t===0?32:31-(TE(t)/SE|0)|0}var pu=64,mu=4194304;function Xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var p=f&~o;p!==0?i=Xa(p):(l&=f,l!==0&&(i=Xa(l)))}else f=n&~o,f!==0?i=Xa(f):l!==0&&(i=Xa(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-jr(e),o=1<<n,i|=t[n],e&=~o;return i}function NE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bE(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-jr(l),p=1<<f,m=o[f];m===-1?(!(p&n)||p&i)&&(o[f]=NE(p,e)):m<=e&&(t.expiredLanes|=p),l&=~p}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jm(){var t=pu;return pu<<=1,!(pu&4194240)&&(pu=64),t}function zh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jr(e),t[e]=n}function DE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-jr(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function i1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-jr(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var lt=0;function Hm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wm,s1,Gm,Xm,Km,Uf=!1,yu=[],ns=null,rs=null,is=null,pl=new Map,ml=new Map,Yi=[],PE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z0(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(e.pointerId)}}function Fa(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Wl(e),e!==null&&s1(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function OE(t,e,n,i,o){switch(e){case"focusin":return ns=Fa(ns,t,e,n,i,o),!0;case"dragenter":return rs=Fa(rs,t,e,n,i,o),!0;case"mouseover":return is=Fa(is,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return pl.set(l,Fa(pl.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,ml.set(l,Fa(ml.get(l)||null,t,e,n,i,o)),!0}return!1}function qm(t){var e=qs(t.target);if(e!==null){var n=lo(e);if(n!==null){if(e=n.tag,e===13){if(e=Lm(n),e!==null){t.blockedOn=e,Km(t.priority,function(){Gm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);kf=i,n.target.dispatchEvent(i),kf=null}else return e=Wl(n),e!==null&&s1(e),t.blockedOn=n,!1;e.shift()}return!0}function j0(t,e,n){Bu(t)&&n.delete(e)}function ME(){Uf=!1,ns!==null&&Bu(ns)&&(ns=null),rs!==null&&Bu(rs)&&(rs=null),is!==null&&Bu(is)&&(is=null),pl.forEach(j0),ml.forEach(j0)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,Uf||(Uf=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,ME)))}function yl(t){function e(o){return Va(o,t)}if(0<yu.length){Va(yu[0],t);for(var n=1;n<yu.length;n++){var i=yu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ns!==null&&Va(ns,t),rs!==null&&Va(rs,t),is!==null&&Va(is,t),pl.forEach(e),ml.forEach(e),n=0;n<Yi.length;n++)i=Yi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)qm(n),n.blockedOn===null&&Yi.shift()}var Ko=Mi.ReactCurrentBatchConfig,ic=!0;function kE(t,e,n,i){var o=lt,l=Ko.transition;Ko.transition=null;try{lt=1,o1(t,e,n,i)}finally{lt=o,Ko.transition=l}}function LE(t,e,n,i){var o=lt,l=Ko.transition;Ko.transition=null;try{lt=4,o1(t,e,n,i)}finally{lt=o,Ko.transition=l}}function o1(t,e,n,i){if(ic){var o=zf(t,e,n,i);if(o===null)$h(t,e,i,sc,n),z0(t,i);else if(OE(o,t,e,n,i))i.stopPropagation();else if(z0(t,i),e&4&&-1<PE.indexOf(t)){for(;o!==null;){var l=Wl(o);if(l!==null&&Wm(l),l=zf(t,e,n,i),l===null&&$h(t,e,i,sc,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else $h(t,e,i,null,n)}}var sc=null;function zf(t,e,n,i){if(sc=null,t=n1(i),t=qs(t),t!==null)if(e=lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Lm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sc=t,null}function Ym(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CE()){case r1:return 1;case Um:return 4;case nc:case vE:return 16;case zm:return 536870912;default:return 16}default:return 16}}var $i=null,a1=null,Fu=null;function Qm(){if(Fu)return Fu;var t,e=a1,n=e.length,i,o="value"in $i?$i.value:$i.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return Fu=o.slice(t,1<i?1-i:void 0)}function Vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wu(){return!0}function H0(){return!1}function _r(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?wu:H0,this.isPropagationStopped=H0,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wu)},persist:function(){},isPersistent:wu}),e}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l1=_r(ya),Hl=Lt({},ya,{view:0,detail:0}),BE=_r(Hl),jh,Hh,Ua,Wc=Lt({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ua&&(Ua&&t.type==="mousemove"?(jh=t.screenX-Ua.screenX,Hh=t.screenY-Ua.screenY):Hh=jh=0,Ua=t),jh)},movementY:function(t){return"movementY"in t?t.movementY:Hh}}),W0=_r(Wc),FE=Lt({},Wc,{dataTransfer:0}),VE=_r(FE),UE=Lt({},Hl,{relatedTarget:0}),Wh=_r(UE),zE=Lt({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),jE=_r(zE),HE=Lt({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WE=_r(HE),GE=Lt({},ya,{data:0}),G0=_r(GE),XE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qE[t])?!!e[t]:!1}function u1(){return YE}var QE=Lt({},Hl,{key:function(t){if(t.key){var e=XE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(t){return t.type==="keypress"?Vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$E=_r(QE),ZE=Lt({},Wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X0=_r(ZE),JE=Lt({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),e_=_r(JE),t_=Lt({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),n_=_r(t_),r_=Lt({},Wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i_=_r(r_),s_=[9,13,27,32],c1=Ti&&"CompositionEvent"in window,el=null;Ti&&"documentMode"in document&&(el=document.documentMode);var o_=Ti&&"TextEvent"in window&&!el,$m=Ti&&(!c1||el&&8<el&&11>=el),K0=" ",q0=!1;function Zm(t,e){switch(t){case"keyup":return s_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oo=!1;function a_(t,e){switch(t){case"compositionend":return Jm(e);case"keypress":return e.which!==32?null:(q0=!0,K0);case"textInput":return t=e.data,t===K0&&q0?null:t;default:return null}}function l_(t,e){if(Oo)return t==="compositionend"||!c1&&Zm(t,e)?(t=Qm(),Fu=a1=$i=null,Oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $m&&e.locale!=="ko"?null:e.data;default:return null}}var u_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u_[t.type]:e==="textarea"}function e2(t,e,n,i){Dm(i),e=oc(e,"onChange"),0<e.length&&(n=new l1("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tl=null,wl=null;function c_(t){h2(t,0)}function Gc(t){var e=Lo(t);if(vm(e))return t}function h_(t,e){if(t==="change")return e}var t2=!1;if(Ti){var Gh;if(Ti){var Xh="oninput"in document;if(!Xh){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Xh=typeof Q0.oninput=="function"}Gh=Xh}else Gh=!1;t2=Gh&&(!document.documentMode||9<document.documentMode)}function $0(){tl&&(tl.detachEvent("onpropertychange",n2),wl=tl=null)}function n2(t){if(t.propertyName==="value"&&Gc(wl)){var e=[];e2(e,wl,t,n1(t)),km(c_,e)}}function f_(t,e,n){t==="focusin"?($0(),tl=e,wl=n,tl.attachEvent("onpropertychange",n2)):t==="focusout"&&$0()}function d_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(wl)}function g_(t,e){if(t==="click")return Gc(e)}function p_(t,e){if(t==="input"||t==="change")return Gc(e)}function m_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gr=typeof Object.is=="function"?Object.is:m_;function xl(t,e){if(Gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Cf.call(e,o)||!Gr(t[o],e[o]))return!1}return!0}function Z0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J0(t,e){var n=Z0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z0(n)}}function r2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i2(){for(var t=window,e=Ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ju(t.document)}return e}function h1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y_(t){var e=i2(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r2(n.ownerDocument.documentElement,n)){if(i!==null&&h1(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=J0(n,l);var f=J0(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var w_=Ti&&"documentMode"in document&&11>=document.documentMode,Mo=null,jf=null,nl=null,Hf=!1;function eg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hf||Mo==null||Mo!==Ju(i)||(i=Mo,"selectionStart"in i&&h1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nl&&xl(nl,i)||(nl=i,i=oc(jf,"onSelect"),0<i.length&&(e=new l1("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Mo)))}function xu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ko={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Kh={},s2={};Ti&&(s2=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Xc(t){if(Kh[t])return Kh[t];if(!ko[t])return t;var e=ko[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s2)return Kh[t]=e[n];return t}var o2=Xc("animationend"),a2=Xc("animationiteration"),l2=Xc("animationstart"),u2=Xc("transitionend"),c2=new Map,tg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){c2.set(t,e),ao(e,[t])}for(var qh=0;qh<tg.length;qh++){var Yh=tg[qh],x_=Yh.toLowerCase(),E_=Yh[0].toUpperCase()+Yh.slice(1);As(x_,"on"+E_)}As(o2,"onAnimationEnd");As(a2,"onAnimationIteration");As(l2,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(u2,"onTransitionEnd");$o("onMouseEnter",["mouseout","mouseover"]);$o("onMouseLeave",["mouseout","mouseover"]);$o("onPointerEnter",["pointerout","pointerover"]);$o("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),__=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ka));function ng(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,xE(i,e,void 0,t),t.currentTarget=null}function h2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var p=i[f],m=p.instance,w=p.currentTarget;if(p=p.listener,m!==l&&o.isPropagationStopped())break e;ng(o,p,w),l=m}else for(f=0;f<i.length;f++){if(p=i[f],m=p.instance,w=p.currentTarget,p=p.listener,m!==l&&o.isPropagationStopped())break e;ng(o,p,w),l=m}}}if(tc)throw t=Ff,tc=!1,Ff=null,t}function At(t,e){var n=e[qf];n===void 0&&(n=e[qf]=new Set);var i=t+"__bubble";n.has(i)||(f2(e,t,2,!1),n.add(i))}function Qh(t,e,n){var i=0;e&&(i|=4),f2(n,t,i,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function El(t){if(!t[Eu]){t[Eu]=!0,xm.forEach(function(n){n!=="selectionchange"&&(__.has(n)||Qh(n,!1,t),Qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,Qh("selectionchange",!1,e))}}function f2(t,e,n,i){switch(Ym(e)){case 1:var o=kE;break;case 4:o=LE;break;default:o=o1}n=o.bind(null,e,n,t),o=void 0,!Bf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function $h(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var p=i.stateNode.containerInfo;if(p===o||p.nodeType===8&&p.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;f=f.return}for(;p!==null;){if(f=qs(p),f===null)return;if(m=f.tag,m===5||m===6){i=l=f;continue e}p=p.parentNode}}i=i.return}km(function(){var w=l,_=n1(n),C=[];e:{var R=c2.get(t);if(R!==void 0){var L=l1,j=t;switch(t){case"keypress":if(Vu(n)===0)break e;case"keydown":case"keyup":L=$E;break;case"focusin":j="focus",L=Wh;break;case"focusout":j="blur",L=Wh;break;case"beforeblur":case"afterblur":L=Wh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=VE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=e_;break;case o2:case a2:case l2:L=jE;break;case u2:L=n_;break;case"scroll":L=BE;break;case"wheel":L=i_;break;case"copy":case"cut":case"paste":L=WE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=X0}var z=(e&4)!==0,q=!z&&t==="scroll",F=z?R!==null?R+"Capture":null:R;z=[];for(var O=w,M;O!==null;){M=O;var K=M.stateNode;if(M.tag===5&&K!==null&&(M=K,F!==null&&(K=gl(O,F),K!=null&&z.push(_l(O,K,M)))),q)break;O=O.return}0<z.length&&(R=new L(R,j,null,n,_),C.push({event:R,listeners:z}))}}if(!(e&7)){e:{if(R=t==="mouseover"||t==="pointerover",L=t==="mouseout"||t==="pointerout",R&&n!==kf&&(j=n.relatedTarget||n.fromElement)&&(qs(j)||j[Si]))break e;if((L||R)&&(R=_.window===_?_:(R=_.ownerDocument)?R.defaultView||R.parentWindow:window,L?(j=n.relatedTarget||n.toElement,L=w,j=j?qs(j):null,j!==null&&(q=lo(j),j!==q||j.tag!==5&&j.tag!==6)&&(j=null)):(L=null,j=w),L!==j)){if(z=W0,K="onMouseLeave",F="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(z=X0,K="onPointerLeave",F="onPointerEnter",O="pointer"),q=L==null?R:Lo(L),M=j==null?R:Lo(j),R=new z(K,O+"leave",L,n,_),R.target=q,R.relatedTarget=M,K=null,qs(_)===w&&(z=new z(F,O+"enter",j,n,_),z.target=M,z.relatedTarget=q,K=z),q=K,L&&j)t:{for(z=L,F=j,O=0,M=z;M;M=Io(M))O++;for(M=0,K=F;K;K=Io(K))M++;for(;0<O-M;)z=Io(z),O--;for(;0<M-O;)F=Io(F),M--;for(;O--;){if(z===F||F!==null&&z===F.alternate)break t;z=Io(z),F=Io(F)}z=null}else z=null;L!==null&&rg(C,R,L,z,!1),j!==null&&q!==null&&rg(C,q,j,z,!0)}}e:{if(R=w?Lo(w):window,L=R.nodeName&&R.nodeName.toLowerCase(),L==="select"||L==="input"&&R.type==="file")var re=h_;else if(Y0(R))if(t2)re=p_;else{re=d_;var ne=f_}else(L=R.nodeName)&&L.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(re=g_);if(re&&(re=re(t,w))){e2(C,re,n,_);break e}ne&&ne(t,R,w),t==="focusout"&&(ne=R._wrapperState)&&ne.controlled&&R.type==="number"&&bf(R,"number",R.value)}switch(ne=w?Lo(w):window,t){case"focusin":(Y0(ne)||ne.contentEditable==="true")&&(Mo=ne,jf=w,nl=null);break;case"focusout":nl=jf=Mo=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,eg(C,n,_);break;case"selectionchange":if(w_)break;case"keydown":case"keyup":eg(C,n,_)}var N;if(c1)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Oo?Zm(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&($m&&n.locale!=="ko"&&(Oo||D!=="onCompositionStart"?D==="onCompositionEnd"&&Oo&&(N=Qm()):($i=_,a1="value"in $i?$i.value:$i.textContent,Oo=!0)),ne=oc(w,D),0<ne.length&&(D=new G0(D,t,null,n,_),C.push({event:D,listeners:ne}),N?D.data=N:(N=Jm(n),N!==null&&(D.data=N)))),(N=o_?a_(t,n):l_(t,n))&&(w=oc(w,"onBeforeInput"),0<w.length&&(_=new G0("onBeforeInput","beforeinput",null,n,_),C.push({event:_,listeners:w}),_.data=N))}h2(C,e)})}function _l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oc(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=gl(t,n),l!=null&&i.unshift(_l(t,l,o)),l=gl(t,e),l!=null&&i.push(_l(t,l,o))),t=t.return}return i}function Io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rg(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var p=n,m=p.alternate,w=p.stateNode;if(m!==null&&m===i)break;p.tag===5&&w!==null&&(p=w,o?(m=gl(n,l),m!=null&&f.unshift(_l(n,m,p))):o||(m=gl(n,l),m!=null&&f.push(_l(n,m,p)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var A_=/\r\n?/g,C_=/\u0000|\uFFFD/g;function ig(t){return(typeof t=="string"?t:""+t).replace(A_,`
`).replace(C_,"")}function _u(t,e,n){if(e=ig(e),ig(t)!==e&&n)throw Error(le(425))}function ac(){}var Wf=null,Gf=null;function Xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kf=typeof setTimeout=="function"?setTimeout:void 0,v_=typeof clearTimeout=="function"?clearTimeout:void 0,sg=typeof Promise=="function"?Promise:void 0,I_=typeof queueMicrotask=="function"?queueMicrotask:typeof sg<"u"?function(t){return sg.resolve(null).then(t).catch(T_)}:Kf;function T_(t){setTimeout(function(){throw t})}function Zh(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),yl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);yl(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function og(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wa=Math.random().toString(36).slice(2),ii="__reactFiber$"+wa,Al="__reactProps$"+wa,Si="__reactContainer$"+wa,qf="__reactEvents$"+wa,S_="__reactListeners$"+wa,R_="__reactHandles$"+wa;function qs(t){var e=t[ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Si]||n[ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=og(t);t!==null;){if(n=t[ii])return n;t=og(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[ii]||t[Si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Kc(t){return t[Al]||null}var Yf=[],Bo=-1;function Cs(t){return{current:t}}function vt(t){0>Bo||(t.current=Yf[Bo],Yf[Bo]=null,Bo--)}function mt(t,e){Bo++,Yf[Bo]=t.current,t.current=e}var ms={},Mn=Cs(ms),Jn=Cs(!1),to=ms;function Zo(t,e){var n=t.type.contextTypes;if(!n)return ms;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function er(t){return t=t.childContextTypes,t!=null}function lc(){vt(Jn),vt(Mn)}function ag(t,e,n){if(Mn.current!==ms)throw Error(le(168));mt(Mn,e),mt(Jn,n)}function d2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(le(108,fE(t)||"Unknown",o));return Lt({},n,i)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ms,to=Mn.current,mt(Mn,t),mt(Jn,Jn.current),!0}function lg(t,e,n){var i=t.stateNode;if(!i)throw Error(le(169));n?(t=d2(t,e,to),i.__reactInternalMemoizedMergedChildContext=t,vt(Jn),vt(Mn),mt(Mn,t)):vt(Jn),mt(Jn,n)}var _i=null,qc=!1,Jh=!1;function g2(t){_i===null?_i=[t]:_i.push(t)}function N_(t){qc=!0,g2(t)}function vs(){if(!Jh&&_i!==null){Jh=!0;var t=0,e=lt;try{var n=_i;for(lt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}_i=null,qc=!1}catch(o){throw _i!==null&&(_i=_i.slice(t+1)),Vm(r1,vs),o}finally{lt=e,Jh=!1}}return null}var Fo=[],Vo=0,cc=null,hc=0,Sr=[],Rr=0,no=null,Ai=1,Ci="";function Gs(t,e){Fo[Vo++]=hc,Fo[Vo++]=cc,cc=t,hc=e}function p2(t,e,n){Sr[Rr++]=Ai,Sr[Rr++]=Ci,Sr[Rr++]=no,no=t;var i=Ai;t=Ci;var o=32-jr(i)-1;i&=~(1<<o),n+=1;var l=32-jr(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,Ai=1<<32-jr(e)+o|n<<o|i,Ci=l+t}else Ai=1<<l|n<<o|i,Ci=t}function f1(t){t.return!==null&&(Gs(t,1),p2(t,1,0))}function d1(t){for(;t===cc;)cc=Fo[--Vo],Fo[Vo]=null,hc=Fo[--Vo],Fo[Vo]=null;for(;t===no;)no=Sr[--Rr],Sr[Rr]=null,Ci=Sr[--Rr],Sr[Rr]=null,Ai=Sr[--Rr],Sr[Rr]=null}var yr=null,pr=null,Rt=!1,zr=null;function m2(t,e){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yr=t,pr=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yr=t,pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=no!==null?{id:Ai,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yr=t,pr=null,!0):!1;default:return!1}}function Qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $f(t){if(Rt){var e=pr;if(e){var n=e;if(!ug(t,e)){if(Qf(t))throw Error(le(418));e=ss(n.nextSibling);var i=yr;e&&ug(t,e)?m2(i,n):(t.flags=t.flags&-4097|2,Rt=!1,yr=t)}}else{if(Qf(t))throw Error(le(418));t.flags=t.flags&-4097|2,Rt=!1,yr=t}}}function cg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yr=t}function Au(t){if(t!==yr)return!1;if(!Rt)return cg(t),Rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xf(t.type,t.memoizedProps)),e&&(e=pr)){if(Qf(t))throw y2(),Error(le(418));for(;e;)m2(t,e),e=ss(e.nextSibling)}if(cg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pr=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pr=null}}else pr=yr?ss(t.stateNode.nextSibling):null;return!0}function y2(){for(var t=pr;t;)t=ss(t.nextSibling)}function Jo(){pr=yr=null,Rt=!1}function g1(t){zr===null?zr=[t]:zr.push(t)}var b_=Mi.ReactCurrentBatchConfig;function za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var i=n.stateNode}if(!i)throw Error(le(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var p=o.refs;f===null?delete p[l]:p[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Cu(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hg(t){var e=t._init;return e(t._payload)}function w2(t){function e(F,O){if(t){var M=F.deletions;M===null?(F.deletions=[O],F.flags|=16):M.push(O)}}function n(F,O){if(!t)return null;for(;O!==null;)e(F,O),O=O.sibling;return null}function i(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function o(F,O){return F=us(F,O),F.index=0,F.sibling=null,F}function l(F,O,M){return F.index=M,t?(M=F.alternate,M!==null?(M=M.index,M<O?(F.flags|=2,O):M):(F.flags|=2,O)):(F.flags|=1048576,O)}function f(F){return t&&F.alternate===null&&(F.flags|=2),F}function p(F,O,M,K){return O===null||O.tag!==6?(O=af(M,F.mode,K),O.return=F,O):(O=o(O,M),O.return=F,O)}function m(F,O,M,K){var re=M.type;return re===Po?_(F,O,M.props.children,K,M.key):O!==null&&(O.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ki&&hg(re)===O.type)?(K=o(O,M.props),K.ref=za(F,O,M),K.return=F,K):(K=Xu(M.type,M.key,M.props,null,F.mode,K),K.ref=za(F,O,M),K.return=F,K)}function w(F,O,M,K){return O===null||O.tag!==4||O.stateNode.containerInfo!==M.containerInfo||O.stateNode.implementation!==M.implementation?(O=lf(M,F.mode,K),O.return=F,O):(O=o(O,M.children||[]),O.return=F,O)}function _(F,O,M,K,re){return O===null||O.tag!==7?(O=Js(M,F.mode,K,re),O.return=F,O):(O=o(O,M),O.return=F,O)}function C(F,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return O=af(""+O,F.mode,M),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fu:return M=Xu(O.type,O.key,O.props,null,F.mode,M),M.ref=za(F,null,O),M.return=F,M;case Do:return O=lf(O,F.mode,M),O.return=F,O;case Ki:var K=O._init;return C(F,K(O._payload),M)}if(Ga(O)||La(O))return O=Js(O,F.mode,M,null),O.return=F,O;Cu(F,O)}return null}function R(F,O,M,K){var re=O!==null?O.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return re!==null?null:p(F,O,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case fu:return M.key===re?m(F,O,M,K):null;case Do:return M.key===re?w(F,O,M,K):null;case Ki:return re=M._init,R(F,O,re(M._payload),K)}if(Ga(M)||La(M))return re!==null?null:_(F,O,M,K,null);Cu(F,M)}return null}function L(F,O,M,K,re){if(typeof K=="string"&&K!==""||typeof K=="number")return F=F.get(M)||null,p(O,F,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case fu:return F=F.get(K.key===null?M:K.key)||null,m(O,F,K,re);case Do:return F=F.get(K.key===null?M:K.key)||null,w(O,F,K,re);case Ki:var ne=K._init;return L(F,O,M,ne(K._payload),re)}if(Ga(K)||La(K))return F=F.get(M)||null,_(O,F,K,re,null);Cu(O,K)}return null}function j(F,O,M,K){for(var re=null,ne=null,N=O,D=O=0,b=null;N!==null&&D<M.length;D++){N.index>D?(b=N,N=null):b=N.sibling;var U=R(F,N,M[D],K);if(U===null){N===null&&(N=b);break}t&&N&&U.alternate===null&&e(F,N),O=l(U,O,D),ne===null?re=U:ne.sibling=U,ne=U,N=b}if(D===M.length)return n(F,N),Rt&&Gs(F,D),re;if(N===null){for(;D<M.length;D++)N=C(F,M[D],K),N!==null&&(O=l(N,O,D),ne===null?re=N:ne.sibling=N,ne=N);return Rt&&Gs(F,D),re}for(N=i(F,N);D<M.length;D++)b=L(N,F,D,M[D],K),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?D:b.key),O=l(b,O,D),ne===null?re=b:ne.sibling=b,ne=b);return t&&N.forEach(function(G){return e(F,G)}),Rt&&Gs(F,D),re}function z(F,O,M,K){var re=La(M);if(typeof re!="function")throw Error(le(150));if(M=re.call(M),M==null)throw Error(le(151));for(var ne=re=null,N=O,D=O=0,b=null,U=M.next();N!==null&&!U.done;D++,U=M.next()){N.index>D?(b=N,N=null):b=N.sibling;var G=R(F,N,U.value,K);if(G===null){N===null&&(N=b);break}t&&N&&G.alternate===null&&e(F,N),O=l(G,O,D),ne===null?re=G:ne.sibling=G,ne=G,N=b}if(U.done)return n(F,N),Rt&&Gs(F,D),re;if(N===null){for(;!U.done;D++,U=M.next())U=C(F,U.value,K),U!==null&&(O=l(U,O,D),ne===null?re=U:ne.sibling=U,ne=U);return Rt&&Gs(F,D),re}for(N=i(F,N);!U.done;D++,U=M.next())U=L(N,F,D,U.value,K),U!==null&&(t&&U.alternate!==null&&N.delete(U.key===null?D:U.key),O=l(U,O,D),ne===null?re=U:ne.sibling=U,ne=U);return t&&N.forEach(function(W){return e(F,W)}),Rt&&Gs(F,D),re}function q(F,O,M,K){if(typeof M=="object"&&M!==null&&M.type===Po&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case fu:e:{for(var re=M.key,ne=O;ne!==null;){if(ne.key===re){if(re=M.type,re===Po){if(ne.tag===7){n(F,ne.sibling),O=o(ne,M.props.children),O.return=F,F=O;break e}}else if(ne.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ki&&hg(re)===ne.type){n(F,ne.sibling),O=o(ne,M.props),O.ref=za(F,ne,M),O.return=F,F=O;break e}n(F,ne);break}else e(F,ne);ne=ne.sibling}M.type===Po?(O=Js(M.props.children,F.mode,K,M.key),O.return=F,F=O):(K=Xu(M.type,M.key,M.props,null,F.mode,K),K.ref=za(F,O,M),K.return=F,F=K)}return f(F);case Do:e:{for(ne=M.key;O!==null;){if(O.key===ne)if(O.tag===4&&O.stateNode.containerInfo===M.containerInfo&&O.stateNode.implementation===M.implementation){n(F,O.sibling),O=o(O,M.children||[]),O.return=F,F=O;break e}else{n(F,O);break}else e(F,O);O=O.sibling}O=lf(M,F.mode,K),O.return=F,F=O}return f(F);case Ki:return ne=M._init,q(F,O,ne(M._payload),K)}if(Ga(M))return j(F,O,M,K);if(La(M))return z(F,O,M,K);Cu(F,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,O!==null&&O.tag===6?(n(F,O.sibling),O=o(O,M),O.return=F,F=O):(n(F,O),O=af(M,F.mode,K),O.return=F,F=O),f(F)):n(F,O)}return q}var ea=w2(!0),x2=w2(!1),fc=Cs(null),dc=null,Uo=null,p1=null;function m1(){p1=Uo=dc=null}function y1(t){var e=fc.current;vt(fc),t._currentValue=e}function Zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){dc=t,p1=Uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zn=!0),t.firstContext=null)}function Dr(t){var e=t._currentValue;if(p1!==t)if(t={context:t,memoizedValue:e,next:null},Uo===null){if(dc===null)throw Error(le(308));Uo=t,dc.dependencies={lanes:0,firstContext:t}}else Uo=Uo.next=t;return e}var Ys=null;function w1(t){Ys===null?Ys=[t]:Ys.push(t)}function E2(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,w1(e)):(n.next=o.next,o.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qi=!1;function x1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Je&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Ri(t,n)}return o=i.interleaved,o===null?(e.next=e,w1(i)):(e.next=o.next,o.next=e),i.interleaved=e,Ri(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,i1(t,n)}}function fg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gc(t,e,n,i){var o=t.updateQueue;qi=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var m=p,w=m.next;m.next=null,f===null?l=w:f.next=w,f=m;var _=t.alternate;_!==null&&(_=_.updateQueue,p=_.lastBaseUpdate,p!==f&&(p===null?_.firstBaseUpdate=w:p.next=w,_.lastBaseUpdate=m))}if(l!==null){var C=o.baseState;f=0,_=w=m=null,p=l;do{var R=p.lane,L=p.eventTime;if((i&R)===R){_!==null&&(_=_.next={eventTime:L,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var j=t,z=p;switch(R=e,L=n,z.tag){case 1:if(j=z.payload,typeof j=="function"){C=j.call(L,C,R);break e}C=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=z.payload,R=typeof j=="function"?j.call(L,C,R):j,R==null)break e;C=Lt({},C,R);break e;case 2:qi=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,R=o.effects,R===null?o.effects=[p]:R.push(p))}else L={eventTime:L,lane:R,tag:p.tag,payload:p.payload,callback:p.callback,next:null},_===null?(w=_=L,m=C):_=_.next=L,f|=R;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;R=p,p=R.next,R.next=null,o.lastBaseUpdate=R,o.shared.pending=null}}while(!0);if(_===null&&(m=C),o.baseState=m,o.firstBaseUpdate=w,o.lastBaseUpdate=_,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);io|=f,t.lanes=f,t.memoizedState=C}}function dg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(le(191,o));o.call(i)}}}var Gl={},oi=Cs(Gl),Cl=Cs(Gl),vl=Cs(Gl);function Qs(t){if(t===Gl)throw Error(le(174));return t}function E1(t,e){switch(mt(vl,e),mt(Cl,t),mt(oi,Gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pf(e,t)}vt(oi),mt(oi,e)}function ta(){vt(oi),vt(Cl),vt(vl)}function A2(t){Qs(vl.current);var e=Qs(oi.current),n=Pf(e,t.type);e!==n&&(mt(Cl,t),mt(oi,n))}function _1(t){Cl.current===t&&(vt(oi),vt(Cl))}var Mt=Cs(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ef=[];function A1(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var zu=Mi.ReactCurrentDispatcher,tf=Mi.ReactCurrentBatchConfig,ro=0,kt=null,on=null,pn=null,mc=!1,rl=!1,Il=0,D_=0;function Rn(){throw Error(le(321))}function C1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gr(t[n],e[n]))return!1;return!0}function v1(t,e,n,i,o,l){if(ro=l,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zu.current=t===null||t.memoizedState===null?k_:L_,t=n(i,o),rl){l=0;do{if(rl=!1,Il=0,25<=l)throw Error(le(301));l+=1,pn=on=null,e.updateQueue=null,zu.current=B_,t=n(i,o)}while(rl)}if(zu.current=yc,e=on!==null&&on.next!==null,ro=0,pn=on=kt=null,mc=!1,e)throw Error(le(300));return t}function I1(){var t=Il!==0;return Il=0,t}function ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?kt.memoizedState=pn=t:pn=pn.next=t,pn}function Pr(){if(on===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=pn===null?kt.memoizedState:pn.next;if(e!==null)pn=e,on=t;else{if(t===null)throw Error(le(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},pn===null?kt.memoizedState=pn=t:pn=pn.next=t}return pn}function Tl(t,e){return typeof e=="function"?e(t):e}function nf(t){var e=Pr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=on,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var p=f=null,m=null,w=l;do{var _=w.lane;if((ro&_)===_)m!==null&&(m=m.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:t(i,w.action);else{var C={lane:_,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};m===null?(p=m=C,f=i):m=m.next=C,kt.lanes|=_,io|=_}w=w.next}while(w!==null&&w!==l);m===null?f=i:m.next=p,Gr(i,e.memoizedState)||(Zn=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=m,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,kt.lanes|=l,io|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=Pr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);Gr(l,e.memoizedState)||(Zn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function C2(){}function v2(t,e){var n=kt,i=Pr(),o=e(),l=!Gr(i.memoizedState,o);if(l&&(i.memoizedState=o,Zn=!0),i=i.queue,T1(S2.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,Sl(9,T2.bind(null,n,i,o,e),void 0,null),mn===null)throw Error(le(349));ro&30||I2(n,e,o)}return o}function I2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function T2(t,e,n,i){e.value=n,e.getSnapshot=i,R2(e)&&N2(t)}function S2(t,e,n){return n(function(){R2(e)&&N2(t)})}function R2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gr(t,n)}catch{return!0}}function N2(t){var e=Ri(t,1);e!==null&&Hr(e,t,1,-1)}function gg(t){var e=ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:t},e.queue=t,t=t.dispatch=M_.bind(null,kt,t),[e.memoizedState,t]}function Sl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function b2(){return Pr().memoizedState}function ju(t,e,n,i){var o=ri();kt.flags|=t,o.memoizedState=Sl(1|e,n,void 0,i===void 0?null:i)}function Yc(t,e,n,i){var o=Pr();i=i===void 0?null:i;var l=void 0;if(on!==null){var f=on.memoizedState;if(l=f.destroy,i!==null&&C1(i,f.deps)){o.memoizedState=Sl(e,n,l,i);return}}kt.flags|=t,o.memoizedState=Sl(1|e,n,l,i)}function pg(t,e){return ju(8390656,8,t,e)}function T1(t,e){return Yc(2048,8,t,e)}function D2(t,e){return Yc(4,2,t,e)}function P2(t,e){return Yc(4,4,t,e)}function O2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M2(t,e,n){return n=n!=null?n.concat([t]):null,Yc(4,4,O2.bind(null,e,t),n)}function S1(){}function k2(t,e){var n=Pr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&C1(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function L2(t,e){var n=Pr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&C1(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function B2(t,e,n){return ro&21?(Gr(n,e)||(n=jm(),kt.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zn=!0),t.memoizedState=n)}function P_(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var i=tf.transition;tf.transition={};try{t(!1),e()}finally{lt=n,tf.transition=i}}function F2(){return Pr().memoizedState}function O_(t,e,n){var i=ls(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},V2(t))U2(e,n);else if(n=E2(t,e,n,i),n!==null){var o=Vn();Hr(n,t,i,o),z2(n,e,i)}}function M_(t,e,n){var i=ls(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(V2(t))U2(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,p=l(f,n);if(o.hasEagerState=!0,o.eagerState=p,Gr(p,f)){var m=e.interleaved;m===null?(o.next=o,w1(e)):(o.next=m.next,m.next=o),e.interleaved=o;return}}catch{}finally{}n=E2(t,e,o,i),n!==null&&(o=Vn(),Hr(n,t,i,o),z2(n,e,i))}}function V2(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function U2(t,e){rl=mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,i1(t,n)}}var yc={readContext:Dr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},k_={readContext:Dr,useCallback:function(t,e){return ri().memoizedState=[t,e===void 0?null:e],t},useContext:Dr,useEffect:pg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ju(4194308,4,O2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ju(4194308,4,t,e)},useInsertionEffect:function(t,e){return ju(4,2,t,e)},useMemo:function(t,e){var n=ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ri();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=O_.bind(null,kt,t),[i.memoizedState,t]},useRef:function(t){var e=ri();return t={current:t},e.memoizedState=t},useState:gg,useDebugValue:S1,useDeferredValue:function(t){return ri().memoizedState=t},useTransition:function(){var t=gg(!1),e=t[0];return t=P_.bind(null,t[1]),ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=kt,o=ri();if(Rt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),mn===null)throw Error(le(349));ro&30||I2(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,pg(S2.bind(null,i,l,t),[t]),i.flags|=2048,Sl(9,T2.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=ri(),e=mn.identifierPrefix;if(Rt){var n=Ci,i=Ai;n=(i&~(1<<32-jr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=D_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L_={readContext:Dr,useCallback:k2,useContext:Dr,useEffect:T1,useImperativeHandle:M2,useInsertionEffect:D2,useLayoutEffect:P2,useMemo:L2,useReducer:nf,useRef:b2,useState:function(){return nf(Tl)},useDebugValue:S1,useDeferredValue:function(t){var e=Pr();return B2(e,on.memoizedState,t)},useTransition:function(){var t=nf(Tl)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:C2,useSyncExternalStore:v2,useId:F2,unstable_isNewReconciler:!1},B_={readContext:Dr,useCallback:k2,useContext:Dr,useEffect:T1,useImperativeHandle:M2,useInsertionEffect:D2,useLayoutEffect:P2,useMemo:L2,useReducer:rf,useRef:b2,useState:function(){return rf(Tl)},useDebugValue:S1,useDeferredValue:function(t){var e=Pr();return on===null?e.memoizedState=t:B2(e,on.memoizedState,t)},useTransition:function(){var t=rf(Tl)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:C2,useSyncExternalStore:v2,useId:F2,unstable_isNewReconciler:!1};function Vr(t,e){if(t&&t.defaultProps){e=Lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qc={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Vn(),o=ls(t),l=vi(i,o);l.payload=e,n!=null&&(l.callback=n),e=os(t,l,o),e!==null&&(Hr(e,t,o,i),Uu(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Vn(),o=ls(t),l=vi(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=os(t,l,o),e!==null&&(Hr(e,t,o,i),Uu(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vn(),i=ls(t),o=vi(n,i);o.tag=2,e!=null&&(o.callback=e),e=os(t,o,i),e!==null&&(Hr(e,t,i,n),Uu(e,t,i))}};function mg(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!xl(n,i)||!xl(o,l):!0}function j2(t,e,n){var i=!1,o=ms,l=e.contextType;return typeof l=="object"&&l!==null?l=Dr(l):(o=er(e)?to:Mn.current,i=e.contextTypes,l=(i=i!=null)?Zo(t,o):ms),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function yg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Qc.enqueueReplaceState(e,e.state,null)}function ed(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},x1(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Dr(l):(l=er(e)?to:Mn.current,o.context=Zo(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Jf(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Qc.enqueueReplaceState(o,o.state,null),gc(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function na(t,e){try{var n="",i=e;do n+=hE(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function td(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F_=typeof WeakMap=="function"?WeakMap:Map;function H2(t,e,n){n=vi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){xc||(xc=!0,hd=i),td(t,e)},n}function W2(t,e,n){n=vi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){td(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){td(t,e),typeof i!="function"&&(as===null?as=new Set([this]):as.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function wg(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new F_;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=Z_.bind(null,t,e,n),e.then(t,t))}function xg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Eg(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vi(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var V_=Mi.ReactCurrentOwner,Zn=!1;function Fn(t,e,n,i){e.child=t===null?x2(e,null,n,i):ea(e,t.child,n,i)}function _g(t,e,n,i,o){n=n.render;var l=e.ref;return qo(e,o),i=v1(t,e,n,i,l,o),n=I1(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ni(t,e,o)):(Rt&&n&&f1(e),e.flags|=1,Fn(t,e,i,o),e.child)}function Ag(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!k1(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,G2(t,e,l,i,o)):(t=Xu(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(f,i)&&t.ref===e.ref)return Ni(t,e,o)}return e.flags|=1,t=us(l,i),t.ref=e.ref,t.return=e,e.child=t}function G2(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(xl(l,i)&&t.ref===e.ref)if(Zn=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Zn=!0);else return e.lanes=t.lanes,Ni(t,e,o)}return nd(t,e,n,i,o)}function X2(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(jo,gr),gr|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(jo,gr),gr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,mt(jo,gr),gr|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,mt(jo,gr),gr|=i;return Fn(t,e,o,n),e.child}function K2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nd(t,e,n,i,o){var l=er(n)?to:Mn.current;return l=Zo(e,l),qo(e,o),n=v1(t,e,n,i,l,o),i=I1(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ni(t,e,o)):(Rt&&i&&f1(e),e.flags|=1,Fn(t,e,n,o),e.child)}function Cg(t,e,n,i,o){if(er(n)){var l=!0;uc(e)}else l=!1;if(qo(e,o),e.stateNode===null)Hu(t,e),j2(e,n,i),ed(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,p=e.memoizedProps;f.props=p;var m=f.context,w=n.contextType;typeof w=="object"&&w!==null?w=Dr(w):(w=er(n)?to:Mn.current,w=Zo(e,w));var _=n.getDerivedStateFromProps,C=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function";C||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==i||m!==w)&&yg(e,f,i,w),qi=!1;var R=e.memoizedState;f.state=R,gc(e,i,f,o),m=e.memoizedState,p!==i||R!==m||Jn.current||qi?(typeof _=="function"&&(Jf(e,n,_,i),m=e.memoizedState),(p=qi||mg(e,n,p,i,R,m,w))?(C||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=m),f.props=i,f.state=m,f.context=w,i=p):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,_2(t,e),p=e.memoizedProps,w=e.type===e.elementType?p:Vr(e.type,p),f.props=w,C=e.pendingProps,R=f.context,m=n.contextType,typeof m=="object"&&m!==null?m=Dr(m):(m=er(n)?to:Mn.current,m=Zo(e,m));var L=n.getDerivedStateFromProps;(_=typeof L=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==C||R!==m)&&yg(e,f,i,m),qi=!1,R=e.memoizedState,f.state=R,gc(e,i,f,o);var j=e.memoizedState;p!==C||R!==j||Jn.current||qi?(typeof L=="function"&&(Jf(e,n,L,i),j=e.memoizedState),(w=qi||mg(e,n,w,i,R,j,m)||!1)?(_||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,j,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,j,m)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&R===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&R===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=j),f.props=i,f.state=j,f.context=m,i=w):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&R===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&R===t.memoizedState||(e.flags|=1024),i=!1)}return rd(t,e,n,i,l,o)}function rd(t,e,n,i,o,l){K2(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&lg(e,n,!1),Ni(t,e,l);i=e.stateNode,V_.current=e;var p=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=ea(e,t.child,null,l),e.child=ea(e,null,p,l)):Fn(t,e,p,l),e.memoizedState=i.state,o&&lg(e,n,!0),e.child}function q2(t){var e=t.stateNode;e.pendingContext?ag(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(t,e.context,!1),E1(t,e.containerInfo)}function vg(t,e,n,i,o){return Jo(),g1(o),e.flags|=256,Fn(t,e,n,i),e.child}var id={dehydrated:null,treeContext:null,retryLane:0};function sd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y2(t,e,n){var i=e.pendingProps,o=Mt.current,l=!1,f=(e.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(o&2)!==0),p?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),mt(Mt,o&1),t===null)return $f(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Jc(f,i,0,null),t=Js(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=sd(n),e.memoizedState=id,t):R1(e,f));if(o=t.memoizedState,o!==null&&(p=o.dehydrated,p!==null))return U_(t,e,f,i,p,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,p=o.sibling;var m={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=m,e.deletions=null):(i=us(o,m),i.subtreeFlags=o.subtreeFlags&14680064),p!==null?l=us(p,l):(l=Js(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?sd(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=id,i}return l=t.child,t=l.sibling,i=us(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function R1(t,e){return e=Jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vu(t,e,n,i){return i!==null&&g1(i),ea(e,t.child,null,n),t=R1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U_(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=sf(Error(le(422))),vu(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Jc({mode:"visible",children:i.children},o,0,null),l=Js(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&ea(e,t.child,null,f),e.child.memoizedState=sd(f),e.memoizedState=id,l);if(!(e.mode&1))return vu(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var p=i.dgst;return i=p,l=Error(le(419)),i=sf(l,i,void 0),vu(t,e,f,i)}if(p=(f&t.childLanes)!==0,Zn||p){if(i=mn,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Ri(t,o),Hr(i,t,o,-1))}return M1(),i=sf(Error(le(421))),vu(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=J_.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,pr=ss(o.nextSibling),yr=e,Rt=!0,zr=null,t!==null&&(Sr[Rr++]=Ai,Sr[Rr++]=Ci,Sr[Rr++]=no,Ai=t.id,Ci=t.overflow,no=e),e=R1(e,i.children),e.flags|=4096,e)}function Ig(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Zf(t.return,e,n)}function of(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function Q2(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(Fn(t,e,i.children,n),i=Mt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ig(t,n,e);else if(t.tag===19)Ig(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(mt(Mt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),of(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&pc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}of(e,!0,n,null,l);break;case"together":of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function z_(t,e,n){switch(e.tag){case 3:q2(e),Jo();break;case 5:A2(e);break;case 1:er(e.type)&&uc(e);break;case 4:E1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;mt(fc,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(mt(Mt,Mt.current&1),e.flags|=128,null):n&e.child.childLanes?Y2(t,e,n):(mt(Mt,Mt.current&1),t=Ni(t,e,n),t!==null?t.sibling:null);mt(Mt,Mt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Q2(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),mt(Mt,Mt.current),i)break;return null;case 22:case 23:return e.lanes=0,X2(t,e,n)}return Ni(t,e,n)}var $2,od,Z2,J2;$2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};od=function(){};Z2=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Qs(oi.current);var l=null;switch(n){case"input":o=Rf(t,o),i=Rf(t,i),l=[];break;case"select":o=Lt({},o,{value:void 0}),i=Lt({},i,{value:void 0}),l=[];break;case"textarea":o=Df(t,o),i=Df(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ac)}Of(n,i);var f;n=null;for(w in o)if(!i.hasOwnProperty(w)&&o.hasOwnProperty(w)&&o[w]!=null)if(w==="style"){var p=o[w];for(f in p)p.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(fl.hasOwnProperty(w)?l||(l=[]):(l=l||[]).push(w,null));for(w in i){var m=i[w];if(p=o!=null?o[w]:void 0,i.hasOwnProperty(w)&&m!==p&&(m!=null||p!=null))if(w==="style")if(p){for(f in p)!p.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in m)m.hasOwnProperty(f)&&p[f]!==m[f]&&(n||(n={}),n[f]=m[f])}else n||(l||(l=[]),l.push(w,n)),n=m;else w==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,p=p?p.__html:void 0,m!=null&&p!==m&&(l=l||[]).push(w,m)):w==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(w,""+m):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(fl.hasOwnProperty(w)?(m!=null&&w==="onScroll"&&At("scroll",t),l||p===m||(l=[])):(l=l||[]).push(w,m))}n&&(l=l||[]).push("style",n);var w=l;(e.updateQueue=w)&&(e.flags|=4)}};J2=function(t,e,n,i){n!==i&&(e.flags|=4)};function ja(t,e){if(!Rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function j_(t,e,n){var i=e.pendingProps;switch(d1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return er(e.type)&&lc(),Nn(e),null;case 3:return i=e.stateNode,ta(),vt(Jn),vt(Mn),A1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zr!==null&&(gd(zr),zr=null))),od(t,e),Nn(e),null;case 5:_1(e);var o=Qs(vl.current);if(n=e.type,t!==null&&e.stateNode!=null)Z2(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(le(166));return Nn(e),null}if(t=Qs(oi.current),Au(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[ii]=e,i[Al]=l,t=(e.mode&1)!==0,n){case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":case"embed":At("load",i);break;case"video":case"audio":for(o=0;o<Ka.length;o++)At(Ka[o],i);break;case"source":At("error",i);break;case"img":case"image":case"link":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"input":M0(i,l),At("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},At("invalid",i);break;case"textarea":L0(i,l),At("invalid",i)}Of(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var p=l[f];f==="children"?typeof p=="string"?i.textContent!==p&&(l.suppressHydrationWarning!==!0&&_u(i.textContent,p,t),o=["children",p]):typeof p=="number"&&i.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&_u(i.textContent,p,t),o=["children",""+p]):fl.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&At("scroll",i)}switch(n){case"input":du(i),k0(i,l,!0);break;case"textarea":du(i),B0(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=ac)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[ii]=e,t[Al]=i,$2(t,e,!1,!1),e.stateNode=t;e:{switch(f=Mf(n,i),n){case"dialog":At("cancel",t),At("close",t),o=i;break;case"iframe":case"object":case"embed":At("load",t),o=i;break;case"video":case"audio":for(o=0;o<Ka.length;o++)At(Ka[o],t);o=i;break;case"source":At("error",t),o=i;break;case"img":case"image":case"link":At("error",t),At("load",t),o=i;break;case"details":At("toggle",t),o=i;break;case"input":M0(t,i),o=Rf(t,i),At("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Lt({},i,{value:void 0}),At("invalid",t);break;case"textarea":L0(t,i),o=Df(t,i),At("invalid",t);break;default:o=i}Of(n,o),p=o;for(l in p)if(p.hasOwnProperty(l)){var m=p[l];l==="style"?bm(t,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Rm(t,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&dl(t,m):typeof m=="number"&&dl(t,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fl.hasOwnProperty(l)?m!=null&&l==="onScroll"&&At("scroll",t):m!=null&&Zd(t,l,m,f))}switch(n){case"input":du(t),k0(t,i,!1);break;case"textarea":du(t),B0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ps(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Wo(t,!!i.multiple,l,!1):i.defaultValue!=null&&Wo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)J2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(le(166));if(n=Qs(vl.current),Qs(oi.current),Au(e)){if(i=e.stateNode,n=e.memoizedProps,i[ii]=e,(l=i.nodeValue!==n)&&(t=yr,t!==null))switch(t.tag){case 3:_u(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_u(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ii]=e,e.stateNode=i}return Nn(e),null;case 13:if(vt(Mt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&pr!==null&&e.mode&1&&!(e.flags&128))y2(),Jo(),e.flags|=98560,l=!1;else if(l=Au(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(le(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(le(317));l[ii]=e}else Jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),l=!1}else zr!==null&&(gd(zr),zr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Mt.current&1?ln===0&&(ln=3):M1())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return ta(),od(t,e),t===null&&El(e.stateNode.containerInfo),Nn(e),null;case 10:return y1(e.type._context),Nn(e),null;case 17:return er(e.type)&&lc(),Nn(e),null;case 19:if(vt(Mt),l=e.memoizedState,l===null)return Nn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)ja(l,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=pc(t),f!==null){for(e.flags|=128,ja(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(Mt,Mt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Xt()>ra&&(e.flags|=128,i=!0,ja(l,!1),e.lanes=4194304)}else{if(!i)if(t=pc(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ja(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Rt)return Nn(e),null}else 2*Xt()-l.renderingStartTime>ra&&n!==1073741824&&(e.flags|=128,i=!0,ja(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xt(),e.sibling=null,n=Mt.current,mt(Mt,i?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return O1(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gr&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function H_(t,e){switch(d1(e),e.tag){case 1:return er(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ta(),vt(Jn),vt(Mn),A1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _1(e),null;case 13:if(vt(Mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(Mt),null;case 4:return ta(),null;case 10:return y1(e.type._context),null;case 22:case 23:return O1(),null;case 24:return null;default:return null}}var Iu=!1,Pn=!1,W_=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){zt(t,e,i)}else n.current=null}function ad(t,e,n){try{n()}catch(i){zt(t,e,i)}}var Tg=!1;function G_(t,e){if(Wf=ic,t=i2(),h1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,p=-1,m=-1,w=0,_=0,C=t,R=null;t:for(;;){for(var L;C!==n||o!==0&&C.nodeType!==3||(p=f+o),C!==l||i!==0&&C.nodeType!==3||(m=f+i),C.nodeType===3&&(f+=C.nodeValue.length),(L=C.firstChild)!==null;)R=C,C=L;for(;;){if(C===t)break t;if(R===n&&++w===o&&(p=f),R===l&&++_===i&&(m=f),(L=C.nextSibling)!==null)break;C=R,R=C.parentNode}C=L}n=p===-1||m===-1?null:{start:p,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gf={focusedElem:t,selectionRange:n},ic=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var z=j.memoizedProps,q=j.memoizedState,F=e.stateNode,O=F.getSnapshotBeforeUpdate(e.elementType===e.type?z:Vr(e.type,z),q);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(K){zt(e,e.return,K)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return j=Tg,Tg=!1,j}function il(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&ad(e,n,l)}o=o.next}while(o!==i)}}function $c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ey(t){var e=t.alternate;e!==null&&(t.alternate=null,ey(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ii],delete e[Al],delete e[qf],delete e[S_],delete e[R_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ty(t){return t.tag===5||t.tag===3||t.tag===4}function Sg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ty(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ud(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(i!==4&&(t=t.child,t!==null))for(ud(t,e,n),t=t.sibling;t!==null;)ud(t,e,n),t=t.sibling}function cd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(cd(t,e,n),t=t.sibling;t!==null;)cd(t,e,n),t=t.sibling}var _n=null,Ur=!1;function Xi(t,e,n){for(n=n.child;n!==null;)ny(t,e,n),n=n.sibling}function ny(t,e,n){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(Hc,n)}catch{}switch(n.tag){case 5:Pn||zo(n,e);case 6:var i=_n,o=Ur;_n=null,Xi(t,e,n),_n=i,Ur=o,_n!==null&&(Ur?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Ur?(t=_n,n=n.stateNode,t.nodeType===8?Zh(t.parentNode,n):t.nodeType===1&&Zh(t,n),yl(t)):Zh(_n,n.stateNode));break;case 4:i=_n,o=Ur,_n=n.stateNode.containerInfo,Ur=!0,Xi(t,e,n),_n=i,Ur=o;break;case 0:case 11:case 14:case 15:if(!Pn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&ad(n,e,f),o=o.next}while(o!==i)}Xi(t,e,n);break;case 1:if(!Pn&&(zo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(p){zt(n,e,p)}Xi(t,e,n);break;case 21:Xi(t,e,n);break;case 22:n.mode&1?(Pn=(i=Pn)||n.memoizedState!==null,Xi(t,e,n),Pn=i):Xi(t,e,n);break;default:Xi(t,e,n)}}function Rg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W_),e.forEach(function(i){var o=eA.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Fr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,p=f;e:for(;p!==null;){switch(p.tag){case 5:_n=p.stateNode,Ur=!1;break e;case 3:_n=p.stateNode.containerInfo,Ur=!0;break e;case 4:_n=p.stateNode.containerInfo,Ur=!0;break e}p=p.return}if(_n===null)throw Error(le(160));ny(l,f,o),_n=null,Ur=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(w){zt(o,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ry(e,t),e=e.sibling}function ry(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fr(e,t),ni(t),i&4){try{il(3,t,t.return),$c(3,t)}catch(z){zt(t,t.return,z)}try{il(5,t,t.return)}catch(z){zt(t,t.return,z)}}break;case 1:Fr(e,t),ni(t),i&512&&n!==null&&zo(n,n.return);break;case 5:if(Fr(e,t),ni(t),i&512&&n!==null&&zo(n,n.return),t.flags&32){var o=t.stateNode;try{dl(o,"")}catch(z){zt(t,t.return,z)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,p=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&Im(o,l),Mf(p,f);var w=Mf(p,l);for(f=0;f<m.length;f+=2){var _=m[f],C=m[f+1];_==="style"?bm(o,C):_==="dangerouslySetInnerHTML"?Rm(o,C):_==="children"?dl(o,C):Zd(o,_,C,w)}switch(p){case"input":Nf(o,l);break;case"textarea":Tm(o,l);break;case"select":var R=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var L=l.value;L!=null?Wo(o,!!l.multiple,L,!1):R!==!!l.multiple&&(l.defaultValue!=null?Wo(o,!!l.multiple,l.defaultValue,!0):Wo(o,!!l.multiple,l.multiple?[]:"",!1))}o[Al]=l}catch(z){zt(t,t.return,z)}}break;case 6:if(Fr(e,t),ni(t),i&4){if(t.stateNode===null)throw Error(le(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(z){zt(t,t.return,z)}}break;case 3:if(Fr(e,t),ni(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{yl(e.containerInfo)}catch(z){zt(t,t.return,z)}break;case 4:Fr(e,t),ni(t);break;case 13:Fr(e,t),ni(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(D1=Xt())),i&4&&Rg(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Pn=(w=Pn)||_,Fr(e,t),Pn=w):Fr(e,t),ni(t),i&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!_&&t.mode&1)for(Ee=t,_=t.child;_!==null;){for(C=Ee=_;Ee!==null;){switch(R=Ee,L=R.child,R.tag){case 0:case 11:case 14:case 15:il(4,R,R.return);break;case 1:zo(R,R.return);var j=R.stateNode;if(typeof j.componentWillUnmount=="function"){i=R,n=R.return;try{e=i,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(z){zt(i,n,z)}}break;case 5:zo(R,R.return);break;case 22:if(R.memoizedState!==null){bg(C);continue}}L!==null?(L.return=R,Ee=L):bg(C)}_=_.sibling}e:for(_=null,C=t;;){if(C.tag===5){if(_===null){_=C;try{o=C.stateNode,w?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=C.stateNode,m=C.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,p.style.display=Nm("display",f))}catch(z){zt(t,t.return,z)}}}else if(C.tag===6){if(_===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(z){zt(t,t.return,z)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;_===C&&(_=null),C=C.return}_===C&&(_=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Fr(e,t),ni(t),i&4&&Rg(t);break;case 21:break;default:Fr(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ty(n)){var i=n;break e}n=n.return}throw Error(le(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(dl(o,""),i.flags&=-33);var l=Sg(t);cd(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,p=Sg(t);ud(t,p,f);break;default:throw Error(le(161))}}catch(m){zt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function X_(t,e,n){Ee=t,iy(t)}function iy(t,e,n){for(var i=(t.mode&1)!==0;Ee!==null;){var o=Ee,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||Iu;if(!f){var p=o.alternate,m=p!==null&&p.memoizedState!==null||Pn;p=Iu;var w=Pn;if(Iu=f,(Pn=m)&&!w)for(Ee=o;Ee!==null;)f=Ee,m=f.child,f.tag===22&&f.memoizedState!==null?Dg(o):m!==null?(m.return=f,Ee=m):Dg(o);for(;l!==null;)Ee=l,iy(l),l=l.sibling;Ee=o,Iu=p,Pn=w}Ng(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,Ee=l):Ng(t)}}function Ng(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pn||$c(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Pn)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Vr(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&dg(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dg(e,f,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var _=w.memoizedState;if(_!==null){var C=_.dehydrated;C!==null&&yl(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Pn||e.flags&512&&ld(e)}catch(R){zt(e,e.return,R)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function bg(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Dg(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$c(4,e)}catch(m){zt(e,n,m)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(m){zt(e,o,m)}}var l=e.return;try{ld(e)}catch(m){zt(e,l,m)}break;case 5:var f=e.return;try{ld(e)}catch(m){zt(e,f,m)}}}catch(m){zt(e,e.return,m)}if(e===t){Ee=null;break}var p=e.sibling;if(p!==null){p.return=e.return,Ee=p;break}Ee=e.return}}var K_=Math.ceil,wc=Mi.ReactCurrentDispatcher,N1=Mi.ReactCurrentOwner,br=Mi.ReactCurrentBatchConfig,Je=0,mn=null,Qt=null,vn=0,gr=0,jo=Cs(0),ln=0,Rl=null,io=0,Zc=0,b1=0,sl=null,Qn=null,D1=0,ra=1/0,Ei=null,xc=!1,hd=null,as=null,Tu=!1,Zi=null,Ec=0,ol=0,fd=null,Wu=-1,Gu=0;function Vn(){return Je&6?Xt():Wu!==-1?Wu:Wu=Xt()}function ls(t){return t.mode&1?Je&2&&vn!==0?vn&-vn:b_.transition!==null?(Gu===0&&(Gu=jm()),Gu):(t=lt,t!==0||(t=window.event,t=t===void 0?16:Ym(t.type)),t):1}function Hr(t,e,n,i){if(50<ol)throw ol=0,fd=null,Error(le(185));jl(t,n,i),(!(Je&2)||t!==mn)&&(t===mn&&(!(Je&2)&&(Zc|=n),ln===4&&Qi(t,vn)),tr(t,i),n===1&&Je===0&&!(e.mode&1)&&(ra=Xt()+500,qc&&vs()))}function tr(t,e){var n=t.callbackNode;bE(t,e);var i=rc(t,t===mn?vn:0);if(i===0)n!==null&&U0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&U0(n),e===1)t.tag===0?N_(Pg.bind(null,t)):g2(Pg.bind(null,t)),I_(function(){!(Je&6)&&vs()}),n=null;else{switch(Hm(i)){case 1:n=r1;break;case 4:n=Um;break;case 16:n=nc;break;case 536870912:n=zm;break;default:n=nc}n=fy(n,sy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sy(t,e){if(Wu=-1,Gu=0,Je&6)throw Error(le(327));var n=t.callbackNode;if(Yo()&&t.callbackNode!==n)return null;var i=rc(t,t===mn?vn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=_c(t,i);else{e=i;var o=Je;Je|=2;var l=ay();(mn!==t||vn!==e)&&(Ei=null,ra=Xt()+500,Zs(t,e));do try{Q_();break}catch(p){oy(t,p)}while(!0);m1(),wc.current=l,Je=o,Qt!==null?e=0:(mn=null,vn=0,e=ln)}if(e!==0){if(e===2&&(o=Vf(t),o!==0&&(i=o,e=dd(t,o))),e===1)throw n=Rl,Zs(t,0),Qi(t,i),tr(t,Xt()),n;if(e===6)Qi(t,i);else{if(o=t.current.alternate,!(i&30)&&!q_(o)&&(e=_c(t,i),e===2&&(l=Vf(t),l!==0&&(i=l,e=dd(t,l))),e===1))throw n=Rl,Zs(t,0),Qi(t,i),tr(t,Xt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(le(345));case 2:Xs(t,Qn,Ei);break;case 3:if(Qi(t,i),(i&130023424)===i&&(e=D1+500-Xt(),10<e)){if(rc(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Vn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Kf(Xs.bind(null,t,Qn,Ei),e);break}Xs(t,Qn,Ei);break;case 4:if(Qi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-jr(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=Xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*K_(i/1960))-i,10<i){t.timeoutHandle=Kf(Xs.bind(null,t,Qn,Ei),i);break}Xs(t,Qn,Ei);break;case 5:Xs(t,Qn,Ei);break;default:throw Error(le(329))}}}return tr(t,Xt()),t.callbackNode===n?sy.bind(null,t):null}function dd(t,e){var n=sl;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=_c(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&gd(e)),t}function gd(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function q_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Gr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qi(t,e){for(e&=~b1,e&=~Zc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jr(e),i=1<<n;t[n]=-1,e&=~i}}function Pg(t){if(Je&6)throw Error(le(327));Yo();var e=rc(t,0);if(!(e&1))return tr(t,Xt()),null;var n=_c(t,e);if(t.tag!==0&&n===2){var i=Vf(t);i!==0&&(e=i,n=dd(t,i))}if(n===1)throw n=Rl,Zs(t,0),Qi(t,e),tr(t,Xt()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xs(t,Qn,Ei),tr(t,Xt()),null}function P1(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(ra=Xt()+500,qc&&vs())}}function so(t){Zi!==null&&Zi.tag===0&&!(Je&6)&&Yo();var e=Je;Je|=1;var n=br.transition,i=lt;try{if(br.transition=null,lt=1,t)return t()}finally{lt=i,br.transition=n,Je=e,!(Je&6)&&vs()}}function O1(){gr=jo.current,vt(jo)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v_(n)),Qt!==null)for(n=Qt.return;n!==null;){var i=n;switch(d1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&lc();break;case 3:ta(),vt(Jn),vt(Mn),A1();break;case 5:_1(i);break;case 4:ta();break;case 13:vt(Mt);break;case 19:vt(Mt);break;case 10:y1(i.type._context);break;case 22:case 23:O1()}n=n.return}if(mn=t,Qt=t=us(t.current,null),vn=gr=e,ln=0,Rl=null,b1=Zc=io=0,Qn=sl=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}Ys=null}return t}function oy(t,e){do{var n=Qt;try{if(m1(),zu.current=yc,mc){for(var i=kt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}mc=!1}if(ro=0,pn=on=kt=null,rl=!1,Il=0,N1.current=null,n===null||n.return===null){ln=1,Rl=e,Qt=null;break}e:{var l=t,f=n.return,p=n,m=e;if(e=vn,p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var w=m,_=p,C=_.tag;if(!(_.mode&1)&&(C===0||C===11||C===15)){var R=_.alternate;R?(_.updateQueue=R.updateQueue,_.memoizedState=R.memoizedState,_.lanes=R.lanes):(_.updateQueue=null,_.memoizedState=null)}var L=xg(f);if(L!==null){L.flags&=-257,Eg(L,f,p,l,e),L.mode&1&&wg(l,w,e),e=L,m=w;var j=e.updateQueue;if(j===null){var z=new Set;z.add(m),e.updateQueue=z}else j.add(m);break e}else{if(!(e&1)){wg(l,w,e),M1();break e}m=Error(le(426))}}else if(Rt&&p.mode&1){var q=xg(f);if(q!==null){!(q.flags&65536)&&(q.flags|=256),Eg(q,f,p,l,e),g1(na(m,p));break e}}l=m=na(m,p),ln!==4&&(ln=2),sl===null?sl=[l]:sl.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var F=H2(l,m,e);fg(l,F);break e;case 1:p=m;var O=l.type,M=l.stateNode;if(!(l.flags&128)&&(typeof O.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(as===null||!as.has(M)))){l.flags|=65536,e&=-e,l.lanes|=e;var K=W2(l,p,e);fg(l,K);break e}}l=l.return}while(l!==null)}uy(n)}catch(re){e=re,Qt===n&&n!==null&&(Qt=n=n.return);continue}break}while(!0)}function ay(){var t=wc.current;return wc.current=yc,t===null?yc:t}function M1(){(ln===0||ln===3||ln===2)&&(ln=4),mn===null||!(io&268435455)&&!(Zc&268435455)||Qi(mn,vn)}function _c(t,e){var n=Je;Je|=2;var i=ay();(mn!==t||vn!==e)&&(Ei=null,Zs(t,e));do try{Y_();break}catch(o){oy(t,o)}while(!0);if(m1(),Je=n,wc.current=i,Qt!==null)throw Error(le(261));return mn=null,vn=0,ln}function Y_(){for(;Qt!==null;)ly(Qt)}function Q_(){for(;Qt!==null&&!_E();)ly(Qt)}function ly(t){var e=hy(t.alternate,t,gr);t.memoizedProps=t.pendingProps,e===null?uy(t):Qt=e,N1.current=null}function uy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=H_(n,e),n!==null){n.flags&=32767,Qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Qt=null;return}}else if(n=j_(n,e,gr),n!==null){Qt=n;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);ln===0&&(ln=5)}function Xs(t,e,n){var i=lt,o=br.transition;try{br.transition=null,lt=1,$_(t,e,n,i)}finally{br.transition=o,lt=i}return null}function $_(t,e,n,i){do Yo();while(Zi!==null);if(Je&6)throw Error(le(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(DE(t,l),t===mn&&(Qt=mn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tu||(Tu=!0,fy(nc,function(){return Yo(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=br.transition,br.transition=null;var f=lt;lt=1;var p=Je;Je|=4,N1.current=null,G_(t,n),ry(n,t),y_(Gf),ic=!!Wf,Gf=Wf=null,t.current=n,X_(n),AE(),Je=p,lt=f,br.transition=l}else t.current=n;if(Tu&&(Tu=!1,Zi=t,Ec=o),l=t.pendingLanes,l===0&&(as=null),IE(n.stateNode),tr(t,Xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(xc)throw xc=!1,t=hd,hd=null,t;return Ec&1&&t.tag!==0&&Yo(),l=t.pendingLanes,l&1?t===fd?ol++:(ol=0,fd=t):ol=0,vs(),null}function Yo(){if(Zi!==null){var t=Hm(Ec),e=br.transition,n=lt;try{if(br.transition=null,lt=16>t?16:t,Zi===null)var i=!1;else{if(t=Zi,Zi=null,Ec=0,Je&6)throw Error(le(331));var o=Je;for(Je|=4,Ee=t.current;Ee!==null;){var l=Ee,f=l.child;if(Ee.flags&16){var p=l.deletions;if(p!==null){for(var m=0;m<p.length;m++){var w=p[m];for(Ee=w;Ee!==null;){var _=Ee;switch(_.tag){case 0:case 11:case 15:il(8,_,l)}var C=_.child;if(C!==null)C.return=_,Ee=C;else for(;Ee!==null;){_=Ee;var R=_.sibling,L=_.return;if(ey(_),_===w){Ee=null;break}if(R!==null){R.return=L,Ee=R;break}Ee=L}}}var j=l.alternate;if(j!==null){var z=j.child;if(z!==null){j.child=null;do{var q=z.sibling;z.sibling=null,z=q}while(z!==null)}}Ee=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ee=f;else e:for(;Ee!==null;){if(l=Ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:il(9,l,l.return)}var F=l.sibling;if(F!==null){F.return=l.return,Ee=F;break e}Ee=l.return}}var O=t.current;for(Ee=O;Ee!==null;){f=Ee;var M=f.child;if(f.subtreeFlags&2064&&M!==null)M.return=f,Ee=M;else e:for(f=O;Ee!==null;){if(p=Ee,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:$c(9,p)}}catch(re){zt(p,p.return,re)}if(p===f){Ee=null;break e}var K=p.sibling;if(K!==null){K.return=p.return,Ee=K;break e}Ee=p.return}}if(Je=o,vs(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(Hc,t)}catch{}i=!0}return i}finally{lt=n,br.transition=e}}return!1}function Og(t,e,n){e=na(n,e),e=H2(t,e,1),t=os(t,e,1),e=Vn(),t!==null&&(jl(t,1,e),tr(t,e))}function zt(t,e,n){if(t.tag===3)Og(t,t,n);else for(;e!==null;){if(e.tag===3){Og(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(as===null||!as.has(i))){t=na(n,t),t=W2(e,t,1),e=os(e,t,1),t=Vn(),e!==null&&(jl(e,1,t),tr(e,t));break}}e=e.return}}function Z_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Vn(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(vn&n)===n&&(ln===4||ln===3&&(vn&130023424)===vn&&500>Xt()-D1?Zs(t,0):b1|=n),tr(t,e)}function cy(t,e){e===0&&(t.mode&1?(e=mu,mu<<=1,!(mu&130023424)&&(mu=4194304)):e=1);var n=Vn();t=Ri(t,e),t!==null&&(jl(t,e,n),tr(t,n))}function J_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cy(t,n)}function eA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(le(314))}i!==null&&i.delete(e),cy(t,n)}var hy;hy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jn.current)Zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zn=!1,z_(t,e,n);Zn=!!(t.flags&131072)}else Zn=!1,Rt&&e.flags&1048576&&p2(e,hc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Hu(t,e),t=e.pendingProps;var o=Zo(e,Mn.current);qo(e,n),o=v1(null,e,i,t,o,n);var l=I1();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(i)?(l=!0,uc(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,x1(e),o.updater=Qc,e.stateNode=o,o._reactInternals=e,ed(e,i,t,n),e=rd(null,e,i,!0,l,n)):(e.tag=0,Rt&&l&&f1(e),Fn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Hu(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=nA(i),t=Vr(i,t),o){case 0:e=nd(null,e,i,t,n);break e;case 1:e=Cg(null,e,i,t,n);break e;case 11:e=_g(null,e,i,t,n);break e;case 14:e=Ag(null,e,i,Vr(i.type,t),n);break e}throw Error(le(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),nd(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),Cg(t,e,i,o,n);case 3:e:{if(q2(e),t===null)throw Error(le(387));i=e.pendingProps,l=e.memoizedState,o=l.element,_2(t,e),gc(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=na(Error(le(423)),e),e=vg(t,e,i,n,o);break e}else if(i!==o){o=na(Error(le(424)),e),e=vg(t,e,i,n,o);break e}else for(pr=ss(e.stateNode.containerInfo.firstChild),yr=e,Rt=!0,zr=null,n=x2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jo(),i===o){e=Ni(t,e,n);break e}Fn(t,e,i,n)}e=e.child}return e;case 5:return A2(e),t===null&&$f(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,Xf(i,o)?f=null:l!==null&&Xf(i,l)&&(e.flags|=32),K2(t,e),Fn(t,e,f,n),e.child;case 6:return t===null&&$f(e),null;case 13:return Y2(t,e,n);case 4:return E1(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ea(e,null,i,n):Fn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),_g(t,e,i,o,n);case 7:return Fn(t,e,e.pendingProps,n),e.child;case 8:return Fn(t,e,e.pendingProps.children,n),e.child;case 12:return Fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,mt(fc,i._currentValue),i._currentValue=f,l!==null)if(Gr(l.value,f)){if(l.children===o.children&&!Jn.current){e=Ni(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var p=l.dependencies;if(p!==null){f=l.child;for(var m=p.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=vi(-1,n&-n),m.tag=2;var w=l.updateQueue;if(w!==null){w=w.shared;var _=w.pending;_===null?m.next=m:(m.next=_.next,_.next=m),w.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),Zf(l.return,n,e),p.lanes|=n;break}m=m.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(le(341));f.lanes|=n,p=f.alternate,p!==null&&(p.lanes|=n),Zf(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}Fn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,qo(e,n),o=Dr(o),i=i(o),e.flags|=1,Fn(t,e,i,n),e.child;case 14:return i=e.type,o=Vr(i,e.pendingProps),o=Vr(i.type,o),Ag(t,e,i,o,n);case 15:return G2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),Hu(t,e),e.tag=1,er(i)?(t=!0,uc(e)):t=!1,qo(e,n),j2(e,i,o),ed(e,i,o,n),rd(null,e,i,!0,t,n);case 19:return Q2(t,e,n);case 22:return X2(t,e,n)}throw Error(le(156,e.tag))};function fy(t,e){return Vm(t,e)}function tA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,n,i){return new tA(t,e,n,i)}function k1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nA(t){if(typeof t=="function")return k1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e1)return 11;if(t===t1)return 14}return 2}function us(t,e){var n=t.alternate;return n===null?(n=Nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xu(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")k1(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Po:return Js(n.children,o,l,e);case Jd:f=8,o|=8;break;case vf:return t=Nr(12,n,e,o|2),t.elementType=vf,t.lanes=l,t;case If:return t=Nr(13,n,e,o),t.elementType=If,t.lanes=l,t;case Tf:return t=Nr(19,n,e,o),t.elementType=Tf,t.lanes=l,t;case Am:return Jc(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Em:f=10;break e;case _m:f=9;break e;case e1:f=11;break e;case t1:f=14;break e;case Ki:f=16,i=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Nr(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function Js(t,e,n,i){return t=Nr(7,t,i,e),t.lanes=n,t}function Jc(t,e,n,i){return t=Nr(22,t,i,e),t.elementType=Am,t.lanes=n,t.stateNode={isHidden:!1},t}function af(t,e,n){return t=Nr(6,t,null,e),t.lanes=n,t}function lf(t,e,n){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rA(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zh(0),this.expirationTimes=zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zh(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function L1(t,e,n,i,o,l,f,p,m){return t=new rA(t,e,n,p,m),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Nr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},x1(l),t}function iA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dy(t){if(!t)return ms;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(er(n))return d2(t,n,e)}return e}function gy(t,e,n,i,o,l,f,p,m){return t=L1(n,i,!0,t,o,l,f,p,m),t.context=dy(null),n=t.current,i=Vn(),o=ls(n),l=vi(i,o),l.callback=e??null,os(n,l,o),t.current.lanes=o,jl(t,o,i),tr(t,i),t}function eh(t,e,n,i){var o=e.current,l=Vn(),f=ls(o);return n=dy(n),e.context===null?e.context=n:e.pendingContext=n,e=vi(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=os(o,e,f),t!==null&&(Hr(t,o,f,l),Uu(t,o,f)),f}function Ac(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function B1(t,e){Mg(t,e),(t=t.alternate)&&Mg(t,e)}function sA(){return null}var py=typeof reportError=="function"?reportError:function(t){console.error(t)};function F1(t){this._internalRoot=t}th.prototype.render=F1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));eh(t,e,null,null)};th.prototype.unmount=F1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){eh(null,t,null,null)}),e[Si]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&qm(t)}};function V1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kg(){}function oA(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var w=Ac(f);l.call(w)}}var f=gy(e,i,t,0,null,!1,!1,"",kg);return t._reactRootContainer=f,t[Si]=f.current,El(t.nodeType===8?t.parentNode:t),so(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var p=i;i=function(){var w=Ac(m);p.call(w)}}var m=L1(t,0,!1,null,null,!1,!1,"",kg);return t._reactRootContainer=m,t[Si]=m.current,El(t.nodeType===8?t.parentNode:t),so(function(){eh(e,m,n,i)}),m}function rh(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var p=o;o=function(){var m=Ac(f);p.call(m)}}eh(e,f,t,o)}else f=oA(n,e,t,o,i);return Ac(f)}Wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xa(e.pendingLanes);n!==0&&(i1(e,n|1),tr(e,Xt()),!(Je&6)&&(ra=Xt()+500,vs()))}break;case 13:so(function(){var i=Ri(t,1);if(i!==null){var o=Vn();Hr(i,t,1,o)}}),B1(t,1)}};s1=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=Vn();Hr(e,t,134217728,n)}B1(t,134217728)}};Gm=function(t){if(t.tag===13){var e=ls(t),n=Ri(t,e);if(n!==null){var i=Vn();Hr(n,t,e,i)}B1(t,e)}};Xm=function(){return lt};Km=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};Lf=function(t,e,n){switch(e){case"input":if(Nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Kc(i);if(!o)throw Error(le(90));vm(i),Nf(i,o)}}}break;case"textarea":Tm(t,n);break;case"select":e=n.value,e!=null&&Wo(t,!!n.multiple,e,!1)}};Om=P1;Mm=so;var aA={usingClientEntryPoint:!1,Events:[Wl,Lo,Kc,Dm,Pm,P1]},Ha={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lA={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bm(t),t===null?null:t.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||sA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{Hc=Su.inject(lA),si=Su}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aA;Er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V1(e))throw Error(le(200));return iA(t,e,null,n)};Er.createRoot=function(t,e){if(!V1(t))throw Error(le(299));var n=!1,i="",o=py;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=L1(t,1,!1,null,null,n,!1,i,o),t[Si]=e.current,El(t.nodeType===8?t.parentNode:t),new F1(e)};Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=Bm(e),t=t===null?null:t.stateNode,t};Er.flushSync=function(t){return so(t)};Er.hydrate=function(t,e,n){if(!nh(e))throw Error(le(200));return rh(null,t,e,!0,n)};Er.hydrateRoot=function(t,e,n){if(!V1(t))throw Error(le(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=py;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=gy(e,null,t,1,n??null,o,!1,l,f),t[Si]=e.current,El(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new th(e)};Er.render=function(t,e,n){if(!nh(e))throw Error(le(200));return rh(null,t,e,!1,n)};Er.unmountComponentAtNode=function(t){if(!nh(t))throw Error(le(40));return t._reactRootContainer?(so(function(){rh(null,null,t,!1,function(){t._reactRootContainer=null,t[Si]=null})}),!0):!1};Er.unstable_batchedUpdates=P1;Er.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!nh(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return rh(t,e,n,!1,i)};Er.version="18.3.1-next-f1338f8080-20240426";function my(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(my)}catch(t){console.error(t)}}my(),mm.exports=Er;var uA=mm.exports,yy,Lg=uA;yy=Lg.createRoot,Lg.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nl.apply(this,arguments)}var Ji;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ji||(Ji={}));const Bg="popstate";function cA(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:f,hash:p}=i.location;return pd("",{pathname:l,search:f,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:Cc(o)}return fA(e,n,null,t)}function $t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hA(){return Math.random().toString(36).substr(2,8)}function Fg(t,e){return{usr:t.state,key:t.key,idx:e}}function pd(t,e,n,i){return n===void 0&&(n=null),Nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xa(e):e,{state:n,key:e&&e.key||i||hA()})}function Cc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function xa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function fA(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,f=o.history,p=Ji.Pop,m=null,w=_();w==null&&(w=0,f.replaceState(Nl({},f.state,{idx:w}),""));function _(){return(f.state||{idx:null}).idx}function C(){p=Ji.Pop;let q=_(),F=q==null?null:q-w;w=q,m&&m({action:p,location:z.location,delta:F})}function R(q,F){p=Ji.Push;let O=pd(z.location,q,F);w=_()+1;let M=Fg(O,w),K=z.createHref(O);try{f.pushState(M,"",K)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;o.location.assign(K)}l&&m&&m({action:p,location:z.location,delta:1})}function L(q,F){p=Ji.Replace;let O=pd(z.location,q,F);w=_();let M=Fg(O,w),K=z.createHref(O);f.replaceState(M,"",K),l&&m&&m({action:p,location:z.location,delta:0})}function j(q){let F=o.location.origin!=="null"?o.location.origin:o.location.href,O=typeof q=="string"?q:Cc(q);return O=O.replace(/ $/,"%20"),$t(F,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,F)}let z={get action(){return p},get location(){return t(o,f)},listen(q){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Bg,C),m=q,()=>{o.removeEventListener(Bg,C),m=null}},createHref(q){return e(o,q)},createURL:j,encodeLocation(q){let F=j(q);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:R,replace:L,go(q){return f.go(q)}};return z}var Vg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vg||(Vg={}));function dA(t,e,n){return n===void 0&&(n="/"),gA(t,e,n,!1)}function gA(t,e,n,i){let o=typeof e=="string"?xa(e):e,l=U1(o.pathname||"/",n);if(l==null)return null;let f=xy(t);pA(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let w=TA(l);p=vA(f[m],w,i)}return p}function xy(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,f,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};m.relativePath.startsWith("/")&&($t(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let w=cs([i,m.relativePath]),_=n.concat(m);l.children&&l.children.length>0&&($t(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),xy(l.children,e,_,w)),!(l.path==null&&!l.index)&&e.push({path:w,score:AA(w,l.index),routesMeta:_})};return t.forEach((l,f)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,f);else for(let m of Ey(l.path))o(l,f,m)}),e}function Ey(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let f=Ey(i.join("/")),p=[];return p.push(...f.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...f),p.map(m=>t.startsWith("/")&&m===""?"/":m)}function pA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const mA=/^:[\w-]+$/,yA=3,wA=2,xA=1,EA=10,_A=-2,Ug=t=>t==="*";function AA(t,e){let n=t.split("/"),i=n.length;return n.some(Ug)&&(i+=_A),e&&(i+=wA),n.filter(o=>!Ug(o)).reduce((o,l)=>o+(mA.test(l)?yA:l===""?xA:EA),i)}function CA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function vA(t,e,n){let{routesMeta:i}=t,o={},l="/",f=[];for(let p=0;p<i.length;++p){let m=i[p],w=p===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",C=zg({path:m.relativePath,caseSensitive:m.caseSensitive,end:w},_),R=m.route;if(!C&&w&&n&&!i[i.length-1].route.index&&(C=zg({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!C)return null;Object.assign(o,C.params),f.push({params:o,pathname:cs([l,C.pathname]),pathnameBase:bA(cs([l,C.pathnameBase])),route:R}),C.pathnameBase!=="/"&&(l=cs([l,C.pathnameBase]))}return f}function zg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=IA(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],f=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((w,_,C)=>{let{paramName:R,isOptional:L}=_;if(R==="*"){let z=p[C]||"";f=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const j=p[C];return L&&!j?w[R]=void 0:w[R]=(j||"").replace(/%2F/g,"/"),w},{}),pathname:l,pathnameBase:f,pattern:t}}function IA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function TA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function U1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function SA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?xa(t):t;return{pathname:n?n.startsWith("/")?n:RA(n,e):e,search:DA(i),hash:PA(o)}}function RA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function uf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _y(t,e){let n=NA(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Ay(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=xa(t):(o=Nl({},t),$t(!o.pathname||!o.pathname.includes("?"),uf("?","pathname","search",o)),$t(!o.pathname||!o.pathname.includes("#"),uf("#","pathname","hash",o)),$t(!o.search||!o.search.includes("#"),uf("#","search","hash",o)));let l=t===""||o.pathname==="",f=l?"/":o.pathname,p;if(f==null)p=n;else{let C=e.length-1;if(!i&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),C-=1;o.pathname=R.join("/")}p=C>=0?e[C]:"/"}let m=SA(o,p),w=f&&f!=="/"&&f.endsWith("/"),_=(l||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(w||_)&&(m.pathname+="/"),m}const cs=t=>t.join("/").replace(/\/\/+/g,"/"),bA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Cy=["post","put","patch","delete"];new Set(Cy);const MA=["get",...Cy];new Set(MA);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bl.apply(this,arguments)}const z1=de.createContext(null),kA=de.createContext(null),uo=de.createContext(null),ih=de.createContext(null),Is=de.createContext({outlet:null,matches:[],isDataRoute:!1}),vy=de.createContext(null);function LA(t,e){let{relative:n}=e===void 0?{}:e;Xl()||$t(!1);let{basename:i,navigator:o}=de.useContext(uo),{hash:l,pathname:f,search:p}=Ty(t,{relative:n}),m=f;return i!=="/"&&(m=f==="/"?i:cs([i,f])),o.createHref({pathname:m,search:p,hash:l})}function Xl(){return de.useContext(ih)!=null}function sh(){return Xl()||$t(!1),de.useContext(ih).location}function Iy(t){de.useContext(uo).static||de.useLayoutEffect(t)}function BA(){let{isDataRoute:t}=de.useContext(Is);return t?$A():FA()}function FA(){Xl()||$t(!1);let t=de.useContext(z1),{basename:e,future:n,navigator:i}=de.useContext(uo),{matches:o}=de.useContext(Is),{pathname:l}=sh(),f=JSON.stringify(_y(o,n.v7_relativeSplatPath)),p=de.useRef(!1);return Iy(()=>{p.current=!0}),de.useCallback(function(w,_){if(_===void 0&&(_={}),!p.current)return;if(typeof w=="number"){i.go(w);return}let C=Ay(w,JSON.parse(f),l,_.relative==="path");t==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:cs([e,C.pathname])),(_.replace?i.replace:i.push)(C,_.state,_)},[e,i,f,l,t])}function VA(){let{matches:t}=de.useContext(Is),e=t[t.length-1];return e?e.params:{}}function Ty(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=de.useContext(uo),{matches:o}=de.useContext(Is),{pathname:l}=sh(),f=JSON.stringify(_y(o,i.v7_relativeSplatPath));return de.useMemo(()=>Ay(t,JSON.parse(f),l,n==="path"),[t,f,l,n])}function UA(t,e){return zA(t,e)}function zA(t,e,n,i){Xl()||$t(!1);let{navigator:o}=de.useContext(uo),{matches:l}=de.useContext(Is),f=l[l.length-1],p=f?f.params:{};f&&f.pathname;let m=f?f.pathnameBase:"/";f&&f.route;let w=sh(),_;if(e){var C;let q=typeof e=="string"?xa(e):e;m==="/"||(C=q.pathname)!=null&&C.startsWith(m)||$t(!1),_=q}else _=w;let R=_.pathname||"/",L=R;if(m!=="/"){let q=m.replace(/^\//,"").split("/");L="/"+R.replace(/^\//,"").split("/").slice(q.length).join("/")}let j=dA(t,{pathname:L}),z=XA(j&&j.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:cs([m,o.encodeLocation?o.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?m:cs([m,o.encodeLocation?o.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),l,n,i);return e&&z?de.createElement(ih.Provider,{value:{location:bl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ji.Pop}},z):z}function jA(){let t=QA(),e=OA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),n?de.createElement("pre",{style:o},n):null,null)}const HA=de.createElement(jA,null);class WA extends de.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?de.createElement(Is.Provider,{value:this.props.routeContext},de.createElement(vy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GA(t){let{routeContext:e,match:n,children:i}=t,o=de.useContext(z1);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),de.createElement(Is.Provider,{value:e},i)}function XA(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,p=(o=n)==null?void 0:o.errors;if(p!=null){let _=f.findIndex(C=>C.route.id&&(p==null?void 0:p[C.route.id])!==void 0);_>=0||$t(!1),f=f.slice(0,Math.min(f.length,_+1))}let m=!1,w=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<f.length;_++){let C=f[_];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(w=_),C.route.id){let{loaderData:R,errors:L}=n,j=C.route.loader&&R[C.route.id]===void 0&&(!L||L[C.route.id]===void 0);if(C.route.lazy||j){m=!0,w>=0?f=f.slice(0,w+1):f=[f[0]];break}}}return f.reduceRight((_,C,R)=>{let L,j=!1,z=null,q=null;n&&(L=p&&C.route.id?p[C.route.id]:void 0,z=C.route.errorElement||HA,m&&(w<0&&R===0?(j=!0,q=null):w===R&&(j=!0,q=C.route.hydrateFallbackElement||null)));let F=e.concat(f.slice(0,R+1)),O=()=>{let M;return L?M=z:j?M=q:C.route.Component?M=de.createElement(C.route.Component,null):C.route.element?M=C.route.element:M=_,de.createElement(GA,{match:C,routeContext:{outlet:_,matches:F,isDataRoute:n!=null},children:M})};return n&&(C.route.ErrorBoundary||C.route.errorElement||R===0)?de.createElement(WA,{location:n.location,revalidation:n.revalidation,component:z,error:L,children:O(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):O()},null)}var Sy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Sy||{}),vc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vc||{});function KA(t){let e=de.useContext(z1);return e||$t(!1),e}function qA(t){let e=de.useContext(kA);return e||$t(!1),e}function YA(t){let e=de.useContext(Is);return e||$t(!1),e}function Ry(t){let e=YA(),n=e.matches[e.matches.length-1];return n.route.id||$t(!1),n.route.id}function QA(){var t;let e=de.useContext(vy),n=qA(vc.UseRouteError),i=Ry(vc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function $A(){let{router:t}=KA(Sy.UseNavigateStable),e=Ry(vc.UseNavigateStable),n=de.useRef(!1);return Iy(()=>{n.current=!0}),de.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,bl({fromRouteId:e},l)))},[t,e])}function To(t){$t(!1)}function ZA(t){let{basename:e="/",children:n=null,location:i,navigationType:o=Ji.Pop,navigator:l,static:f=!1,future:p}=t;Xl()&&$t(!1);let m=e.replace(/^\/*/,"/"),w=de.useMemo(()=>({basename:m,navigator:l,static:f,future:bl({v7_relativeSplatPath:!1},p)}),[m,p,l,f]);typeof i=="string"&&(i=xa(i));let{pathname:_="/",search:C="",hash:R="",state:L=null,key:j="default"}=i,z=de.useMemo(()=>{let q=U1(_,m);return q==null?null:{location:{pathname:q,search:C,hash:R,state:L,key:j},navigationType:o}},[m,_,C,R,L,j,o]);return z==null?null:de.createElement(uo.Provider,{value:w},de.createElement(ih.Provider,{children:n,value:z}))}function JA(t){let{children:e,location:n}=t;return UA(md(e),n)}new Promise(()=>{});function md(t,e){e===void 0&&(e=[]);let n=[];return de.Children.forEach(t,(i,o)=>{if(!de.isValidElement(i))return;let l=[...e,o];if(i.type===de.Fragment){n.push.apply(n,md(i.props.children,l));return}i.type!==To&&$t(!1),!i.props.index||!i.props.children||$t(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=md(i.props.children,l)),n.push(f)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yd.apply(this,arguments)}function eC(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function tC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nC(t,e){return t.button===0&&(!e||e==="_self")&&!tC(t)}const rC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iC="6";try{window.__reactRouterVersion=iC}catch{}const sC="startTransition",jg=Zx[sC];function oC(t){let{basename:e,children:n,future:i,window:o}=t,l=de.useRef();l.current==null&&(l.current=cA({window:o,v5Compat:!0}));let f=l.current,[p,m]=de.useState({action:f.action,location:f.location}),{v7_startTransition:w}=i||{},_=de.useCallback(C=>{w&&jg?jg(()=>m(C)):m(C)},[m,w]);return de.useLayoutEffect(()=>f.listen(_),[f,_]),de.createElement(ZA,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:f,future:i})}const aC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ru=de.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:f,state:p,target:m,to:w,preventScrollReset:_,viewTransition:C}=e,R=eC(e,rC),{basename:L}=de.useContext(uo),j,z=!1;if(typeof w=="string"&&lC.test(w)&&(j=w,aC))try{let M=new URL(window.location.href),K=w.startsWith("//")?new URL(M.protocol+w):new URL(w),re=U1(K.pathname,L);K.origin===M.origin&&re!=null?w=re+K.search+K.hash:z=!0}catch{}let q=LA(w,{relative:o}),F=uC(w,{replace:f,state:p,target:m,preventScrollReset:_,relative:o,viewTransition:C});function O(M){i&&i(M),M.defaultPrevented||F(M)}return de.createElement("a",yd({},R,{href:j||q,onClick:z||l?i:O,ref:n,target:m}))});var Hg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hg||(Hg={}));var Wg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wg||(Wg={}));function uC(t,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:f,viewTransition:p}=e===void 0?{}:e,m=BA(),w=sh(),_=Ty(t,{relative:f});return de.useCallback(C=>{if(nC(C,n)){C.preventDefault();let R=i!==void 0?i:Cc(w)===Cc(_);m(t,{replace:R,state:o,preventScrollReset:l,relative:f,viewTransition:p})}},[w,m,_,i,o,n,t,l,f,p])}const cC="/assets/imagem1-DPpgkpNR.png";function hC(){return me.jsxs("div",{className:"home-container",children:[me.jsx("h1",{className:"controllween-title",children:"ControllWeen"}),me.jsx("div",{className:"floating-images",children:me.jsx("img",{src:cC,alt:"decoration1",className:"float"})})]})}function fC(){return me.jsx("header",{className:"header",children:me.jsx("nav",{children:me.jsxs("ul",{className:"menu",children:[me.jsx("li",{children:me.jsx(Ru,{to:"/",children:"Home"})}),me.jsx("li",{children:me.jsx(Ru,{to:"/cadastrar",children:"Cadastrar"})}),me.jsx("li",{children:me.jsx(Ru,{to:"/consultar",children:"Consultar"})}),me.jsx("li",{children:me.jsx(Ru,{to:"/validar",children:"Validar"})})]})})})}var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},dC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],f=t[n++],p=t[n++],m=((o&7)<<18|(l&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],f=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|f&63)}}return e.join("")},by={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],f=o+1<t.length,p=f?t[o+1]:0,m=o+2<t.length,w=m?t[o+2]:0,_=l>>2,C=(l&3)<<4|p>>4;let R=(p&15)<<2|w>>6,L=w&63;m||(L=64,f||(R=64)),i.push(n[_],n[C],n[R],n[L])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ny(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const w=o<t.length?n[t.charAt(o)]:64;++o;const C=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||p==null||w==null||C==null)throw new gC;const R=l<<2|p>>4;if(i.push(R),w!==64){const L=p<<4&240|w>>2;if(i.push(L),C!==64){const j=w<<6&192|C;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pC=function(t){const e=Ny(t);return by.encodeByteArray(e,!0)},Ic=function(t){return pC(t).replace(/\./g,"")},mC=function(t){try{return by.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=()=>yC().__FIREBASE_DEFAULTS__,xC=()=>{if(typeof process>"u"||typeof Gg>"u")return;const t=Gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mC(t[1]);return e&&JSON.parse(e)},j1=()=>{try{return wC()||xC()||EC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_C=t=>{var e,n;return(n=(e=j1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Dy=t=>{const e=_C(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Py=()=>{var t;return(t=j1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ic(JSON.stringify(n)),Ic(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IC(){var t;const e=(t=j1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TC(){return!IC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SC(){try{return typeof indexedDB=="object"}catch{return!1}}function RC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="FirebaseError";class Ea extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=NC,Object.setPrototypeOf(this,Ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oy.prototype.create)}}class Oy{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],f=l?bC(l,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Ea(o,p,i)}}function bC(t,e){return t.replace(DC,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const DC=/\{\$([^}]+)}/g;function wd(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],f=e[o];if(Xg(l)&&Xg(f)){if(!wd(l,f))return!1}else if(l!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Xg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new AC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MC(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&f.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const f=this.instances.get(o);return f&&e(f,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:OC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OC(t){return t===Ks?void 0:t}function MC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const LC={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},BC=Ye.INFO,FC={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},VC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=FC[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=BC,this._logHandler=VC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const UC=(t,e)=>e.some(n=>t instanceof n);let Kg,qg;function zC(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jC(){return qg||(qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ky=new WeakMap,xd=new WeakMap,Ly=new WeakMap,cf=new WeakMap,H1=new WeakMap;function HC(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",f)},l=()=>{n(hs(t.result)),o()},f=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ky.set(n,t)}).catch(()=>{}),H1.set(e,t),e}function WC(t){if(xd.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",f),t.removeEventListener("abort",f)},l=()=>{n(),o()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",f),t.addEventListener("abort",f)});xd.set(t,e)}let Ed={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ly.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GC(t){Ed=t(Ed)}function XC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(hf(this),e,...n);return Ly.set(i,e.sort?e.sort():[e]),hs(i)}:jC().includes(t)?function(...e){return t.apply(hf(this),e),hs(ky.get(this))}:function(...e){return hs(t.apply(hf(this),e))}}function KC(t){return typeof t=="function"?XC(t):(t instanceof IDBTransaction&&WC(t),UC(t,zC())?new Proxy(t,Ed):t)}function hs(t){if(t instanceof IDBRequest)return HC(t);if(cf.has(t))return cf.get(t);const e=KC(t);return e!==t&&(cf.set(t,e),H1.set(e,t)),e}const hf=t=>H1.get(t);function qC(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const f=indexedDB.open(t,e),p=hs(f);return i&&f.addEventListener("upgradeneeded",m=>{i(hs(f.result),m.oldVersion,m.newVersion,hs(f.transaction),m)}),n&&f.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",w=>o(w.oldVersion,w.newVersion,w))}).catch(()=>{}),p}const YC=["get","getKey","getAll","getAllKeys","count"],QC=["put","add","delete","clear"],ff=new Map;function Yg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=QC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||YC.includes(n)))return;const l=async function(f,...p){const m=this.transaction(f,o?"readwrite":"readonly");let w=m.store;return i&&(w=w.index(p.shift())),(await Promise.all([w[n](...p),o&&m.done]))[0]};return ff.set(e,l),l}GC(t=>({...t,get:(e,n,i)=>Yg(e,n)||t.get(e,n,i),has:(e,n)=>!!Yg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ZC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _d="@firebase/app",Qg="0.10.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new My("@firebase/app"),JC="@firebase/app-compat",ev="@firebase/analytics-compat",tv="@firebase/analytics",nv="@firebase/app-check-compat",rv="@firebase/app-check",iv="@firebase/auth",sv="@firebase/auth-compat",ov="@firebase/database",av="@firebase/data-connect",lv="@firebase/database-compat",uv="@firebase/functions",cv="@firebase/functions-compat",hv="@firebase/installations",fv="@firebase/installations-compat",dv="@firebase/messaging",gv="@firebase/messaging-compat",pv="@firebase/performance",mv="@firebase/performance-compat",yv="@firebase/remote-config",wv="@firebase/remote-config-compat",xv="@firebase/storage",Ev="@firebase/storage-compat",_v="@firebase/firestore",Av="@firebase/vertexai",Cv="@firebase/firestore-compat",vv="firebase",Iv="11.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",Tv={[_d]:"fire-core",[JC]:"fire-core-compat",[tv]:"fire-analytics",[ev]:"fire-analytics-compat",[rv]:"fire-app-check",[nv]:"fire-app-check-compat",[iv]:"fire-auth",[sv]:"fire-auth-compat",[ov]:"fire-rtdb",[av]:"fire-data-connect",[lv]:"fire-rtdb-compat",[uv]:"fire-fn",[cv]:"fire-fn-compat",[hv]:"fire-iid",[fv]:"fire-iid-compat",[dv]:"fire-fcm",[gv]:"fire-fcm-compat",[pv]:"fire-perf",[mv]:"fire-perf-compat",[yv]:"fire-rc",[wv]:"fire-rc-compat",[xv]:"fire-gcs",[Ev]:"fire-gcs-compat",[_v]:"fire-fst",[Cv]:"fire-fst-compat",[Av]:"fire-vertex","fire-js":"fire-js",[vv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,Sv=new Map,Cd=new Map;function $g(t,e){try{t.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dl(t){const e=t.name;if(Cd.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Cd.set(e,t);for(const n of Tc.values())$g(n,t);for(const n of Sv.values())$g(n,t);return!0}function By(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Oy("app","Firebase",Rv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=Iv;function Fy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ad,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(n||(n=Py()),!n)throw fs.create("no-options");const l=Tc.get(o);if(l){if(wd(n,l.options)&&wd(i,l.config))return l;throw fs.create("duplicate-app",{appName:o})}const f=new kC(o);for(const m of Cd.values())f.addComponent(m);const p=new Nv(n,i,f);return Tc.set(o,p),p}function Vy(t=Ad){const e=Tc.get(t);if(!e&&t===Ad&&Py())return Fy();if(!e)throw fs.create("no-app",{appName:t});return e}function ds(t,e,n){var i;let o=(i=Tv[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),f=e.match(/\s|\//);if(l||f){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(p.join(" "));return}Dl(new ia(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="firebase-heartbeat-database",Pv=1,Pl="firebase-heartbeat-store";let df=null;function Uy(){return df||(df=qC(Dv,Pv,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw fs.create("idb-open",{originalErrorMessage:t.message})})),df}async function Ov(t){try{const n=(await Uy()).transaction(Pl),i=await n.objectStore(Pl).get(zy(t));return await n.done,i}catch(e){if(e instanceof Ea)bi.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(n.message)}}}async function Zg(t,e){try{const i=(await Uy()).transaction(Pl,"readwrite");await i.objectStore(Pl).put(e,zy(t)),await i.done}catch(n){if(n instanceof Ea)bi.warn(n.message);else{const i=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(i.message)}}}function zy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=1024,kv=30*24*60*60*1e3;class Lv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fv(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Jg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(f=>f.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const p=new Date(f.date).valueOf();return Date.now()-p<=kv}),this._storage.overwrite(this._heartbeatsCache))}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jg(),{heartbeatsToSend:i,unsentEntries:o}=Bv(this._heartbeatsCache.heartbeats),l=Ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return bi.warn(n),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function Bv(t,e=Mv){const n=[];let i=t.slice();for(const o of t){const l=n.find(f=>f.agent===o.agent);if(l){if(l.dates.push(o.date),ep(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ep(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Fv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SC()?RC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ov(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ep(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){Dl(new ia("platform-logger",e=>new $C(e),"PRIVATE")),Dl(new ia("heartbeat",e=>new Lv(e),"PRIVATE")),ds(_d,Qg,t),ds(_d,Qg,"esm2017"),ds("fire-js","")}Vv("");var Uv="firebase",zv="11.0.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(Uv,zv,"app");var tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,jy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,D){function b(){}b.prototype=D.prototype,N.D=D.prototype,N.prototype=new b,N.prototype.constructor=N,N.C=function(U,G,W){for(var V=Array(arguments.length-2),et=2;et<arguments.length;et++)V[et-2]=arguments[et];return D.prototype[G].apply(U,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,D,b){b||(b=0);var U=Array(16);if(typeof D=="string")for(var G=0;16>G;++G)U[G]=D.charCodeAt(b++)|D.charCodeAt(b++)<<8|D.charCodeAt(b++)<<16|D.charCodeAt(b++)<<24;else for(G=0;16>G;++G)U[G]=D[b++]|D[b++]<<8|D[b++]<<16|D[b++]<<24;D=N.g[0],b=N.g[1],G=N.g[2];var W=N.g[3],V=D+(W^b&(G^W))+U[0]+3614090360&4294967295;D=b+(V<<7&4294967295|V>>>25),V=W+(G^D&(b^G))+U[1]+3905402710&4294967295,W=D+(V<<12&4294967295|V>>>20),V=G+(b^W&(D^b))+U[2]+606105819&4294967295,G=W+(V<<17&4294967295|V>>>15),V=b+(D^G&(W^D))+U[3]+3250441966&4294967295,b=G+(V<<22&4294967295|V>>>10),V=D+(W^b&(G^W))+U[4]+4118548399&4294967295,D=b+(V<<7&4294967295|V>>>25),V=W+(G^D&(b^G))+U[5]+1200080426&4294967295,W=D+(V<<12&4294967295|V>>>20),V=G+(b^W&(D^b))+U[6]+2821735955&4294967295,G=W+(V<<17&4294967295|V>>>15),V=b+(D^G&(W^D))+U[7]+4249261313&4294967295,b=G+(V<<22&4294967295|V>>>10),V=D+(W^b&(G^W))+U[8]+1770035416&4294967295,D=b+(V<<7&4294967295|V>>>25),V=W+(G^D&(b^G))+U[9]+2336552879&4294967295,W=D+(V<<12&4294967295|V>>>20),V=G+(b^W&(D^b))+U[10]+4294925233&4294967295,G=W+(V<<17&4294967295|V>>>15),V=b+(D^G&(W^D))+U[11]+2304563134&4294967295,b=G+(V<<22&4294967295|V>>>10),V=D+(W^b&(G^W))+U[12]+1804603682&4294967295,D=b+(V<<7&4294967295|V>>>25),V=W+(G^D&(b^G))+U[13]+4254626195&4294967295,W=D+(V<<12&4294967295|V>>>20),V=G+(b^W&(D^b))+U[14]+2792965006&4294967295,G=W+(V<<17&4294967295|V>>>15),V=b+(D^G&(W^D))+U[15]+1236535329&4294967295,b=G+(V<<22&4294967295|V>>>10),V=D+(G^W&(b^G))+U[1]+4129170786&4294967295,D=b+(V<<5&4294967295|V>>>27),V=W+(b^G&(D^b))+U[6]+3225465664&4294967295,W=D+(V<<9&4294967295|V>>>23),V=G+(D^b&(W^D))+U[11]+643717713&4294967295,G=W+(V<<14&4294967295|V>>>18),V=b+(W^D&(G^W))+U[0]+3921069994&4294967295,b=G+(V<<20&4294967295|V>>>12),V=D+(G^W&(b^G))+U[5]+3593408605&4294967295,D=b+(V<<5&4294967295|V>>>27),V=W+(b^G&(D^b))+U[10]+38016083&4294967295,W=D+(V<<9&4294967295|V>>>23),V=G+(D^b&(W^D))+U[15]+3634488961&4294967295,G=W+(V<<14&4294967295|V>>>18),V=b+(W^D&(G^W))+U[4]+3889429448&4294967295,b=G+(V<<20&4294967295|V>>>12),V=D+(G^W&(b^G))+U[9]+568446438&4294967295,D=b+(V<<5&4294967295|V>>>27),V=W+(b^G&(D^b))+U[14]+3275163606&4294967295,W=D+(V<<9&4294967295|V>>>23),V=G+(D^b&(W^D))+U[3]+4107603335&4294967295,G=W+(V<<14&4294967295|V>>>18),V=b+(W^D&(G^W))+U[8]+1163531501&4294967295,b=G+(V<<20&4294967295|V>>>12),V=D+(G^W&(b^G))+U[13]+2850285829&4294967295,D=b+(V<<5&4294967295|V>>>27),V=W+(b^G&(D^b))+U[2]+4243563512&4294967295,W=D+(V<<9&4294967295|V>>>23),V=G+(D^b&(W^D))+U[7]+1735328473&4294967295,G=W+(V<<14&4294967295|V>>>18),V=b+(W^D&(G^W))+U[12]+2368359562&4294967295,b=G+(V<<20&4294967295|V>>>12),V=D+(b^G^W)+U[5]+4294588738&4294967295,D=b+(V<<4&4294967295|V>>>28),V=W+(D^b^G)+U[8]+2272392833&4294967295,W=D+(V<<11&4294967295|V>>>21),V=G+(W^D^b)+U[11]+1839030562&4294967295,G=W+(V<<16&4294967295|V>>>16),V=b+(G^W^D)+U[14]+4259657740&4294967295,b=G+(V<<23&4294967295|V>>>9),V=D+(b^G^W)+U[1]+2763975236&4294967295,D=b+(V<<4&4294967295|V>>>28),V=W+(D^b^G)+U[4]+1272893353&4294967295,W=D+(V<<11&4294967295|V>>>21),V=G+(W^D^b)+U[7]+4139469664&4294967295,G=W+(V<<16&4294967295|V>>>16),V=b+(G^W^D)+U[10]+3200236656&4294967295,b=G+(V<<23&4294967295|V>>>9),V=D+(b^G^W)+U[13]+681279174&4294967295,D=b+(V<<4&4294967295|V>>>28),V=W+(D^b^G)+U[0]+3936430074&4294967295,W=D+(V<<11&4294967295|V>>>21),V=G+(W^D^b)+U[3]+3572445317&4294967295,G=W+(V<<16&4294967295|V>>>16),V=b+(G^W^D)+U[6]+76029189&4294967295,b=G+(V<<23&4294967295|V>>>9),V=D+(b^G^W)+U[9]+3654602809&4294967295,D=b+(V<<4&4294967295|V>>>28),V=W+(D^b^G)+U[12]+3873151461&4294967295,W=D+(V<<11&4294967295|V>>>21),V=G+(W^D^b)+U[15]+530742520&4294967295,G=W+(V<<16&4294967295|V>>>16),V=b+(G^W^D)+U[2]+3299628645&4294967295,b=G+(V<<23&4294967295|V>>>9),V=D+(G^(b|~W))+U[0]+4096336452&4294967295,D=b+(V<<6&4294967295|V>>>26),V=W+(b^(D|~G))+U[7]+1126891415&4294967295,W=D+(V<<10&4294967295|V>>>22),V=G+(D^(W|~b))+U[14]+2878612391&4294967295,G=W+(V<<15&4294967295|V>>>17),V=b+(W^(G|~D))+U[5]+4237533241&4294967295,b=G+(V<<21&4294967295|V>>>11),V=D+(G^(b|~W))+U[12]+1700485571&4294967295,D=b+(V<<6&4294967295|V>>>26),V=W+(b^(D|~G))+U[3]+2399980690&4294967295,W=D+(V<<10&4294967295|V>>>22),V=G+(D^(W|~b))+U[10]+4293915773&4294967295,G=W+(V<<15&4294967295|V>>>17),V=b+(W^(G|~D))+U[1]+2240044497&4294967295,b=G+(V<<21&4294967295|V>>>11),V=D+(G^(b|~W))+U[8]+1873313359&4294967295,D=b+(V<<6&4294967295|V>>>26),V=W+(b^(D|~G))+U[15]+4264355552&4294967295,W=D+(V<<10&4294967295|V>>>22),V=G+(D^(W|~b))+U[6]+2734768916&4294967295,G=W+(V<<15&4294967295|V>>>17),V=b+(W^(G|~D))+U[13]+1309151649&4294967295,b=G+(V<<21&4294967295|V>>>11),V=D+(G^(b|~W))+U[4]+4149444226&4294967295,D=b+(V<<6&4294967295|V>>>26),V=W+(b^(D|~G))+U[11]+3174756917&4294967295,W=D+(V<<10&4294967295|V>>>22),V=G+(D^(W|~b))+U[2]+718787259&4294967295,G=W+(V<<15&4294967295|V>>>17),V=b+(W^(G|~D))+U[9]+3951481745&4294967295,N.g[0]=N.g[0]+D&4294967295,N.g[1]=N.g[1]+(G+(V<<21&4294967295|V>>>11))&4294967295,N.g[2]=N.g[2]+G&4294967295,N.g[3]=N.g[3]+W&4294967295}i.prototype.u=function(N,D){D===void 0&&(D=N.length);for(var b=D-this.blockSize,U=this.B,G=this.h,W=0;W<D;){if(G==0)for(;W<=b;)o(this,N,W),W+=this.blockSize;if(typeof N=="string"){for(;W<D;)if(U[G++]=N.charCodeAt(W++),G==this.blockSize){o(this,U),G=0;break}}else for(;W<D;)if(U[G++]=N[W++],G==this.blockSize){o(this,U),G=0;break}}this.h=G,this.o+=D},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var D=1;D<N.length-8;++D)N[D]=0;var b=8*this.o;for(D=N.length-8;D<N.length;++D)N[D]=b&255,b/=256;for(this.u(N),N=Array(16),D=b=0;4>D;++D)for(var U=0;32>U;U+=8)N[b++]=this.g[D]>>>U&255;return N};function l(N,D){var b=p;return Object.prototype.hasOwnProperty.call(b,N)?b[N]:b[N]=D(N)}function f(N,D){this.h=D;for(var b=[],U=!0,G=N.length-1;0<=G;G--){var W=N[G]|0;U&&W==D||(b[G]=W,U=!1)}this.g=b}var p={};function m(N){return-128<=N&&128>N?l(N,function(D){return new f([D|0],0>D?-1:0)}):new f([N|0],0>N?-1:0)}function w(N){if(isNaN(N)||!isFinite(N))return C;if(0>N)return q(w(-N));for(var D=[],b=1,U=0;N>=b;U++)D[U]=N/b|0,b*=4294967296;return new f(D,0)}function _(N,D){if(N.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(N.charAt(0)=="-")return q(_(N.substring(1),D));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=w(Math.pow(D,8)),U=C,G=0;G<N.length;G+=8){var W=Math.min(8,N.length-G),V=parseInt(N.substring(G,G+W),D);8>W?(W=w(Math.pow(D,W)),U=U.j(W).add(w(V))):(U=U.j(b),U=U.add(w(V)))}return U}var C=m(0),R=m(1),L=m(16777216);t=f.prototype,t.m=function(){if(z(this))return-q(this).m();for(var N=0,D=1,b=0;b<this.g.length;b++){var U=this.i(b);N+=(0<=U?U:4294967296+U)*D,D*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j(this))return"0";if(z(this))return"-"+q(this).toString(N);for(var D=w(Math.pow(N,6)),b=this,U="";;){var G=K(b,D).g;b=F(b,G.j(D));var W=((0<b.g.length?b.g[0]:b.h)>>>0).toString(N);if(b=G,j(b))return W+U;for(;6>W.length;)W="0"+W;U=W+U}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function j(N){if(N.h!=0)return!1;for(var D=0;D<N.g.length;D++)if(N.g[D]!=0)return!1;return!0}function z(N){return N.h==-1}t.l=function(N){return N=F(this,N),z(N)?-1:j(N)?0:1};function q(N){for(var D=N.g.length,b=[],U=0;U<D;U++)b[U]=~N.g[U];return new f(b,~N.h).add(R)}t.abs=function(){return z(this)?q(this):this},t.add=function(N){for(var D=Math.max(this.g.length,N.g.length),b=[],U=0,G=0;G<=D;G++){var W=U+(this.i(G)&65535)+(N.i(G)&65535),V=(W>>>16)+(this.i(G)>>>16)+(N.i(G)>>>16);U=V>>>16,W&=65535,V&=65535,b[G]=V<<16|W}return new f(b,b[b.length-1]&-2147483648?-1:0)};function F(N,D){return N.add(q(D))}t.j=function(N){if(j(this)||j(N))return C;if(z(this))return z(N)?q(this).j(q(N)):q(q(this).j(N));if(z(N))return q(this.j(q(N)));if(0>this.l(L)&&0>N.l(L))return w(this.m()*N.m());for(var D=this.g.length+N.g.length,b=[],U=0;U<2*D;U++)b[U]=0;for(U=0;U<this.g.length;U++)for(var G=0;G<N.g.length;G++){var W=this.i(U)>>>16,V=this.i(U)&65535,et=N.i(G)>>>16,te=N.i(G)&65535;b[2*U+2*G]+=V*te,O(b,2*U+2*G),b[2*U+2*G+1]+=W*te,O(b,2*U+2*G+1),b[2*U+2*G+1]+=V*et,O(b,2*U+2*G+1),b[2*U+2*G+2]+=W*et,O(b,2*U+2*G+2)}for(U=0;U<D;U++)b[U]=b[2*U+1]<<16|b[2*U];for(U=D;U<2*D;U++)b[U]=0;return new f(b,0)};function O(N,D){for(;(N[D]&65535)!=N[D];)N[D+1]+=N[D]>>>16,N[D]&=65535,D++}function M(N,D){this.g=N,this.h=D}function K(N,D){if(j(D))throw Error("division by zero");if(j(N))return new M(C,C);if(z(N))return D=K(q(N),D),new M(q(D.g),q(D.h));if(z(D))return D=K(N,q(D)),new M(q(D.g),D.h);if(30<N.g.length){if(z(N)||z(D))throw Error("slowDivide_ only works with positive integers.");for(var b=R,U=D;0>=U.l(N);)b=re(b),U=re(U);var G=ne(b,1),W=ne(U,1);for(U=ne(U,2),b=ne(b,2);!j(U);){var V=W.add(U);0>=V.l(N)&&(G=G.add(b),W=V),U=ne(U,1),b=ne(b,1)}return D=F(N,G.j(D)),new M(G,D)}for(G=C;0<=N.l(D);){for(b=Math.max(1,Math.floor(N.m()/D.m())),U=Math.ceil(Math.log(b)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),W=w(b),V=W.j(D);z(V)||0<V.l(N);)b-=U,W=w(b),V=W.j(D);j(W)&&(W=R),G=G.add(W),N=F(N,V)}return new M(G,N)}t.A=function(N){return K(this,N).h},t.and=function(N){for(var D=Math.max(this.g.length,N.g.length),b=[],U=0;U<D;U++)b[U]=this.i(U)&N.i(U);return new f(b,this.h&N.h)},t.or=function(N){for(var D=Math.max(this.g.length,N.g.length),b=[],U=0;U<D;U++)b[U]=this.i(U)|N.i(U);return new f(b,this.h|N.h)},t.xor=function(N){for(var D=Math.max(this.g.length,N.g.length),b=[],U=0;U<D;U++)b[U]=this.i(U)^N.i(U);return new f(b,this.h^N.h)};function re(N){for(var D=N.g.length+1,b=[],U=0;U<D;U++)b[U]=N.i(U)<<1|N.i(U-1)>>>31;return new f(b,N.h)}function ne(N,D){var b=D>>5;D%=32;for(var U=N.g.length-b,G=[],W=0;W<U;W++)G[W]=0<D?N.i(W+b)>>>D|N.i(W+b+1)<<32-D:N.i(W+b);return new f(G,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,jy=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=w,f.fromString=_,eo=f}).apply(typeof tp<"u"?tp:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hy,qa,Wy,Ku,vd,Gy,Xy,Ky;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,E,v){return g==Array.prototype||g==Object.prototype||(g[E]=v.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var E=0;E<g.length;++E){var v=g[E];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function o(g,E){if(E)e:{var v=i;g=g.split(".");for(var P=0;P<g.length-1;P++){var Y=g[P];if(!(Y in v))break e;v=v[Y]}g=g[g.length-1],P=v[g],E=E(P),E!=P&&E!=null&&e(v,g,{configurable:!0,writable:!0,value:E})}}function l(g,E){g instanceof String&&(g+="");var v=0,P=!1,Y={next:function(){if(!P&&v<g.length){var J=v++;return{value:E(J,g[J]),done:!1}}return P=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}o("Array.prototype.values",function(g){return g||function(){return l(this,function(E,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function m(g){var E=typeof g;return E=E!="object"?E:g?Array.isArray(g)?"array":E:"null",E=="array"||E=="object"&&typeof g.length=="number"}function w(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function _(g,E,v){return g.call.apply(g.bind,arguments)}function C(g,E,v){if(!g)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,P),g.apply(E,Y)}}return function(){return g.apply(E,arguments)}}function R(g,E,v){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:C,R.apply(null,arguments)}function L(g,E){var v=Array.prototype.slice.call(arguments,1);return function(){var P=v.slice();return P.push.apply(P,arguments),g.apply(this,P)}}function j(g,E){function v(){}v.prototype=E.prototype,g.aa=E.prototype,g.prototype=new v,g.prototype.constructor=g,g.Qb=function(P,Y,J){for(var he=Array(arguments.length-2),at=2;at<arguments.length;at++)he[at-2]=arguments[at];return E.prototype[Y].apply(P,he)}}function z(g){const E=g.length;if(0<E){const v=Array(E);for(let P=0;P<E;P++)v[P]=g[P];return v}return[]}function q(g,E){for(let v=1;v<arguments.length;v++){const P=arguments[v];if(m(P)){const Y=g.length||0,J=P.length||0;g.length=Y+J;for(let he=0;he<J;he++)g[Y+he]=P[he]}else g.push(P)}}class F{constructor(E,v){this.i=E,this.j=v,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(g){return/^[\s\xa0]*$/.test(g)}function M(){var g=p.navigator;return g&&(g=g.userAgent)?g:""}function K(g){return K[" "](g),g}K[" "]=function(){};var re=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function ne(g,E,v){for(const P in g)E.call(v,g[P],P,g)}function N(g,E){for(const v in g)E.call(void 0,g[v],v,g)}function D(g){const E={};for(const v in g)E[v]=g[v];return E}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(g,E){let v,P;for(let Y=1;Y<arguments.length;Y++){P=arguments[Y];for(v in P)g[v]=P[v];for(let J=0;J<b.length;J++)v=b[J],Object.prototype.hasOwnProperty.call(P,v)&&(g[v]=P[v])}}function G(g){var E=1;g=g.split(":");const v=[];for(;0<E&&g.length;)v.push(g.shift()),E--;return g.length&&v.push(g.join(":")),v}function W(g){p.setTimeout(()=>{throw g},0)}function V(){var g=Ie;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class et{constructor(){this.h=this.g=null}add(E,v){const P=te.get();P.set(E,v),this.h?this.h.next=P:this.g=P,this.h=P}}var te=new F(()=>new It,g=>g.reset());class It{constructor(){this.next=this.g=this.h=null}set(E,v){this.h=E,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,pe=!1,Ie=new et,be=()=>{const g=p.Promise.resolve(void 0);Ne=()=>{g.then(gt)}};var gt=()=>{for(var g;g=V();){try{g.h.call(g.g)}catch(v){W(v)}var E=te;E.j(g),100>E.h&&(E.h++,g.next=E.g,E.g=g)}pe=!1};function Le(){this.s=this.s,this.C=this.C}Le.prototype.s=!1,Le.prototype.ma=function(){this.s||(this.s=!0,this.N())},Le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const v=()=>{};p.addEventListener("test",v,E),p.removeEventListener("test",v,E)}catch{}return g}();function nr(g,E){if(st.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var v=this.type=g.type,P=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget){if(re){e:{try{K(E.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(E=null)}}else v=="mouseover"?E=g.fromElement:v=="mouseout"&&(E=g.toElement);this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ae[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&nr.aa.h.call(this)}}j(nr,st);var Ae={2:"touch",3:"pen",4:"mouse"};nr.prototype.h=function(){nr.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var rr="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function Ns(g,E,v,P,Y){this.listener=g,this.proxy=null,this.src=E,this.type=v,this.capture=!!P,this.ha=Y,this.key=++Kt,this.da=this.fa=!1}function Xr(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Zt(g){this.src=g,this.g={},this.h=0}Zt.prototype.add=function(g,E,v,P,Y){var J=g.toString();g=this.g[J],g||(g=this.g[J]=[],this.h++);var he=Ge(g,E,P,Y);return-1<he?(E=g[he],v||(E.fa=!1)):(E=new Ns(E,this.src,J,!!P,Y),E.fa=v,g.push(E)),E};function ki(g,E){var v=E.type;if(v in g.g){var P=g.g[v],Y=Array.prototype.indexOf.call(P,E,void 0),J;(J=0<=Y)&&Array.prototype.splice.call(P,Y,1),J&&(Xr(E),g.g[v].length==0&&(delete g.g[v],g.h--))}}function Ge(g,E,v,P){for(var Y=0;Y<g.length;++Y){var J=g[Y];if(!J.da&&J.listener==E&&J.capture==!!v&&J.ha==P)return Y}return-1}var Kr="closure_lm_"+(1e6*Math.random()|0),jn={};function Li(g,E,v,P,Y){if(Array.isArray(E)){for(var J=0;J<E.length;J++)Li(g,E[J],v,P,Y);return null}return v=po(v),g&&g[rr]?g.K(E,v,w(P)?!!P.capture:!!P,Y):Jt(g,E,v,!1,P,Y)}function Jt(g,E,v,P,Y,J){if(!E)throw Error("Invalid event type");var he=w(Y)?!!Y.capture:!!Y,at=go(g);if(at||(g[Kr]=at=new Zt(g)),v=at.add(E,v,P,he,J),v.proxy)return v;if(P=ut(),v.proxy=P,P.src=g,P.listener=v,g.addEventListener)yt||(Y=he),Y===void 0&&(Y=!1),g.addEventListener(E.toString(),P,Y);else if(g.attachEvent)g.attachEvent(_e(E.toString()),P);else if(g.addListener&&g.removeListener)g.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ut(){function g(v){return E.call(g.src,g.listener,v)}const E=fo;return g}function ze(g,E,v,P,Y){if(Array.isArray(E))for(var J=0;J<E.length;J++)ze(g,E[J],v,P,Y);else P=w(P)?!!P.capture:!!P,v=po(v),g&&g[rr]?(g=g.i,E=String(E).toString(),E in g.g&&(J=g.g[E],v=Ge(J,v,P,Y),-1<v&&(Xr(J[v]),Array.prototype.splice.call(J,v,1),J.length==0&&(delete g.g[E],g.h--)))):g&&(g=go(g))&&(E=g.g[E.toString()],g=-1,E&&(g=Ge(E,v,P,Y)),(v=-1<g?E[g]:null)&&Bi(v))}function Bi(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[rr])ki(E.i,g);else{var v=g.type,P=g.proxy;E.removeEventListener?E.removeEventListener(v,P,g.capture):E.detachEvent?E.detachEvent(_e(v),P):E.addListener&&E.removeListener&&E.removeListener(P),(v=go(E))?(ki(v,g),v.h==0&&(v.src=null,E[Kr]=null)):Xr(g)}}}function _e(g){return g in jn?jn[g]:jn[g]="on"+g}function fo(g,E){if(g.da)g=!0;else{E=new nr(E,this);var v=g.listener,P=g.ha||g.src;g.fa&&Bi(g),g=v.call(P,E)}return g}function go(g){return g=g[Kr],g instanceof Zt?g:null}var ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function po(g){return typeof g=="function"?g:(g[ir]||(g[ir]=function(E){return g.handleEvent(E)}),g[ir])}function ct(){Le.call(this),this.i=new Zt(this),this.M=this,this.F=null}j(ct,Le),ct.prototype[rr]=!0,ct.prototype.removeEventListener=function(g,E,v,P){ze(this,g,E,v,P)};function cn(g,E){var v,P=g.F;if(P)for(v=[];P;P=P.F)v.push(P);if(g=g.M,P=E.type||E,typeof E=="string")E=new st(E,g);else if(E instanceof st)E.target=E.target||g;else{var Y=E;E=new st(P,g),U(E,Y)}if(Y=!0,v)for(var J=v.length-1;0<=J;J--){var he=E.g=v[J];Y=sr(he,P,!0,E)&&Y}if(he=E.g=g,Y=sr(he,P,!0,E)&&Y,Y=sr(he,P,!1,E)&&Y,v)for(J=0;J<v.length;J++)he=E.g=v[J],Y=sr(he,P,!1,E)&&Y}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var g=this.i,E;for(E in g.g){for(var v=g.g[E],P=0;P<v.length;P++)Xr(v[P]);delete g.g[E],g.h--}}this.F=null},ct.prototype.K=function(g,E,v,P){return this.i.add(String(g),E,!1,v,P)},ct.prototype.L=function(g,E,v,P){return this.i.add(String(g),E,!0,v,P)};function sr(g,E,v,P){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();for(var Y=!0,J=0;J<E.length;++J){var he=E[J];if(he&&!he.da&&he.capture==v){var at=he.listener,Ot=he.ha||he.src;he.fa&&ki(g.i,he),Y=at.call(Ot,P)!==!1&&Y}}return Y&&!P.defaultPrevented}function hn(g,E,v){if(typeof g=="function")v&&(g=R(g,v));else if(g&&typeof g.handleEvent=="function")g=R(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:p.setTimeout(g,E||0)}function Ta(g){g.g=hn(()=>{g.g=null,g.i&&(g.i=!1,Ta(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class mo extends Le{constructor(E,v){super(),this.m=E,this.l=v,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ta(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(g){Le.call(this),this.h=g,this.g={}}j(bs,Le);var bt=[];function fe(g){ne(g.g,function(E,v){this.g.hasOwnProperty(v)&&Bi(E)},g),g.g={}}bs.prototype.N=function(){bs.aa.N.call(this),fe(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dt=p.JSON.stringify,ot=p.JSON.parse,Tt=class{stringify(g){return p.JSON.stringify(g,void 0)}parse(g){return p.JSON.parse(g,void 0)}};function di(){}di.prototype.h=null;function yo(g){return g.h||(g.h=g.i())}function Sa(){}var Ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){st.call(this,"d")}j(Or,st);function wo(){st.call(this,"c")}j(wo,st);var qr={},Hn=null;function Fi(){return Hn=Hn||new ct}qr.La="serverreachability";function en(g){st.call(this,qr.La,g)}j(en,st);function Cr(g){const E=Fi();cn(E,new en(E))}qr.STAT_EVENT="statevent";function Ds(g,E){st.call(this,qr.STAT_EVENT,g),this.stat=E}j(Ds,st);function pt(g){const E=Fi();cn(E,new Ds(E,g))}qr.Ma="timingevent";function Jl(g,E){st.call(this,qr.Ma,g),this.size=E}j(Jl,st);function or(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){g()},E)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function Sn(g,E,v,P,Y,J){g.info(function(){if(g.g)if(J)for(var he="",at=J.split("&"),Ot=0;Ot<at.length;Ot++){var Ke=at[Ot].split("=");if(1<Ke.length){var _t=Ke[0];Ke=Ke[1];var Wt=_t.split("_");he=2<=Wt.length&&Wt[1]=="type"?he+(_t+"="+Ke+"&"):he+(_t+"=redacted&")}}else he=null;else he=J;return"XMLHTTP REQ ("+P+") [attempt "+Y+"]: "+E+`
`+v+`
`+he})}function pi(g,E,v,P,Y,J,he){g.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Y+"]: "+E+`
`+v+`
`+J+" "+he})}function tn(g,E,v,P){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+Vi(g,v)+(P?" "+P:"")})}function ye(g,E){g.info(function(){return"TIMEOUT: "+E})}gi.prototype.info=function(){};function Vi(g,E){if(!g.g)return E;if(!E)return null;try{var v=JSON.parse(E);if(v){for(g=0;g<v.length;g++)if(Array.isArray(v[g])){var P=v[g];if(!(2>P.length)){var Y=P[1];if(Array.isArray(Y)&&!(1>Y.length)){var J=Y[0];if(J!="noop"&&J!="stop"&&J!="close")for(var he=1;he<Y.length;he++)Y[he]=""}}}}return Dt(v)}catch{return E}}var Ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function mi(){}j(mi,di),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Yr=new mi;function ar(g,E,v,P){this.j=g,this.i=E,this.l=v,this.R=P||1,this.U=new bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lr}function lr(){this.i=null,this.g="",this.h=!1}var eu={},Ra={};function Wn(g,E,v){g.L=1,g.v=Pt(je(E)),g.m=v,g.P=!0,fn(g,null)}function fn(g,E){g.F=Date.now(),ur(g),g.A=je(g.v);var v=g.A,P=g.R;Array.isArray(P)||(P=[String(P)]),Ht(v.i,"t",P),g.C=0,v=g.j.J,g.h=new lr,g.g=lu(g.j,v?E:null,!g.m),0<g.O&&(g.M=new mo(R(g.Y,g,g.g),g.O)),E=g.U,v=g.g,P=g.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(bt[0]=Y.toString()),Y=bt);for(var J=0;J<Y.length;J++){var he=Li(v,Y[J],P||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,E)):(g.u="GET",g.g.ea(g.A,g.u,null,E)),Cr(),Sn(g.i,g.u,g.A,g.l,g.R,g.m)}ar.prototype.ca=function(g){g=g.target;const E=this.M;E&&Lr(g)==3?E.j():this.Y(g)},ar.prototype.Y=function(g){try{if(g==this.g)e:{const Wt=Lr(this.g);var E=this.g.Ba();const sn=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||su(this.g)))){this.J||Wt!=4||E==7||(E==8||0>=sn?Cr(3):Cr(2)),se(this);var v=this.g.Z();this.X=v;t:if(ft(this)){var P=su(this.g);g="";var Y=P.length,J=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tt(this),Ps(this);var he="";break t}this.h.i=new p.TextDecoder}for(E=0;E<Y;E++)this.h.h=!0,g+=this.h.i.decode(P[E],{stream:!(J&&E==Y-1)});P.length=0,this.h.g+=g,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,pi(this.i,this.u,this.A,this.l,this.R,Wt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Ot=this.g;if((at=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(at)){var Ke=at;break t}}Ke=null}if(v=Ke)tn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,v);else{this.o=!1,this.s=3,pt(12),tt(this),Ps(this);break e}}if(this.P){v=!0;let Xn;for(;!this.J&&this.C<he.length;)if(Xn=tu(this,he),Xn==Ra){Wt==4&&(this.s=4,pt(14),v=!1),tn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==eu){this.s=4,pt(15),tn(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else tn(this.i,this.l,Xn,null),Qr(this,Xn);if(ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||he.length!=0||this.h.h||(this.s=1,pt(16),v=!1),this.o=this.o&&v,!v)tn(this.i,this.l,he,"[Invalid Chunked Response]"),tt(this),Ps(this);else if(0<he.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Hs(_t),_t.M=!0,pt(11))}}else tn(this.i,this.l,he,null),Qr(this,he);Wt==4&&tt(this),this.o&&!this.J&&(Wt==4?Et(this.j,this):(this.o=!1,ur(this)))}else nt(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),tt(this),Ps(this)}}}catch{}finally{}};function ft(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function tu(g,E){var v=g.C,P=E.indexOf(`
`,v);return P==-1?Ra:(v=Number(E.substring(v,P)),isNaN(v)?eu:(P+=1,P+v>E.length?Ra:(E=E.slice(P,P+v),g.C=P+v,E)))}ar.prototype.cancel=function(){this.J=!0,tt(this)};function ur(g){g.S=Date.now()+g.I,xo(g,g.I)}function xo(g,E){if(g.B!=null)throw Error("WatchDog timer not null");g.B=or(R(g.ba,g),E)}function se(g){g.B&&(p.clearTimeout(g.B),g.B=null)}ar.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ye(this.i,this.A),this.L!=2&&(Cr(),pt(17)),tt(this),this.s=2,Ps(this)):xo(this,this.S-g)};function Ps(g){g.j.G==0||g.J||Et(g.j,g)}function tt(g){se(g);var E=g.M;E&&typeof E.ma=="function"&&E.ma(),g.M=null,fe(g.U),g.g&&(E=g.g,g.g=null,E.abort(),E.ma())}function Qr(g,E){try{var v=g.j;if(v.G!=0&&(v.g==g||Os(v.h,g))){if(!g.K&&Os(v.h,g)&&v.G==3){try{var P=v.Da.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Y=P;if(Y[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<g.F)Gi(v),Ao(v);else break e;Pa(v),pt(18)}}else v.za=Y[1],0<v.za-v.T&&37500>Y[2]&&v.F&&v.v==0&&!v.C&&(v.C=or(R(v.Za,v),6e3));if(1>=Fe(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ln(v,11)}else if((g.K||v.g==g)&&Gi(v),!O(E))for(Y=v.Da.g.parse(E),E=0;E<Y.length;E++){let Ke=Y[E];if(v.T=Ke[0],Ke=Ke[1],v.G==2)if(Ke[0]=="c"){v.K=Ke[1],v.ia=Ke[2];const _t=Ke[3];_t!=null&&(v.la=_t,v.j.info("VER="+v.la));const Wt=Ke[4];Wt!=null&&(v.Aa=Wt,v.j.info("SVER="+v.Aa));const sn=Ke[5];sn!=null&&typeof sn=="number"&&0<sn&&(P=1.5*sn,v.L=P,v.j.info("backChannelRequestTimeoutMs_="+P)),P=v;const Xn=g.g;if(Xn){const Bn=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bn){var J=P.h;J.g||Bn.indexOf("spdy")==-1&&Bn.indexOf("quic")==-1&&Bn.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ms(J,J.h),J.h=null))}if(P.D){const Oa=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(P.ya=Oa,ge(P.I,P.D,Oa))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-g.F,v.j.info("Handshake RTT: "+v.R+"ms")),P=v;var he=g;if(P.qa=Te(P,P.J?P.ia:null,P.W),he.K){Eo(P.h,he);var at=he,Ot=P.L;Ot&&(at.I=Ot),at.B&&(se(at),ur(at)),P.g=he}else au(P);0<v.i.length&&Me(v)}else Ke[0]!="stop"&&Ke[0]!="close"||Ln(v,7);else v.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ln(v,7):Ir(v):Ke[0]!="noop"&&v.l&&v.l.ta(Ke),v.v=0)}}Cr(4)}catch{}}var Rh=class{constructor(g,E){this.g=g,this.map=E}};function $e(g){this.l=g||10,p.PerformanceNavigationTiming?(g=p.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Fe(g){return g.h?1:g.g?g.g.size:0}function Os(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function Ms(g,E){g.g?g.g.add(E):g.h=E}function Eo(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}$e.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ft(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const v of g.g.values())E=E.concat(v.D);return E}return z(g.i)}function $r(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var E=[],v=g.length,P=0;P<v;P++)E.push(g[P]);return E}E=[],v=0;for(P in g)E[v++]=g[P];return E}function Nh(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var E=[];g=g.length;for(var v=0;v<g;v++)E.push(v);return E}E=[],v=0;for(const P in g)E[v++]=P;return E}}}function St(g,E){if(g.forEach&&typeof g.forEach=="function")g.forEach(E,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,E,void 0);else for(var v=Nh(g),P=$r(g),Y=P.length,J=0;J<Y;J++)E.call(void 0,P[J],v&&v[J],g)}var Mr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bh(g,E){if(g){g=g.split("&");for(var v=0;v<g.length;v++){var P=g[v].indexOf("="),Y=null;if(0<=P){var J=g[v].substring(0,P);Y=g[v].substring(P+1)}else J=g[v];E(J,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Gn(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Gn){this.h=g.h,jt(this,g.j),this.o=g.o,this.g=g.g,Q(this,g.s),this.l=g.l;var E=g.i,v=new yi;v.i=E.i,E.g&&(v.g=new Map(E.g),v.h=E.h),k(this,v),this.m=g.m}else g&&(E=String(g).match(Mr))?(this.h=!1,jt(this,E[1]||"",!0),this.o=dn(E[2]||""),this.g=dn(E[3]||"",!0),Q(this,E[4]),this.l=dn(E[5]||"",!0),k(this,E[6]||"",!0),this.m=dn(E[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}Gn.prototype.toString=function(){var g=[],E=this.j;E&&g.push(ks(E,kn,!0),":");var v=this.g;return(v||E=="file")&&(g.push("//"),(E=this.o)&&g.push(ks(E,kn,!0),"@"),g.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&g.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&g.push("/"),g.push(ks(v,v.charAt(0)=="/"?wt:ve,!0))),(v=this.i.toString())&&g.push("?",v),(v=this.m)&&g.push("#",ks(v,Dh)),g.join("")};function je(g){return new Gn(g)}function jt(g,E,v){g.j=v?dn(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function Q(g,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);g.s=E}else g.s=null}function k(g,E,v){E instanceof yi?(g.i=E,Zr(g.i,g.h)):(v||(E=ks(E,nu)),g.i=new yi(E,g.h))}function ge(g,E,v){g.i.set(E,v)}function Pt(g){return ge(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function dn(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ks(g,E,v){return typeof g=="string"?(g=encodeURI(g).replace(E,Na),v&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Na(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var kn=/[#\/\?@]/g,ve=/[#\?:]/g,wt=/[#\?]/g,nu=/[#\?@]/g,Dh=/#/g;function yi(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function cr(g){g.g||(g.g=new Map,g.h=0,g.i&&bh(g.i,function(E,v){g.add(decodeURIComponent(E.replace(/\+/g," ")),v)}))}t=yi.prototype,t.add=function(g,E){cr(this),this.i=null,g=vr(this,g);var v=this.g.get(g);return v||this.g.set(g,v=[]),v.push(E),this.h+=1,this};function _o(g,E){cr(g),E=vr(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function ru(g,E){return cr(g),E=vr(g,E),g.g.has(E)}t.forEach=function(g,E){cr(this),this.g.forEach(function(v,P){v.forEach(function(Y){g.call(E,Y,P,this)},this)},this)},t.na=function(){cr(this);const g=Array.from(this.g.values()),E=Array.from(this.g.keys()),v=[];for(let P=0;P<E.length;P++){const Y=g[P];for(let J=0;J<Y.length;J++)v.push(E[P])}return v},t.V=function(g){cr(this);let E=[];if(typeof g=="string")ru(this,g)&&(E=E.concat(this.g.get(vr(this,g))));else{g=Array.from(this.g.values());for(let v=0;v<g.length;v++)E=E.concat(g[v])}return E},t.set=function(g,E){return cr(this),this.i=null,g=vr(this,g),ru(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},t.get=function(g,E){return g?(g=this.V(g),0<g.length?String(g[0]):E):E};function Ht(g,E,v){_o(g,E),0<v.length&&(g.i=null,g.g.set(vr(g,E),z(v)),g.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(var v=0;v<E.length;v++){var P=E[v];const J=encodeURIComponent(String(P)),he=this.V(P);for(P=0;P<he.length;P++){var Y=J;he[P]!==""&&(Y+="="+encodeURIComponent(String(he[P]))),g.push(Y)}}return this.i=g.join("&")};function vr(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Zr(g,E){E&&!g.j&&(cr(g),g.i=null,g.g.forEach(function(v,P){var Y=P.toLowerCase();P!=Y&&(_o(this,P),Ht(this,Y,v))},g)),g.j=E}function Re(g,E){const v=new gi;if(p.Image){const P=new Image;P.onload=L(De,v,"TestLoadImage: loaded",!0,E,P),P.onerror=L(De,v,"TestLoadImage: error",!1,E,P),P.onabort=L(De,v,"TestLoadImage: abort",!1,E,P),P.ontimeout=L(De,v,"TestLoadImage: timeout",!1,E,P),p.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=g}else E(!1)}function Ph(g,E){const v=new gi,P=new AbortController,Y=setTimeout(()=>{P.abort(),De(v,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:P.signal}).then(J=>{clearTimeout(Y),J.ok?De(v,"TestPingServer: ok",!0,E):De(v,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),De(v,"TestPingServer: error",!1,E)})}function De(g,E,v,P,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),P(v)}catch{}}function nn(){this.g=new Tt}function Oh(g,E,v){const P=v||"";try{St(g,function(Y,J){let he=Y;w(Y)&&(he=Dt(Y)),E.push(P+J+"="+encodeURIComponent(he))})}catch(Y){throw E.push(P+"type="+encodeURIComponent("_badmap")),Y}}function zi(g){this.l=g.Ub||null,this.j=g.eb||!1}j(zi,di),zi.prototype.g=function(){return new Ls(this.l,this.j)},zi.prototype.i=function(g){return function(){return g}}({});function Ls(g,E){ct.call(this),this.D=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Ls,ct),t=Ls.prototype,t.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=E,this.readyState=1,kr(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(E.body=g),(this.D||p).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jr(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jr(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?Bs(this):kr(this),this.readyState==3&&Jr(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Bs(this))},t.Qa=function(g){this.g&&(this.response=g,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(g){g.readyState=4,g.l=null,g.j=null,g.v=null,kr(g)}t.setRequestHeader=function(g,E){this.u.append(g,E)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var v=E.next();!v.done;)v=v.value,g.push(v[0]+": "+v[1]),v=E.next();return g.join(`\r
`)};function kr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ji(g){let E="";return ne(g,function(v,P){E+=P,E+=":",E+=v,E+=`\r
`}),E}function wi(g,E,v){e:{for(P in v){var P=!1;break e}P=!0}P||(v=ji(v),typeof g=="string"?v!=null&&encodeURIComponent(String(v)):ge(g,E,v))}function xt(g){ct.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(xt,ct);var Fs=/^https?$/i,Vs=["POST","PUT"];t=xt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,E,v,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?yo(this.o):yo(Yr),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(J){xn(this,J);return}if(g=v||"",v=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Y in P)v.set(Y,P[Y]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const J of P.keys())v.set(J,P.get(J));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),Y=p.FormData&&g instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Vs,E,void 0))||P||Y||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of v)this.g.setRequestHeader(J,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iu(this),this.u=!0,this.g.send(g),this.u=!1}catch(J){xn(this,J)}};function xn(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.m=5,ba(g),Us(g)}function ba(g){g.A||(g.A=!0,cn(g,"complete"),cn(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,cn(this,"complete"),cn(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},t.bb=function(){Da(this)};function Da(g){if(g.h&&typeof f<"u"&&(!g.v[1]||Lr(g)!=4||g.Z()!=2)){if(g.u&&Lr(g)==4)hn(g.Ea,0,g);else if(cn(g,"readystatechange"),Lr(g)==4){g.h=!1;try{const he=g.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var v;if(!(v=E)){var P;if(P=he===0){var Y=String(g.D).match(Mr)[1]||null;!Y&&p.self&&p.self.location&&(Y=p.self.location.protocol.slice(0,-1)),P=!Fs.test(Y?Y.toLowerCase():"")}v=P}if(v)cn(g,"complete"),cn(g,"success");else{g.m=6;try{var J=2<Lr(g)?g.g.statusText:""}catch{J=""}g.l=J+" ["+g.Z()+"]",ba(g)}}finally{Us(g)}}}}function Us(g,E){if(g.g){iu(g);const v=g.g,P=g.v[0]?()=>{}:null;g.g=null,g.v=null,E||cn(g,"ready");try{v.onreadystatechange=P}catch{}}}function iu(g){g.I&&(p.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Lr(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),ot(E)}};function su(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function nt(g){const E={};g=(g.g&&2<=Lr(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<g.length;P++){if(O(g[P]))continue;var v=G(g[P]);const Y=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=E[Y]||[];E[Y]=J,J.push(v)}N(E,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(g,E,v){return v&&v.internalChannelParams&&v.internalChannelParams[g]||E}function zs(g){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hi("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hi("baseRetryDelayMs",5e3,g),this.cb=Hi("retryDelaySeedMs",1e4,g),this.Wa=Hi("forwardChannelMaxRetries",2,g),this.wa=Hi("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(g&&g.concurrentRequestLimit),this.Da=new nn,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zs.prototype,t.la=8,t.G=1,t.connect=function(g,E,v,P){pt(0),this.W=g,this.H=E||{},v&&P!==void 0&&(this.H.OSID=v,this.H.OAID=P),this.F=this.X,this.I=Te(this,null,this.W),Me(this)};function Ir(g){if(Z(g),g.G==3){var E=g.U++,v=je(g.I);if(ge(v,"SID",g.K),ge(v,"RID",E),ge(v,"TYPE","terminate"),Wi(g,v),E=new ar(g,g.j,E),E.L=2,E.v=Pt(je(v)),v=!1,p.navigator&&p.navigator.sendBeacon)try{v=p.navigator.sendBeacon(E.v.toString(),"")}catch{}!v&&p.Image&&(new Image().src=E.v,v=!0),v||(E.g=lu(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ur(E)}rt(g)}function Ao(g){g.g&&(Hs(g),g.g.cancel(),g.g=null)}function Z(g){Ao(g),g.u&&(p.clearTimeout(g.u),g.u=null),Gi(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&p.clearTimeout(g.s),g.s=null)}function Me(g){if(!Xe(g.h)&&!g.s){g.s=!0;var E=g.Ga;Ne||be(),pe||(Ne(),pe=!0),Ie.add(E,g),g.B=0}}function rn(g,E){return Fe(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=E.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=or(R(g.Ga,g,E),Ws(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Y=new ar(this,this.j,g);let J=this.o;if(this.S&&(J?(J=D(J),U(J,this.S)):J=this.S),this.m!==null||this.O||(Y.H=J,J=null),this.P)e:{for(var E=0,v=0;v<this.i.length;v++){t:{var P=this.i[v];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,4096<E){E=v;break e}if(E===4096||v===this.i.length-1){E=v+1;break e}}E=1e3}else E=1e3;E=ou(this,Y,E),v=je(this.I),ge(v,"RID",g),ge(v,"CVER",22),this.D&&ge(v,"X-HTTP-Session-Id",this.D),Wi(this,v),J&&(this.O?E="headers="+encodeURIComponent(String(ji(J)))+"&"+E:this.m&&wi(v,this.m,J)),Ms(this.h,Y),this.Ua&&ge(v,"TYPE","init"),this.P?(ge(v,"$req",E),ge(v,"SID","null"),Y.T=!0,Wn(Y,v,null)):Wn(Y,v,E),this.G=2}}else this.G==3&&(g?js(this,g):this.i.length==0||Xe(this.h)||js(this))};function js(g,E){var v;E?v=E.l:v=g.U++;const P=je(g.I);ge(P,"SID",g.K),ge(P,"RID",v),ge(P,"AID",g.T),Wi(g,P),g.m&&g.o&&wi(P,g.m,g.o),v=new ar(g,g.j,v,g.B+1),g.m===null&&(v.H=g.o),E&&(g.i=E.D.concat(g.i)),E=ou(g,v,1e3),v.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ms(g.h,v),Wn(v,P,E)}function Wi(g,E){g.H&&ne(g.H,function(v,P){ge(E,P,v)}),g.l&&St({},function(v,P){ge(E,P,v)})}function ou(g,E,v){v=Math.min(g.i.length,v);var P=g.l?R(g.l.Na,g.l,g):null;e:{var Y=g.i;let J=-1;for(;;){const he=["count="+v];J==-1?0<v?(J=Y[0].g,he.push("ofs="+J)):J=0:he.push("ofs="+J);let at=!0;for(let Ot=0;Ot<v;Ot++){let Ke=Y[Ot].g;const _t=Y[Ot].map;if(Ke-=J,0>Ke)J=Math.max(0,Y[Ot].g-100),at=!1;else try{Oh(_t,he,"req"+Ke+"_")}catch{P&&P(_t)}}if(at){P=he.join("&");break e}}}return g=g.i.splice(0,v),E.D=g,P}function au(g){if(!g.g&&!g.u){g.Y=1;var E=g.Fa;Ne||be(),pe||(Ne(),pe=!0),Ie.add(E,g),g.v=0}}function Pa(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=or(R(g.Fa,g),Ws(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Vt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=or(R(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ao(this),Vt(this))};function Hs(g){g.A!=null&&(p.clearTimeout(g.A),g.A=null)}function Vt(g){g.g=new ar(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var E=je(g.qa);ge(E,"RID","rpc"),ge(E,"SID",g.K),ge(E,"AID",g.T),ge(E,"CI",g.F?"0":"1"),!g.F&&g.ja&&ge(E,"TO",g.ja),ge(E,"TYPE","xmlhttp"),Wi(g,E),g.m&&g.o&&wi(E,g.m,g.o),g.L&&(g.g.I=g.L);var v=g.g;g=g.ia,v.L=1,v.v=Pt(je(E)),v.m=null,v.P=!0,fn(v,g)}t.Za=function(){this.C!=null&&(this.C=null,Ao(this),Pa(this),pt(19))};function Gi(g){g.C!=null&&(p.clearTimeout(g.C),g.C=null)}function Et(g,E){var v=null;if(g.g==E){Gi(g),Hs(g),g.g=null;var P=2}else if(Os(g.h,E))v=E.D,Eo(g.h,E),P=1;else return;if(g.G!=0){if(E.o)if(P==1){v=E.m?E.m.length:0,E=Date.now()-E.F;var Y=g.B;P=Fi(),cn(P,new Jl(P,v)),Me(g)}else au(g);else if(Y=E.s,Y==3||Y==0&&0<E.X||!(P==1&&rn(g,E)||P==2&&Pa(g)))switch(v&&0<v.length&&(E=g.h,E.i=E.i.concat(v)),Y){case 1:Ln(g,5);break;case 4:Ln(g,10);break;case 3:Ln(g,6);break;default:Ln(g,2)}}}function Ws(g,E){let v=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(v*=2),v*E}function Ln(g,E){if(g.j.info("Error code "+E),E==2){var v=R(g.fb,g),P=g.Xa;const Y=!P;P=new Gn(P||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||jt(P,"https"),Pt(P),Y?Re(P.toString(),v):Ph(P.toString(),v)}else pt(2);g.G=0,g.l&&g.l.sa(E),rt(g),Z(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function rt(g){if(g.G=0,g.ka=[],g.l){const E=Ft(g.h);(E.length!=0||g.i.length!=0)&&(q(g.ka,E),q(g.ka,g.i),g.h.i.length=0,z(g.i),g.i.length=0),g.l.ra()}}function Te(g,E,v){var P=v instanceof Gn?je(v):new Gn(v);if(P.g!="")E&&(P.g=E+"."+P.g),Q(P,P.s);else{var Y=p.location;P=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;var J=new Gn(null);P&&jt(J,P),E&&(J.g=E),Y&&Q(J,Y),v&&(J.l=v),P=J}return v=g.D,E=g.ya,v&&E&&ge(P,v,E),ge(P,"VER",g.la),Wi(g,P),P}function lu(g,E,v){if(E&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Ca&&!g.pa?new xt(new zi({eb:v})):new xt(g.pa),E.Ha(g.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ht(){}t=ht.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tr(){}Tr.prototype.g=function(g,E){return new qt(g,E)};function qt(g,E){ct.call(this),this.g=new zs(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(g?g["X-WebChannel-Client-Profile"]=E.va:g={"X-WebChannel-Client-Profile":E.va}),this.g.S=g,(g=E&&E.Sb)&&!O(g)&&(this.g.m=g),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!O(E)&&(this.g.D=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new ei(this)}j(qt,ct),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Ir(this.g)},qt.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var v={};v.__data__=g,g=v}else this.u&&(v={},v.__data__=Dt(g),g=v);E.i.push(new Rh(E.Ya++,g)),E.G==3&&Me(E)},qt.prototype.N=function(){this.g.l=null,delete this.j,Ir(this.g),delete this.g,qt.aa.N.call(this)};function uu(g){Or.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const v in E){g=v;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}j(uu,Or);function hr(){wo.call(this),this.status=1}j(hr,wo);function ei(g){this.g=g}j(ei,ht),ei.prototype.ua=function(){cn(this.g,"a")},ei.prototype.ta=function(g){cn(this.g,new uu(g))},ei.prototype.sa=function(g){cn(this.g,new hr)},ei.prototype.ra=function(){cn(this.g,"b")},Tr.prototype.createWebChannel=Tr.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Ky=function(){return new Tr},Xy=function(){return Fi()},Gy=qr,vd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,Ku=Ui,wn.COMPLETE="complete",Wy=wn,Sa.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",ct.prototype.listen=ct.prototype.K,qa=Sa,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,Hy=xt}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const np="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="11.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new My("@firebase/firestore");function So(){return oo.logLevel}function we(t,...e){if(oo.logLevel<=Ye.DEBUG){const n=e.map(W1);oo.debug(`Firestore (${_a}): ${t}`,...n)}}function Di(t,...e){if(oo.logLevel<=Ye.ERROR){const n=e.map(W1);oo.error(`Firestore (${_a}): ${t}`,...n)}}function sa(t,...e){if(oo.logLevel<=Ye.WARN){const n=e.map(W1);oo.warn(`Firestore (${_a}): ${t}`,...n)}}function W1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: `+t;throw Di(e),new Error(e)}function it(t,e){t||Pe()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Ea{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dn.UNAUTHENTICATED))}shutdown(){}}class Hv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Wv{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0);let i=this.i;const o=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},p=m=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(m=>p(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string"),new qy(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new Dn(e)}}class Gv{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xv{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Gv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){it(this.o===void 0);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.R;return this.R=l.token,we("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string"),this.R=n.token,new Kv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=Yv(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<n&&(i+=e.charAt(o[l]%e.length))}return i}}function Qe(t,e){return t<e?-1:t>e?1:0}function oa(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new un(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new un(0,0))}static max(){return new Oe(new un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,i){n===void 0?n=0:n>e.length&&Pe(),i===void 0?i=e.length-n:i>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ol.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ol?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const l=e.get(o),f=n.get(o);if(l<f)return-1;if(l>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends Ol{construct(e,n,i){return new Nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const Qv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends Ol{construct(e,n,i){return new Cn(e,n,i)}static isValidIdentifier(e){return Qv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Cn(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ce(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ce(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(i+=p,o++):(l(),o++)}if(l(),f)throw new Ce(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Nt.fromString(e))}static fromName(e){return new Se(Nt.fromString(e).popFirst(5))}static empty(){return new Se(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Nt(e.slice()))}}function $v(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new un(n+1,0):new un(n,i));return new ys(o,Se.empty(),e)}function Zv(t){return new ys(t.readTime,t.key,-1)}class ys{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ys(Oe.min(),Se.empty(),-1)}static max(){return new ys(Oe.max(),Se.empty(),-1)}}function Jv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==e3)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.reject(n)}static resolve(e){return new ie((n,i)=>{n(e)})}static reject(e){return new ie((n,i)=>{i(e)})}static waitFor(e){return new ie((n,i)=>{let o=0,l=0,f=!1;e.forEach(p=>{++o,p.next(()=>{++l,f&&l===o&&n()},m=>i(m))}),f=!0,l===o&&n()})}static or(e){let n=ie.resolve(!1);for(const i of e)n=n.next(o=>o?ie.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,l)=>{i.push(n.call(this,o,l))}),this.waitFor(i)}static mapArray(e,n){return new ie((i,o)=>{const l=e.length,f=new Array(l);let p=0;for(let m=0;m<l;m++){const w=m;n(e[w]).next(_=>{f[w]=_,++p,p===l&&i(f)},_=>o(_))}})}static doWhile(e,n){return new ie((i,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):i()};l()})}}function n3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}oh.oe=-1;function ah(t){return t==null}function Sc(t){return t===0&&1/t==-1/0}function r3(t){return typeof t=="number"&&Number.isInteger(t)&&!Sc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rp(e)),e=s3(t.get(n),e);return rp(e)}function s3(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case"":n+="";break;default:n+=l}}return n}function rp(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bu(this.root,e,this.comparator,!0)}}class bu{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??An.RED,this.left=o??An.EMPTY,this.right=l??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,l){return new An(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return An.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,i,o,l){return this}insert(e,n,i){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sp(this.data.getIterator())}getIteratorFrom(e){return new sp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class sp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new mr([])}unionWith(e){let n=new yn(Cn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $y("Invalid base64 string: "+l):l}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(o){let l="";for(let f=0;f<o.length;++f)l+=String.fromCharCode(o[f]);return l}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const o3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(it(!!t),typeof t=="string"){let e=0;const n=o3.exec(t);if(it(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lh(t){const e=t.mapValue.fields.__previous_value__;return G1(e)?lh(e):e}function Ml(t){const e=ws(t.mapValue.fields.__local_write_time__.timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,i,o,l,f,p,m,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=w}}class kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G1(t)?4:u3(t)?9007199254740991:l3(t)?10:11:Pe()}function ci(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ml(t).isEqual(Ml(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const f=ws(o.timestampValue),p=ws(l.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return xs(o.bytesValue).isEqual(xs(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return Gt(o.geoPointValue.latitude)===Gt(l.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Gt(o.integerValue)===Gt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const f=Gt(o.doubleValue),p=Gt(l.doubleValue);return f===p?Sc(f)===Sc(p):isNaN(f)&&isNaN(p)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(o,l){const f=o.mapValue.fields||{},p=l.mapValue.fields||{};if(ip(f)!==ip(p))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(p[m]===void 0||!ci(f[m],p[m])))return!1;return!0}(t,e);default:return Pe()}}function Ll(t,e){return(t.values||[]).find(n=>ci(n,e))!==void 0}function aa(t,e){if(t===e)return 0;const n=Es(t),i=Es(e);if(n!==i)return Qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(l,f){const p=Gt(l.integerValue||l.doubleValue),m=Gt(f.integerValue||f.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1}(t,e);case 3:return op(t.timestampValue,e.timestampValue);case 4:return op(Ml(t),Ml(e));case 5:return Qe(t.stringValue,e.stringValue);case 6:return function(l,f){const p=xs(l),m=xs(f);return p.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(l,f){const p=l.split("/"),m=f.split("/");for(let w=0;w<p.length&&w<m.length;w++){const _=Qe(p[w],m[w]);if(_!==0)return _}return Qe(p.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,f){const p=Qe(Gt(l.latitude),Gt(f.latitude));return p!==0?p:Qe(Gt(l.longitude),Gt(f.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ap(t.arrayValue,e.arrayValue);case 10:return function(l,f){var p,m,w,_;const C=l.fields||{},R=f.fields||{},L=(p=C.value)===null||p===void 0?void 0:p.arrayValue,j=(m=R.value)===null||m===void 0?void 0:m.arrayValue,z=Qe(((w=L==null?void 0:L.values)===null||w===void 0?void 0:w.length)||0,((_=j==null?void 0:j.values)===null||_===void 0?void 0:_.length)||0);return z!==0?z:ap(L,j)}(t.mapValue,e.mapValue);case 11:return function(l,f){if(l===Du.mapValue&&f===Du.mapValue)return 0;if(l===Du.mapValue)return 1;if(f===Du.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),w=f.fields||{},_=Object.keys(w);m.sort(),_.sort();for(let C=0;C<m.length&&C<_.length;++C){const R=Qe(m[C],_[C]);if(R!==0)return R;const L=aa(p[m[C]],w[_[C]]);if(L!==0)return L}return Qe(m.length,_.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function op(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const n=ws(t),i=ws(e),o=Qe(n.seconds,i.seconds);return o!==0?o:Qe(n.nanos,i.nanos)}function ap(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const l=aa(n[o],i[o]);if(l)return l}return Qe(n.length,i.length)}function la(t){return Id(t)}function Id(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ws(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const l of n.values||[])o?o=!1:i+=",",i+=Id(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const f of i)l?l=!1:o+=",",o+=`${f}:${Id(n.fields[f])}`;return o+"}"}(t.mapValue):Pe()}function qu(t){switch(Es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lh(t);return e?16+qu(e):16;case 5:return 2*t.stringValue.length;case 6:return xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+qu(l),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return Ts(i.fields,(l,f)=>{o+=l.length+qu(f)}),o}(t.mapValue);default:throw Pe()}}function Td(t){return!!t&&"integerValue"in t}function X1(t){return!!t&&"arrayValue"in t}function lp(t){return!!t&&"nullValue"in t}function up(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yu(t){return!!t&&"mapValue"in t}function l3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ts(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=al(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function u3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(n)}setAll(e){let n=Cn.emptyPath(),i={},o=[];e.forEach((f,p)=>{if(!n.isImmediateParentOf(p)){const m=this.getFieldsMap(n);this.applyChanges(m,i,o),i={},o=[],n=p.popLast()}f?i[p.lastSegment()]=al(f):o.push(p.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,o)}delete(e){const n=this.field(e.popLast());Yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Yu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ts(n,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new $n(al(this.value))}}function Zy(t){const e=[];return Ts(t.fields,(n,i)=>{const o=new Cn([n]);if(Yu(i)){const l=Zy(i.mapValue).fields;if(l.length===0)e.push(o);else for(const f of l)e.push(o.child(f))}else e.push(o)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,i,o,l,f,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=l,this.data=f,this.documentState=p}static newInvalidDocument(e){return new On(e,0,Oe.min(),Oe.min(),Oe.min(),$n.empty(),0)}static newFoundDocument(e,n,i,o){return new On(e,1,n,Oe.min(),i,o,0)}static newNoDocument(e,n){return new On(e,2,n,Oe.min(),Oe.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,Oe.min(),Oe.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.position=e,this.inclusive=n}}function cp(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const l=e[o],f=t.position[o];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(f.referenceValue),n.key):i=aa(f,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function hp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function c3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{}class an extends Jy{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new f3(e,n,i):n==="array-contains"?new p3(e,i):n==="in"?new m3(e,i):n==="not-in"?new y3(e,i):n==="array-contains-any"?new w3(e,i):new an(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new d3(e,i):new g3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(aa(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends Jy{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hi(e,n)}matches(e){return ew(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ew(t){return t.op==="and"}function tw(t){return h3(t)&&ew(t)}function h3(t){for(const e of t.filters)if(e instanceof hi)return!1;return!0}function Sd(t){if(t instanceof an)return t.field.canonicalString()+t.op.toString()+la(t.value);if(tw(t))return t.filters.map(e=>Sd(e)).join(",");{const e=t.filters.map(n=>Sd(n)).join(",");return`${t.op}(${e})`}}function nw(t,e){return t instanceof an?function(i,o){return o instanceof an&&i.op===o.op&&i.field.isEqual(o.field)&&ci(i.value,o.value)}(t,e):t instanceof hi?function(i,o){return o instanceof hi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,f,p)=>l&&nw(f,o.filters[p]),!0):!1}(t,e):void Pe()}function rw(t){return t instanceof an?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof hi?function(n){return n.op.toString()+" {"+n.getFilters().map(rw).join(" ,")+"}"}(t):"Filter"}class f3 extends an{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class d3 extends an{constructor(e,n){super(e,"in",n),this.keys=iw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g3 extends an{constructor(e,n){super(e,"not-in",n),this.keys=iw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Se.fromName(i.referenceValue))}class p3 extends an{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return X1(n)&&Ll(n.arrayValue,this.value)}}class m3 extends an{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class y3 extends an{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class w3 extends an{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!X1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ll(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n=null,i=[],o=[],l=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=f,this.endAt=p,this.ue=null}}function fp(t,e=null,n=[],i=[],o=null,l=null,f=null){return new x3(t,e,n,i,o,l,f)}function K1(t){const e=ke(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Sd(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>la(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>la(i)).join(",")),e.ue=n}return e.ue}function q1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hp(t.startAt,e.startAt)&&hp(t.endAt,e.endAt)}function Rd(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n=null,i=[],o=[],l=null,f="F",p=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=f,this.startAt=p,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function E3(t,e,n,i,o,l,f,p){return new uh(t,e,n,i,o,l,f,p)}function Y1(t){return new uh(t)}function dp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _3(t){return t.collectionGroup!==null}function ll(t){const e=ke(t);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new yn(Cn.comparator);return f.filters.forEach(m=>{m.getFlattenedFilters().forEach(w=>{w.isInequality()&&(p=p.add(w.field))})}),p})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Nc(l,i))}),n.has(Cn.keyField().canonicalString())||e.ce.push(new Nc(Cn.keyField(),i))}return e.ce}function ai(t){const e=ke(t);return e.le||(e.le=A3(e,ll(t))),e.le}function A3(t,e){if(t.limitType==="F")return fp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Nc(o.field,l)});const n=t.endAt?new Rc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Rc(t.startAt.position,t.startAt.inclusive):null;return fp(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Nd(t,e,n){return new uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ch(t,e){return q1(ai(t),ai(e))&&t.limitType===e.limitType}function sw(t){return`${K1(ai(t))}|lt:${t.limitType}`}function Ro(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>rw(o)).join(", ")}]`),ah(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>la(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>la(o)).join(",")),`Target(${i})`}(ai(t))}; limitType=${t.limitType})`}function hh(t,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,o){for(const l of ll(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(f,p,m){const w=cp(f,p,m);return f.inclusive?w<=0:w<0}(i.startAt,ll(i),o)||i.endAt&&!function(f,p,m){const w=cp(f,p,m);return f.inclusive?w>=0:w>0}(i.endAt,ll(i),o))}(t,e)}function C3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ow(t){return(e,n)=>{let i=!1;for(const o of ll(t)){const l=v3(o,e,n);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function v3(t,e,n){const i=t.field.isKeyField()?Se.comparator(e.key,n.key):function(l,f,p){const m=f.data.field(l),w=p.data.field(l);return m!==null&&w!==null?aa(m,w):Pe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(n,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return Qy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=new Bt(Se.comparator);function Pi(){return I3}const aw=new Bt(Se.comparator);function Ya(...t){let e=aw;for(const n of t)e=e.insert(n.key,n);return e}function lw(t){let e=aw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function $s(){return ul()}function uw(){return ul()}function ul(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const T3=new Bt(Se.comparator),S3=new yn(Se.comparator);function We(...t){let e=S3;for(const n of t)e=e.add(n);return e}const R3=new yn(Qe);function N3(){return R3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function cw(t){return{integerValue:""+t}}function b3(t,e){return r3(e)?cw(e):Q1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function D3(t,e,n){return t instanceof bc?function(o,l){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&G1(l)&&(l=lh(l)),l&&(f.fields.__previous_value__=l),{mapValue:f}}(n,e):t instanceof Bl?fw(t,e):t instanceof Fl?dw(t,e):function(o,l){const f=hw(o,l),p=gp(f)+gp(o.Pe);return Td(f)&&Td(o.Pe)?cw(p):Q1(o.serializer,p)}(t,e)}function P3(t,e,n){return t instanceof Bl?fw(t,e):t instanceof Fl?dw(t,e):n}function hw(t,e){return t instanceof Dc?function(i){return Td(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class bc extends fh{}class Bl extends fh{constructor(e){super(),this.elements=e}}function fw(t,e){const n=gw(e);for(const i of t.elements)n.some(o=>ci(o,i))||n.push(i);return{arrayValue:{values:n}}}class Fl extends fh{constructor(e){super(),this.elements=e}}function dw(t,e){let n=gw(e);for(const i of t.elements)n=n.filter(o=>!ci(o,i));return{arrayValue:{values:n}}}class Dc extends fh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function gp(t){return Gt(t.integerValue||t.doubleValue)}function gw(t){return X1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function O3(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof Bl&&o instanceof Bl||i instanceof Fl&&o instanceof Fl?oa(i.elements,o.elements,ci):i instanceof Dc&&o instanceof Dc?ci(i.Pe,o.Pe):i instanceof bc&&o instanceof bc}(t.transform,e.transform)}class M3{constructor(e,n){this.version=e,this.transformResults=n}}class Wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dh{}function pw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $1(t.key,Wr.none()):new Kl(t.key,t.data,Wr.none());{const n=t.data,i=$n.empty();let o=new yn(Cn.comparator);for(let l of e.fields)if(!o.has(l)){let f=n.field(l);f===null&&l.length>1&&(l=l.popLast(),f=n.field(l)),f===null?i.delete(l):i.set(l,f),o=o.add(l)}return new Ss(t.key,i,new mr(o.toArray()),Wr.none())}}function k3(t,e,n){t instanceof Kl?function(o,l,f){const p=o.value.clone(),m=mp(o.fieldTransforms,l,f.transformResults);p.setAll(m),l.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(t,e,n):t instanceof Ss?function(o,l,f){if(!Qu(o.precondition,l))return void l.convertToUnknownDocument(f.version);const p=mp(o.fieldTransforms,l,f.transformResults),m=l.data;m.setAll(mw(o)),m.setAll(p),l.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(t,e,n):function(o,l,f){l.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function cl(t,e,n,i){return t instanceof Kl?function(l,f,p,m){if(!Qu(l.precondition,f))return p;const w=l.value.clone(),_=yp(l.fieldTransforms,m,f);return w.setAll(_),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ss?function(l,f,p,m){if(!Qu(l.precondition,f))return p;const w=yp(l.fieldTransforms,m,f),_=f.data;return _.setAll(mw(l)),_.setAll(w),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(C=>C.field))}(t,e,n,i):function(l,f,p){return Qu(l.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p}(t,e,n)}function L3(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),l=hw(i.transform,o||null);l!=null&&(n===null&&(n=$n.empty()),n.set(i.field,l))}return n||null}function pp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&oa(i,o,(l,f)=>O3(l,f))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kl extends dh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ss extends dh{constructor(e,n,i,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function mw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function mp(t,e,n){const i=new Map;it(t.length===n.length);for(let o=0;o<n.length;o++){const l=t[o],f=l.transform,p=e.data.field(l.field);i.set(l.field,P3(f,p,n[o]))}return i}function yp(t,e,n){const i=new Map;for(const o of t){const l=o.transform,f=n.data.field(o.field);i.set(o.field,D3(l,f,e))}return i}class $1 extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B3 extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&k3(l,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=cl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=cl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=uw();return this.mutations.forEach(o=>{const l=e.get(o.key),f=l.overlayedDocument;let p=this.applyToLocalView(f,l.mutatedFields);p=n.has(o.key)?null:p;const m=pw(f,p);m!==null&&i.set(o.key,m),f.isValidDocument()||f.convertToNoDocument(Oe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,i)=>pp(n,i))&&oa(this.baseMutations,e.baseMutations,(n,i)=>pp(n,i))}}class Z1{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){it(e.mutations.length===i.length);let o=function(){return T3}();const l=e.mutations;for(let f=0;f<l.length;f++)o=o.insert(l[f].key,i[f].version);return new Z1(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,qe;function z3(t){switch(t){default:return Pe();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function yw(t){if(t===void 0)return Di("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Yt.OK:return oe.OK;case Yt.CANCELLED:return oe.CANCELLED;case Yt.UNKNOWN:return oe.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return oe.INTERNAL;case Yt.UNAVAILABLE:return oe.UNAVAILABLE;case Yt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Yt.NOT_FOUND:return oe.NOT_FOUND;case Yt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Yt.ABORTED:return oe.ABORTED;case Yt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Yt.DATA_LOSS:return oe.DATA_LOSS;default:return Pe()}}(qe=Yt||(Yt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new eo([4294967295,4294967295],0);function wp(t){const e=j3().encode(t),n=new jy;return n.update(e),new Uint8Array(n.digest())}function xp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new eo([n,i],0),new eo([o,l],0)]}class J1{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=eo.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(eo.fromNumber(i)));return o.compare(H3)===1&&(o=new eo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=wp(e),[i,o]=xp(n);for(let l=0;l<this.hashCount;l++){const f=this.Ee(i,o,l);if(!this.de(f))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new J1(l,o,n);return i.forEach(p=>f.insert(p)),f}insert(e){if(this.Ie===0)return;const n=wp(e),[i,o]=xp(n);for(let l=0;l<this.hashCount;l++){const f=this.Ee(i,o,l);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,i,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new gh(Oe.min(),o,new Bt(Qe),Pi(),We())}}class ql{constructor(e,n,i,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ql(i,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class ww{constructor(e,n){this.targetId=e,this.me=n}}class xw{constructor(e,n,i=Tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class Ep{constructor(){this.fe=0,this.ge=Ap(),this.pe=Tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=We(),n=We(),i=We();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Pe()}}),new ql(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Ap()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class W3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pi(),this.qe=_p(),this.Qe=new Bt(Qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,o)=>{this.ze(o)&&n(o)})}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const l=o.target;if(Rd(l))if(i===0){const f=new Se(l.path);this.Ue(n,f,On.newNoDocument(f,Oe.min()))}else it(i===1);else{const f=this.Ye(n);if(f!==i){const p=this.Ze(e),m=p?this.Xe(p,e,f):1;if(m!==0){this.je(n);const w=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,w)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=n;let f,p;try{f=xs(i).toUint8Array()}catch(m){if(m instanceof $y)return sa("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new J1(f,o,l)}catch(m){return sa(m instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.Ie===0?null:p}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach(l=>{const f=this.Le.tt(),p=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Ue(n,l,null),o++)}),o}rt(e){const n=new Map;this.Be.forEach((l,f)=>{const p=this.Je(f);if(p){if(l.current&&Rd(p.target)){const m=new Se(p.target.path);this.ke.get(m)!==null||this.it(f,m)||this.Ue(f,m,On.newNoDocument(m,e))}l.be&&(n.set(f,l.ve()),l.Ce())}});let i=We();this.qe.forEach((l,f)=>{let p=!0;f.forEachWhile(m=>{const w=this.Je(m);return!w||w.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(i=i.add(l))}),this.ke.forEach((l,f)=>f.setReadTime(e));const o=new gh(e,n,this.Qe,this.ke,i);return this.ke=Pi(),this.qe=_p(),this.Qe=new Bt(Qe),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ep,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new yn(Qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ep),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _p(){return new Bt(Se.comparator)}function Ap(){return new Bt(Se.comparator)}const G3={asc:"ASCENDING",desc:"DESCENDING"},X3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K3={and:"AND",or:"OR"};class q3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bd(t,e){return t.useProto3Json||ah(e)?e:{value:e}}function Pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ew(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y3(t,e){return Pc(t,e.toTimestamp())}function li(t){return it(!!t),Oe.fromTimestamp(function(n){const i=ws(n);return new un(i.seconds,i.nanos)}(t))}function e0(t,e){return Dd(t,e).canonicalString()}function Dd(t,e){const n=function(o){return new Nt(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _w(t){const e=Nt.fromString(t);return it(Tw(e)),e}function Pd(t,e){return e0(t.databaseId,e.path)}function gf(t,e){const n=_w(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(Cw(n))}function Aw(t,e){return e0(t.databaseId,e)}function Q3(t){const e=_w(t);return e.length===4?Nt.emptyPath():Cw(e)}function Od(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cw(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cp(t,e,n){return{name:Pd(t,e),fields:n.value.mapValue.fields}}function $3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(w,_){return w.useProto3Json?(it(_===void 0||typeof _=="string"),Tn.fromBase64String(_||"")):(it(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Tn.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&function(w){const _=w.code===void 0?oe.UNKNOWN:yw(w.code);return new Ce(_,w.message||"")}(f);n=new xw(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gf(t,i.document.name),l=li(i.document.updateTime),f=i.document.createTime?li(i.document.createTime):Oe.min(),p=new $n({mapValue:{fields:i.document.fields}}),m=On.newFoundDocument(o,l,f,p),w=i.targetIds||[],_=i.removedTargetIds||[];n=new $u(w,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gf(t,i.document),l=i.readTime?li(i.readTime):Oe.min(),f=On.newNoDocument(o,l),p=i.removedTargetIds||[];n=new $u([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gf(t,i.document),l=i.removedTargetIds||[];n=new $u([],l,o,null)}else{if(!("filter"in e))return Pe();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,f=new U3(o,l),p=i.targetId;n=new ww(p,f)}}return n}function Z3(t,e){let n;if(e instanceof Kl)n={update:Cp(t,e.key,e.value)};else if(e instanceof $1)n={delete:Pd(t,e.key)};else if(e instanceof Ss)n={update:Cp(t,e.key,e.data),updateMask:aI(e.fieldMask)};else{if(!(e instanceof B3))return Pe();n={verify:Pd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,f){const p=f.transform;if(p instanceof bc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Bl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Fl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Dc)return{fieldPath:f.field.canonicalString(),increment:p.Pe};throw Pe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:Y3(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pe()}(t,e.precondition)),n}function J3(t,e){return t&&t.length>0?(it(e!==void 0),t.map(n=>function(o,l){let f=o.updateTime?li(o.updateTime):li(l);return f.isEqual(Oe.min())&&(f=li(l)),new M3(f,o.transformResults||[])}(n,e))):[]}function eI(t,e){return{documents:[Aw(t,e.path)]}}function tI(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Aw(t,o);const l=function(w){if(w.length!==0)return Iw(hi.create(w,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const f=function(w){if(w.length!==0)return w.map(_=>function(R){return{field:No(R.field),direction:iI(R.dir)}}(_))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=bd(t,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(w){return{before:w.inclusive,values:w.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{_t:n,parent:o}}function nI(t){let e=Q3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){it(i===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=function(C){const R=vw(C);return R instanceof hi&&tw(R)?R.getFilters():[R]}(n.where));let f=[];n.orderBy&&(f=function(C){return C.map(R=>function(j){return new Nc(bo(j.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(R))}(n.orderBy));let p=null;n.limit&&(p=function(C){let R;return R=typeof C=="object"?C.value:C,ah(R)?null:R}(n.limit));let m=null;n.startAt&&(m=function(C){const R=!!C.before,L=C.values||[];return new Rc(L,R)}(n.startAt));let w=null;return n.endAt&&(w=function(C){const R=!C.before,L=C.values||[];return new Rc(L,R)}(n.endAt)),E3(e,o,f,l,p,"F",m,w)}function rI(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=bo(n.unaryFilter.field);return an.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(n.unaryFilter.field);return an.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(n.unaryFilter.field);return an.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=bo(n.unaryFilter.field);return an.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(n){return an.create(bo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hi.create(n.compositeFilter.filters.map(i=>vw(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe()}}(n.compositeFilter.op))}(t):Pe()}function iI(t){return G3[t]}function sI(t){return X3[t]}function oI(t){return K3[t]}function No(t){return{fieldPath:t.canonicalString()}}function bo(t){return Cn.fromServerFormat(t.fieldPath)}function Iw(t){return t instanceof an?function(n){if(n.op==="=="){if(up(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NAN"}};if(lp(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(up(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NAN"}};if(lp(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(n.field),op:sI(n.op),value:n.value}}}(t):t instanceof hi?function(n){const i=n.getFilters().map(o=>Iw(o));return i.length===1?i[0]:{compositeFilter:{op:oI(n.op),filters:i}}}(t):Pe()}function aI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,i,o,l=Oe.min(),f=Oe.min(),p=Tn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.ct=e}}function uI(t){const e=nI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.un=new hI}addToCollectionParentIndex(e,n){return this.un.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(ys.min())}updateCollectionGroup(e,n,i){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class hI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new yn(Nt.comparator),l=!o.has(i);return this.index[n]=o.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new yn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yn{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(41943040,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ua(0)}static kn(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip([t,e],[n,i]){const o=Qe(t,n);return o===0?Qe(e,i):o}class fI{constructor(e){this.Un=e,this.buffer=new yn(Ip),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Ip(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){we("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ca(n)?we("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Aa(n)}await this.Hn(3e5)})}}class gI{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(oh.oe);const i=new fI(n);return this.Jn.forEachTarget(e,o=>i.zn(o.sequenceNumber)).next(()=>this.Jn.Zn(e,o=>i.zn(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(vp)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vp):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,o,l,f,p,m,w;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),o=this.params.maximumSequenceNumbersToCollect):o=C,f=Date.now(),this.nthSequenceNumber(e,o))).next(C=>(i=C,p=Date.now(),this.removeTargets(e,i,n))).next(C=>(l=C,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(C=>(w=Date.now(),So()<=Ye.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${C} documents in `+(w-m)+`ms
Total Duration: ${w-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:C})))}}function pI(t,e){return new gI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ie.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&cl(i.mutation,o,mr.empty(),un.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,We()).next(()=>i))}getLocalViewOfDocuments(e,n,i=We()){const o=$s();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(l=>{let f=Ya();return l.forEach((p,m)=>{f=f.insert(p,m.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const i=$s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,We()))}populateOverlays(e,n,i){const o=[];return i.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((f,p)=>{n.set(f,p)})})}computeViews(e,n,i,o){let l=Pi();const f=ul(),p=function(){return ul()}();return n.forEach((m,w)=>{const _=i.get(w.key);o.has(w.key)&&(_===void 0||_.mutation instanceof Ss)?l=l.insert(w.key,w):_!==void 0?(f.set(w.key,_.mutation.getFieldMask()),cl(_.mutation,w,_.mutation.getFieldMask(),un.now())):f.set(w.key,mr.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((w,_)=>f.set(w,_)),n.forEach((w,_)=>{var C;return p.set(w,new yI(_,(C=f.get(w))!==null&&C!==void 0?C:null))}),p))}recalculateAndSaveOverlays(e,n){const i=ul();let o=new Bt((f,p)=>f-p),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const p of f)p.keys().forEach(m=>{const w=n.get(m);if(w===null)return;let _=i.get(m)||mr.empty();_=p.applyToLocalView(w,_),i.set(m,_);const C=(o.get(p.batchId)||We()).add(m);o=o.insert(p.batchId,C)})}).next(()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),w=m.key,_=m.value,C=uw();_.forEach(R=>{if(!l.has(R)){const L=pw(n.get(R),i.get(R));L!==null&&C.set(R,L),l=l.add(R)}}),f.push(this.documentOverlayCache.saveOverlays(e,w,C))}return ie.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(f){return Se.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(l=>{const f=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-l.size):ie.resolve($s());let p=-1,m=l;return f.next(w=>ie.forEach(w,(_,C)=>(p<C.largestBatchId&&(p=C.largestBatchId),l.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next(R=>{m=m.insert(_,R)}))).next(()=>this.populateOverlays(e,w,l)).next(()=>this.computeViews(e,m,w,We())).next(_=>({batchId:p,changes:lw(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(i=>{let o=Ya();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const l=n.collectionGroup;let f=Ya();return this.indexManager.getCollectionParents(e,l).next(p=>ie.forEach(p,m=>{const w=function(C,R){return new uh(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,w,i,o).next(_=>{_.forEach((C,R)=>{f=f.insert(C,R)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(f=>(l=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,o))).next(f=>{l.forEach((m,w)=>{const _=w.getKey();f.get(_)===null&&(f=f.insert(_,On.newInvalidDocument(_)))});let p=Ya();return f.forEach((m,w)=>{const _=l.get(m);_!==void 0&&cl(_.mutation,w,mr.empty(),un.now()),hh(n,w)&&(p=p.insert(m,w))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ie.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:li(o.createTime)}}(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:uI(o.bundledQuery),readTime:li(o.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.overlays=new Bt(Se.comparator),this.Ir=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$s();return ie.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,l)=>{this.ht(e,n,l)}),ie.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,n,i){const o=$s(),l=n.length+1,f=new Se(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const m=p.getNext().value,w=m.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let l=new Bt((w,_)=>w-_);const f=this.overlays.getIterator();for(;f.hasNext();){const w=f.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>i){let _=l.get(w.largestBatchId);_===null&&(_=$s(),l=l.insert(w.largestBatchId,_)),_.set(w.getKey(),w)}}const p=$s(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,_)=>p.set(w,_)),!(p.size()>=o)););return ie.resolve(p)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new V3(n,i));let l=this.Ir.get(n);l===void 0&&(l=We(),this.Ir.set(n,l)),this.Ir.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){this.Tr=new yn(gn.Er),this.dr=new yn(gn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new gn(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new gn(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Se(new Nt([])),i=new gn(n,e),o=new gn(n,e+1),l=[];return this.dr.forEachInRange([i,o],f=>{this.Vr(f),l.push(f.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Se(new Nt([])),i=new gn(n,e),o=new gn(n,e+1);let l=We();return this.dr.forEachInRange([i,o],f=>{l=l.add(f.key)}),l}containsKey(e){const n=new gn(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class gn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Se.comparator(e.key,n.key)||Qe(e.wr,n.wr)}static Ar(e,n){return Qe(e.wr,n.wr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new yn(gn.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new F3(l,n,i,o);this.mutationQueue.push(f);for(const p of o)this.br=this.br.add(new gn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(f)}lookupMutationBatch(e,n){return ie.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new gn(n,0),o=new gn(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],f=>{const p=this.Dr(f.wr);l.push(p)}),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new yn(Qe);return n.forEach(o=>{const l=new gn(o,0),f=new gn(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,f],p=>{i=i.add(p.wr)})}),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const f=new gn(new Se(l),0);let p=new yn(Qe);return this.br.forEachWhile(m=>{const w=m.key.path;return!!i.isPrefixOf(w)&&(w.length===o&&(p=p.add(m.wr)),!0)},f),ie.resolve(this.Cr(p))}Cr(e){const n=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){it(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(n.mutations,o=>{const l=new gn(o.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new gn(n,0),o=this.br.firstAfterOrEqual(i);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.Mr=e,this.docs=function(){return new Bt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),l=o?o.size:0,f=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ie.resolve(i?i.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let i=Pi();return n.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():On.newInvalidDocument(o))}),ie.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let l=Pi();const f=n.path,p=new Se(f.child("")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:w,value:{document:_}}=m.getNext();if(!f.isPrefixOf(w.path))break;w.path.length>f.length+1||Jv(Zv(_),i)<=0||(o.has(_.key)||hh(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,n,i,o){Pe()}Or(e,n){return ie.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new vI(this)}getSize(e){return ie.resolve(this.size)}}class vI extends mI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),ie.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.persistence=e,this.Nr=new co(n=>K1(n),q1),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new t0,this.targetCount=0,this.kr=ua.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,o)=>n(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ua(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Kn(n),ie.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,i){let o=0;const l=[];return this.Nr.forEach((f,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.Nr.delete(f),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),ie.waitFor(l).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ie.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ie.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(f=>{l.push(o.markPotentiallyOrphaned(e,f))}),ie.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ie.resolve(i)}containsKey(e,n){return ie.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.qr={},this.overlays={},this.Qr=new oh(0),this.Kr=!1,this.Kr=!0,this.$r=new _I,this.referenceDelegate=e(this),this.Ur=new II(this),this.indexManager=new cI,this.remoteDocumentCache=function(o){return new CI(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new lI(n),this.Gr=new xI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new AI(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const o=new TI(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(l=>this.referenceDelegate.jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Hr(e,n){return ie.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class TI extends t3{constructor(e){super(),this.currentSequenceNumber=e}}class n0{constructor(e){this.persistence=e,this.Jr=new t0,this.Yr=null}static Zr(e){return new n0(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,i=>{const o=Se.fromPath(i);return this.ei(e,o).next(l=>{l||n.removeEntry(o,Oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ie.or([()=>ie.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class Oc{constructor(e,n){this.persistence=e,this.ti=new co(i=>i3(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=pI(this,n)}static Zr(e,n){return new Oc(e,n)}zr(){}jr(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}Zn(e,n){return ie.forEach(this.ti,(i,o)=>this.nr(e,i,o).next(l=>l?ie.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Or(e,f=>this.nr(e,f,n).next(p=>{p||(i++,l.removeEntry(f,Oe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.ti.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,i){return this.ti.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),ie.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qu(e.data.value)),n}nr(e,n,i){return ie.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.ti.get(n);return ie.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=We(),o=We();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new r0(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TC()?8:n3(vC())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const l={result:null};return this.Yi(e,n).next(f=>{l.result=f}).next(()=>{if(!l.result)return this.Zi(e,n,o,i).next(f=>{l.result=f})}).next(()=>{if(l.result)return;const f=new SI;return this.Xi(e,n,f).next(p=>{if(l.result=p,this.zi)return this.es(e,n,f,p.size)})}).next(()=>l.result)}es(e,n,i,o){return i.documentReadCount<this.ji?(So()<=Ye.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(So()<=Ye.DEBUG&&we("QueryEngine","Query:",Ro(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(So()<=Ye.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):ie.resolve())}Yi(e,n){if(dp(n))return ie.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Nd(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const f=We(...l);return this.Ji.getDocuments(e,f).next(p=>this.indexManager.getMinOffset(e,i).next(m=>{const w=this.ts(n,p);return this.ns(n,w,f,m.readTime)?this.Yi(e,Nd(n,null,"F")):this.rs(e,w,n,m)}))})))}Zi(e,n,i,o){return dp(n)||o.isEqual(Oe.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next(l=>{const f=this.ts(n,l);return this.ns(n,f,i,o)?ie.resolve(null):(So()<=Ye.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(n)),this.rs(e,f,n,$v(o,-1)).next(p=>p))})}ts(e,n){let i=new yn(ow(e));return n.forEach((o,l)=>{hh(e,l)&&(i=i.add(l))}),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,n,i){return So()<=Ye.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Ro(n)),this.Ji.getDocumentsMatchingQuery(e,n,ys.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(l=>(n.forEach(f=>{l=l.insert(f.key,f)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new Bt(Qe),this._s=new co(l=>K1(l),q1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function bI(t,e,n,i){return new NI(t,e,n,i)}async function Rw(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const f=[],p=[];let m=We();for(const w of o){f.push(w.batchId);for(const _ of w.mutations)m=m.add(_.key)}for(const w of l){p.push(w.batchId);for(const _ of w.mutations)m=m.add(_.key)}return n.localDocuments.getDocuments(i,m).next(w=>({hs:w,removedBatchIds:f,addedBatchIds:p}))})})}function DI(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return function(p,m,w,_){const C=w.batch,R=C.keys();let L=ie.resolve();return R.forEach(j=>{L=L.next(()=>_.getEntry(m,j)).next(z=>{const q=w.docVersions.get(j);it(q!==null),z.version.compareTo(q)<0&&(C.applyToRemoteDocument(z,w),z.isValidDocument()&&(z.setReadTime(w.commitVersion),_.addEntry(z)))})}),L.next(()=>p.mutationQueue.removeMutationBatch(m,C))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let m=We();for(let w=0;w<p.mutationResults.length;++w)p.mutationResults[w].transformResults.length>0&&(m=m.add(p.batch.mutations[w].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function Nw(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function PI(t,e){const n=ke(t),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const p=[];e.targetChanges.forEach((_,C)=>{const R=o.get(C);if(!R)return;p.push(n.Ur.removeMatchingKeys(l,_.removedDocuments,C).next(()=>n.Ur.addMatchingKeys(l,_.addedDocuments,C)));let L=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(C)!==null?L=L.withResumeToken(Tn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):_.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(_.resumeToken,i)),o=o.insert(C,L),function(z,q,F){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(R,L,_)&&p.push(n.Ur.updateTargetData(l,L))});let m=Pi(),w=We();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))}),p.push(OI(l,f,e.documentUpdates).next(_=>{m=_.Ps,w=_.Is})),!i.isEqual(Oe.min())){const _=n.Ur.getLastRemoteSnapshotVersion(l).next(C=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));p.push(_)}return ie.waitFor(p).next(()=>f.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,m,w)).next(()=>m)}).then(l=>(n.os=o,l))}function OI(t,e,n){let i=We(),o=We();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let f=Pi();return n.forEach((p,m)=>{const w=l.get(p);m.isFoundDocument()!==w.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Oe.min())?(e.removeEntry(p,m.readTime),f=f.insert(p,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||m.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(m),f=f.insert(p,m)):we("LocalStore","Ignoring outdated watch update for ",p,". Current version:",w.version," Watch version:",m.version)}),{Ps:f,Is:o}})}function MI(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function kI(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ur.getTargetData(i,e).next(l=>l?(o=l,ie.resolve(o)):n.Ur.allocateTargetId(i).next(f=>(o=new es(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Md(t,e,n){const i=ke(t),o=i.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Ca(f))throw f;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Tp(t,e,n){const i=ke(t);let o=Oe.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",f=>function(m,w,_){const C=ke(m),R=C._s.get(_);return R!==void 0?ie.resolve(C.os.get(R)):C.Ur.getTargetData(w,_)}(i,f,ai(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(f,p.targetId).next(m=>{l=m})}).next(()=>i.ss.getDocumentsMatchingQuery(f,e,n?o:Oe.min(),n?l:We())).next(p=>(LI(i,C3(e),p),{documents:p,Ts:l})))}function LI(t,e,n){let i=t.us.get(e)||Oe.min();n.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.us.set(e,i)}class Sp{constructor(){this.activeTargetIds=N3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BI{constructor(){this.so=new Sp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sp,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu=null;function pf(){return Pu===null?Pu=function(){return 268435456+Math.round(2147483648*Math.random())}():Pu++,"0x"+Pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class zI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(n,i,o,l,f){const p=pf(),m=this.xo(n,i.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${p}:`,m,o);const w={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(w,l,f),this.No(n,m,w,o).then(_=>(we("RestConnection",`Received RPC '${n}' ${p}: `,_),_),_=>{throw sa("RestConnection",`RPC '${n}' ${p} failed with error: `,_,"url: ",m,"request:",o),_})}Lo(n,i,o,l,f,p){return this.Mo(n,i,o,l,f)}Oo(n,i,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_a}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,f)=>n[f]=l),o&&o.headers.forEach((l,f)=>n[f]=l)}xo(n,i){const o=VI[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const l=pf();return new Promise((f,p)=>{const m=new Hy;m.setWithCredentials(!0),m.listenOnce(Wy.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ku.NO_ERROR:const _=m.getResponseJson();we(bn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),f(_);break;case Ku.TIMEOUT:we(bn,`RPC '${e}' ${l} timed out`),p(new Ce(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:const C=m.getStatus();if(we(bn,`RPC '${e}' ${l} failed with status:`,C,"response text:",m.getResponseText()),C>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const j=function(q){const F=q.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(F)>=0?F:oe.UNKNOWN}(L.status);p(new Ce(j,L.message))}else p(new Ce(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ce(oe.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{we(bn,`RPC '${e}' ${l} completed.`)}});const w=JSON.stringify(o);we(bn,`RPC '${e}' ${l} sending request:`,o),m.send(n,"POST",w,i,15)})}Bo(e,n,i){const o=pf(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Ky(),p=Xy(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(m.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const _=l.join("");we(bn,`Creating RPC '${e}' stream ${o}: ${_}`,m);const C=f.createWebChannel(_,m);let R=!1,L=!1;const j=new UI({Io:q=>{L?we(bn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(R||(we(bn,`Opening RPC '${e}' stream ${o} transport.`),C.open(),R=!0),we(bn,`RPC '${e}' stream ${o} sending:`,q),C.send(q))},To:()=>C.close()}),z=(q,F,O)=>{q.listen(F,M=>{try{O(M)}catch(K){setTimeout(()=>{throw K},0)}})};return z(C,qa.EventType.OPEN,()=>{L||(we(bn,`RPC '${e}' stream ${o} transport opened.`),j.yo())}),z(C,qa.EventType.CLOSE,()=>{L||(L=!0,we(bn,`RPC '${e}' stream ${o} transport closed`),j.So())}),z(C,qa.EventType.ERROR,q=>{L||(L=!0,sa(bn,`RPC '${e}' stream ${o} transport errored:`,q),j.So(new Ce(oe.UNAVAILABLE,"The operation could not be completed")))}),z(C,qa.EventType.MESSAGE,q=>{var F;if(!L){const O=q.data[0];it(!!O);const M=O,K=M.error||((F=M[0])===null||F===void 0?void 0:F.error);if(K){we(bn,`RPC '${e}' stream ${o} received error:`,K);const re=K.status;let ne=function(b){const U=Yt[b];if(U!==void 0)return yw(U)}(re),N=K.message;ne===void 0&&(ne=oe.INTERNAL,N="Unknown error status: "+re+" with message "+K.message),L=!0,j.So(new Ce(ne,N)),C.close()}else we(bn,`RPC '${e}' stream ${o} received:`,O),j.bo(O)}}),z(p,Gy.STAT_EVENT,q=>{q.stat===vd.PROXY?we(bn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===vd.NOPROXY&&we(bn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.wo()},0),j}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){return new q3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,i,o,l,f,p,m){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===n&&this.P_(i,o)},i=>{e(()=>{const o=new Ce(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jI extends Dw{constructor(e,n,i,o,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$3(this.serializer,e),i=function(l){if(!("targetChange"in l))return Oe.min();const f=l.targetChange;return f.targetIds&&f.targetIds.length?Oe.min():f.readTime?li(f.readTime):Oe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Od(this.serializer),n.addTarget=function(l,f){let p;const m=f.target;if(p=Rd(m)?{documents:eI(l,m)}:{query:tI(l,m)._t},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=Ew(l,f.resumeToken);const w=bd(l,f.expectedCount);w!==null&&(p.expectedCount=w)}else if(f.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Pc(l,f.snapshotVersion.toTimestamp());const w=bd(l,f.expectedCount);w!==null&&(p.expectedCount=w)}return p}(this.serializer,e);const i=rI(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Od(this.serializer),n.removeTarget=e,this.a_(n)}}class HI extends Dw{constructor(e,n,i,o,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=J3(e.writeResults,e.commitTime),i=li(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Od(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Z3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Mo(e,Dd(n,i),o,l,f)).catch(l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ce(oe.UNKNOWN,l.toString())})}Lo(e,n,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,p])=>this.connection.Lo(e,Dd(n,i),o,f,p,l)).catch(f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ce(oe.UNKNOWN,f.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,i,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(f=>{i.enqueueAndForget(async()=>{ho(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await async function(m){const w=ke(m);w.L_.add(4),await Yl(w),w.q_.set("Unknown"),w.L_.delete(4),await mh(w)}(this))})}),this.q_=new GI(i,o)}}async function mh(t){if(ho(t))for(const e of t.B_)await e(!0)}async function Yl(t){for(const e of t.B_)await e(!1)}function Pw(t,e){const n=ke(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),a0(n)?o0(n):va(n).r_()&&s0(n,e))}function i0(t,e){const n=ke(t),i=va(n);n.N_.delete(e),i.r_()&&Ow(n,e),n.N_.size===0&&(i.r_()?i.o_():ho(n)&&n.q_.set("Unknown"))}function s0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}va(t).A_(e)}function Ow(t,e){t.Q_.xe(e),va(t).R_(e)}function o0(t){t.Q_=new W3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),va(t).start(),t.q_.v_()}function a0(t){return ho(t)&&!va(t).n_()&&t.N_.size>0}function ho(t){return ke(t).L_.size===0}function Mw(t){t.Q_=void 0}async function KI(t){t.q_.set("Online")}async function qI(t){t.N_.forEach((e,n)=>{s0(t,e)})}async function YI(t,e){Mw(t),a0(t)?(t.q_.M_(e),o0(t)):t.q_.set("Unknown")}async function QI(t,e,n){if(t.q_.set("Online"),e instanceof xw&&e.state===2&&e.cause)try{await async function(o,l){const f=l.cause;for(const p of l.targetIds)o.N_.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.N_.delete(p),o.Q_.removeTarget(p))}(t,e)}catch(i){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mc(t,i)}else if(e instanceof $u?t.Q_.Ke(e):e instanceof ww?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Oe.min()))try{const i=await Nw(t.localStore);n.compareTo(i)>=0&&await function(l,f){const p=l.Q_.rt(f);return p.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.N_.get(w);_&&l.N_.set(w,_.withResumeToken(m.resumeToken,f))}}),p.targetMismatches.forEach((m,w)=>{const _=l.N_.get(m);if(!_)return;l.N_.set(m,_.withResumeToken(Tn.EMPTY_BYTE_STRING,_.snapshotVersion)),Ow(l,m);const C=new es(_.target,m,w,_.sequenceNumber);s0(l,C)}),l.remoteSyncer.applyRemoteEvent(p)}(t,n)}catch(i){we("RemoteStore","Failed to raise snapshot:",i),await Mc(t,i)}}async function Mc(t,e,n){if(!Ca(e))throw e;t.L_.add(1),await Yl(t),t.q_.set("Offline"),n||(n=()=>Nw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mh(t)})}function kw(t,e){return e().catch(n=>Mc(t,n,e))}async function yh(t){const e=ke(t),n=_s(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$I(e);)try{const o=await MI(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,ZI(e,o)}catch(o){await Mc(e,o)}Lw(e)&&Bw(e)}function $I(t){return ho(t)&&t.O_.length<10}function ZI(t,e){t.O_.push(e);const n=_s(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Lw(t){return ho(t)&&!_s(t).n_()&&t.O_.length>0}function Bw(t){_s(t).start()}async function JI(t){_s(t).p_()}async function eT(t){const e=_s(t);for(const n of t.O_)e.m_(n.mutations)}async function tT(t,e,n){const i=t.O_.shift(),o=Z1.from(i,e,n);await kw(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await yh(t)}async function nT(t,e){e&&_s(t).V_&&await async function(i,o){if(function(f){return z3(f)&&f!==oe.ABORTED}(o.code)){const l=i.O_.shift();_s(i).s_(),await kw(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await yh(i)}}(t,e),Lw(t)&&Bw(t)}async function Np(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const i=ho(n);n.L_.add(3),await Yl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mh(n)}async function rT(t,e){const n=ke(t);e?(n.L_.delete(2),await mh(n)):e||(n.L_.add(2),await Yl(n),n.q_.set("Unknown"))}function va(t){return t.K_||(t.K_=function(n,i,o){const l=ke(n);return l.w_(),new jI(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Eo:KI.bind(null,t),Ro:qI.bind(null,t),mo:YI.bind(null,t),d_:QI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),a0(t)?o0(t):t.q_.set("Unknown")):(await t.K_.stop(),Mw(t))})),t.K_}function _s(t){return t.U_||(t.U_=function(n,i,o){const l=ke(n);return l.w_(),new HI(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JI.bind(null,t),mo:nT.bind(null,t),f_:eT.bind(null,t),g_:tT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yh(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,i,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,l){const f=Date.now()+i,p=new l0(e,n,f,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u0(t,e){if(Di("AsyncQueue",`${e}: ${t}`),Ca(t))return new Ce(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=Ya(),this.sortedSet=new Bt(this.comparator)}static emptySet(e){return new Qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.W_=new Bt(Se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ca{constructor(e,n,i,o,l,f,p,m,w){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=w}static fromInitialDocuments(e,n,i,o,l){const f=[];return n.forEach(p=>{f.push({type:0,doc:p})}),new ca(e,n,Qo.emptySet(n),f,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sT{constructor(){this.queries=Dp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=ke(n),l=o.queries;o.queries=Dp(),l.forEach((f,p)=>{for(const m of p.j_)m.onError(i)})})(this,new Ce(oe.ABORTED,"Firestore shutting down"))}}function Dp(){return new co(t=>sw(t),ch)}async function Fw(t,e){const n=ke(t);let i=3;const o=e.query;let l=n.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new iT,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await n.onListen(o,!0);break;case 1:l.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=u0(f,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&c0(n)}async function Vw(t,e){const n=ke(t),i=e.query;let o=3;const l=n.queries.get(i);if(l){const f=l.j_.indexOf(e);f>=0&&(l.j_.splice(f,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function oT(t,e){const n=ke(t);let i=!1;for(const o of e){const l=o.query,f=n.queries.get(l);if(f){for(const p of f.j_)p.X_(o)&&(i=!0);f.z_=o}}i&&c0(n)}function aT(t,e,n){const i=ke(t),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(n);i.queries.delete(e)}function c0(t){t.Y_.forEach(e=>{e.next()})}var kd,Pp;(Pp=kd||(kd={})).ea="default",Pp.Cache="cache";class Uw{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ca(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.key=e}}class jw{constructor(e){this.key=e}}class lT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=We(),this.mutatedKeys=We(),this.Aa=ow(e),this.Ra=new Qo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new bp,o=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,w=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,C)=>{const R=o.get(_),L=hh(this.query,C)?C:null,j=!!R&&this.mutatedKeys.has(R.key),z=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let q=!1;R&&L?R.data.isEqual(L.data)?j!==z&&(i.track({type:3,doc:L}),q=!0):this.ga(R,L)||(i.track({type:2,doc:L}),q=!0,(m&&this.Aa(L,m)>0||w&&this.Aa(L,w)<0)&&(p=!0)):!R&&L?(i.track({type:0,doc:L}),q=!0):R&&!L&&(i.track({type:1,doc:R}),q=!0,(m||w)&&(p=!0)),q&&(L?(f=f.add(L),l=z?l.add(_):l.delete(_)):(f=f.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{Ra:f,fa:i,ns:p,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort((_,C)=>function(L,j){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return z(L)-z(j)}(_.type,C.type)||this.Aa(_.doc,C.doc)),this.pa(i),o=o!=null&&o;const p=n&&!o?this.ya():[],m=this.da.size===0&&this.current&&!o?1:0,w=m!==this.Ea;return this.Ea=m,f.length!==0||w?{snapshot:new ca(this.query,e.Ra,l,f,e.mutatedKeys,m===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:p}:{wa:p}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=We(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new jw(i))}),this.da.forEach(i=>{e.has(i)||n.push(new zw(i))}),n}ba(e){this.Ta=e.Ts,this.da=We();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ca.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uT{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class cT{constructor(e){this.key=e,this.va=!1}}class hT{constructor(e,n,i,o,l,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new co(p=>sw(p),ch),this.Ma=new Map,this.xa=new Set,this.Oa=new Bt(Se.comparator),this.Na=new Map,this.La=new t0,this.Ba={},this.ka=new Map,this.qa=ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fT(t,e,n=!0){const i=qw(t);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Hw(i,e,n,!0),o}async function dT(t,e){const n=qw(t);await Hw(n,e,!0,!1)}async function Hw(t,e,n,i){const o=await kI(t.localStore,ai(e)),l=o.targetId,f=t.sharedClientState.addLocalQueryTarget(l,n);let p;return i&&(p=await gT(t,e,l,f==="current",o.resumeToken)),t.isPrimaryClient&&n&&Pw(t.remoteStore,o),p}async function gT(t,e,n,i,o){t.Ka=(C,R,L)=>async function(z,q,F,O){let M=q.view.ma(F);M.ns&&(M=await Tp(z.localStore,q.query,!1).then(({documents:N})=>q.view.ma(N,M)));const K=O&&O.targetChanges.get(q.targetId),re=O&&O.targetMismatches.get(q.targetId)!=null,ne=q.view.applyChanges(M,z.isPrimaryClient,K,re);return Mp(z,q.targetId,ne.wa),ne.snapshot}(t,C,R,L);const l=await Tp(t.localStore,e,!0),f=new lT(e,l.Ts),p=f.ma(l.documents),m=ql.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),w=f.applyChanges(p,t.isPrimaryClient,m);Mp(t,n,w.wa);const _=new uT(e,n,f);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),w.snapshot}async function pT(t,e,n){const i=ke(t),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter(f=>!ch(f,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Md(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&i0(i.remoteStore,o.targetId),Ld(i,o.targetId)}).catch(Aa)):(Ld(i,o.targetId),await Md(i.localStore,o.targetId,!0))}async function mT(t,e){const n=ke(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),i0(n.remoteStore,i.targetId))}async function yT(t,e,n){const i=vT(t);try{const o=await function(f,p){const m=ke(f),w=un.now(),_=p.reduce((L,j)=>L.add(j.key),We());let C,R;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let j=Pi(),z=We();return m.cs.getEntries(L,_).next(q=>{j=q,j.forEach((F,O)=>{O.isValidDocument()||(z=z.add(F))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,j)).next(q=>{C=q;const F=[];for(const O of p){const M=L3(O,C.get(O.key).overlayedDocument);M!=null&&F.push(new Ss(O.key,M,Zy(M.value.mapValue),Wr.exists(!0)))}return m.mutationQueue.addMutationBatch(L,w,F,p)}).next(q=>{R=q;const F=q.applyToLocalDocumentSet(C,z);return m.documentOverlayCache.saveOverlays(L,q.batchId,F)})}).then(()=>({batchId:R.batchId,changes:lw(C)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(f,p,m){let w=f.Ba[f.currentUser.toKey()];w||(w=new Bt(Qe)),w=w.insert(p,m),f.Ba[f.currentUser.toKey()]=w}(i,o.batchId,n),await Ql(i,o.changes),await yh(i.remoteStore)}catch(o){const l=u0(o,"Failed to persist write");n.reject(l)}}async function Ww(t,e){const n=ke(t);try{const i=await PI(n.localStore,e);e.targetChanges.forEach((o,l)=>{const f=n.Na.get(l);f&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.va=!0:o.modifiedDocuments.size>0?it(f.va):o.removedDocuments.size>0&&(it(f.va),f.va=!1))}),await Ql(n,i,e)}catch(i){await Aa(i)}}function Op(t,e,n){const i=ke(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach((l,f)=>{const p=f.view.Z_(e);p.snapshot&&o.push(p.snapshot)}),function(f,p){const m=ke(f);m.onlineState=p;let w=!1;m.queries.forEach((_,C)=>{for(const R of C.j_)R.Z_(p)&&(w=!0)}),w&&c0(m)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wT(t,e,n){const i=ke(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),l=o&&o.key;if(l){let f=new Bt(Se.comparator);f=f.insert(l,On.newNoDocument(l,Oe.min()));const p=We().add(l),m=new gh(Oe.min(),new Map,new Bt(Qe),f,p);await Ww(i,m),i.Oa=i.Oa.remove(l),i.Na.delete(e),h0(i)}else await Md(i.localStore,e,!1).then(()=>Ld(i,e,n)).catch(Aa)}async function xT(t,e){const n=ke(t),i=e.batch.batchId;try{const o=await DI(n.localStore,e);Xw(n,i,null),Gw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(n,o)}catch(o){await Aa(o)}}async function ET(t,e,n){const i=ke(t);try{const o=await function(f,p){const m=ke(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let _;return m.mutationQueue.lookupMutationBatch(w,p).next(C=>(it(C!==null),_=C.keys(),m.mutationQueue.removeMutationBatch(w,C))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,_,p)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,_)).next(()=>m.localDocuments.getDocuments(w,_))})}(i.localStore,e);Xw(i,e,n),Gw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ql(i,o)}catch(o){await Aa(o)}}function Gw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Xw(t,e,n){const i=ke(t);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Kw(t,i)})}function Kw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(i0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),h0(t))}function Mp(t,e,n){for(const i of n)i instanceof zw?(t.La.addReference(i.key,e),_T(t,i)):i instanceof jw?(we("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Kw(t,i.key)):Pe()}function _T(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(i),h0(t))}function h0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Se(Nt.fromString(e)),i=t.qa.next();t.Na.set(i,new cT(n)),t.Oa=t.Oa.insert(n,i),Pw(t.remoteStore,new es(ai(Y1(n.path)),i,"TargetPurposeLimboResolution",oh.oe))}}async function Ql(t,e,n){const i=ke(t),o=[],l=[],f=[];i.Fa.isEmpty()||(i.Fa.forEach((p,m)=>{f.push(i.Ka(m,e,n).then(w=>{var _;if((w||n)&&i.isPrimaryClient){const C=w?!w.fromCache:(_=n==null?void 0:n.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,C?"current":"not-current")}if(w){o.push(w);const C=r0.Wi(m.targetId,w);l.push(C)}}))}),await Promise.all(f),i.Ca.d_(o),await async function(m,w){const _=ke(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>ie.forEach(w,R=>ie.forEach(R.$i,L=>_.persistence.referenceDelegate.addReference(C,R.targetId,L)).next(()=>ie.forEach(R.Ui,L=>_.persistence.referenceDelegate.removeReference(C,R.targetId,L)))))}catch(C){if(!Ca(C))throw C;we("LocalStore","Failed to update sequence numbers: "+C)}for(const C of w){const R=C.targetId;if(!C.fromCache){const L=_.os.get(R),j=L.snapshotVersion,z=L.withLastLimboFreeSnapshotVersion(j);_.os=_.os.insert(R,z)}}}(i.localStore,l))}async function AT(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const i=await Rw(n.localStore,e);n.currentUser=e,function(l,f){l.ka.forEach(p=>{p.forEach(m=>{m.reject(new Ce(oe.CANCELLED,f))})}),l.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ql(n,i.hs)}}function CT(t,e){const n=ke(t),i=n.Na.get(e);if(i&&i.va)return We().add(i.key);{let o=We();const l=n.Ma.get(e);if(!l)return o;for(const f of l){const p=n.Fa.get(f);o=o.unionWith(p.view.Va)}return o}}function qw(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wT.bind(null,e),e.Ca.d_=oT.bind(null,e.eventManager),e.Ca.$a=aT.bind(null,e.eventManager),e}function vT(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ET.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bI(this.persistence,new RI,e.initialUser,this.serializer)}Ga(e){return new Sw(n0.Zr,this.serializer)}Wa(e){return new BI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class IT extends kc{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){it(this.persistence.referenceDelegate instanceof Oc);const i=this.persistence.referenceDelegate.garbageCollector;return new dI(i,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new Sw(i=>Oc.Zr(i,n),this.serializer)}}class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Op(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AT.bind(null,this.syncEngine),await rT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sT}()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),i=function(l){return new zI(l)}(e.databaseInfo);return function(l,f,p,m){return new WI(l,f,p,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,l,f,p){return new XI(i,o,l,f,p)}(this.localStore,this.datastore,e.asyncQueue,n=>Op(this.syncEngine,n,0),function(){return Rp.D()?new Rp:new FI}())}createSyncEngine(e,n){return function(o,l,f,p,m,w,_){const C=new hT(o,l,f,p,m,w);return _&&(C.Qa=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=ke(o);we("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Yl(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,i,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Dn.UNAUTHENTICATED,this.clientId=Yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async f=>{we("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(i,f=>(we("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=u0(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function yf(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Rw(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ST(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Np(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>Np(e.remoteStore,o)),t._onlineComponents=e}async function ST(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await yf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),await yf(t,new kc)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await yf(t,new IT(void 0));return t._offlineComponents}async function Qw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await kp(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await kp(t,new Bd))),t._onlineComponents}function RT(t){return Qw(t).then(e=>e.syncEngine)}async function $w(t){const e=await Qw(t),n=e.eventManager;return n.onListen=fT.bind(null,e.syncEngine),n.onUnlisten=pT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mT.bind(null,e.syncEngine),n}function NT(t,e,n={}){const i=new Ii;return t.asyncQueue.enqueueAndForget(async()=>function(l,f,p,m,w){const _=new Yw({next:R=>{_.Za(),f.enqueueAndForget(()=>Vw(l,C));const L=R.docs.has(p);!L&&R.fromCache?w.reject(new Ce(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&m&&m.source==="server"?w.reject(new Ce(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),C=new Uw(Y1(p.path),_,{includeMetadataChanges:!0,_a:!0});return Fw(l,C)}(await $w(t),t.asyncQueue,e,n,i)),i.promise}function bT(t,e,n={}){const i=new Ii;return t.asyncQueue.enqueueAndForget(async()=>function(l,f,p,m,w){const _=new Yw({next:R=>{_.Za(),f.enqueueAndForget(()=>Vw(l,C)),R.fromCache&&m.source==="server"?w.reject(new Ce(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),C=new Uw(p,_,{includeMetadataChanges:!0,_a:!0});return Fw(l,C)}(await $w(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,e,n){if(!n)throw new Ce(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DT(t,e,n,i){if(e===!0&&i===!0)throw new Ce(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bp(t){if(!Se.isDocumentKey(t))throw new Ce(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fp(t){if(Se.isDocumentKey(t))throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function f0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function Oi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=f0(t);throw new Ce(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ce(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vp(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new jv;switch(i.type){case"firstParty":return new Xv(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ce(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Lp.get(n);i&&(we("ComponentProvider","Removing Datastore"),Lp.delete(n),i.terminate())}(this),Promise.resolve()}}function PT(t,e,n,i={}){var o;const l=(t=Oi(t,wh))._getSettings(),f=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==f&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:f,ssl:!1})),i.mockUserToken){let p,m;if(typeof i.mockUserToken=="string")p=i.mockUserToken,m=Dn.MOCK_USER;else{p=CC(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Ce(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Dn(w)}t._authCredentials=new Hv(new qy(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xh(this.firestore,e,this._query)}}class wr{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class gs extends xh{constructor(e,n,i){super(e,n,Y1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new Se(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function ex(t,e,...n){if(t=ui(t),Jw("collection","path",e),t instanceof wh){const i=Nt.fromString(e,...n);return Fp(i),new gs(t,null,i)}{if(!(t instanceof wr||t instanceof gs))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return Fp(i),new gs(t.firestore,null,i)}}function Eh(t,e,...n){if(t=ui(t),arguments.length===1&&(e=Yy.newId()),Jw("doc","path",e),t instanceof wh){const i=Nt.fromString(e,...n);return Bp(i),new wr(t,null,new Se(i))}{if(!(t instanceof wr||t instanceof gs))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return Bp(i),new wr(t.firestore,t instanceof gs?t.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bw(this,"async_queue_retry"),this.Vu=()=>{const i=mf();i&&we("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ca(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(f){let p=f.message||"";return f.stack&&(p=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),p}(i);throw Di("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=l0.createAndSchedule(this,e,n,i,l=>this.yu(l));return this.Tu.push(o),o}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ia extends wh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Up,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Up(e),this._firestoreClient=void 0,await e}}}function OT(t,e){const n=typeof t=="object"?t:Vy(),i=typeof t=="string"?t:"(default)",o=By(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Dy("firestore");l&&PT(o,...l)}return o}function d0(t){if(t._terminated)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MT(t),t._firestoreClient}function MT(t){var e,n,i;const o=t._freezeSettings(),l=function(p,m,w,_){return new a3(p,m,w,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Zw(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new TT(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ha(Tn.fromBase64String(e))}catch(n){throw new Ce(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ha(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=/^__.*__$/;class LT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}class tx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class y0{constructor(e,n,i,o,l,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new y0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nx(this.Cu)&&kT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class BT{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ph(e)}Qu(e,n,i,o=!1){return new y0({Cu:e,methodName:n,qu:i,path:Cn.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rx(t){const e=t._freezeSettings(),n=ph(t._databaseId);return new BT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FT(t,e,n,i,o,l={}){const f=t.Qu(l.merge||l.mergeFields?2:0,e,n,o);w0("Data must be an object, but it was:",f,i);const p=ix(i,f);let m,w;if(l.merge)m=new mr(f.fieldMask),w=f.fieldTransforms;else if(l.mergeFields){const _=[];for(const C of l.mergeFields){const R=Fd(e,C,n);if(!f.contains(R))throw new Ce(oe.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);ox(_,R)||_.push(R)}m=new mr(_),w=f.fieldTransforms.filter(C=>m.covers(C.field))}else m=null,w=f.fieldTransforms;return new LT(new $n(p),m,w)}class Ah extends g0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ah}}function VT(t,e,n,i){const o=t.Qu(1,e,n);w0("Data must be an object, but it was:",o,i);const l=[],f=$n.empty();Ts(i,(m,w)=>{const _=x0(e,m,n);w=ui(w);const C=o.Nu(_);if(w instanceof Ah)l.push(_);else{const R=Ch(w,C);R!=null&&(l.push(_),f.set(_,R))}});const p=new mr(l);return new tx(f,p,o.fieldTransforms)}function UT(t,e,n,i,o,l){const f=t.Qu(1,e,n),p=[Fd(e,i,n)],m=[o];if(l.length%2!=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<l.length;R+=2)p.push(Fd(e,l[R])),m.push(l[R+1]);const w=[],_=$n.empty();for(let R=p.length-1;R>=0;--R)if(!ox(w,p[R])){const L=p[R];let j=m[R];j=ui(j);const z=f.Nu(L);if(j instanceof Ah)w.push(L);else{const q=Ch(j,z);q!=null&&(w.push(L),_.set(L,q))}}const C=new mr(w);return new tx(_,C,f.fieldTransforms)}function Ch(t,e){if(sx(t=ui(t)))return w0("Unsupported field value:",e,t),ix(t,e);if(t instanceof g0)return function(i,o){if(!nx(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,o){const l=[];let f=0;for(const p of i){let m=Ch(p,o.Lu(f));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),f++}return{arrayValue:{values:l}}}(t,e)}return function(i,o){if((i=ui(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return b3(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=un.fromDate(i);return{timestampValue:Pc(o.serializer,l)}}if(i instanceof un){const l=new un(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,l)}}if(i instanceof p0)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ha)return{bytesValue:Ew(o.serializer,i._byteString)};if(i instanceof wr){const l=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(l))throw o.Bu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:e0(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof m0)return function(f,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map(m=>{if(typeof m!="number")throw p.Bu("VectorValues must only contain numeric values.");return Q1(p.serializer,m)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${f0(i)}`)}(t,e)}function ix(t,e){const n={};return Qy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(t,(i,o)=>{const l=Ch(o,e.Mu(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function sx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof un||t instanceof p0||t instanceof ha||t instanceof wr||t instanceof g0||t instanceof m0)}function w0(t,e,n){if(!sx(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=f0(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Fd(t,e,n){if((e=ui(e))instanceof _h)return e._internalPath;if(typeof e=="string")return x0(t,e);throw Lc("Field path arguments must be of type string or ",t,!1,void 0,n)}const zT=new RegExp("[~\\*/\\[\\]]");function x0(t,e,n){if(e.search(zT)>=0)throw Lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _h(...e.split("."))._internalPath}catch{throw Lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lc(t,e,n,i,o){const l=i&&!i.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||f)&&(m+=" (found",l&&(m+=` in field ${i}`),f&&(m+=` in document ${o}`),m+=")"),new Ce(oe.INVALID_ARGUMENT,p+t+m)}function ox(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n,i,o,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jT extends ax{data(){return super.data()}}function lx(t,e){return typeof e=="string"?x0(t,e):e instanceof _h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ce(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class WT{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ts(e,(o,l)=>{i[o]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,o;const l=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(f=>Gt(f.doubleValue));return new m0(l)}convertGeoPoint(e){return new p0(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=lh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const n=ws(e);return new un(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Nt.fromString(e);it(Tw(i));const o=new kl(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return o.isEqual(n)||Di(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ux extends ax{constructor(e,n,i,o,l,f){super(e,n,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(lx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Zu extends ux{data(e={}){return super.data(e)}}class XT{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new $a(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Zu(this._firestore,this._userDataWriter,i.key,i,new $a(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(p=>{const m=new Zu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $a(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{const m=new Zu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $a(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let w=-1,_=-1;return p.type!==0&&(w=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:KT(p.type),doc:m,oldIndex:w,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){t=Oi(t,wr);const e=Oi(t.firestore,Ia);return NT(d0(e),t._key).then(n=>JT(e,t,n))}class cx extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,n)}}function YT(t){t=Oi(t,xh);const e=Oi(t.firestore,Ia),n=d0(e),i=new cx(e);return HT(t._query),bT(n,t._query).then(o=>new XT(e,i,t,o))}function QT(t,e,n,...i){t=Oi(t,wr);const o=Oi(t.firestore,Ia),l=rx(o);let f;return f=typeof(e=ui(e))=="string"||e instanceof _h?UT(l,"updateDoc",t._key,e,n,i):VT(l,"updateDoc",t._key,e),E0(o,[f.toMutation(t._key,Wr.exists(!0))])}function $T(t){return E0(Oi(t.firestore,Ia),[new $1(t._key,Wr.none())])}function ZT(t,e){const n=Oi(t.firestore,Ia),i=Eh(t),o=GT(t.converter,e);return E0(n,[FT(rx(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,Wr.exists(!1))]).then(()=>i)}function E0(t,e){return function(i,o){const l=new Ii;return i.asyncQueue.enqueueAndForget(async()=>yT(await RT(i),o,l)),l.promise}(d0(t),e)}function JT(t,e,n){const i=n.docs.get(e._key),o=new cx(t);return new ux(t,o,e._key,i,new $a(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){_a=o})(bv),Dl(new ia("firestore",(i,{instanceIdentifier:o,options:l})=>{const f=i.getProvider("app").getImmediate(),p=new Ia(new Wv(i.getProvider("auth-internal")),new qv(i.getProvider("app-check-internal")),function(w,_){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new Ce(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(w.options.projectId,_)}(f,o),f);return l=Object.assign({useFetchStreams:n},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),ds(np,"4.7.4",e),ds(np,"4.7.4","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="us-central1";class t4{constructor(e,n,i,o,l=Vd){this.app=e,this.emulatorOrigin=null,this.contextProvider=new e4(n,i,o),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(l);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=Vd}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function n4(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const zp="@firebase/functions",jp="0.11.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="auth-internal",i4="app-check-internal",s4="messaging-internal";function o4(t){const e=(n,{instanceIdentifier:i})=>{const o=n.getProvider("app").getImmediate(),l=n.getProvider(r4),f=n.getProvider(s4),p=n.getProvider(i4);return new t4(o,l,f,p,i)};Dl(new ia(hx,e,"PUBLIC").setMultipleInstances(!0)),ds(zp,jp,t),ds(zp,jp,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t=Vy(),e=Vd){const i=By(ui(t),hx).getImmediate({identifier:e}),o=Dy("functions");return o&&l4(i,...o),i}function l4(t,e,n){n4(ui(t),e,n)}o4();const u4={apiKey:"AIzaSyDyHoMrqMyToffOdOm0XAxn6wu6g7CRTTc",authDomain:"controllween-api.firebaseapp.com",projectId:"controllween-api",storageBucket:"controllween-api.appspot.com",messagingSenderId:"206952565752",appId:"1:206952565752:web:cf5df98f54b7999e17e40d"},fx=Fy(u4),Vl=OT(fx);a4(fx);function c4(){const[t,e]=de.useState(""),[n,i]=de.useState(""),[o,l]=de.useState(""),f=async()=>{if(!t||!n){l("Por favor, preencha todos os campos.");return}try{const p=await ZT(ex(Vl,"convidados"),{nome:t,telefone:n,validado:!1}),m=`https://controllween.360brave.com/validar?id=${p.id}`;await QT(Eh(Vl,"convidados",p.id),{qrUrl:m}),l("Convidado cadastrado com sucesso!"),e(""),i("")}catch(p){console.error("Erro ao cadastrar convidado:",p),l("Erro ao cadastrar convidado.")}};return me.jsxs("div",{children:[me.jsx("h2",{children:"Cadastrar Convidado"}),o&&me.jsx("p",{children:o}),me.jsx("input",{type:"text",placeholder:"Nome",value:t,onChange:p=>e(p.target.value)}),me.jsx("input",{type:"text",placeholder:"Telefone",value:n,onChange:p=>i(p.target.value)}),me.jsx("button",{onClick:f,children:"Cadastrar"})]})}function h4(){const[t,e]=de.useState([]),[n,i]=de.useState(""),[o,l]=de.useState(0),[f,p]=de.useState(0);de.useEffect(()=>{(async()=>{try{const R=(await YT(ex(Vl,"convidados"))).docs.map(L=>({id:L.id,...L.data()}));e(R),l(R.length),p(R.filter(L=>L.validado).length)}catch(C){console.error("Erro ao buscar convidados:",C),i("Erro ao carregar a lista de convidados.")}})()},[]);const m=(_,C)=>{const L=`Olá, você está recebendo o seu QR Code para entrada na festa de Halloween. Acesse seu QR Code aqui: ${`https://controllween.360brave.com/view-qr/${_}`}`,j=`https://api.whatsapp.com/send?phone=${C}&text=${encodeURIComponent(L)}`;window.open(j,"_blank")},w=async _=>{if(window.confirm("Tem certeza que deseja excluir?"))try{await $T(Eh(Vl,"convidados",_)),e(t.filter(C=>C.id!==_)),i("Convidado excluído com sucesso."),l(C=>C-1),t.find(C=>C.id===_).validado&&p(C=>C-1)}catch(C){console.error("Erro ao excluir convidado:",C),i("Erro ao excluir o convidado.")}};return me.jsxs("div",{children:[me.jsx("h2",{children:"Lista de Convidados"}),n&&me.jsx("p",{children:n}),me.jsxs("div",{style:{marginBottom:"20px"},children:[me.jsxs("p",{children:["Usuários cadastrados: ",o]}),me.jsxs("p",{children:["Usuários validados: ",f]})]}),me.jsxs("table",{children:[me.jsx("thead",{children:me.jsxs("tr",{children:[me.jsx("th",{children:"ID"}),me.jsx("th",{children:"Nome"}),me.jsx("th",{children:"Telefone"}),me.jsx("th",{children:"Ações"}),me.jsx("th",{children:"Validado"})]})}),me.jsx("tbody",{children:t.map(_=>me.jsxs("tr",{children:[me.jsx("td",{children:_.id}),me.jsx("td",{children:_.nome}),me.jsx("td",{children:_.telefone}),me.jsxs("td",{children:[me.jsx("button",{onClick:()=>w(_.id),children:"Excluir"}),me.jsx("button",{onClick:()=>m(_.id,_.telefone),children:"Enviar QR"})]}),me.jsx("td",{children:_.validado?"Sim":"Não"})]},_.id))})]})]})}var xe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xe||(xe={}));var Hp=new Map([[xe.QR_CODE,"QR_CODE"],[xe.AZTEC,"AZTEC"],[xe.CODABAR,"CODABAR"],[xe.CODE_39,"CODE_39"],[xe.CODE_93,"CODE_93"],[xe.CODE_128,"CODE_128"],[xe.DATA_MATRIX,"DATA_MATRIX"],[xe.MAXICODE,"MAXICODE"],[xe.ITF,"ITF"],[xe.EAN_13,"EAN_13"],[xe.EAN_8,"EAN_8"],[xe.PDF_417,"PDF_417"],[xe.RSS_14,"RSS_14"],[xe.RSS_EXPANDED,"RSS_EXPANDED"],[xe.UPC_A,"UPC_A"],[xe.UPC_E,"UPC_E"],[xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Wp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Wp||(Wp={}));function f4(t){return Object.values(xe).includes(t)}var Bc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Bc||(Bc={}));var d4=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Bc.SCAN_TYPE_CAMERA,Bc.SCAN_TYPE_FILE],t}(),dx=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Hp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Hp.get(e))},t}(),Gp=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Ud;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ud||(Ud={}));var g4=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Ud.UNKWOWN_ERROR}},t}(),p4=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function xi(t){return typeof t>"u"||t===null}var Ho=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),gx=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),p=0,m=f;p<m.length;p++){var w=m[p];if(l.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},t}(),zd={exports:{}};(function(t,e){(function(n,i){i(e)})(ka,function(n){function i(I){return I==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,r){I.__proto__=r}||function(I,r){for(var s in r)r.hasOwnProperty(s)&&(I[s]=r[s])};function l(I,r){o(I,r);function s(){this.constructor=I}I.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(I,r){var s=Object.setPrototypeOf;s?s(I,r):I.__proto__=r}function p(I,r){r===void 0&&(r=I.constructor);var s=Error.captureStackTrace;s&&s(I,r)}var m=function(I){l(r,I);function r(s){var a=this.constructor,u=I.call(this,s)||this;return Object.defineProperty(u,"name",{value:a.name,enumerable:!1}),f(u,a.prototype),p(u),u}return r}(Error);class w extends m{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class _ extends w{}_.kind="ArgumentException";class C extends w{}C.kind="IllegalArgumentException";class R{constructor(r){if(this.binarizer=r,r===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,u){const c=this.binarizer.getLuminanceSource().crop(r,s,a,u);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class L extends w{static getChecksumInstance(){return new L}}L.kind="ChecksumException";class j{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class z{static arraycopy(r,s,a,u,c){for(;c--;)a[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class q extends w{}q.kind="IndexOutOfBoundsException";class F extends q{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}F.kind="ArrayIndexOutOfBoundsException";class O{static fill(r,s){for(let a=0,u=r.length;a<u;a++)r[a]=s}static fillWithin(r,s,a,u){O.rangeCheck(r.length,s,a);for(let c=s;c<a;c++)r[c]=u}static rangeCheck(r,s,a){if(s>a)throw new C("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new F(s);if(a>r)throw new F(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(c=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(c=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,u=r.length;a<u;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const u=a-s,c=new Int32Array(u);return z.arraycopy(r,s,c,0,u),c}static binarySearch(r,s,a){a===void 0&&(a=O.numberComparator);let u=0,c=r.length-1;for(;u<=c;){const h=c+u>>1,d=a(s,r[h]);if(d>0)u=h+1;else if(d<0)c=h-1;else return h}return-u-1}static numberComparator(r,s){return r-s}}class M{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}M.MIN_VALUE_32_BITS=-2147483648,M.MAX_VALUE=Number.MAX_SAFE_INTEGER;class K{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=K.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=K.makeArray(r);z.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let u=Math.floor(r/32),c=a[u];c&=~((1<<(r&31))-1);const h=a.length;for(;c===0;){if(++u===h)return s;c=a[u]}const d=u*32+M.numberOfTrailingZeros(c);return d>s?s:d}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let u=Math.floor(r/32),c=~a[u];c&=~((1<<(r&31))-1);const h=a.length;for(;c===0;){if(++u===h)return s;c=~a[u]}const d=u*32+M.numberOfTrailingZeros(c);return d>s?s:d}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new C;if(s===r)return;s--;const a=Math.floor(r/32),u=Math.floor(s/32),c=this.bits;for(let h=a;h<=u;h++){const d=h>a?0:r&31,x=(2<<(h<u?31:s&31))-(1<<d);c[h]|=x}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new C;if(s===r)return!0;s--;const u=Math.floor(r/32),c=Math.floor(s/32),h=this.bits;for(let d=u;d<=c;d++){const y=d>u?0:r&31,A=(2<<(d<c?31:s&31))-(1<<y)&4294967295;if((h[d]&A)!==(a?A:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new C("Sizes don't match");const s=this.bits;for(let a=0,u=s.length;a<u;a++)s[a]^=r.bits[a]}toBytes(r,s,a,u){for(let c=0;c<u;c++){let h=0;for(let d=0;d<8;d++)this.get(r)&&(h|=1<<7-d),r++;s[a+c]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,u=this.bits;for(let c=0;c<a;c++){let h=u[c];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[s-c]=h}if(this.size!==a*32){const c=a*32-this.size;let h=r[0]>>>c;for(let d=1;d<a;d++){const y=r[d];h|=y<<32-c,r[d-1]=h,h=y>>>c}r[a-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof K))return!1;const s=r;return this.size===s.size&&O.equals(this.bits,s.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new K(this.size,this.bits.slice())}}var re;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var ne=re;class N extends w{static getFormatInstance(){return new N}}N.kind="FormatException";var D;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(D||(D={}));class b{constructor(r,s,a,...u){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,b.VALUE_IDENTIFIER_TO_ECI.set(r,this),b.NAME_TO_ECI.set(a,this);const c=this.values;for(let h=0,d=c.length;h!==d;h++){const y=c[h];b.VALUES_TO_ECI.set(y,this)}for(const h of u)b.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new N("incorect value");const s=b.VALUES_TO_ECI.get(r);if(s===void 0)throw new N("incorect value");return s}static getCharacterSetECIByName(r){const s=b.NAME_TO_ECI.get(r);if(s===void 0)throw new N("incorect value");return s}equals(r){if(!(r instanceof b))return!1;const s=r;return this.getName()===s.getName()}}b.VALUE_IDENTIFIER_TO_ECI=new Map,b.VALUES_TO_ECI=new Map,b.NAME_TO_ECI=new Map,b.Cp437=new b(D.Cp437,Int32Array.from([0,2]),"Cp437"),b.ISO8859_1=new b(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),b.ISO8859_2=new b(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),b.ISO8859_3=new b(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),b.ISO8859_4=new b(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),b.ISO8859_5=new b(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),b.ISO8859_6=new b(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),b.ISO8859_7=new b(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),b.ISO8859_8=new b(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),b.ISO8859_9=new b(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),b.ISO8859_10=new b(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),b.ISO8859_11=new b(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),b.ISO8859_13=new b(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),b.ISO8859_14=new b(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),b.ISO8859_15=new b(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),b.ISO8859_16=new b(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),b.SJIS=new b(D.SJIS,20,"SJIS","Shift_JIS"),b.Cp1250=new b(D.Cp1250,21,"Cp1250","windows-1250"),b.Cp1251=new b(D.Cp1251,22,"Cp1251","windows-1251"),b.Cp1252=new b(D.Cp1252,23,"Cp1252","windows-1252"),b.Cp1256=new b(D.Cp1256,24,"Cp1256","windows-1256"),b.UnicodeBigUnmarked=new b(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),b.UTF8=new b(D.UTF8,26,"UTF8","UTF-8"),b.ASCII=new b(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),b.Big5=new b(D.Big5,28,"Big5"),b.GB18030=new b(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),b.EUC_KR=new b(D.EUC_KR,30,"EUC_KR","EUC-KR");class U extends w{}U.kind="UnsupportedOperationException";class G{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!G.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof b?r:b.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(G.isDecodeFallbackSupported(a)){let u="";for(let c=0,h=r.length;c<h;c++){let d=r[c].toString(16);d.length<2&&(d="0"+d),u+="%"+d}return decodeURIComponent(u)}if(a.equals(b.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new U(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(b.UTF8)||r.equals(b.ISO8859_1)||r.equals(b.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let c=0;c<a.length;c++)u.push(a[c].charCodeAt(0));return new Uint8Array(u)}}class W{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return G.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(ne.CHARACTER_SET)!==void 0)return s.get(ne.CHARACTER_SET).toString();const a=r.length;let u=!0,c=!0,h=!0,d=0,y=0,x=0,A=0,T=0,S=0,B=0,H=0,X=0,$=0,ee=0;const ue=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ce=0;ce<a&&(u||c||h);ce++){const ae=r[ce]&255;h&&(d>0?ae&128?d--:h=!1:ae&128&&(ae&64?(d++,ae&32?(d++,ae&16?(d++,ae&8?h=!1:A++):x++):y++):h=!1)),u&&(ae>127&&ae<160?u=!1:ae>159&&(ae<192||ae===215||ae===247)&&ee++),c&&(T>0?ae<64||ae===127||ae>252?c=!1:T--:ae===128||ae===160||ae>239?c=!1:ae>160&&ae<224?(S++,H=0,B++,B>X&&(X=B)):ae>127?(T++,B=0,H++,H>$&&($=H)):(B=0,H=0))}return h&&d>0&&(h=!1),c&&T>0&&(c=!1),h&&(ue||y+x+A>0)?W.UTF8:c&&(W.ASSUME_SHIFT_JIS||X>=3||$>=3)?W.SHIFT_JIS:u&&c?X===2&&S===2||ee*10>=a?W.SHIFT_JIS:W.ISO88591:u?W.ISO88591:c?W.SHIFT_JIS:h?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function u(h,d,y,x,A,T){if(h==="%%")return"%";if(s[++a]===void 0)return;h=x?parseInt(x.substr(1)):void 0;let S=A?parseInt(A.substr(1)):void 0,B;switch(T){case"s":B=s[a];break;case"c":B=s[a][0];break;case"f":B=parseFloat(s[a]).toFixed(h);break;case"p":B=parseFloat(s[a]).toPrecision(h);break;case"e":B=parseFloat(s[a]).toExponential(h);break;case"x":B=parseInt(s[a]).toString(S||16);break;case"d":B=parseFloat(parseInt(s[a],S||10).toPrecision(h)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(S);let H=parseInt(y),X=y&&y[0]+""=="0"?"0":" ";for(;B.length<H;)B=d!==void 0?B+X:X+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,u)}static getBytes(r,s){return G.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}W.SHIFT_JIS=b.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=b.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=b.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class V{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=W.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let u=s;s<s+a;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class et{constructor(r,s,a,u){if(this.width=r,this.height=s,this.rowSize=a,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new C("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,u=new et(a,s);for(let c=0;c<s;c++){const h=r[c];for(let d=0;d<a;d++)h[d]&&u.set(d,c)}return u}static parseFromString(r,s,a){if(r===null)throw new C("stringRepresentation cannot be null");const u=new Array(r.length);let c=0,h=0,d=-1,y=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(c>h){if(d===-1)d=c-h;else if(c-h!==d)throw new C("row lengths do not match");h=c,y++}x++}else if(r.substring(x,x+s.length)===s)x+=s.length,u[c]=!0,c++;else if(r.substring(x,x+a.length)===a)x+=a.length,u[c]=!1,c++;else throw new C("illegal character encountered: "+r.substring(x));if(c>h){if(d===-1)d=c-h;else if(c-h!==d)throw new C("row lengths do not match");y++}const A=new et(d,y);for(let T=0;T<c;T++)u[T]&&A.set(Math.floor(T%d),Math.floor(T/d));return A}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new C("input matrix dimensions do not match");const s=new K(Math.floor(this.width/32)+1),a=this.rowSize,u=this.bits;for(let c=0,h=this.height;c<h;c++){const d=c*a,y=r.getRow(c,s).getBitArray();for(let x=0;x<a;x++)u[d+x]^=y[x]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,u){if(s<0||r<0)throw new C("Left and top must be nonnegative");if(u<1||a<1)throw new C("Height and width must be at least 1");const c=r+a,h=s+u;if(h>this.height||c>this.width)throw new C("The region must fit inside the matrix");const d=this.rowSize,y=this.bits;for(let x=s;x<h;x++){const A=x*d;for(let T=r;T<c;T++)y[A+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new K(this.width):s.clear();const a=this.rowSize,u=this.bits,c=r*a;for(let h=0;h<a;h++)s.setBulk(h*32,u[c+h]);return s}setRow(r,s){z.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new K(r),u=new K(r);for(let c=0,h=Math.floor((s+1)/2);c<h;c++)a=this.getRow(c,a),u=this.getRow(s-1-c,u),a.reverse(),u.reverse(),this.setRow(c,u),this.setRow(s-1-c,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,u=this.bits;let c=r,h=s,d=-1,y=-1;for(let x=0;x<s;x++)for(let A=0;A<a;A++){const T=u[x*a+A];if(T!==0){if(x<h&&(h=x),x>y&&(y=x),A*32<c){let S=0;for(;!(T<<31-S&4294967295);)S++;A*32+S<c&&(c=A*32+S)}if(A*32+31>d){let S=31;for(;!(T>>>S);)S--;A*32+S>d&&(d=A*32+S)}}}return d<c||y<h?null:Int32Array.from([c,h,d-c+1,y-h+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const u=a/r;let c=a%r*32;const h=s[a];let d=0;for(;!(h<<31-d&4294967295);)d++;return c+=d,Int32Array.from([c,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const u=Math.floor(a/r);let c=Math.floor(a%r)*32;const h=s[a];let d=31;for(;!(h>>>d);)d--;return c+=d,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof et))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&O.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+O.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let u=new V;for(let c=0,h=this.height;c<h;c++){for(let d=0,y=this.width;d<y;d++)u.append(this.get(d,c)?r:s);u.append(a)}return u.toString()}clone(){return new et(this.width,this.height,this.rowSize,this.bits.slice())}}class te extends w{static getNotFoundInstance(){return new te}}te.kind="NotFoundException";class It extends j{constructor(r){super(r),this.luminances=It.EMPTY,this.buckets=new Int32Array(It.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),u=a.getWidth();s==null||s.getSize()<u?s=new K(u):s.clear(),this.initArrays(u);const c=a.getRow(r,this.luminances),h=this.buckets;for(let y=0;y<u;y++)h[(c[y]&255)>>It.LUMINANCE_SHIFT]++;const d=It.estimateBlackPoint(h);if(u<3)for(let y=0;y<u;y++)(c[y]&255)<d&&s.set(y);else{let y=c[0]&255,x=c[1]&255;for(let A=1;A<u-1;A++){const T=c[A+1]&255;(x*4-y-T)/2<d&&s.set(A),y=x,x=T}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),u=new et(s,a);this.initArrays(s);const c=this.buckets;for(let y=1;y<5;y++){const x=Math.floor(a*y/5),A=r.getRow(x,this.luminances),T=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<T;S++){const B=A[S]&255;c[B>>It.LUMINANCE_SHIFT]++}}const h=It.estimateBlackPoint(c),d=r.getMatrix();for(let y=0;y<a;y++){const x=y*s;for(let A=0;A<s;A++)(d[x+A]&255)<h&&u.set(A,y)}return u}createBinarizer(r){return new It(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<It.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,u=0,c=0;for(let A=0;A<s;A++)r[A]>c&&(u=A,c=r[A]),r[A]>a&&(a=r[A]);let h=0,d=0;for(let A=0;A<s;A++){const T=A-u,S=r[A]*T*T;S>d&&(h=A,d=S)}if(u>h){const A=u;u=h,h=A}if(h-u<=s/16)throw new te;let y=h-1,x=-1;for(let A=h-1;A>u;A--){const T=A-u,S=T*T*(h-A)*(a-r[A]);S>x&&(y=A,x=S)}return y<<It.LUMINANCE_SHIFT}}It.LUMINANCE_BITS=5,It.LUMINANCE_SHIFT=8-It.LUMINANCE_BITS,It.LUMINANCE_BUCKETS=1<<It.LUMINANCE_BITS,It.EMPTY=Uint8ClampedArray.from([0]);class Ne extends It{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=Ne.MINIMUM_DIMENSION&&a>=Ne.MINIMUM_DIMENSION){const u=r.getMatrix();let c=s>>Ne.BLOCK_SIZE_POWER;s&Ne.BLOCK_SIZE_MASK&&c++;let h=a>>Ne.BLOCK_SIZE_POWER;a&Ne.BLOCK_SIZE_MASK&&h++;const d=Ne.calculateBlackPoints(u,c,h,s,a),y=new et(s,a);Ne.calculateThresholdForBlock(u,c,h,s,a,d,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Ne(r)}static calculateThresholdForBlock(r,s,a,u,c,h,d){const y=c-Ne.BLOCK_SIZE,x=u-Ne.BLOCK_SIZE;for(let A=0;A<a;A++){let T=A<<Ne.BLOCK_SIZE_POWER;T>y&&(T=y);const S=Ne.cap(A,2,a-3);for(let B=0;B<s;B++){let H=B<<Ne.BLOCK_SIZE_POWER;H>x&&(H=x);const X=Ne.cap(B,2,s-3);let $=0;for(let ue=-2;ue<=2;ue++){const ce=h[S+ue];$+=ce[X-2]+ce[X-1]+ce[X]+ce[X+1]+ce[X+2]}const ee=$/25;Ne.thresholdBlock(r,H,T,ee,u,d)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,u,c,h){for(let d=0,y=a*c+s;d<Ne.BLOCK_SIZE;d++,y+=c)for(let x=0;x<Ne.BLOCK_SIZE;x++)(r[y+x]&255)<=u&&h.set(s+x,a+d)}static calculateBlackPoints(r,s,a,u,c){const h=c-Ne.BLOCK_SIZE,d=u-Ne.BLOCK_SIZE,y=new Array(a);for(let x=0;x<a;x++){y[x]=new Int32Array(s);let A=x<<Ne.BLOCK_SIZE_POWER;A>h&&(A=h);for(let T=0;T<s;T++){let S=T<<Ne.BLOCK_SIZE_POWER;S>d&&(S=d);let B=0,H=255,X=0;for(let ee=0,ue=A*u+S;ee<Ne.BLOCK_SIZE;ee++,ue+=u){for(let ce=0;ce<Ne.BLOCK_SIZE;ce++){const ae=r[ue+ce]&255;B+=ae,ae<H&&(H=ae),ae>X&&(X=ae)}if(X-H>Ne.MIN_DYNAMIC_RANGE)for(ee++,ue+=u;ee<Ne.BLOCK_SIZE;ee++,ue+=u)for(let ce=0;ce<Ne.BLOCK_SIZE;ce++)B+=r[ue+ce]&255}let $=B>>Ne.BLOCK_SIZE_POWER*2;if(X-H<=Ne.MIN_DYNAMIC_RANGE&&($=H/2,x>0&&T>0)){const ee=(y[x-1][T]+2*y[x][T-1]+y[x-1][T-1])/4;H<ee&&($=ee)}y[x][T]=$}}return y}}Ne.BLOCK_SIZE_POWER=3,Ne.BLOCK_SIZE=1<<Ne.BLOCK_SIZE_POWER,Ne.BLOCK_SIZE_MASK=Ne.BLOCK_SIZE-1,Ne.MINIMUM_DIMENSION=Ne.BLOCK_SIZE*5,Ne.MIN_DYNAMIC_RANGE=24;class pe{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,u){throw new U("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new U("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new U("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new V;for(let a=0;a<this.height;a++){const u=this.getRow(a,r);for(let c=0;c<this.width;c++){const h=u[c]&255;let d;h<64?d="#":h<128?d="+":h<192?d=".":d=" ",s.append(d)}s.append(`
`)}return s.toString()}}class Ie extends pe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),u=this.getWidth();for(let c=0;c<u;c++)a[c]=255-(a[c]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let u=0;u<s;u++)a[u]=255-(r[u]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,u){return new Ie(this.delegate.crop(r,s,a,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ie(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ie(this.delegate.rotateCounterClockwise45())}}class be extends pe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return be.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const u=new Uint8ClampedArray(s*a);for(let c=0,h=0,d=r.length;c<d;c+=4,h++){let y;if(r[c+3]===0)y=255;else{const A=r[c],T=r[c+1],S=r[c+2];y=306*A+601*T+117*S+512>>10}u[h]=y}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const a=this.getWidth(),u=r*a;return s===null?s=this.buffer.slice(u,u+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(u,u+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,u){return super.crop(r,s,a,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),u=r*be.DEGREE_TO_RADIANS,c=this.canvas.width,h=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*h),y=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*h);return s.width=d,s.height=y,a.translate(d/2,y/2),a.rotate(u),a.drawImage(this.canvas,c/-2,h/-2),this.buffer=be.makeBufferFromCanvasImageData(s),this}invert(){return new Ie(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class gt{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Le=(globalThis||ka||self||window||void 0)&&(globalThis||ka||self||window||void 0).__awaiter||function(I,r,s,a){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function d(A){try{x(a.next(A))}catch(T){h(T)}}function y(A){try{x(a.throw(A))}catch(T){h(T)}}function x(A){A.done?c(A.value):u(A.value).then(d,y)}x((a=a.apply(I,r||[])).next())})};class st{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const u=a.kind==="video"?"videoinput":a.kind;if(u!=="videoinput")continue;const c=a.deviceId||a.id,h=a.label||`Video device ${s.length+1}`,d=a.groupId,y={deviceId:c,label:h,kind:u,groupId:d};s.push(y)}return s})}getVideoInputDevices(){return Le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new gt(s.deviceId,s.label))})}findDeviceById(r){return Le(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Le(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Le(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return Le(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return Le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return Le(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,s,a)})}decodeFromConstraints(r,s,a){return Le(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,a)})}decodeFromStream(r,s,a){return Le(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Le(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Le(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new _(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new _(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new _("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new _("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new _("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new _("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new _("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new _("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new _("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new _("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(a,s);return a.src=r,u}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const u=(c,h)=>{if(this._stopAsyncDecode){h(new te("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(r);c(d)}catch(d){const y=s&&d instanceof te,A=(d instanceof L||d instanceof N)&&a;if(y||A)return setTimeout(u,this._timeBetweenDecodingAttempts,c,h);h(d)}};return new Promise((c,h)=>u(c,h))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(a,this.timeBetweenScansMillis)}catch(u){s(null,u);const c=u instanceof L||u instanceof N,h=u instanceof te;(c||h)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new be(s),u=new Ne(a);return new R(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=u+"px",s.width=a,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class yt{constructor(r,s,a=s==null?0:8*s.length,u,c,h=z.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=u,this.format=c,this.timestamp=h,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=u,this.format=c,this.resultMetadata=null,h==null?this.timestamp=z.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);z.arraycopy(s,0,a,0,s.length),z.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var nr;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nr||(nr={}));var Ae=nr,rr;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(rr||(rr={}));var Kt=rr;class Ns{constructor(r,s,a,u,c=-1,h=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xr{exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Zt{constructor(r,s){if(s.length===0)throw new C;this.field=r;const a=s.length;if(a>1&&s[0]===0){let u=1;for(;u<a&&s[u]===0;)u++;u===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-u),z.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let h=0,d=s.length;h!==d;h++){const y=s[h];a=Xr.addOrSubtract(a,y)}return a}a=s[0];const u=s.length,c=this.field;for(let h=1;h<u;h++)a=Xr.addOrSubtract(c.multiply(r,a),s[h]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const h=s;s=a,a=h}let u=new Int32Array(a.length);const c=a.length-s.length;z.arraycopy(a,0,u,0,c);for(let h=c;h<a.length;h++)u[h]=Xr.addOrSubtract(s[h-c],a[h]);return new Zt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,u=r.coefficients,c=u.length,h=new Int32Array(a+c-1),d=this.field;for(let y=0;y<a;y++){const x=s[y];for(let A=0;A<c;A++)h[y+A]=Xr.addOrSubtract(h[y+A],d.multiply(x,u[A]))}return new Zt(d,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,u=new Int32Array(s),c=this.coefficients;for(let h=0;h<s;h++)u[h]=a.multiply(c[h],r);return new Zt(a,u)}multiplyByMonomial(r,s){if(r<0)throw new C;if(s===0)return this.field.getZero();const a=this.coefficients,u=a.length,c=new Int32Array(u+r),h=this.field;for(let d=0;d<u;d++)c[d]=h.multiply(a[d],s);return new Zt(h,c)}divide(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new C("Divide by 0");const s=this.field;let a=s.getZero(),u=this;const c=r.getCoefficient(r.getDegree()),h=s.inverse(c);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const d=u.getDegree()-r.getDegree(),y=s.multiply(u.getCoefficient(u.getDegree()),h),x=r.multiplyByMonomial(d,y),A=s.buildMonomial(d,y);a=a.addOrSubtract(A),u=u.addOrSubtract(x)}return[a,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const u=this.field.log(a);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class ki extends w{}ki.kind="ArithmeticException";class Ge extends Xr{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const u=new Int32Array(s);let c=1;for(let d=0;d<s;d++)u[d]=c,c*=2,c>=s&&(c^=r,c&=s-1);this.expTable=u;const h=new Int32Array(s);for(let d=0;d<s-1;d++)h[u[d]]=d;this.logTable=h,this.zero=new Zt(this,Int32Array.from([0])),this.one=new Zt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new C;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new Zt(this,a)}inverse(r){if(r===0)throw new ki;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+M.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ge.AZTEC_DATA_12=new Ge(4201,4096,1),Ge.AZTEC_DATA_10=new Ge(1033,1024,1),Ge.AZTEC_DATA_6=new Ge(67,64,1),Ge.AZTEC_PARAM=new Ge(19,16,1),Ge.QR_CODE_FIELD_256=new Ge(285,256,0),Ge.DATA_MATRIX_FIELD_256=new Ge(301,256,1),Ge.AZTEC_DATA_8=Ge.DATA_MATRIX_FIELD_256,Ge.MAXICODE_FIELD_64=Ge.AZTEC_DATA_6;class Kr extends w{}Kr.kind="ReedSolomonException";class jn extends w{}jn.kind="IllegalStateException";class Li{constructor(r){this.field=r}decode(r,s){const a=this.field,u=new Zt(a,r),c=new Int32Array(s);let h=!0;for(let B=0;B<s;B++){const H=u.evaluateAt(a.exp(B+a.getGeneratorBase()));c[c.length-1-B]=H,H!==0&&(h=!1)}if(h)return;const d=new Zt(a,c),y=this.runEuclideanAlgorithm(a.buildMonomial(s,1),d,s),x=y[0],A=y[1],T=this.findErrorLocations(x),S=this.findErrorMagnitudes(A,T);for(let B=0;B<T.length;B++){const H=r.length-1-a.log(T[B]);if(H<0)throw new Kr("Bad error location");r[H]=Ge.addOrSubtract(r[H],S[B])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const B=r;r=s,s=B}const u=this.field;let c=r,h=s,d=u.getZero(),y=u.getOne();for(;h.getDegree()>=(a/2|0);){let B=c,H=d;if(c=h,d=y,c.isZero())throw new Kr("r_{i-1} was zero");h=B;let X=u.getZero();const $=c.getCoefficient(c.getDegree()),ee=u.inverse($);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){const ue=h.getDegree()-c.getDegree(),ce=u.multiply(h.getCoefficient(h.getDegree()),ee);X=X.addOrSubtract(u.buildMonomial(ue,ce)),h=h.addOrSubtract(c.multiplyByMonomial(ue,ce))}if(y=X.multiply(d).addOrSubtract(H),h.getDegree()>=c.getDegree())throw new jn("Division algorithm failed to reduce polynomial?")}const x=y.getCoefficient(0);if(x===0)throw new Kr("sigmaTilde(0) was zero");const A=u.inverse(x),T=y.multiplyScalar(A),S=h.multiplyScalar(A);return[T,S]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let u=0;const c=this.field;for(let h=1;h<c.getSize()&&u<s;h++)r.evaluateAt(h)===0&&(a[u]=c.inverse(h),u++);if(u!==s)throw new Kr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,u=new Int32Array(a),c=this.field;for(let h=0;h<a;h++){const d=c.inverse(s[h]);let y=1;for(let x=0;x<a;x++)if(h!==x){const A=c.multiply(s[x],d),T=A&1?A&-2:A|1;y=c.multiply(y,T)}u[h]=c.multiply(r.evaluateAt(d),c.inverse(y)),c.getGeneratorBase()!==0&&(u[h]=c.multiply(u[h],d))}return u}}var Jt;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Jt||(Jt={}));class ut{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),u=this.correctBits(a),c=ut.convertBoolArrayToByteArray(u),h=ut.getEncodedData(u),d=new Ns(c,h,null,null);return d.setNumBits(u.length),d}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Jt.UPPER,u=Jt.UPPER,c="",h=0;for(;h<s;)if(u===Jt.BINARY){if(s-h<5)break;let d=ut.readCode(r,h,5);if(h+=5,d===0){if(s-h<11)break;d=ut.readCode(r,h,11)+31,h+=11}for(let y=0;y<d;y++){if(s-h<8){h=s;break}const x=ut.readCode(r,h,8);c+=W.castAsNonUtf8Char(x),h+=8}u=a}else{let d=u===Jt.DIGIT?4:5;if(s-h<d)break;let y=ut.readCode(r,h,d);h+=d;let x=ut.getCharacter(u,y);x.startsWith("CTRL_")?(a=u,u=ut.getTable(x.charAt(5)),x.charAt(6)==="L"&&(a=u)):(c+=x,u=a)}return c}static getTable(r){switch(r){case"L":return Jt.LOWER;case"P":return Jt.PUNCT;case"M":return Jt.MIXED;case"D":return Jt.DIGIT;case"B":return Jt.BINARY;case"U":default:return Jt.UPPER}}static getCharacter(r,s){switch(r){case Jt.UPPER:return ut.UPPER_TABLE[s];case Jt.LOWER:return ut.LOWER_TABLE[s];case Jt.MIXED:return ut.MIXED_TABLE[s];case Jt.PUNCT:return ut.PUNCT_TABLE[s];case Jt.DIGIT:return ut.DIGIT_TABLE[s];default:throw new jn("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Ge.AZTEC_DATA_10):(a=12,s=Ge.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=r.length/a;if(c<u)throw new N;let h=r.length%a,d=new Int32Array(c);for(let S=0;S<c;S++,h+=a)d[S]=ut.readCode(r,h,a);try{new Li(s).decode(d,c-u)}catch(S){throw new N(S)}let y=(1<<a)-1,x=0;for(let S=0;S<u;S++){let B=d[S];if(B===0||B===y)throw new N;(B===1||B===y-1)&&x++}let A=new Array(u*a-x),T=0;for(let S=0;S<u;S++){let B=d[S];if(B===1||B===y-1)A.fill(B>1,T,T+a-1),T+=a-1;else for(let H=a-1;H>=0;--H)A[T++]=(B&1<<H)!==0}return A}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),u=(s?11:14)+a*4,c=new Int32Array(u),h=new Array(this.totalBitsInLayer(a,s));if(s)for(let d=0;d<c.length;d++)c[d]=d;else{let d=u+1+2*M.truncDivision(M.truncDivision(u,2)-1,15),y=u/2,x=M.truncDivision(d,2);for(let A=0;A<y;A++){let T=A+M.truncDivision(A,15);c[y-A-1]=x-T-1,c[y+A]=x+T+1}}for(let d=0,y=0;d<a;d++){let x=(a-d)*4+(s?9:12),A=d*2,T=u-1-A;for(let S=0;S<x;S++){let B=S*2;for(let H=0;H<2;H++)h[y+B+H]=r.get(c[A+H],c[A+S]),h[y+2*x+B+H]=r.get(c[A+S],c[T-H]),h[y+4*x+B+H]=r.get(c[T-H],c[T-S]),h[y+6*x+B+H]=r.get(c[T-S],c[A+H])}y+=x*8}return h}static readCode(r,s,a){let u=0;for(let c=s;c<s+a;c++)u<<=1,r[c]&&(u|=1);return u}static readByte(r,s){let a=r.length-s;return a>=8?ut.readCode(r,s,8):ut.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=ut.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ze{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,u){const c=r-a,h=s-u;return Math.sqrt(c*c+h*h)}static sum(r){let s=0;for(let a=0,u=r.length;a!==u;a++){const c=r[a];s+=c}return s}}class Bi{static floatToIntBits(r){return r}}Bi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof _e){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Bi.floatToIntBits(this.x)+Bi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let c,h,d;if(a>=s&&a>=u?(h=r[0],c=r[1],d=r[2]):u>=a&&u>=s?(h=r[1],c=r[0],d=r[2]):(h=r[2],c=r[0],d=r[1]),this.crossProductZ(c,h,d)<0){const y=c;c=d,d=y}r[0]=c,r[1]=h,r[2]=d}static distance(r,s){return ze.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const u=s.x,c=s.y;return(a.x-u)*(r.y-c)-(a.y-c)*(r.x-u)}}class fo{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class go extends fo{constructor(r,s,a,u,c){super(r,s),this.compact=a,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ir{constructor(r,s,a,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=ir.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const c=s/2|0;if(this.leftInit=a-c,this.rightInit=a+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new te}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,u=this.downInit,c=!1,h=!0,d=!1,y=!1,x=!1,A=!1,T=!1;const S=this.width,B=this.height;for(;h;){h=!1;let H=!0;for(;(H||!y)&&s<S;)H=this.containsBlackPoint(a,u,s,!1),H?(s++,h=!0,y=!0):y||s++;if(s>=S){c=!0;break}let X=!0;for(;(X||!x)&&u<B;)X=this.containsBlackPoint(r,s,u,!0),X?(u++,h=!0,x=!0):x||u++;if(u>=B){c=!0;break}let $=!0;for(;($||!A)&&r>=0;)$=this.containsBlackPoint(a,u,r,!1),$?(r--,h=!0,A=!0):A||r--;if(r<0){c=!0;break}let ee=!0;for(;(ee||!T)&&a>=0;)ee=this.containsBlackPoint(r,s,a,!0),ee?(a--,h=!0,T=!0):T||a--;if(a<0){c=!0;break}h&&(d=!0)}if(!c&&d){const H=s-r;let X=null;for(let ce=1;X===null&&ce<H;ce++)X=this.getBlackPointOnSegment(r,u-ce,r+ce,u);if(X==null)throw new te;let $=null;for(let ce=1;$===null&&ce<H;ce++)$=this.getBlackPointOnSegment(r,a+ce,r+ce,a);if($==null)throw new te;let ee=null;for(let ce=1;ee===null&&ce<H;ce++)ee=this.getBlackPointOnSegment(s,a+ce,s-ce,a);if(ee==null)throw new te;let ue=null;for(let ce=1;ue===null&&ce<H;ce++)ue=this.getBlackPointOnSegment(s,u-ce,s-ce,u);if(ue==null)throw new te;return this.centerEdges(ue,X,ee,$)}else throw new te}getBlackPointOnSegment(r,s,a,u){const c=ze.round(ze.distance(r,s,a,u)),h=(a-r)/c,d=(u-s)/c,y=this.image;for(let x=0;x<c;x++){const A=ze.round(r+x*h),T=ze.round(s+x*d);if(y.get(A,T))return new _e(A,T)}return null}centerEdges(r,s,a,u){const c=r.getX(),h=r.getY(),d=s.getX(),y=s.getY(),x=a.getX(),A=a.getY(),T=u.getX(),S=u.getY(),B=ir.CORR;return c<this.width/2?[new _e(T-B,S+B),new _e(d+B,y+B),new _e(x-B,A-B),new _e(c+B,h-B)]:[new _e(T+B,S+B),new _e(d+B,y-B),new _e(x-B,A+B),new _e(c-B,h-B)]}containsBlackPoint(r,s,a,u){const c=this.image;if(u){for(let h=r;h<=s;h++)if(c.get(h,a))return!0}else for(let h=r;h<=s;h++)if(c.get(a,h))return!0;return!1}}ir.INIT_SIZE=10,ir.CORR=1;class po{static checkAndNudgePoints(r,s){const a=r.getWidth(),u=r.getHeight();let c=!0;for(let h=0;h<s.length&&c;h+=2){const d=Math.floor(s[h]),y=Math.floor(s[h+1]);if(d<-1||d>a||y<-1||y>u)throw new te;c=!1,d===-1?(s[h]=0,c=!0):d===a&&(s[h]=a-1,c=!0),y===-1?(s[h+1]=0,c=!0):y===u&&(s[h+1]=u-1,c=!0)}c=!0;for(let h=s.length-2;h>=0&&c;h-=2){const d=Math.floor(s[h]),y=Math.floor(s[h+1]);if(d<-1||d>a||y<-1||y>u)throw new te;c=!1,d===-1?(s[h]=0,c=!0):d===a&&(s[h]=a-1,c=!0),y===-1?(s[h+1]=0,c=!0):y===u&&(s[h+1]=u-1,c=!0)}}}class ct{constructor(r,s,a,u,c,h,d,y,x){this.a11=r,this.a21=s,this.a31=a,this.a12=u,this.a22=c,this.a32=h,this.a13=d,this.a23=y,this.a33=x}static quadrilateralToQuadrilateral(r,s,a,u,c,h,d,y,x,A,T,S,B,H,X,$){const ee=ct.quadrilateralToSquare(r,s,a,u,c,h,d,y);return ct.squareToQuadrilateral(x,A,T,S,B,H,X,$).times(ee)}transformPoints(r){const s=r.length,a=this.a11,u=this.a12,c=this.a13,h=this.a21,d=this.a22,y=this.a23,x=this.a31,A=this.a32,T=this.a33;for(let S=0;S<s;S+=2){const B=r[S],H=r[S+1],X=c*B+y*H+T;r[S]=(a*B+h*H+x)/X,r[S+1]=(u*B+d*H+A)/X}}transformPointsWithValues(r,s){const a=this.a11,u=this.a12,c=this.a13,h=this.a21,d=this.a22,y=this.a23,x=this.a31,A=this.a32,T=this.a33,S=r.length;for(let B=0;B<S;B++){const H=r[B],X=s[B],$=c*H+y*X+T;r[B]=(a*H+h*X+x)/$,s[B]=(u*H+d*X+A)/$}}static squareToQuadrilateral(r,s,a,u,c,h,d,y){const x=r-a+c-d,A=s-u+h-y;if(x===0&&A===0)return new ct(a-r,c-a,r,u-s,h-u,s,0,0,1);{const T=a-c,S=d-c,B=u-h,H=y-h,X=T*H-S*B,$=(x*H-S*A)/X,ee=(T*A-x*B)/X;return new ct(a-r+$*a,d-r+ee*d,r,u-s+$*u,y-s+ee*y,s,$,ee,1)}}static quadrilateralToSquare(r,s,a,u,c,h,d,y){return ct.squareToQuadrilateral(r,s,a,u,c,h,d,y).buildAdjoint()}buildAdjoint(){return new ct(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new ct(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class cn extends po{sampleGrid(r,s,a,u,c,h,d,y,x,A,T,S,B,H,X,$,ee,ue,ce){const ae=ct.quadrilateralToQuadrilateral(u,c,h,d,y,x,A,T,S,B,H,X,$,ee,ue,ce);return this.sampleGridWithTransform(r,s,a,ae)}sampleGridWithTransform(r,s,a,u){if(s<=0||a<=0)throw new te;const c=new et(s,a),h=new Float32Array(2*s);for(let d=0;d<a;d++){const y=h.length,x=d+.5;for(let A=0;A<y;A+=2)h[A]=A/2+.5,h[A+1]=x;u.transformPoints(h),po.checkAndNudgePoints(r,h);try{for(let A=0;A<y;A+=2)r.get(Math.floor(h[A]),Math.floor(h[A+1]))&&c.set(A/2,d)}catch{throw new te}}return c}}class sr{static setGridSampler(r){sr.gridSampler=r}static getInstance(){return sr.gridSampler}}sr.gridSampler=new cn;class hn{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new _e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ta{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let h=a[0];a[0]=a[2],a[2]=h}this.extractParameters(a);let u=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),c=this.getMatrixCornerPoints(a);return new go(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new te;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let u=0;for(let h=0;h<4;h++){let d=a[(this.shift+h)%4];this.compact?(u<<=7,u+=d>>1&127):(u<<=10,u+=(d>>2&992)+(d>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(r,s){let a=0;r.forEach((u,c,h)=>{let d=(u>>s-2<<1)+(u&1);a=(a<<3)+d}),a=((a&1)<<11)+(a>>1);for(let u=0;u<4;u++)if(M.bitCount(a^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new te}getCorrectedParameterData(r,s){let a,u;s?(a=7,u=2):(a=10,u=4);let c=a-u,h=new Int32Array(a);for(let y=a-1;y>=0;--y)h[y]=r&15,r>>=4;try{new Li(Ge.AZTEC_PARAM).decode(h,c)}catch{throw new te}let d=0;for(let y=0;y<u;y++)d=(d<<4)+h[y];return d}getBullsEyeCorners(r){let s=r,a=r,u=r,c=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(s,h,1,-1),S=this.getFirstDifferent(a,h,1,1),B=this.getFirstDifferent(u,h,-1,1),H=this.getFirstDifferent(c,h,-1,-1);if(this.nbCenterLayers>2){let X=this.distancePoint(H,T)*this.nbCenterLayers/(this.distancePoint(c,s)*(this.nbCenterLayers+2));if(X<.75||X>1.25||!this.isWhiteOrBlackRectangle(T,S,B,H))break}s=T,a=S,u=B,c=H,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new te;this.compact=this.nbCenterLayers===5;let d=new _e(s.getX()+.5,s.getY()-.5),y=new _e(a.getX()+.5,a.getY()+.5),x=new _e(u.getX()-.5,u.getY()+.5),A=new _e(c.getX()-.5,c.getY()-.5);return this.expandSquare([d,y,x,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,u;try{let d=new ir(this.image).detect();r=d[0],s=d[1],a=d[2],u=d[3]}catch{let y=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new hn(y+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new hn(y+7,x+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new hn(y-7,x+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new hn(y-7,x-7),!1,-1,-1).toResultPoint()}let c=ze.round((r.getX()+u.getX()+s.getX()+a.getX())/4),h=ze.round((r.getY()+u.getY()+s.getY()+a.getY())/4);try{let d=new ir(this.image,15,c,h).detect();r=d[0],s=d[1],a=d[2],u=d[3]}catch{r=this.getFirstDifferent(new hn(c+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new hn(c+7,h+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new hn(c-7,h+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new hn(c-7,h-7),!1,-1,-1).toResultPoint()}return c=ze.round((r.getX()+u.getX()+s.getX()+a.getX())/4),h=ze.round((r.getY()+u.getY()+s.getY()+a.getY())/4),new hn(c,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,u,c){let h=sr.getInstance(),d=this.getDimension(),y=d/2-this.nbCenterLayers,x=d/2+this.nbCenterLayers;return h.sampleGrid(r,d,d,y,y,x,y,x,x,y,x,s.getX(),s.getY(),a.getX(),a.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(r,s,a){let u=0,c=this.distanceResultPoint(r,s),h=c/a,d=r.getX(),y=r.getY(),x=h*(s.getX()-r.getX())/c,A=h*(s.getY()-r.getY())/c;for(let T=0;T<a;T++)this.image.get(ze.round(d+T*x),ze.round(y+T*A))&&(u|=1<<a-T-1);return u}isWhiteOrBlackRectangle(r,s,a,u){let c=3;r=new hn(r.getX()-c,r.getY()+c),s=new hn(s.getX()-c,s.getY()-c),a=new hn(a.getX()+c,a.getY()-c),u=new hn(u.getX()+c,u.getY()+c);let h=this.getColor(u,r);if(h===0)return!1;let d=this.getColor(r,s);return d!==h||(d=this.getColor(s,a),d!==h)?!1:(d=this.getColor(a,u),d===h)}getColor(r,s){let a=this.distancePoint(r,s),u=(s.getX()-r.getX())/a,c=(s.getY()-r.getY())/a,h=0,d=r.getX(),y=r.getY(),x=this.image.get(r.getX(),r.getY()),A=Math.ceil(a);for(let S=0;S<A;S++)d+=u,y+=c,this.image.get(ze.round(d),ze.round(y))!==x&&h++;let T=h/a;return T>.1&&T<.9?0:T<=.1===x?1:-1}getFirstDifferent(r,s,a,u){let c=r.getX()+a,h=r.getY()+u;for(;this.isValid(c,h)&&this.image.get(c,h)===s;)c+=a,h+=u;for(c-=a,h-=u;this.isValid(c,h)&&this.image.get(c,h)===s;)c+=a;for(c-=a;this.isValid(c,h)&&this.image.get(c,h)===s;)h+=u;return h-=u,new hn(c,h)}expandSquare(r,s,a){let u=a/(2*s),c=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),d=(r[0].getX()+r[2].getX())/2,y=(r[0].getY()+r[2].getY())/2,x=new _e(d+u*c,y+u*h),A=new _e(d-u*c,y-u*h);c=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),d=(r[1].getX()+r[3].getX())/2,y=(r[1].getY()+r[3].getY())/2;let T=new _e(d+u*c,y+u*h),S=new _e(d-u*c,y-u*h);return[x,T,A,S]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ze.round(r.getX()),a=ze.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return ze.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ze.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(M.truncDivision(this.nbLayers-4,8)+1)+15}}class mo{decode(r,s=null){let a=null,u=new Ta(r.getBlackMatrix()),c=null,h=null;try{let A=u.detectMirror(!1);c=A.getPoints(),this.reportFoundResultPoints(s,c),h=new ut().decode(A)}catch(A){a=A}if(h==null)try{let A=u.detectMirror(!0);c=A.getPoints(),this.reportFoundResultPoints(s,c),h=new ut().decode(A)}catch(A){throw a??A}let d=new yt(h.getText(),h.getRawBytes(),h.getNumBits(),c,Ae.AZTEC,z.currentTimeMillis()),y=h.getByteSegments();y!=null&&d.putMetadata(Kt.BYTE_SEGMENTS,y);let x=h.getECLevel();return x!=null&&d.putMetadata(Kt.ERROR_CORRECTION_LEVEL,x),d}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(ne.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((u,c,h)=>{a.foundPossibleResultPoint(u)})}}reset(){}}class bs extends st{constructor(r=500){super(new mo,r)}}class bt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(ne.TRY_HARDER)===!0&&r.isRotateSupported()){const c=r.rotateCounterClockwise(),h=this.doDecode(c,s),d=h.getResultMetadata();let y=270;d!==null&&d.get(Kt.ORIENTATION)===!0&&(y=y+d.get(Kt.ORIENTATION)%360),h.putMetadata(Kt.ORIENTATION,y);const x=h.getResultPoints();if(x!==null){const A=c.getHeight();for(let T=0;T<x.length;T++)x[T]=new _e(A-x[T].getY()-1,x[T].getX())}return h}else throw new te}}reset(){}doDecode(r,s){const a=r.getWidth(),u=r.getHeight();let c=new K(a);const h=s&&s.get(ne.TRY_HARDER)===!0,d=Math.max(1,u>>(h?8:5));let y;h?y=u:y=15;const x=Math.trunc(u/2);for(let A=0;A<y;A++){const T=Math.trunc((A+1)/2),S=(A&1)===0,B=x+d*(S?T:-T);if(B<0||B>=u)break;try{c=r.getBlackRow(B,c)}catch{continue}for(let H=0;H<2;H++){if(H===1&&(c.reverse(),s&&s.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const X=new Map;s.forEach(($,ee)=>X.set(ee,$)),X.delete(ne.NEED_RESULT_POINT_CALLBACK),s=X}try{const X=this.decodeRow(B,c,s);if(H===1){X.putMetadata(Kt.ORIENTATION,180);const $=X.getResultPoints();$!==null&&($[0]=new _e(a-$[0].getX()-1,$[0].getY()),$[1]=new _e(a-$[1].getX()-1,$[1].getY()))}return X}catch{}}}throw new te}static recordPattern(r,s,a){const u=a.length;for(let x=0;x<u;x++)a[x]=0;const c=r.getSize();if(s>=c)throw new te;let h=!r.get(s),d=0,y=s;for(;y<c;){if(r.get(y)!==h)a[d]++;else{if(++d===u)break;a[d]=1,h=!h}y++}if(!(d===u||d===u-1&&y===c))throw new te}static recordPatternInReverse(r,s,a){let u=a.length,c=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==c&&(u--,c=!c);if(u>=0)throw new te;bt.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const u=r.length;let c=0,h=0;for(let x=0;x<u;x++)c+=r[x],h+=s[x];if(c<h)return Number.POSITIVE_INFINITY;const d=c/h;a*=d;let y=0;for(let x=0;x<u;x++){const A=r[x],T=s[x]*d,S=A>T?A-T:T-A;if(S>a)return Number.POSITIVE_INFINITY;y+=S}return y/c}}class fe extends bt{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),h=a,d=!1;const y=6;for(let x=a;x<s;x++)if(r.get(x)!==d)c[u]++;else{if(u===y-1){let A=fe.MAX_AVG_VARIANCE,T=-1;for(let S=fe.CODE_START_A;S<=fe.CODE_START_C;S++){const B=bt.patternMatchVariance(c,fe.CODE_PATTERNS[S],fe.MAX_INDIVIDUAL_VARIANCE);B<A&&(A=B,T=S)}if(T>=0&&r.isRange(Math.max(0,h-(x-h)/2),h,!1))return Int32Array.from([h,x,T]);h+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,d=!d}throw new te}static decodeCode(r,s,a){bt.recordPattern(r,a,s);let u=fe.MAX_AVG_VARIANCE,c=-1;for(let h=0;h<fe.CODE_PATTERNS.length;h++){const d=fe.CODE_PATTERNS[h],y=this.patternMatchVariance(s,d,fe.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,c=h)}if(c>=0)return c;throw new te}decodeRow(r,s,a){const u=a&&a.get(ne.ASSUME_GS1)===!0,c=fe.findStartPattern(s),h=c[2];let d=0;const y=new Uint8Array(20);y[d++]=h;let x;switch(h){case fe.CODE_START_A:x=fe.CODE_CODE_A;break;case fe.CODE_START_B:x=fe.CODE_CODE_B;break;case fe.CODE_START_C:x=fe.CODE_CODE_C;break;default:throw new N}let A=!1,T=!1,S="",B=c[0],H=c[1];const X=Int32Array.from([0,0,0,0,0,0]);let $=0,ee=0,ue=h,ce=0,ae=!0,He=!1,Be=!1;for(;!A;){const vo=T;switch(T=!1,$=ee,ee=fe.decodeCode(s,X,H),y[d++]=ee,ee!==fe.CODE_STOP&&(ae=!0),ee!==fe.CODE_STOP&&(ce++,ue+=ce*ee),B=H,H+=X.reduce((Mx,kx)=>Mx+kx,0),ee){case fe.CODE_START_A:case fe.CODE_START_B:case fe.CODE_START_C:throw new N}switch(x){case fe.CODE_CODE_A:if(ee<64)Be===He?S+=String.fromCharCode(32+ee):S+=String.fromCharCode(32+ee+128),Be=!1;else if(ee<96)Be===He?S+=String.fromCharCode(ee-64):S+=String.fromCharCode(ee+64),Be=!1;else switch(ee!==fe.CODE_STOP&&(ae=!1),ee){case fe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_A:!He&&Be?(He=!0,Be=!1):He&&Be?(He=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:T=!0,x=fe.CODE_CODE_B;break;case fe.CODE_CODE_B:x=fe.CODE_CODE_B;break;case fe.CODE_CODE_C:x=fe.CODE_CODE_C;break;case fe.CODE_STOP:A=!0;break}break;case fe.CODE_CODE_B:if(ee<96)Be===He?S+=String.fromCharCode(32+ee):S+=String.fromCharCode(32+ee+128),Be=!1;else switch(ee!==fe.CODE_STOP&&(ae=!1),ee){case fe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_B:!He&&Be?(He=!0,Be=!1):He&&Be?(He=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:T=!0,x=fe.CODE_CODE_A;break;case fe.CODE_CODE_A:x=fe.CODE_CODE_A;break;case fe.CODE_CODE_C:x=fe.CODE_CODE_C;break;case fe.CODE_STOP:A=!0;break}break;case fe.CODE_CODE_C:if(ee<100)ee<10&&(S+="0"),S+=ee;else switch(ee!==fe.CODE_STOP&&(ae=!1),ee){case fe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case fe.CODE_CODE_A:x=fe.CODE_CODE_A;break;case fe.CODE_CODE_B:x=fe.CODE_CODE_B;break;case fe.CODE_STOP:A=!0;break}break}vo&&(x=x===fe.CODE_CODE_A?fe.CODE_CODE_B:fe.CODE_CODE_A)}const Kn=H-B;if(H=s.getNextUnset(H),!s.isRange(H,Math.min(s.getSize(),H+(H-B)/2),!1))throw new te;if(ue-=ce*$,ue%103!==$)throw new L;const Br=S.length;if(Br===0)throw new te;Br>0&&ae&&(x===fe.CODE_CODE_C?S=S.substring(0,Br-2):S=S.substring(0,Br-1));const qn=(c[1]+c[0])/2,dt=B+Kn/2,En=y.length,fr=new Uint8Array(En);for(let vo=0;vo<En;vo++)fr[vo]=y[vo];const Co=[new _e(qn,r),new _e(dt,r)];return new yt(S,fr,0,Co,Ae.CODE_128,new Date().getTime())}}fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],fe.MAX_AVG_VARIANCE=.25,fe.MAX_INDIVIDUAL_VARIANCE=.7,fe.CODE_SHIFT=98,fe.CODE_CODE_C=99,fe.CODE_CODE_B=100,fe.CODE_CODE_A=101,fe.CODE_FNC_1=102,fe.CODE_FNC_2=97,fe.CODE_FNC_3=96,fe.CODE_FNC_4_A=101,fe.CODE_FNC_4_B=100,fe.CODE_START_A=103,fe.CODE_START_B=104,fe.CODE_START_C=105,fe.CODE_STOP=106;class Dt extends bt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=Dt.findAsteriskPattern(s,u),h=s.getNextSet(c[1]),d=s.getSize(),y,x;do{Dt.recordPattern(s,h,u);let X=Dt.toNarrowWidePattern(u);if(X<0)throw new te;y=Dt.patternToChar(X),this.decodeRowResult+=y,x=h;for(let $ of u)h+=$;h=s.getNextSet(h)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let A=0;for(let X of u)A+=X;let T=h-x-A;if(h!==d&&T*2<A)throw new te;if(this.usingCheckDigit){let X=this.decodeRowResult.length-1,$=0;for(let ee=0;ee<X;ee++)$+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ee));if(this.decodeRowResult.charAt(X)!==Dt.ALPHABET_STRING.charAt($%43))throw new L;this.decodeRowResult=this.decodeRowResult.substring(0,X)}if(this.decodeRowResult.length===0)throw new te;let S;this.extendedMode?S=Dt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let B=(c[1]+c[0])/2,H=x+A/2;return new yt(S,null,0,[new _e(B,r),new _e(H,r)],Ae.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),u=r.getNextSet(0),c=0,h=u,d=!1,y=s.length;for(let x=u;x<a;x++)if(r.get(x)!==d)s[c]++;else{if(c===y-1){if(this.toNarrowWidePattern(s)===Dt.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((x-h)/2)),h,!1))return[h,x];h+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,d=!d}throw new te}static toNarrowWidePattern(r){let s=r.length,a=0,u;do{let c=2147483647;for(let y of r)y<c&&y>a&&(c=y);a=c,u=0;let h=0,d=0;for(let y=0;y<s;y++){let x=r[y];x>a&&(d|=1<<s-1-y,u++,h+=x)}if(u===3){for(let y=0;y<s&&u>0;y++){let x=r[y];if(x>a&&(u--,x*2>=h))return-1}return d}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<Dt.CHARACTER_ENCODINGS.length;s++)if(Dt.CHARACTER_ENCODINGS[s]===r)return Dt.ALPHABET_STRING.charAt(s);if(r===Dt.ASTERISK_ENCODING)return"*";throw new te}static decodeExtended(r){let s=r.length,a="";for(let u=0;u<s;u++){let c=r.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let h=r.charAt(u+1),d="\0";switch(c){case"+":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)+32);else throw new N;break;case"$":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)-64);else throw new N;break;case"%":if(h>="A"&&h<="E")d=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")d=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")d=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")d="\0";else if(h==="V")d="@";else if(h==="W")d="`";else if(h==="X"||h==="Y"||h==="Z")d="";else throw new N;break;case"/":if(h>="A"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")d=":";else throw new N;break}a+=d,u++}else a+=c}return a}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class ot extends bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let u=this.decodeStart(s),c=this.decodeEnd(s),h=new V;ot.decodeMiddle(s,u[1],c[0],h);let d=h.toString(),y=null;a!=null&&(y=a.get(ne.ALLOWED_LENGTHS)),y==null&&(y=ot.DEFAULT_ALLOWED_LENGTHS);let x=d.length,A=!1,T=0;for(let H of y){if(x===H){A=!0;break}H>T&&(T=H)}if(!A&&x>T&&(A=!0),!A)throw new N;const S=[new _e(u[1],r),new _e(c[0],r)];return new yt(d,null,0,S,Ae.ITF,new Date().getTime())}static decodeMiddle(r,s,a,u){let c=new Int32Array(10),h=new Int32Array(5),d=new Int32Array(5);for(c.fill(0),h.fill(0),d.fill(0);s<a;){bt.recordPattern(r,s,c);for(let x=0;x<5;x++){let A=2*x;h[x]=c[A],d[x]=c[A+1]}let y=ot.decodeDigit(h);u.append(y.toString()),y=this.decodeDigit(d),u.append(y.toString()),c.forEach(function(x){s+=x})}}decodeStart(r){let s=ot.skipWhiteSpace(r),a=ot.findGuardPattern(r,s,ot.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let u=s-1;a>0&&u>=0&&!r.get(u);u--)a--;if(a!==0)throw new te}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new te;return a}decodeEnd(r){r.reverse();try{let s=ot.skipWhiteSpace(r),a;try{a=ot.findGuardPattern(r,s,ot.END_PATTERN_REVERSED[0])}catch(c){c instanceof te&&(a=ot.findGuardPattern(r,s,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let u=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-u,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let u=a.length,c=new Int32Array(u),h=r.getSize(),d=!1,y=0,x=s;c.fill(0);for(let A=s;A<h;A++)if(r.get(A)!==d)c[y]++;else{if(y===u-1){if(bt.patternMatchVariance(c,a,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[x,A];x+=c[0]+c[1],z.arraycopy(c,2,c,0,y-1),c[y-1]=0,c[y]=0,y--}else y++;c[y]=1,d=!d}throw new te}static decodeDigit(r){let s=ot.MAX_AVG_VARIANCE,a=-1,u=ot.PATTERNS.length;for(let c=0;c<u;c++){let h=ot.PATTERNS[c],d=bt.patternMatchVariance(r,h,ot.MAX_INDIVIDUAL_VARIANCE);d<s?(s=d,a=c):d===s&&(a=-1)}if(a>=0)return a%10;throw new te}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,u=0,c=Int32Array.from([0,0,0]);for(;!s;){c=Int32Array.from([0,0,0]),a=Tt.findGuardPattern(r,u,!1,this.START_END_PATTERN,c);let h=a[0];u=a[1];let d=h-(u-h);d>=0&&(s=r.isRange(d,h,!1))}return a}static checkChecksum(r){return Tt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Tt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let u=s-1;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new N;a+=c}a*=3;for(let u=s-2;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new N;a+=c}return(1e3-a)%10}static decodeEnd(r,s){return Tt.findGuardPattern(r,s,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,u){return this.findGuardPattern(r,s,a,u,new Int32Array(u.length))}static findGuardPattern(r,s,a,u,c){let h=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let d=0,y=s,x=u.length,A=a;for(let T=s;T<h;T++)if(r.get(T)!==A)c[d]++;else{if(d===x-1){if(bt.patternMatchVariance(c,u,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([y,T]);y+=c[0]+c[1];let S=c.slice(2,c.length-1);for(let B=0;B<d-1;B++)c[B]=S[B];c[d-1]=0,c[d]=0,d--}else d++;c[d]=1,A=!A}throw new te}static decodeDigit(r,s,a,u){this.recordPattern(r,a,s);let c=this.MAX_AVG_VARIANCE,h=-1,d=u.length;for(let y=0;y<d;y++){let x=u[y],A=bt.patternMatchVariance(s,x,Tt.MAX_INDIVIDUAL_VARIANCE);A<c&&(c=A,h=y)}if(h>=0)return h;throw new te}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class di{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(s,a,u),h=u.toString(),d=di.parseExtensionString(h),y=[new _e((a[0]+a[1])/2,r),new _e(c,r)],x=new yt(h,null,0,y,Ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&x.putAllMetadata(d),x}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1],d=0;for(let x=0;x<5&&h<c;x++){let A=Tt.decodeDigit(r,u,h,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let T of u)h+=T;A>=10&&(d|=1<<4-x),x!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==5)throw new te;let y=this.determineCheckDigit(d);if(di.extensionChecksum(a.toString())!==y)throw new te;return h}static extensionChecksum(r){let s=r.length,a=0;for(let u=s-2;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;a*=3;for(let u=s-1;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new te}static parseExtensionString(r){if(r.length!==5)return null;let s=di.parseExtension5String(r);return s==null?null:new Map([[Kt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),u=(a/100).toString(),c=a%100,h=c<10?"0"+c:c.toString();return s+u+"."+h}}class yo{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(s,a,u),h=u.toString(),d=yo.parseExtensionString(h),y=[new _e((a[0]+a[1])/2,r),new _e(c,r)],x=new yt(h,null,0,y,Ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&x.putAllMetadata(d),x}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1],d=0;for(let y=0;y<2&&h<c;y++){let x=Tt.decodeDigit(r,u,h,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);for(let A of u)h+=A;x>=10&&(d|=1<<1-y),y!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==2)throw new te;if(parseInt(a.toString())%4!==d)throw new te;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[Kt.ISSUE_NUMBER,parseInt(r)]])}}class Sa{static decodeRow(r,s,a){let u=Tt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new di().decodeRow(r,s,u)}catch{return new yo().decodeRow(r,s,u)}}}Sa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ve extends Tt{constructor(){super(),this.decodeRowStringBuffer="",Ve.L_AND_G_PATTERNS=Ve.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Ve.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let u=0;u<s.length;u++)a[u]=s[s.length-u-1];Ve.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let u=Ve.findStartGuardPattern(s),c=a==null?null:a.get(ne.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ae=new _e((u[0]+u[1])/2,r);c.foundPossibleResultPoint(ae)}let h=this.decodeMiddle(s,u,this.decodeRowStringBuffer),d=h.rowOffset,y=h.resultString;if(c!=null){const ae=new _e(d,r);c.foundPossibleResultPoint(ae)}let x=this.decodeEnd(s,d);if(c!=null){const ae=new _e((x[0]+x[1])/2,r);c.foundPossibleResultPoint(ae)}let A=x[1],T=A+(A-x[0]);if(T>=s.getSize()||!s.isRange(A,T,!1))throw new te;let S=y.toString();if(S.length<8)throw new N;if(!Ve.checkChecksum(S))throw new L;let B=(u[1]+u[0])/2,H=(x[1]+x[0])/2,X=this.getBarcodeFormat(),$=[new _e(B,r),new _e(H,r)],ee=new yt(S,null,0,$,X,new Date().getTime()),ue=0;try{let ae=Sa.decodeRow(r,s,x[1]);ee.putMetadata(Kt.UPC_EAN_EXTENSION,ae.getText()),ee.putAllMetadata(ae.getResultMetadata()),ee.addResultPoints(ae.getResultPoints()),ue=ae.getText().length}catch{}let ce=a==null?null:a.get(ne.ALLOWED_EAN_EXTENSIONS);if(ce!=null){let ae=!1;for(let He in ce)if(ue.toString()===He){ae=!0;break}if(!ae)throw new te}return ee}decodeEnd(r,s){return Ve.findGuardPattern(r,s,!1,Ve.START_END_PATTERN,new Int32Array(Ve.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Ve.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Ve.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let u=s-1;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new N;a+=c}a*=3;for(let u=s-2;u>=0;u-=2){let c=r.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new N;a+=c}return(1e3-a)%10}}class Or extends Ve{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1],d=0;for(let x=0;x<6&&h<c;x++){let A=Ve.decodeDigit(r,u,h,Ve.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let T of u)h+=T;A>=10&&(d|=1<<5-x)}a=Or.determineFirstDigit(a,d),h=Ve.findGuardPattern(r,h,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&h<c;x++){let A=Ve.decodeDigit(r,u,h,Ve.L_PATTERNS);a+=String.fromCharCode(48+A);for(let T of u)h+=T}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return Ae.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new te}}Or.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class wo extends Ve{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h=s[1];for(let y=0;y<4&&h<c;y++){let x=Ve.decodeDigit(r,u,h,Ve.L_PATTERNS);a+=String.fromCharCode(48+x);for(let A of u)h+=A}h=Ve.findGuardPattern(r,h,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&h<c;y++){let x=Ve.decodeDigit(r,u,h,Ve.L_PATTERNS);a+=String.fromCharCode(48+x);for(let A of u)h+=A}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return Ae.EAN_8}}class qr extends Ve{constructor(){super(...arguments),this.ean13Reader=new Or}getBarcodeFormat(){return Ae.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new yt(s.substring(1),null,null,r.getResultPoints(),Ae.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new te}reset(){this.ean13Reader.reset()}}class Hn extends Ve{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const u=this.decodeMiddleCounters.map(x=>x);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=r.getSize();let h=s[1],d=0;for(let x=0;x<6&&h<c;x++){const A=Hn.decodeDigit(r,u,h,Hn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let T of u)h+=T;A>=10&&(d|=1<<5-x)}let y=Hn.determineNumSysAndCheckDigit(a,d);return{rowOffset:h,resultString:y}}decodeEnd(r,s){return Hn.findGuardPatternWithoutCounters(r,s,!0,Hn.MIDDLE_END_PATTERN)}checkChecksum(r){return Ve.checkChecksum(Hn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][u]){let c=String.fromCharCode(48+a),h=String.fromCharCode(48+u);return c+r+h}throw te.getNotFoundInstance()}getBarcodeFormat(){return Ae.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(c=>c.charCodeAt(0)),a=new V;a.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(u),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(u);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}Hn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Hn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Fi extends bt{constructor(r){super();let s=r==null?null:r.get(ne.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new Or),a.push(new qr),a.push(new wo),a.push(new Hn)):(s.indexOf(Ae.EAN_13)>-1&&a.push(new Or),s.indexOf(Ae.UPC_A)>-1&&a.push(new qr),s.indexOf(Ae.EAN_8)>-1&&a.push(new wo),s.indexOf(Ae.UPC_E)>-1&&a.push(new Hn)),this.readers=a}decodeRow(r,s,a){for(let u of this.readers)try{const c=u.decodeRow(r,s,a),h=c.getBarcodeFormat()===Ae.EAN_13&&c.getText().charAt(0)==="0",d=a==null?null:a.get(ne.POSSIBLE_FORMATS),y=d==null||d.includes(Ae.UPC_A);if(h&&y){const x=c.getRawBytes(),A=new yt(c.getText().substring(1),x,x?x.length:null,c.getResultPoints(),Ae.UPC_A);return A.putAllMetadata(c.getResultMetadata()),A}return c}catch{}throw new te}reset(){for(let r of this.readers)r.reset()}}class en extends bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(bt.patternMatchVariance(r,s[a],en.MAX_INDIVIDUAL_VARIANCE)<en.MAX_AVG_VARIANCE)return a;throw new te}static count(r){return ze.sum(new Int32Array(r))}static increment(r,s){let a=0,u=s[0];for(let c=1;c<r.length;c++)s[c]>u&&(u=s[c],a=c);r[a]++}static decrement(r,s){let a=0,u=s[0];for(let c=1;c<r.length;c++)s[c]<u&&(u=s[c],a=c);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],u=s/a;if(u>=en.MIN_FINDER_PATTERN_RATIO&&u<=en.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d of r)d>h&&(h=d),d<c&&(c=d);return h<10*c}return!1}}en.MAX_AVG_VARIANCE=.2,en.MAX_INDIVIDUAL_VARIANCE=.45,en.MIN_FINDER_PATTERN_RATIO=9.5/12,en.MAX_FINDER_PATTERN_RATIO=12.5/14;class Cr{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Cr))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ds{constructor(r,s,a,u,c){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new _e(a,c)),this.resultPoints.push(new _e(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ds))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class pt{constructor(){}static getRSSvalue(r,s,a){let u=0;for(let y of r)u+=y;let c=0,h=0,d=r.length;for(let y=0;y<d-1;y++){let x;for(x=1,h|=1<<y;x<r[y];x++,h&=~(1<<y)){let A=pt.combins(u-x-1,d-y-2);if(a&&h===0&&u-x-(d-y-1)>=d-y-1&&(A-=pt.combins(u-x-(d-y),d-y-2)),d-y-1>1){let T=0;for(let S=u-x-(d-y-2);S>s;S--)T+=pt.combins(u-x-S-1,d-y-3);A-=T*(d-1-y)}else u-x>s&&A--;c+=A}u-=x}return c}static combins(r,s){let a,u;r-s>s?(u=s,a=r-s):(u=r-s,a=s);let c=1,h=1;for(let d=r;d>a;d--)c*=d,h<=u&&(c/=h,h++);for(;h<=u;)c/=h,h++;return c}}class Jl{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,u=new K(a),c=0,d=r[0].getRightChar().getValue();for(let y=11;y>=0;--y)d&1<<y&&u.set(c),c++;for(let y=1;y<r.length;++y){let x=r[y],A=x.getLeftChar().getValue();for(let T=11;T>=0;--T)A&1<<T&&u.set(c),c++;if(x.getRightChar()!=null){let T=x.getRightChar().getValue();for(let S=11;S>=0;--S)T&1<<S&&u.set(c),c++}}return u}}class or{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class gi{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Sn extends gi{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Sn.FNC1}}Sn.FNC1="$";class pi extends gi{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class tn extends gi{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new N;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===tn.FNC1}isSecondDigitFNC1(){return this.secondDigit===tn.FNC1}isAnyFNC1(){return this.firstDigit===tn.FNC1||this.secondDigit===tn.FNC1}}tn.FNC1=10;class ye{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new te;let s=r.substring(0,2);for(let c of ye.TWO_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(2,c[2],r):ye.processFixedAI(2,c[1],r);if(r.length<3)throw new te;let a=r.substring(0,3);for(let c of ye.THREE_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(3,c[2],r):ye.processFixedAI(3,c[1],r);for(let c of ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(4,c[2],r):ye.processFixedAI(4,c[1],r);if(r.length<4)throw new te;let u=r.substring(0,4);for(let c of ye.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(4,c[2],r):ye.processFixedAI(4,c[1],r);throw new te}static processFixedAI(r,s,a){if(a.length<r)throw new te;let u=a.substring(0,r);if(a.length<r+s)throw new te;let c=a.substring(r,r+s),h=a.substring(r+s),d="("+u+")"+c,y=ye.parseFieldsInGeneralPurpose(h);return y==null?d:d+y}static processVariableAI(r,s,a){let u=a.substring(0,r),c;a.length<r+s?c=a.length:c=r+s;let h=a.substring(r,c),d=a.substring(c),y="("+u+")"+h,x=ye.parseFieldsInGeneralPurpose(d);return x==null?y:y+x}}ye.VARIABLE_LENGTH=[],ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ye.VARIABLE_LENGTH,20],["22",ye.VARIABLE_LENGTH,29],["30",ye.VARIABLE_LENGTH,8],["37",ye.VARIABLE_LENGTH,8],["90",ye.VARIABLE_LENGTH,30],["91",ye.VARIABLE_LENGTH,30],["92",ye.VARIABLE_LENGTH,30],["93",ye.VARIABLE_LENGTH,30],["94",ye.VARIABLE_LENGTH,30],["95",ye.VARIABLE_LENGTH,30],["96",ye.VARIABLE_LENGTH,30],["97",ye.VARIABLE_LENGTH,3],["98",ye.VARIABLE_LENGTH,30],["99",ye.VARIABLE_LENGTH,30]],ye.THREE_DIGIT_DATA_LENGTH=[["240",ye.VARIABLE_LENGTH,30],["241",ye.VARIABLE_LENGTH,30],["242",ye.VARIABLE_LENGTH,6],["250",ye.VARIABLE_LENGTH,30],["251",ye.VARIABLE_LENGTH,30],["253",ye.VARIABLE_LENGTH,17],["254",ye.VARIABLE_LENGTH,20],["400",ye.VARIABLE_LENGTH,30],["401",ye.VARIABLE_LENGTH,30],["402",17],["403",ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ye.VARIABLE_LENGTH,20],["421",ye.VARIABLE_LENGTH,15],["422",3],["423",ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ye.VARIABLE_LENGTH,15],["391",ye.VARIABLE_LENGTH,18],["392",ye.VARIABLE_LENGTH,15],["393",ye.VARIABLE_LENGTH,18],["703",ye.VARIABLE_LENGTH,30]],ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ye.VARIABLE_LENGTH,20],["8003",ye.VARIABLE_LENGTH,30],["8004",ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ye.VARIABLE_LENGTH,30],["8008",ye.VARIABLE_LENGTH,12],["8018",18],["8020",ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ye.VARIABLE_LENGTH,70],["8200",ye.VARIABLE_LENGTH,70]];class Vi{constructor(r){this.buffer=new V,this.information=r}decodeAllCodes(r,s){let a=s,u=null;do{let c=this.decodeGeneralPurposeField(a,u),h=ye.parseFieldsInGeneralPurpose(c.getNewString());if(h!=null&&r.append(h),c.isRemaining()?u=""+c.getRemainingValue():u=null,a===c.getNewPosition())break;a=c.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(r,4);return c===0?new tn(this.information.getSize(),tn.FNC1,tn.FNC1):new tn(this.information.getSize(),c-1,tn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,u=(s-8)%11;return new tn(r+7,a,u)}extractNumericValueFromBitArray(r,s){return Vi.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let u=0;for(let c=0;c<a;++c)r.get(s+c)&&(u|=1<<a-c-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new pi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new pi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new pi(this.current.getPosition(),this.buffer.toString()):s=new pi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new or(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new or(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new or(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new or(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new or(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new or(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new or(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Sn(r+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new Sn(r+7,""+(a+1));if(a>=90&&a<116)return new Sn(r+7,""+(a+7));let u=this.extractNumericValueFromBitArray(r,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new N}return new Sn(r+8,c)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Sn(r+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new Sn(r+6,""+(a+33));let u;switch(a){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new jn("Decoding invalid alphanumeric value: "+a)}return new Sn(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Ui{constructor(r){this.information=r,this.generalDecoder=new Vi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends Ui{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);c/100===0&&r.append("0"),c/10===0&&r.append("0"),r.append(c)}wn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let u=0;u<13;u++){let c=r.charAt(u+s).charCodeAt(0)-48;a+=u&1?c:3*c}a=10-a%10,a===10&&(a=0),r.append(a)}}wn.GTIN_SIZE=40;class Yr extends wn{constructor(r){super(r)}parseInformation(){let r=new V;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Yr.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Yr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Yr.HEADER_SIZE+44)}}Yr.HEADER_SIZE=4;class mi extends Ui{constructor(r){super(r)}parseInformation(){let r=new V;return this.getGeneralDecoder().decodeAllCodes(r,mi.HEADER_SIZE)}}mi.HEADER_SIZE=5;class ar extends wn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,u);let c=this.checkWeight(u),h=1e5;for(let d=0;d<5;++d)c/h===0&&r.append("0"),h/=10;r.append(c)}}class lr extends ar{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=lr.HEADER_SIZE+ar.GTIN_SIZE+lr.WEIGHT_SIZE)throw new te;let r=new V;return this.encodeCompressedGtin(r,lr.HEADER_SIZE),this.encodeCompressedWeight(r,lr.HEADER_SIZE+ar.GTIN_SIZE,lr.WEIGHT_SIZE),r.toString()}}lr.HEADER_SIZE=5,lr.WEIGHT_SIZE=15;class eu extends lr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Ra extends lr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Wn extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Wn.HEADER_SIZE+wn.GTIN_SIZE)throw new te;let r=new V;this.encodeCompressedGtin(r,Wn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Wn.HEADER_SIZE+wn.GTIN_SIZE,Wn.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Wn.HEADER_SIZE+wn.GTIN_SIZE+Wn.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Wn.HEADER_SIZE=8,Wn.LAST_DIGIT_SIZE=2;class fn extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<fn.HEADER_SIZE+wn.GTIN_SIZE)throw new te;let r=new V;this.encodeCompressedGtin(r,fn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+wn.GTIN_SIZE,fn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+wn.GTIN_SIZE+fn.LAST_DIGIT_SIZE,fn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let u=this.getGeneralDecoder().decodeGeneralPurposeField(fn.HEADER_SIZE+wn.GTIN_SIZE+fn.LAST_DIGIT_SIZE+fn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}fn.HEADER_SIZE=8,fn.LAST_DIGIT_SIZE=2,fn.FIRST_THREE_DIGITS_SIZE=10;class ft extends ar{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE+ft.DATE_SIZE)throw new te;let r=new V;return this.encodeCompressedGtin(r,ft.HEADER_SIZE),this.encodeCompressedWeight(r,ft.HEADER_SIZE+ft.GTIN_SIZE,ft.WEIGHT_SIZE),this.encodeCompressedDate(r,ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ft.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=a%32;a/=32;let c=a%12+1;a/=12;let h=a;h/10==0&&r.append("0"),r.append(h),c/10==0&&r.append("0"),r.append(c),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ft.HEADER_SIZE=8,ft.WEIGHT_SIZE=20,ft.DATE_SIZE=16;function tu(I){try{if(I.get(1))return new Yr(I);if(!I.get(2))return new mi(I);switch(Vi.extractNumericValueFromBitArray(I,1,4)){case 4:return new eu(I);case 5:return new Ra(I)}switch(Vi.extractNumericValueFromBitArray(I,1,5)){case 12:return new Wn(I);case 13:return new fn(I)}switch(Vi.extractNumericValueFromBitArray(I,1,7)){case 56:return new ft(I,"310","11");case 57:return new ft(I,"320","11");case 58:return new ft(I,"310","13");case 59:return new ft(I,"320","13");case 60:return new ft(I,"310","15");case 61:return new ft(I,"320","15");case 62:return new ft(I,"310","17");case 63:return new ft(I,"320","17")}}catch(r){throw console.log(r),new jn("unknown decoder: "+I)}}class ur{constructor(r,s,a,u){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof ur?ur.equalsOrNull(r.leftchar,s.leftchar)&&ur.equalsOrNull(r.rightchar,s.rightchar)&&ur.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:ur.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class xo{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof xo?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((u,c)=>{s.forEach(h=>{u.getLeftChar().getValue()===h.getLeftChar().getValue()&&u.getRightChar().getValue()===h.getRightChar().getValue()&&u.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(a=!0)})}),a}}class se extends en{constructor(r){super(...arguments),this.pairs=new Array(se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return se.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,se.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(c){if(c instanceof te){if(!this.pairs.length)throw new te;a=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new te}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let u=this.rows[a];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(u.getPairs()),!se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(r);c.push(u);try{return this.checkRows(c,a+1)}catch(h){this.verbose&&console.log(h)}}throw new te}static isValidSequence(r){for(let s of se.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,u=!1,c=!1;for(;a<this.rows.length;){let h=this.rows[a];if(h.getRowNumber()>r){c=h.isEquivalent(this.pairs);break}u=h.isEquivalent(this.pairs),a++}c||u||se.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new xo(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let u of a.getPairs())for(let c of r)if(ur.equals(u,c))break}}static isPartialRow(r,s){for(let a of s){let u=!0;for(let c of r){let h=!1;for(let d of a.getPairs())if(c.equals(d)){h=!0;break}if(!h){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Jl.buildBitArray(r),u=tu(s).parseInformation(),c=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),d=[c[0],c[1],h[0],h[1]];return new yt(u,null,null,d,Ae.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let u=a.getChecksumPortion(),c=2;for(let d=1;d<this.pairs.size();++d){let y=this.pairs.get(d);u+=y.getLeftChar().getChecksumPortion(),c++;let x=y.getRightChar();x!=null&&(u+=x.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let u=s.length%2==0;this.startFromEven&&(u=!u);let c,h=!0,d=-1;do this.findNextPair(r,s,d),c=this.parseFoundFinderPattern(r,a,u),c==null?d=se.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let y=this.decodeDataCharacter(r,c,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new te;let x;try{x=this.decodeDataCharacter(r,c,u,!1)}catch(A){x=null,this.verbose&&console.log(A)}return new ur(y,x,c,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=r.getSize(),h;a>=0?h=a:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let d=s.length%2!=0;this.startFromEven&&(d=!d);let y=!1;for(;h<c&&(y=!r.get(h),!!y);)h++;let x=0,A=h;for(let T=h;T<c;T++)if(r.get(T)!=y)u[x]++;else{if(x==3){if(d&&se.reverseCounters(u),se.isFinderPattern(u)){this.startEnd[0]=A,this.startEnd[1]=T;return}d&&se.reverseCounters(u),A+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,x--}else x++;u[x]=1,y=!y}throw new te}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let u=r[a];r[a]=r[s-a-1],r[s-a-1]=u}}parseFoundFinderPattern(r,s,a){let u,c,h;if(a){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,u=this.startEnd[0]-x,c=x,h=this.startEnd[1]}else c=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),u=h-this.startEnd[1];let d=this.getDecodeFinderCounters();z.arraycopy(d,0,d,1,d.length-1),d[0]=u;let y;try{y=this.parseFinderValue(d,se.FINDER_PATTERNS)}catch{return null}return new Ds(y,[c,h],c,h,s)}decodeDataCharacter(r,s,a,u){let c=this.getDataCharacterCounters();for(let dt=0;dt<c.length;dt++)c[dt]=0;if(u)se.recordPatternInReverse(r,s.getStartEnd()[0],c);else{se.recordPattern(r,s.getStartEnd()[1],c);for(let dt=0,En=c.length-1;dt<En;dt++,En--){let fr=c[dt];c[dt]=c[En],c[En]=fr}}let h=17,d=ze.sum(new Int32Array(c))/h,y=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(d-y)/y>.3)throw new te;let x=this.getOddCounts(),A=this.getEvenCounts(),T=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let dt=0;dt<c.length;dt++){let En=1*c[dt]/d,fr=En+.5;if(fr<1){if(En<.3)throw new te;fr=1}else if(fr>8){if(En>8.7)throw new te;fr=8}let Co=dt/2;dt&1?(A[Co]=fr,S[Co]=En-fr):(x[Co]=fr,T[Co]=En-fr)}this.adjustOddEvenCounts(h);let B=4*s.getValue()+(a?0:2)+(u?0:1)-1,H=0,X=0;for(let dt=x.length-1;dt>=0;dt--){if(se.isNotA1left(s,a,u)){let En=se.WEIGHTS[B][2*dt];X+=x[dt]*En}H+=x[dt]}let $=0;for(let dt=A.length-1;dt>=0;dt--)if(se.isNotA1left(s,a,u)){let En=se.WEIGHTS[B][2*dt+1];$+=A[dt]*En}let ee=X+$;if(H&1||H>13||H<4)throw new te;let ue=(13-H)/2,ce=se.SYMBOL_WIDEST[ue],ae=9-ce,He=pt.getRSSvalue(x,ce,!0),Be=pt.getRSSvalue(A,ae,!1),Kn=se.EVEN_TOTAL_SUBSET[ue],Br=se.GSUM[ue],qn=He*Kn+Be+Br;return new Cr(qn,ee)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=ze.sum(new Int32Array(this.getOddCounts())),a=ze.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;s>13?c=!0:s<4&&(u=!0);let h=!1,d=!1;a>13?d=!0:a<4&&(h=!0);let y=s+a-r,x=(s&1)==1,A=(a&1)==0;if(y==1)if(x){if(A)throw new te;c=!0}else{if(!A)throw new te;d=!0}else if(y==-1)if(x){if(A)throw new te;u=!0}else{if(!A)throw new te;h=!0}else if(y==0){if(x){if(!A)throw new te;s<a?(u=!0,d=!0):(c=!0,h=!0)}else if(A)throw new te}else throw new te;if(u){if(c)throw new te;se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new te;se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}se.SYMBOL_WIDEST=[7,5,4,3,1],se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],se.GSUM=[0,348,1388,2948,3988],se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],se.FINDER_PAT_A=0,se.FINDER_PAT_B=1,se.FINDER_PAT_C=2,se.FINDER_PAT_D=3,se.FINDER_PAT_E=4,se.FINDER_PAT_F=5,se.FINDER_PATTERN_SEQUENCES=[[se.FINDER_PAT_A,se.FINDER_PAT_A],[se.FINDER_PAT_A,se.FINDER_PAT_B,se.FINDER_PAT_B],[se.FINDER_PAT_A,se.FINDER_PAT_C,se.FINDER_PAT_B,se.FINDER_PAT_D],[se.FINDER_PAT_A,se.FINDER_PAT_E,se.FINDER_PAT_B,se.FINDER_PAT_D,se.FINDER_PAT_C],[se.FINDER_PAT_A,se.FINDER_PAT_E,se.FINDER_PAT_B,se.FINDER_PAT_D,se.FINDER_PAT_D,se.FINDER_PAT_F],[se.FINDER_PAT_A,se.FINDER_PAT_E,se.FINDER_PAT_B,se.FINDER_PAT_D,se.FINDER_PAT_E,se.FINDER_PAT_F,se.FINDER_PAT_F],[se.FINDER_PAT_A,se.FINDER_PAT_A,se.FINDER_PAT_B,se.FINDER_PAT_B,se.FINDER_PAT_C,se.FINDER_PAT_C,se.FINDER_PAT_D,se.FINDER_PAT_D],[se.FINDER_PAT_A,se.FINDER_PAT_A,se.FINDER_PAT_B,se.FINDER_PAT_B,se.FINDER_PAT_C,se.FINDER_PAT_C,se.FINDER_PAT_D,se.FINDER_PAT_E,se.FINDER_PAT_E],[se.FINDER_PAT_A,se.FINDER_PAT_A,se.FINDER_PAT_B,se.FINDER_PAT_B,se.FINDER_PAT_C,se.FINDER_PAT_C,se.FINDER_PAT_D,se.FINDER_PAT_E,se.FINDER_PAT_F,se.FINDER_PAT_F],[se.FINDER_PAT_A,se.FINDER_PAT_A,se.FINDER_PAT_B,se.FINDER_PAT_B,se.FINDER_PAT_C,se.FINDER_PAT_D,se.FINDER_PAT_D,se.FINDER_PAT_E,se.FINDER_PAT_E,se.FINDER_PAT_F,se.FINDER_PAT_F]],se.MAX_PAIRS=11;class Ps extends Cr{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class tt extends en{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const u=this.decodePair(s,!1,r,a);tt.addOrTally(this.possibleLeftPairs,u),s.reverse();let c=this.decodePair(s,!0,r,a);tt.addOrTally(this.possibleRightPairs,c),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&tt.checkChecksum(h,d))return tt.constructResult(h,d)}throw new te}static addOrTally(r,s){if(s==null)return;let a=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),u=new String(a).toString(),c=new V;for(let x=13-u.length;x>0;x--)c.append("0");c.append(u);let h=0;for(let x=0;x<13;x++){let A=c.charAt(x).charCodeAt(0)-48;h+=x&1?A:3*A}h=10-h%10,h===10&&(h=0),c.append(h.toString());let d=r.getFinderPattern().getResultPoints(),y=s.getFinderPattern().getResultPoints();return new yt(c.toString(),null,0,[d[0],d[1],y[0],y[1]],Ae.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,a===u}decodePair(r,s,a,u){try{let c=this.findFinderPattern(r,s),h=this.parseFoundFinderPattern(r,a,s,c),d=u==null?null:u.get(ne.NEED_RESULT_POINT_CALLBACK);if(d!=null){let A=(c[0]+c[1])/2;s&&(A=r.getSize()-1-A),d.foundPossibleResultPoint(new _e(A,a))}let y=this.decodeDataCharacter(r,h,!0),x=this.decodeDataCharacter(r,h,!1);return new Ps(1597*y.getValue()+x.getValue(),y.getChecksumPortion()+4*x.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,s,a){let u=this.getDataCharacterCounters();for(let $=0;$<u.length;$++)u[$]=0;if(a)bt.recordPatternInReverse(r,s.getStartEnd()[0],u);else{bt.recordPattern(r,s.getStartEnd()[1]+1,u);for(let $=0,ee=u.length-1;$<ee;$++,ee--){let ue=u[$];u[$]=u[ee],u[ee]=ue}}let c=a?16:15,h=ze.sum(new Int32Array(u))/c,d=this.getOddCounts(),y=this.getEvenCounts(),x=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let $=0;$<u.length;$++){let ee=u[$]/h,ue=Math.floor(ee+.5);ue<1?ue=1:ue>8&&(ue=8);let ce=Math.floor($/2);$&1?(y[ce]=ue,A[ce]=ee-ue):(d[ce]=ue,x[ce]=ee-ue)}this.adjustOddEvenCounts(a,c);let T=0,S=0;for(let $=d.length-1;$>=0;$--)S*=9,S+=d[$],T+=d[$];let B=0,H=0;for(let $=y.length-1;$>=0;$--)B*=9,B+=y[$],H+=y[$];let X=S+3*B;if(a){if(T&1||T>12||T<4)throw new te;let $=(12-T)/2,ee=tt.OUTSIDE_ODD_WIDEST[$],ue=9-ee,ce=pt.getRSSvalue(d,ee,!1),ae=pt.getRSSvalue(y,ue,!0),He=tt.OUTSIDE_EVEN_TOTAL_SUBSET[$],Be=tt.OUTSIDE_GSUM[$];return new Cr(ce*He+ae+Be,X)}else{if(H&1||H>10||H<4)throw new te;let $=(10-H)/2,ee=tt.INSIDE_ODD_WIDEST[$],ue=9-ee,ce=pt.getRSSvalue(d,ee,!0),ae=pt.getRSSvalue(y,ue,!1),He=tt.INSIDE_ODD_TOTAL_SUBSET[$],Be=tt.INSIDE_GSUM[$];return new Cr(ae*He+ce+Be,X)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=r.getSize(),c=!1,h=0;for(;h<u&&(c=!r.get(h),s!==c);)h++;let d=0,y=h;for(let x=h;x<u;x++)if(r.get(x)!==c)a[d]++;else{if(d===3){if(en.isFinderPattern(a))return[y,x];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,d--}else d++;a[d]=1,c=!c}throw new te}parseFoundFinderPattern(r,s,a,u){let c=r.get(u[0]),h=u[0]-1;for(;h>=0&&c!==r.get(h);)h--;h++;const d=u[0]-h,y=this.getDecodeFinderCounters(),x=new Int32Array(y.length);z.arraycopy(y,0,x,1,y.length-1),x[0]=d;const A=this.parseFinderValue(x,tt.FINDER_PATTERNS);let T=h,S=u[1];return a&&(T=r.getSize()-1-T,S=r.getSize()-1-S),new Ds(A,[h,u[1]],T,S,s)}adjustOddEvenCounts(r,s){let a=ze.sum(new Int32Array(this.getOddCounts())),u=ze.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1,d=!1,y=!1;r?(a>12?h=!0:a<4&&(c=!0),u>12?y=!0:u<4&&(d=!0)):(a>11?h=!0:a<5&&(c=!0),u>10?y=!0:u<4&&(d=!0));let x=a+u-s,A=(a&1)===(r?1:0),T=(u&1)===1;if(x===1)if(A){if(T)throw new te;h=!0}else{if(!T)throw new te;y=!0}else if(x===-1)if(A){if(T)throw new te;c=!0}else{if(!T)throw new te;d=!0}else if(x===0){if(A){if(!T)throw new te;a<u?(c=!0,y=!0):(h=!0,d=!0)}else if(T)throw new te}else throw new te;if(c){if(h)throw new te;en.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&en.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(y)throw new te;en.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&en.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],tt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],tt.OUTSIDE_GSUM=[0,161,961,2015,2715],tt.INSIDE_GSUM=[0,336,1036,1516],tt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],tt.INSIDE_ODD_WIDEST=[2,4,6,8],tt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Qr extends bt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(ne.POSSIBLE_FORMATS):null,u=r&&r.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Ae.EAN_13)||a.includes(Ae.UPC_A)||a.includes(Ae.EAN_8)||a.includes(Ae.UPC_E))&&this.readers.push(new Fi(r)),a.includes(Ae.CODE_39)&&this.readers.push(new Dt(u)),a.includes(Ae.CODE_128)&&this.readers.push(new fe),a.includes(Ae.ITF)&&this.readers.push(new ot),a.includes(Ae.RSS_14)&&this.readers.push(new tt),a.includes(Ae.RSS_EXPANDED)&&this.readers.push(new se(this.verbose))):(this.readers.push(new Fi(r)),this.readers.push(new Dt),this.readers.push(new Fi(r)),this.readers.push(new fe),this.readers.push(new ot),this.readers.push(new tt),this.readers.push(new se(this.verbose)))}decodeRow(r,s,a){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,a)}catch{}throw new te}reset(){this.readers.forEach(r=>r.reset())}}class Rh extends st{constructor(r=500,s){super(new Qr(s),r,s)}}class $e{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Xe{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(r,s,a,u,c,h){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=h;let d=0;const y=h.getECCodewords(),x=h.getECBlocks();for(let A of x)d+=A.getCount()*(A.getDataCodewords()+y);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new N;for(let a of Fe.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new N}toString(){return""+this.versionNumber}static buildVersions(){return[new Fe(1,10,10,8,8,new $e(5,new Xe(1,3))),new Fe(2,12,12,10,10,new $e(7,new Xe(1,5))),new Fe(3,14,14,12,12,new $e(10,new Xe(1,8))),new Fe(4,16,16,14,14,new $e(12,new Xe(1,12))),new Fe(5,18,18,16,16,new $e(14,new Xe(1,18))),new Fe(6,20,20,18,18,new $e(18,new Xe(1,22))),new Fe(7,22,22,20,20,new $e(20,new Xe(1,30))),new Fe(8,24,24,22,22,new $e(24,new Xe(1,36))),new Fe(9,26,26,24,24,new $e(28,new Xe(1,44))),new Fe(10,32,32,14,14,new $e(36,new Xe(1,62))),new Fe(11,36,36,16,16,new $e(42,new Xe(1,86))),new Fe(12,40,40,18,18,new $e(48,new Xe(1,114))),new Fe(13,44,44,20,20,new $e(56,new Xe(1,144))),new Fe(14,48,48,22,22,new $e(68,new Xe(1,174))),new Fe(15,52,52,24,24,new $e(42,new Xe(2,102))),new Fe(16,64,64,14,14,new $e(56,new Xe(2,140))),new Fe(17,72,72,16,16,new $e(36,new Xe(4,92))),new Fe(18,80,80,18,18,new $e(48,new Xe(4,114))),new Fe(19,88,88,20,20,new $e(56,new Xe(4,144))),new Fe(20,96,96,22,22,new $e(68,new Xe(4,174))),new Fe(21,104,104,24,24,new $e(56,new Xe(6,136))),new Fe(22,120,120,18,18,new $e(68,new Xe(6,175))),new Fe(23,132,132,20,20,new $e(62,new Xe(8,163))),new Fe(24,144,144,22,22,new $e(62,new Xe(8,156),new Xe(2,155))),new Fe(25,8,18,6,16,new $e(7,new Xe(1,5))),new Fe(26,8,32,6,14,new $e(11,new Xe(1,10))),new Fe(27,12,26,10,24,new $e(14,new Xe(1,16))),new Fe(28,12,36,10,16,new $e(18,new Xe(1,22))),new Fe(29,16,36,14,16,new $e(24,new Xe(1,32))),new Fe(30,16,48,14,22,new $e(28,new Xe(1,49)))]}}Fe.VERSIONS=Fe.buildVersions();class Os{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new N;this.version=Os.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new et(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Fe.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,u=0;const c=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let d=!1,y=!1,x=!1,A=!1;do if(a===c&&u===0&&!d)r[s++]=this.readCorner1(c,h)&255,a-=2,u+=2,d=!0;else if(a===c-2&&u===0&&h&3&&!y)r[s++]=this.readCorner2(c,h)&255,a-=2,u+=2,y=!0;else if(a===c+4&&u===2&&!(h&7)&&!x)r[s++]=this.readCorner3(c,h)&255,a-=2,u+=2,x=!0;else if(a===c-2&&u===0&&(h&7)===4&&!A)r[s++]=this.readCorner4(c,h)&255,a-=2,u+=2,A=!0;else{do a<c&&u>=0&&!this.readMappingMatrix.get(u,a)&&(r[s++]=this.readUtah(a,u,c,h)&255),a-=2,u+=2;while(a>=0&&u<h);a+=1,u+=3;do a>=0&&u<h&&!this.readMappingMatrix.get(u,a)&&(r[s++]=this.readUtah(a,u,c,h)&255),a+=2,u-=2;while(a<c&&u>=0);a+=3,u+=1}while(a<c||u<h);if(s!==this.version.getTotalCodewords())throw new N;return r}readModule(r,s,a,u){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,u){let c=0;return this.readModule(r-2,s-2,a,u)&&(c|=1),c<<=1,this.readModule(r-2,s-1,a,u)&&(c|=1),c<<=1,this.readModule(r-1,s-2,a,u)&&(c|=1),c<<=1,this.readModule(r-1,s-1,a,u)&&(c|=1),c<<=1,this.readModule(r-1,s,a,u)&&(c|=1),c<<=1,this.readModule(r,s-2,a,u)&&(c|=1),c<<=1,this.readModule(r,s-1,a,u)&&(c|=1),c<<=1,this.readModule(r,s,a,u)&&(c|=1),c}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new C("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),h=s/u|0,d=a/c|0,y=h*u,x=d*c,A=new et(x,y);for(let T=0;T<h;++T){const S=T*u;for(let B=0;B<d;++B){const H=B*c;for(let X=0;X<u;++X){const $=T*(u+2)+1+X,ee=S+X;for(let ue=0;ue<c;++ue){const ce=B*(c+2)+1+ue;if(r.get(ce,$)){const ae=H+ue;A.set(ae,ee)}}}}}return A}}class Ms{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let u=0;const c=a.getECBlocks();for(let X of c)u+=X.getCount();const h=new Array(u);let d=0;for(let X of c)for(let $=0;$<X.getCount();$++){const ee=X.getDataCodewords(),ue=a.getECCodewords()+ee;h[d++]=new Ms(ee,new Uint8Array(ue))}const x=h[0].codewords.length-a.getECCodewords(),A=x-1;let T=0;for(let X=0;X<A;X++)for(let $=0;$<d;$++)h[$].codewords[X]=r[T++];const S=s.getVersionNumber()===24,B=S?8:d;for(let X=0;X<B;X++)h[X].codewords[x-1]=r[T++];const H=h[0].codewords.length;for(let X=x;X<H;X++)for(let $=0;$<d;$++){const ee=S?($+8)%d:$,ue=S&&ee>7?X-1:X;h[ee].codewords[ue]=r[T++]}if(T!==r.length)throw new C;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Eo{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new C(""+r);let s=0,a=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(a>0){const h=8-a,d=r<h?r:h,y=h-d,x=255>>8-d<<y;s=(c[u]&x)>>y,r-=d,a+=d,a===8&&(a=0,u++)}if(r>0){for(;r>=8;)s=s<<8|c[u]&255,u++,r-=8;if(r>0){const h=8-r,d=255>>h<<h;s=s<<r|(c[u]&d)>>h,a+=r}}return this.bitOffset=a,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ft;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));class $r{static decode(r){const s=new Eo(r),a=new V,u=new V,c=new Array;let h=Ft.ASCII_ENCODE;do if(h===Ft.ASCII_ENCODE)h=this.decodeAsciiSegment(s,a,u);else{switch(h){case Ft.C40_ENCODE:this.decodeC40Segment(s,a);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(s,a,c);break;default:throw new N}h=Ft.ASCII_ENCODE}while(h!==Ft.PAD_ENCODE&&s.available()>0);return u.length()>0&&a.append(u.toString()),new Ns(r,a.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(r,s,a){let u=!1;do{let c=r.readBits(8);if(c===0)throw new N;if(c<=128)return u&&(c+=128),s.append(String.fromCharCode(c-1)),Ft.ASCII_ENCODE;if(c===129)return Ft.PAD_ENCODE;if(c<=229){const h=c-130;h<10&&s.append("0"),s.append(""+h)}else switch(c){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(c!==254||r.available()!==0)throw new N;break}}while(r.available()>0);return Ft.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const u=[];let c=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),u);for(let d=0;d<3;d++){const y=u[d];switch(c){case 0:if(y<3)c=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[y];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new N;break;case 1:a?(s.append(String.fromCharCode(y+128)),a=!1):s.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[y];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(y){case 27:s.append("");break;case 30:a=!0;break;default:throw new N}c=0;break;case 3:a?(s.append(String.fromCharCode(y+224)),a=!1):s.append(String.fromCharCode(y+96)),c=0;break;default:throw new N}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,u=[],c=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),u);for(let d=0;d<3;d++){const y=u[d];switch(c){case 0:if(y<3)c=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[y];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new N;break;case 1:a?(s.append(String.fromCharCode(y+128)),a=!1):s.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[y];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(y){case 27:s.append("");break;case 30:a=!0;break;default:throw new N}c=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[y];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x),c=0}else throw new N;break;default:throw new N}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),a);for(let c=0;c<3;c++){const h=a[c];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new N;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let u=(r<<8)+s-1,c=Math.floor(u/1600);a[0]=c,u-=c*1600,c=Math.floor(u/40),a[1]=c,a[2]=u-c*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let u=r.readBits(6);if(u===31){const c=8-r.getBitOffset();c!==8&&r.readBits(c);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let u=1+r.getByteOffset();const c=this.unrandomize255State(r.readBits(8),u++);let h;if(c===0?h=r.available()/8|0:c<250?h=c:h=250*(c-249)+this.unrandomize255State(r.readBits(8),u++),h<0)throw new N;const d=new Uint8Array(h);for(let y=0;y<h;y++){if(r.available()<8)throw new N;d[y]=this.unrandomize255State(r.readBits(8),u++)}a.push(d);try{s.append(G.decode(d,W.ISO88591))}catch(y){throw new jn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(r,s){const a=149*s%255+1,u=r-a;return u>=0?u:u+256}}$r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],$r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$r.TEXT_SHIFT2_SET_CHARS=$r.C40_SHIFT2_SET_CHARS,$r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Nh{constructor(){this.rsDecoder=new Li(Ge.DATA_MATRIX_FIELD_256)}decode(r){const s=new Os(r),a=s.getVersion(),u=s.readCodewords(),c=Ms.getDataBlocks(u,a);let h=0;for(let x of c)h+=x.getNumDataCodewords();const d=new Uint8Array(h),y=c.length;for(let x=0;x<y;x++){const A=c[x],T=A.getCodewords(),S=A.getNumDataCodewords();this.correctErrors(T,S);for(let B=0;B<S;B++)d[B*y+x]=T[B]}return $r.decode(d)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new L}for(let u=0;u<s;u++)r[u]=a[u]}}class St{constructor(r){this.image=r,this.rectangleDetector=new ir(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new te;s=this.shiftToModuleCenter(s);const a=s[0],u=s[1],c=s[2],h=s[3];let d=this.transitionsBetween(a,h)+1,y=this.transitionsBetween(c,h)+1;(d&1)===1&&(d+=1),(y&1)===1&&(y+=1),4*d<7*y&&4*y<7*d&&(d=y=Math.max(d,y));let x=St.sampleGrid(this.image,a,u,c,h,d,y);return new fo(x,[a,u,c,h])}static shiftPoint(r,s,a){let u=(s.getX()-r.getX())/(a+1),c=(s.getY()-r.getY())/(a+1);return new _e(r.getX()+u,r.getY()+c)}static moveAway(r,s,a){let u=r.getX(),c=r.getY();return u<s?u-=1:u+=1,c<a?c-=1:c+=1,new _e(u,c)}detectSolid1(r){let s=r[0],a=r[1],u=r[3],c=r[2],h=this.transitionsBetween(s,a),d=this.transitionsBetween(a,u),y=this.transitionsBetween(u,c),x=this.transitionsBetween(c,s),A=h,T=[c,s,a,u];return A>d&&(A=d,T[0]=s,T[1]=a,T[2]=u,T[3]=c),A>y&&(A=y,T[0]=a,T[1]=u,T[2]=c,T[3]=s),A>x&&(T[0]=u,T[1]=c,T[2]=s,T[3]=a),T}detectSolid2(r){let s=r[0],a=r[1],u=r[2],c=r[3],h=this.transitionsBetween(s,c),d=St.shiftPoint(a,u,(h+1)*4),y=St.shiftPoint(u,a,(h+1)*4),x=this.transitionsBetween(d,s),A=this.transitionsBetween(y,c);return x<A?(r[0]=s,r[1]=a,r[2]=u,r[3]=c):(r[0]=a,r[1]=u,r[2]=c,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],u=r[2],c=r[3],h=this.transitionsBetween(s,c),d=this.transitionsBetween(a,c),y=St.shiftPoint(s,a,(d+1)*4),x=St.shiftPoint(u,a,(h+1)*4);h=this.transitionsBetween(y,c),d=this.transitionsBetween(x,c);let A=new _e(c.getX()+(u.getX()-a.getX())/(h+1),c.getY()+(u.getY()-a.getY())/(h+1)),T=new _e(c.getX()+(s.getX()-a.getX())/(d+1),c.getY()+(s.getY()-a.getY())/(d+1));if(!this.isValid(A))return this.isValid(T)?T:null;if(!this.isValid(T))return A;let S=this.transitionsBetween(y,A)+this.transitionsBetween(x,A),B=this.transitionsBetween(y,T)+this.transitionsBetween(x,T);return S>B?A:T}shiftToModuleCenter(r){let s=r[0],a=r[1],u=r[2],c=r[3],h=this.transitionsBetween(s,c)+1,d=this.transitionsBetween(u,c)+1,y=St.shiftPoint(s,a,d*4),x=St.shiftPoint(u,a,h*4);h=this.transitionsBetween(y,c)+1,d=this.transitionsBetween(x,c)+1,(h&1)===1&&(h+=1),(d&1)===1&&(d+=1);let A=(s.getX()+a.getX()+u.getX()+c.getX())/4,T=(s.getY()+a.getY()+u.getY()+c.getY())/4;s=St.moveAway(s,A,T),a=St.moveAway(a,A,T),u=St.moveAway(u,A,T),c=St.moveAway(c,A,T);let S,B;return y=St.shiftPoint(s,a,d*4),y=St.shiftPoint(y,c,h*4),S=St.shiftPoint(a,s,d*4),S=St.shiftPoint(S,u,h*4),x=St.shiftPoint(u,c,d*4),x=St.shiftPoint(x,a,h*4),B=St.shiftPoint(c,u,d*4),B=St.shiftPoint(B,s,h*4),[y,S,x,B]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,u,c,h,d){return sr.getInstance().sampleGrid(r,h,d,.5,.5,h-.5,.5,h-.5,d-.5,.5,d-.5,s.getX(),s.getY(),c.getX(),c.getY(),u.getX(),u.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),c=Math.trunc(s.getX()),h=Math.trunc(s.getY()),d=Math.abs(h-u)>Math.abs(c-a);if(d){let X=a;a=u,u=X,X=c,c=h,h=X}let y=Math.abs(c-a),x=Math.abs(h-u),A=-y/2,T=u<h?1:-1,S=a<c?1:-1,B=0,H=this.image.get(d?u:a,d?a:u);for(let X=a,$=u;X!==c;X+=S){let ee=this.image.get(d?$:X,d?X:$);if(ee!==H&&(B++,H=ee),A+=x,A>0){if($===h)break;$+=T,A-=y}}return B}}class Mr{constructor(){this.decoder=new Nh}decode(r,s=null){let a,u;if(s!=null&&s.has(ne.PURE_BARCODE)){const x=Mr.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(x),u=Mr.NO_POINTS}else{const x=new St(r.getBlackMatrix()).detect();a=this.decoder.decode(x.getBits()),u=x.getPoints()}const c=a.getRawBytes(),h=new yt(a.getText(),c,8*c.length,u,Ae.DATA_MATRIX,z.currentTimeMillis()),d=a.getByteSegments();d!=null&&h.putMetadata(Kt.BYTE_SEGMENTS,d);const y=a.getECLevel();return y!=null&&h.putMetadata(Kt.ERROR_CORRECTION_LEVEL,y),h}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new te;const u=this.moduleSize(s,r);let c=s[1];const h=a[1];let d=s[0];const x=(a[0]-d+1)/u,A=(h-c+1)/u;if(x<=0||A<=0)throw new te;const T=u/2;c+=T,d+=T;const S=new et(x,A);for(let B=0;B<A;B++){const H=c+B*u;for(let X=0;X<x;X++)r.get(d+X*u,H)&&S.set(X,B)}return S}static moduleSize(r,s){const a=s.getWidth();let u=r[0];const c=r[1];for(;u<a&&s.get(u,c);)u++;if(u===a)throw new te;const h=u-r[0];if(h===0)throw new te;return h}}Mr.NO_POINTS=[];class bh extends st{constructor(r=500){super(new Mr,r)}}var Gn;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Gn||(Gn={}));class je{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,je.FOR_BITS.set(a,this),je.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return je.L;case"M":return je.M;case"Q":return je.Q;case"H":return je.H;default:throw new _(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof je))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=je.FOR_BITS.size)throw new C;return je.FOR_BITS.get(r)}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.L=new je(Gn.L,"L",1),je.M=new je(Gn.M,"M",0),je.Q=new je(Gn.Q,"Q",3),je.H=new je(Gn.H,"H",2);class jt{constructor(r){this.errorCorrectionLevel=je.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return M.bitCount(r^s)}static decodeFormatInformation(r,s){const a=jt.doDecodeFormatInformation(r,s);return a!==null?a:jt.doDecodeFormatInformation(r^jt.FORMAT_INFO_MASK_QR,s^jt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,u=0;for(const c of jt.FORMAT_INFO_DECODE_LOOKUP){const h=c[0];if(h===r||h===s)return new jt(c[1]);let d=jt.numBitsDiffering(r,h);d<a&&(u=c[1],a=d),r!==s&&(d=jt.numBitsDiffering(s,h),d<a&&(u=c[1],a=d))}return a<=3?new jt(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof jt))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}jt.FORMAT_INFO_MASK_QR=21522,jt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Q{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ge{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let u=0;const c=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();for(const d of h)u+=d.getCount()*(d.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new N;try{return this.getVersionForNumber((r-17)/4)}catch{throw new N}}static getVersionForNumber(r){if(r<1||r>40)throw new C;return ge.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let u=0;u<ge.VERSION_DECODE_INFO.length;u++){const c=ge.VERSION_DECODE_INFO[u];if(c===r)return ge.getVersionForNumber(u+7);const h=jt.numBitsDiffering(r,c);h<s&&(a=u+7,s=h)}return s<=3?ge.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new et(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let u=0;u<a;u++){const c=this.alignmentPatternCenters[u]-2;for(let h=0;h<a;h++)u===0&&(h===0||h===a-1)||u===a-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,c,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ge.VERSIONS=[new ge(1,new Int32Array(0),new Q(7,new k(1,19)),new Q(10,new k(1,16)),new Q(13,new k(1,13)),new Q(17,new k(1,9))),new ge(2,Int32Array.from([6,18]),new Q(10,new k(1,34)),new Q(16,new k(1,28)),new Q(22,new k(1,22)),new Q(28,new k(1,16))),new ge(3,Int32Array.from([6,22]),new Q(15,new k(1,55)),new Q(26,new k(1,44)),new Q(18,new k(2,17)),new Q(22,new k(2,13))),new ge(4,Int32Array.from([6,26]),new Q(20,new k(1,80)),new Q(18,new k(2,32)),new Q(26,new k(2,24)),new Q(16,new k(4,9))),new ge(5,Int32Array.from([6,30]),new Q(26,new k(1,108)),new Q(24,new k(2,43)),new Q(18,new k(2,15),new k(2,16)),new Q(22,new k(2,11),new k(2,12))),new ge(6,Int32Array.from([6,34]),new Q(18,new k(2,68)),new Q(16,new k(4,27)),new Q(24,new k(4,19)),new Q(28,new k(4,15))),new ge(7,Int32Array.from([6,22,38]),new Q(20,new k(2,78)),new Q(18,new k(4,31)),new Q(18,new k(2,14),new k(4,15)),new Q(26,new k(4,13),new k(1,14))),new ge(8,Int32Array.from([6,24,42]),new Q(24,new k(2,97)),new Q(22,new k(2,38),new k(2,39)),new Q(22,new k(4,18),new k(2,19)),new Q(26,new k(4,14),new k(2,15))),new ge(9,Int32Array.from([6,26,46]),new Q(30,new k(2,116)),new Q(22,new k(3,36),new k(2,37)),new Q(20,new k(4,16),new k(4,17)),new Q(24,new k(4,12),new k(4,13))),new ge(10,Int32Array.from([6,28,50]),new Q(18,new k(2,68),new k(2,69)),new Q(26,new k(4,43),new k(1,44)),new Q(24,new k(6,19),new k(2,20)),new Q(28,new k(6,15),new k(2,16))),new ge(11,Int32Array.from([6,30,54]),new Q(20,new k(4,81)),new Q(30,new k(1,50),new k(4,51)),new Q(28,new k(4,22),new k(4,23)),new Q(24,new k(3,12),new k(8,13))),new ge(12,Int32Array.from([6,32,58]),new Q(24,new k(2,92),new k(2,93)),new Q(22,new k(6,36),new k(2,37)),new Q(26,new k(4,20),new k(6,21)),new Q(28,new k(7,14),new k(4,15))),new ge(13,Int32Array.from([6,34,62]),new Q(26,new k(4,107)),new Q(22,new k(8,37),new k(1,38)),new Q(24,new k(8,20),new k(4,21)),new Q(22,new k(12,11),new k(4,12))),new ge(14,Int32Array.from([6,26,46,66]),new Q(30,new k(3,115),new k(1,116)),new Q(24,new k(4,40),new k(5,41)),new Q(20,new k(11,16),new k(5,17)),new Q(24,new k(11,12),new k(5,13))),new ge(15,Int32Array.from([6,26,48,70]),new Q(22,new k(5,87),new k(1,88)),new Q(24,new k(5,41),new k(5,42)),new Q(30,new k(5,24),new k(7,25)),new Q(24,new k(11,12),new k(7,13))),new ge(16,Int32Array.from([6,26,50,74]),new Q(24,new k(5,98),new k(1,99)),new Q(28,new k(7,45),new k(3,46)),new Q(24,new k(15,19),new k(2,20)),new Q(30,new k(3,15),new k(13,16))),new ge(17,Int32Array.from([6,30,54,78]),new Q(28,new k(1,107),new k(5,108)),new Q(28,new k(10,46),new k(1,47)),new Q(28,new k(1,22),new k(15,23)),new Q(28,new k(2,14),new k(17,15))),new ge(18,Int32Array.from([6,30,56,82]),new Q(30,new k(5,120),new k(1,121)),new Q(26,new k(9,43),new k(4,44)),new Q(28,new k(17,22),new k(1,23)),new Q(28,new k(2,14),new k(19,15))),new ge(19,Int32Array.from([6,30,58,86]),new Q(28,new k(3,113),new k(4,114)),new Q(26,new k(3,44),new k(11,45)),new Q(26,new k(17,21),new k(4,22)),new Q(26,new k(9,13),new k(16,14))),new ge(20,Int32Array.from([6,34,62,90]),new Q(28,new k(3,107),new k(5,108)),new Q(26,new k(3,41),new k(13,42)),new Q(30,new k(15,24),new k(5,25)),new Q(28,new k(15,15),new k(10,16))),new ge(21,Int32Array.from([6,28,50,72,94]),new Q(28,new k(4,116),new k(4,117)),new Q(26,new k(17,42)),new Q(28,new k(17,22),new k(6,23)),new Q(30,new k(19,16),new k(6,17))),new ge(22,Int32Array.from([6,26,50,74,98]),new Q(28,new k(2,111),new k(7,112)),new Q(28,new k(17,46)),new Q(30,new k(7,24),new k(16,25)),new Q(24,new k(34,13))),new ge(23,Int32Array.from([6,30,54,78,102]),new Q(30,new k(4,121),new k(5,122)),new Q(28,new k(4,47),new k(14,48)),new Q(30,new k(11,24),new k(14,25)),new Q(30,new k(16,15),new k(14,16))),new ge(24,Int32Array.from([6,28,54,80,106]),new Q(30,new k(6,117),new k(4,118)),new Q(28,new k(6,45),new k(14,46)),new Q(30,new k(11,24),new k(16,25)),new Q(30,new k(30,16),new k(2,17))),new ge(25,Int32Array.from([6,32,58,84,110]),new Q(26,new k(8,106),new k(4,107)),new Q(28,new k(8,47),new k(13,48)),new Q(30,new k(7,24),new k(22,25)),new Q(30,new k(22,15),new k(13,16))),new ge(26,Int32Array.from([6,30,58,86,114]),new Q(28,new k(10,114),new k(2,115)),new Q(28,new k(19,46),new k(4,47)),new Q(28,new k(28,22),new k(6,23)),new Q(30,new k(33,16),new k(4,17))),new ge(27,Int32Array.from([6,34,62,90,118]),new Q(30,new k(8,122),new k(4,123)),new Q(28,new k(22,45),new k(3,46)),new Q(30,new k(8,23),new k(26,24)),new Q(30,new k(12,15),new k(28,16))),new ge(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new k(3,117),new k(10,118)),new Q(28,new k(3,45),new k(23,46)),new Q(30,new k(4,24),new k(31,25)),new Q(30,new k(11,15),new k(31,16))),new ge(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new k(7,116),new k(7,117)),new Q(28,new k(21,45),new k(7,46)),new Q(30,new k(1,23),new k(37,24)),new Q(30,new k(19,15),new k(26,16))),new ge(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new k(5,115),new k(10,116)),new Q(28,new k(19,47),new k(10,48)),new Q(30,new k(15,24),new k(25,25)),new Q(30,new k(23,15),new k(25,16))),new ge(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new k(13,115),new k(3,116)),new Q(28,new k(2,46),new k(29,47)),new Q(30,new k(42,24),new k(1,25)),new Q(30,new k(23,15),new k(28,16))),new ge(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new k(17,115)),new Q(28,new k(10,46),new k(23,47)),new Q(30,new k(10,24),new k(35,25)),new Q(30,new k(19,15),new k(35,16))),new ge(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new k(17,115),new k(1,116)),new Q(28,new k(14,46),new k(21,47)),new Q(30,new k(29,24),new k(19,25)),new Q(30,new k(11,15),new k(46,16))),new ge(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new k(13,115),new k(6,116)),new Q(28,new k(14,46),new k(23,47)),new Q(30,new k(44,24),new k(7,25)),new Q(30,new k(59,16),new k(1,17))),new ge(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new k(12,121),new k(7,122)),new Q(28,new k(12,47),new k(26,48)),new Q(30,new k(39,24),new k(14,25)),new Q(30,new k(22,15),new k(41,16))),new ge(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new k(6,121),new k(14,122)),new Q(28,new k(6,47),new k(34,48)),new Q(30,new k(46,24),new k(10,25)),new Q(30,new k(2,15),new k(64,16))),new ge(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new k(17,122),new k(4,123)),new Q(28,new k(29,46),new k(14,47)),new Q(30,new k(49,24),new k(10,25)),new Q(30,new k(24,15),new k(46,16))),new ge(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new k(4,122),new k(18,123)),new Q(28,new k(13,46),new k(32,47)),new Q(30,new k(48,24),new k(14,25)),new Q(30,new k(42,15),new k(32,16))),new ge(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new k(20,117),new k(4,118)),new Q(28,new k(40,47),new k(7,48)),new Q(30,new k(43,24),new k(22,25)),new Q(30,new k(10,15),new k(67,16))),new ge(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new k(19,118),new k(6,119)),new Q(28,new k(18,47),new k(31,48)),new Q(30,new k(34,24),new k(34,25)),new Q(30,new k(20,15),new k(61,16)))];var Pt;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(Pt||(Pt={}));class dn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let u=0;u<s;u++)this.isMasked(a,u)&&r.flip(u,a)}}dn.values=new Map([[Pt.DATA_MASK_000,new dn(Pt.DATA_MASK_000,(I,r)=>(I+r&1)===0)],[Pt.DATA_MASK_001,new dn(Pt.DATA_MASK_001,(I,r)=>(I&1)===0)],[Pt.DATA_MASK_010,new dn(Pt.DATA_MASK_010,(I,r)=>r%3===0)],[Pt.DATA_MASK_011,new dn(Pt.DATA_MASK_011,(I,r)=>(I+r)%3===0)],[Pt.DATA_MASK_100,new dn(Pt.DATA_MASK_100,(I,r)=>(Math.floor(I/2)+Math.floor(r/3)&1)===0)],[Pt.DATA_MASK_101,new dn(Pt.DATA_MASK_101,(I,r)=>I*r%6===0)],[Pt.DATA_MASK_110,new dn(Pt.DATA_MASK_110,(I,r)=>I*r%6<3)],[Pt.DATA_MASK_111,new dn(Pt.DATA_MASK_111,(I,r)=>(I+r+I*r%3&1)===0)]]);class ks{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new N;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let c=0;c<6;c++)r=this.copyBit(c,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let c=5;c>=0;c--)r=this.copyBit(8,c,r);const s=this.bitMatrix.getHeight();let a=0;const u=s-7;for(let c=s-1;c>=u;c--)a=this.copyBit(8,c,a);for(let c=s-8;c<s;c++)a=this.copyBit(c,8,a);if(this.parsedFormatInfo=jt.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new N}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return ge.getVersionForNumber(s);let a=0;const u=r-11;for(let h=5;h>=0;h--)for(let d=r-9;d>=u;d--)a=this.copyBit(d,h,a);let c=ge.decodeVersionInformation(a);if(c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;a=0;for(let h=5;h>=0;h--)for(let d=r-9;d>=u;d--)a=this.copyBit(h,d,a);if(c=ge.decodeVersionInformation(a),c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;throw new N}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=dn.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u);const c=s.buildFunctionPattern();let h=!0;const d=new Uint8Array(s.getTotalCodewords());let y=0,x=0,A=0;for(let T=u-1;T>0;T-=2){T===6&&T--;for(let S=0;S<u;S++){const B=h?u-1-S:S;for(let H=0;H<2;H++)c.get(T-H,B)||(A++,x<<=1,this.bitMatrix.get(T-H,B)&&(x|=1),A===8&&(d[y++]=x,A=0,x=0))}h=!h}if(y!==s.getTotalCodewords())throw new N;return d}remask(){if(this.parsedFormatInfo===null)return;const r=dn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let u=s+1,c=r.getHeight();u<c;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class Na{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new C;const u=s.getECBlocksForLevel(a);let c=0;const h=u.getECBlocks();for(const H of h)c+=H.getCount();const d=new Array(c);let y=0;for(const H of h)for(let X=0;X<H.getCount();X++){const $=H.getDataCodewords(),ee=u.getECCodewordsPerBlock()+$;d[y++]=new Na($,new Uint8Array(ee))}const x=d[0].codewords.length;let A=d.length-1;for(;A>=0&&d[A].codewords.length!==x;)A--;A++;const T=x-u.getECCodewordsPerBlock();let S=0;for(let H=0;H<T;H++)for(let X=0;X<y;X++)d[X].codewords[H]=r[S++];for(let H=A;H<y;H++)d[H].codewords[T]=r[S++];const B=d[0].codewords.length;for(let H=T;H<B;H++)for(let X=0;X<y;X++){const $=X<A?H:H+1;d[X].codewords[$]=r[S++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var kn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(kn||(kn={}));class ve{constructor(r,s,a,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=u,ve.FOR_BITS.set(u,this),ve.FOR_VALUE.set(r,this)}static forBits(r){const s=ve.FOR_BITS.get(r);if(s===void 0)throw new C;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof ve))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}ve.FOR_BITS=new Map,ve.FOR_VALUE=new Map,ve.TERMINATOR=new ve(kn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ve.NUMERIC=new ve(kn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ve.ALPHANUMERIC=new ve(kn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ve.STRUCTURED_APPEND=new ve(kn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ve.BYTE=new ve(kn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ve.ECI=new ve(kn.ECI,"ECI",Int32Array.from([0,0,0]),7),ve.KANJI=new ve(kn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ve.FNC1_FIRST_POSITION=new ve(kn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ve.FNC1_SECOND_POSITION=new ve(kn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ve.HANZI=new ve(kn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class wt{static decode(r,s,a,u){const c=new Eo(r);let h=new V;const d=new Array;let y=-1,x=-1;try{let A=null,T=!1,S;do{if(c.available()<4)S=ve.TERMINATOR;else{const B=c.readBits(4);S=ve.forBits(B)}switch(S){case ve.TERMINATOR:break;case ve.FNC1_FIRST_POSITION:case ve.FNC1_SECOND_POSITION:T=!0;break;case ve.STRUCTURED_APPEND:if(c.available()<16)throw new N;y=c.readBits(8),x=c.readBits(8);break;case ve.ECI:const B=wt.parseECIValue(c);if(A=b.getCharacterSetECIByValue(B),A===null)throw new N;break;case ve.HANZI:const H=c.readBits(4),X=c.readBits(S.getCharacterCountBits(s));H===wt.GB2312_SUBSET&&wt.decodeHanziSegment(c,h,X);break;default:const $=c.readBits(S.getCharacterCountBits(s));switch(S){case ve.NUMERIC:wt.decodeNumericSegment(c,h,$);break;case ve.ALPHANUMERIC:wt.decodeAlphanumericSegment(c,h,$,T);break;case ve.BYTE:wt.decodeByteSegment(c,h,$,A,d,u);break;case ve.KANJI:wt.decodeKanjiSegment(c,h,$);break;default:throw new N}break}}while(S!==ve.TERMINATOR)}catch{throw new N}return new Ns(r,h.toString(),d.length===0?null:d,a===null?null:a.toString(),y,x)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new N;const u=new Uint8Array(2*a);let c=0;for(;a>0;){const h=r.readBits(13);let d=h/96<<8&4294967295|h%96;d<959?d+=41377:d+=42657,u[c]=d>>8&255,u[c+1]=d&255,c+=2,a--}try{s.append(G.decode(u,W.GB2312))}catch(h){throw new N(h)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new N;const u=new Uint8Array(2*a);let c=0;for(;a>0;){const h=r.readBits(13);let d=h/192<<8&4294967295|h%192;d<7936?d+=33088:d+=49472,u[c]=d>>8,u[c+1]=d,c+=2,a--}try{s.append(G.decode(u,W.SHIFT_JIS))}catch(h){throw new N(h)}}static decodeByteSegment(r,s,a,u,c,h){if(8*a>r.available())throw new N;const d=new Uint8Array(a);for(let x=0;x<a;x++)d[x]=r.readBits(8);let y;u===null?y=W.guessEncoding(d,h):y=u.getName();try{s.append(G.decode(d,y))}catch(x){throw new N(x)}c.push(d)}static toAlphaNumericChar(r){if(r>=wt.ALPHANUMERIC_CHARS.length)throw new N;return wt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,u){const c=s.length();for(;a>1;){if(r.available()<11)throw new N;const h=r.readBits(11);s.append(wt.toAlphaNumericChar(Math.floor(h/45))),s.append(wt.toAlphaNumericChar(h%45)),a-=2}if(a===1){if(r.available()<6)throw new N;s.append(wt.toAlphaNumericChar(r.readBits(6)))}if(u)for(let h=c;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new N;const u=r.readBits(10);if(u>=1e3)throw new N;s.append(wt.toAlphaNumericChar(Math.floor(u/100))),s.append(wt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(wt.toAlphaNumericChar(u%10)),a-=3}if(a===2){if(r.available()<7)throw new N;const u=r.readBits(7);if(u>=100)throw new N;s.append(wt.toAlphaNumericChar(Math.floor(u/10))),s.append(wt.toAlphaNumericChar(u%10))}else if(a===1){if(r.available()<4)throw new N;const u=r.readBits(4);if(u>=10)throw new N;s.append(wt.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new N}}wt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",wt.GB2312_SUBSET=1;class nu{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Dh{constructor(){this.rsDecoder=new Li(Ge.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(et.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new ks(r);let u=null;try{return this.decodeBitMatrixParser(a,s)}catch(c){u=c}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const c=this.decodeBitMatrixParser(a,s);return c.setOther(new nu(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(r,s){const a=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),c=r.readCodewords(),h=Na.getDataBlocks(c,a,u);let d=0;for(const A of h)d+=A.getNumDataCodewords();const y=new Uint8Array(d);let x=0;for(const A of h){const T=A.getCodewords(),S=A.getNumDataCodewords();this.correctErrors(T,S);for(let B=0;B<S;B++)y[x++]=T[B]}return wt.decode(y,a,u,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new L}for(let u=0;u<s;u++)r[u]=a[u]}}class yi extends _e{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const u=(this.getX()+s)/2,c=(this.getY()+r)/2,h=(this.estimatedModuleSize+a)/2;return new yi(u,c,h)}}class cr{constructor(r,s,a,u,c,h,d){this.image=r,this.startX=s,this.startY=a,this.width=u,this.height=c,this.moduleSize=h,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,u=r+a,c=this.startY+s/2,h=new Int32Array(3),d=this.image;for(let y=0;y<s;y++){const x=c+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));h[0]=0,h[1]=0,h[2]=0;let A=r;for(;A<u&&!d.get(A,x);)A++;let T=0;for(;A<u;){if(d.get(A,x))if(T===1)h[1]++;else if(T===2){if(this.foundPatternCross(h)){const S=this.handlePossibleCenter(h,x,A);if(S!==null)return S}h[0]=h[2],h[1]=1,h[2]=0,T=1}else h[++T]++;else T===1&&T++,h[T]++;A++}if(this.foundPatternCross(h)){const S=this.handlePossibleCenter(h,x,u);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new te}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=a)return!1;return!0}crossCheckVertical(r,s,a,u){const c=this.image,h=c.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let y=r;for(;y>=0&&c.get(s,y)&&d[1]<=a;)d[1]++,y--;if(y<0||d[1]>a)return NaN;for(;y>=0&&!c.get(s,y)&&d[0]<=a;)d[0]++,y--;if(d[0]>a)return NaN;for(y=r+1;y<h&&c.get(s,y)&&d[1]<=a;)d[1]++,y++;if(y===h||d[1]>a)return NaN;for(;y<h&&!c.get(s,y)&&d[2]<=a;)d[2]++,y++;if(d[2]>a)return NaN;const x=d[0]+d[1]+d[2];return 5*Math.abs(x-u)>=2*u?NaN:this.foundPatternCross(d)?cr.centerFromEnd(d,y):NaN}handlePossibleCenter(r,s,a){const u=r[0]+r[1]+r[2],c=cr.centerFromEnd(r,a),h=this.crossCheckVertical(s,c,2*r[1],u);if(!isNaN(h)){const d=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(d,h,c))return x.combineEstimate(h,c,d);const y=new yi(c,h,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class _o extends _e{constructor(r,s,a,u){super(r,s),this.estimatedModuleSize=a,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const u=this.count+1,c=(this.count*this.getX()+s)/u,h=(this.count*this.getY()+r)/u,d=(this.count*this.estimatedModuleSize+a)/u;return new _o(c,h,d,u)}}class ru{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ht{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(ne.TRY_HARDER)!==void 0,a=r!=null&&r.get(ne.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),h=u.getWidth();let d=Math.floor(3*c/(4*Ht.MAX_MODULES));(d<Ht.MIN_SKIP||s)&&(d=Ht.MIN_SKIP);let y=!1;const x=new Int32Array(5);for(let T=d-1;T<c&&!y;T+=d){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let S=0;for(let B=0;B<h;B++)if(u.get(B,T))(S&1)===1&&S++,x[S]++;else if(S&1)x[S]++;else if(S===4)if(Ht.foundPatternCross(x)){if(this.handlePossibleCenter(x,T,B,a)===!0)if(d=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const X=this.findRowSkip();X>x[2]&&(T+=X-x[2]-d,B=h-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,S=3;continue}S=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,S=3;else x[++S]++;Ht.foundPatternCross(x)&&this.handlePossibleCenter(x,T,h,a)===!0&&(d=x[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return _e.orderBestPatterns(A),new ru(A)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let c=0;c<5;c++){const h=r[c];if(h===0)return!1;s+=h}if(s<7)return!1;const a=s/7,u=a/2;return Math.abs(a-r[0])<u&&Math.abs(a-r[1])<u&&Math.abs(3*a-r[2])<3*u&&Math.abs(a-r[3])<u&&Math.abs(a-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,u){const c=this.getCrossCheckStateCount();let h=0;const d=this.image;for(;r>=h&&s>=h&&d.get(s-h,r-h);)c[2]++,h++;if(r<h||s<h)return!1;for(;r>=h&&s>=h&&!d.get(s-h,r-h)&&c[1]<=a;)c[1]++,h++;if(r<h||s<h||c[1]>a)return!1;for(;r>=h&&s>=h&&d.get(s-h,r-h)&&c[0]<=a;)c[0]++,h++;if(c[0]>a)return!1;const y=d.getHeight(),x=d.getWidth();for(h=1;r+h<y&&s+h<x&&d.get(s+h,r+h);)c[2]++,h++;if(r+h>=y||s+h>=x)return!1;for(;r+h<y&&s+h<x&&!d.get(s+h,r+h)&&c[3]<a;)c[3]++,h++;if(r+h>=y||s+h>=x||c[3]>=a)return!1;for(;r+h<y&&s+h<x&&d.get(s+h,r+h)&&c[4]<a;)c[4]++,h++;if(c[4]>=a)return!1;const A=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(A-u)<2*u&&Ht.foundPatternCross(c)}crossCheckVertical(r,s,a,u){const c=this.image,h=c.getHeight(),d=this.getCrossCheckStateCount();let y=r;for(;y>=0&&c.get(s,y);)d[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(s,y)&&d[1]<=a;)d[1]++,y--;if(y<0||d[1]>a)return NaN;for(;y>=0&&c.get(s,y)&&d[0]<=a;)d[0]++,y--;if(d[0]>a)return NaN;for(y=r+1;y<h&&c.get(s,y);)d[2]++,y++;if(y===h)return NaN;for(;y<h&&!c.get(s,y)&&d[3]<a;)d[3]++,y++;if(y===h||d[3]>=a)return NaN;for(;y<h&&c.get(s,y)&&d[4]<a;)d[4]++,y++;if(d[4]>=a)return NaN;const x=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(x-u)>=2*u?NaN:Ht.foundPatternCross(d)?Ht.centerFromEnd(d,y):NaN}crossCheckHorizontal(r,s,a,u){const c=this.image,h=c.getWidth(),d=this.getCrossCheckStateCount();let y=r;for(;y>=0&&c.get(y,s);)d[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(y,s)&&d[1]<=a;)d[1]++,y--;if(y<0||d[1]>a)return NaN;for(;y>=0&&c.get(y,s)&&d[0]<=a;)d[0]++,y--;if(d[0]>a)return NaN;for(y=r+1;y<h&&c.get(y,s);)d[2]++,y++;if(y===h)return NaN;for(;y<h&&!c.get(y,s)&&d[3]<a;)d[3]++,y++;if(y===h||d[3]>=a)return NaN;for(;y<h&&c.get(y,s)&&d[4]<a;)d[4]++,y++;if(d[4]>=a)return NaN;const x=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(x-u)>=u?NaN:Ht.foundPatternCross(d)?Ht.centerFromEnd(d,y):NaN}handlePossibleCenter(r,s,a,u){const c=r[0]+r[1]+r[2]+r[3]+r[4];let h=Ht.centerFromEnd(r,a),d=this.crossCheckVertical(s,Math.floor(h),r[2],c);if(!isNaN(d)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(d),r[2],c),!isNaN(h)&&(!u||this.crossCheckDiagonal(Math.floor(d),Math.floor(h),r[2],c)))){const y=c/7;let x=!1;const A=this.possibleCenters;for(let T=0,S=A.length;T<S;T++){const B=A[T];if(B.aboutEquals(y,d,h)){A[T]=B.combineEstimate(d,h,y),x=!0;break}}if(!x){const T=new _o(h,d,y);A.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=Ht.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=Ht.CENTER_QUORUM&&(r++,s+=h.getEstimatedModuleSize());if(r<3)return!1;const u=s/a;let c=0;for(const h of this.possibleCenters)c+=Math.abs(h.getEstimatedModuleSize()-u);return c<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new te;const s=this.possibleCenters;let a;if(r>3){let u=0,c=0;for(const y of this.possibleCenters){const x=y.getEstimatedModuleSize();u+=x,c+=x*x}a=u/r;let h=Math.sqrt(c/r-a*a);s.sort((y,x)=>{const A=Math.abs(x.getEstimatedModuleSize()-a),T=Math.abs(y.getEstimatedModuleSize()-a);return A<T?-1:A>T?1:0});const d=Math.max(.2*a,h);for(let y=0;y<s.length&&s.length>3;y++){const x=s[y];Math.abs(x.getEstimatedModuleSize()-a)>d&&(s.splice(y,1),y--)}}if(s.length>3){let u=0;for(const c of s)u+=c.getEstimatedModuleSize();a=u/s.length,s.sort((c,h)=>{if(h.getCount()===c.getCount()){const d=Math.abs(h.getEstimatedModuleSize()-a),y=Math.abs(c.getEstimatedModuleSize()-a);return d<y?1:d>y?-1:0}else return h.getCount()-c.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Ht.CENTER_QUORUM=2,Ht.MIN_SKIP=3,Ht.MAX_MODULES=57;class vr{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ne.NEED_RESULT_POINT_CALLBACK);const a=new Ht(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),u=r.getBottomLeft(),c=this.calculateModuleSize(s,a,u);if(c<1)throw new te("No pattern found in proccess finder.");const h=vr.computeDimension(s,a,u,c),d=ge.getProvisionalVersionForDimension(h),y=d.getDimensionForVersion()-7;let x=null;if(d.getAlignmentPatternCenters().length>0){const B=a.getX()-s.getX()+u.getX(),H=a.getY()-s.getY()+u.getY(),X=1-3/y,$=Math.floor(s.getX()+X*(B-s.getX())),ee=Math.floor(s.getY()+X*(H-s.getY()));for(let ue=4;ue<=16;ue<<=1)try{x=this.findAlignmentInRegion(c,$,ee,ue);break}catch(ce){if(!(ce instanceof te))throw ce}}const A=vr.createTransform(s,a,u,x,h),T=vr.sampleGrid(this.image,A,h);let S;return x===null?S=[u,s,a]:S=[u,s,a,x],new fo(T,S)}static createTransform(r,s,a,u,c){const h=c-3.5;let d,y,x,A;return u!==null?(d=u.getX(),y=u.getY(),x=h-3,A=x):(d=s.getX()-r.getX()+a.getX(),y=s.getY()-r.getY()+a.getY(),x=h,A=h),ct.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,x,A,3.5,h,r.getX(),r.getY(),s.getX(),s.getY(),d,y,a.getX(),a.getY())}static sampleGrid(r,s,a){return sr.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,u){const c=ze.round(_e.distance(r,s)/u),h=ze.round(_e.distance(r,a)/u);let d=Math.floor((c+h)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new te("Dimensions could be not found.")}return d}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?u/7:isNaN(u)?a/7:(a+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,u){let c=this.sizeOfBlackWhiteBlackRun(r,s,a,u),h=1,d=r-(a-r);d<0?(h=r/(r-d),d=0):d>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(d-r),d=this.image.getWidth()-1);let y=Math.floor(s-(u-s)*h);return h=1,y<0?(h=s/(s-y),y=0):y>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(y-s),y=this.image.getHeight()-1),d=Math.floor(r+(d-r)*h),c+=this.sizeOfBlackWhiteBlackRun(r,s,d,y),c-1}sizeOfBlackWhiteBlackRun(r,s,a,u){const c=Math.abs(u-s)>Math.abs(a-r);if(c){let B=r;r=s,s=B,B=a,a=u,u=B}const h=Math.abs(a-r),d=Math.abs(u-s);let y=-h/2;const x=r<a?1:-1,A=s<u?1:-1;let T=0;const S=a+x;for(let B=r,H=s;B!==S;B+=x){const X=c?H:B,$=c?B:H;if(T===1===this.image.get(X,$)){if(T===2)return ze.distance(B,H,r,s);T++}if(y+=d,y>0){if(H===u)break;H+=A,y-=h}}return T===2?ze.distance(a+x,u,r,s):NaN}findAlignmentInRegion(r,s,a,u){const c=Math.floor(u*r),h=Math.max(0,s-c),d=Math.min(this.image.getWidth()-1,s+c);if(d-h<r*3)throw new te("Alignment top exceeds estimated module size.");const y=Math.max(0,a-c),x=Math.min(this.image.getHeight()-1,a+c);if(x-y<r*3)throw new te("Alignment bottom exceeds estimated module size.");return new cr(this.image,h,y,d-h,x-y,r,this.resultPointCallback).find()}}class Zr{constructor(){this.decoder=new Dh}getDecoder(){return this.decoder}decode(r,s){let a,u;if(s!=null&&s.get(ne.PURE_BARCODE)!==void 0){const y=Zr.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,s),u=Zr.NO_POINTS}else{const y=new vr(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(y.getBits(),s),u=y.getPoints()}a.getOther()instanceof nu&&a.getOther().applyMirroredCorrection(u);const c=new yt(a.getText(),a.getRawBytes(),void 0,u,Ae.QR_CODE,void 0),h=a.getByteSegments();h!==null&&c.putMetadata(Kt.BYTE_SEGMENTS,h);const d=a.getECLevel();return d!==null&&c.putMetadata(Kt.ERROR_CORRECTION_LEVEL,d),a.hasStructuredAppend()&&(c.putMetadata(Kt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),c.putMetadata(Kt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),c}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new te;const u=this.moduleSize(s,r);let c=s[1],h=a[1],d=s[0],y=a[0];if(d>=y||c>=h)throw new te;if(h-c!==y-d&&(y=d+(h-c),y>=r.getWidth()))throw new te;const x=Math.round((y-d+1)/u),A=Math.round((h-c+1)/u);if(x<=0||A<=0)throw new te;if(A!==x)throw new te;const T=Math.floor(u/2);c+=T,d+=T;const S=d+Math.floor((x-1)*u)-y;if(S>0){if(S>T)throw new te;d-=S}const B=c+Math.floor((A-1)*u)-h;if(B>0){if(B>T)throw new te;c-=B}const H=new et(x,A);for(let X=0;X<A;X++){const $=c+Math.floor(X*u);for(let ee=0;ee<x;ee++)r.get(d+Math.floor(ee*u),$)&&H.set(ee,X)}return H}static moduleSize(r,s){const a=s.getHeight(),u=s.getWidth();let c=r[0],h=r[1],d=!0,y=0;for(;c<u&&h<a;){if(d!==s.get(c,h)){if(++y===5)break;d=!d}c++,h++}if(c===u||h===a)throw new te;return(c-r[0])/7}}Zr.NO_POINTS=new Array;class Re{PDF417Common(){}static getBitCountSum(r){return ze.sum(r)}static toIntArray(r){if(r==null||!r.length)return Re.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const u of r)s[a++]=u;return s}static getCodeword(r){const s=O.binarySearch(Re.SYMBOL_TABLE,r&262143);return s<0?-1:(Re.CODEWORD_TABLE[s]-1)%Re.NUMBER_OF_CODEWORDS}}Re.NUMBER_OF_CODEWORDS=929,Re.MAX_CODEWORDS_IN_BARCODE=Re.NUMBER_OF_CODEWORDS-1,Re.MIN_ROWS_IN_BARCODE=3,Re.MAX_ROWS_IN_BARCODE=90,Re.MODULES_IN_CODEWORD=17,Re.MODULES_IN_STOP_PATTERN=18,Re.BARS_IN_MODULE=8,Re.EMPTY_INT_ARRAY=new Int32Array([]),Re.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Re.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ph{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class De{static detectMultiple(r,s,a){let u=r.getBlackMatrix(),c=De.detect(a,u);return c.length||(u=u.clone(),u.rotate180(),c=De.detect(a,u)),new Ph(u,c)}static detect(r,s){const a=new Array;let u=0,c=0,h=!1;for(;u<s.getHeight();){const d=De.findVertices(s,u,c);if(d[0]==null&&d[3]==null){if(!h)break;h=!1,c=0;for(const y of a)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=De.ROW_STEP;continue}if(h=!0,a.push(d),!r)break;d[2]!=null?(c=Math.trunc(d[2].getX()),u=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),u=Math.trunc(d[4].getY()))}return a}static findVertices(r,s,a){const u=r.getHeight(),c=r.getWidth(),h=new Array(8);return De.copyToResult(h,De.findRowsWithPattern(r,u,c,s,a,De.START_PATTERN),De.INDEXES_START_PATTERN),h[4]!=null&&(a=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),De.copyToResult(h,De.findRowsWithPattern(r,u,c,s,a,De.STOP_PATTERN),De.INDEXES_STOP_PATTERN),h}static copyToResult(r,s,a){for(let u=0;u<a.length;u++)r[a[u]]=s[u]}static findRowsWithPattern(r,s,a,u,c,h){const d=new Array(4);let y=!1;const x=new Int32Array(h.length);for(;u<s;u+=De.ROW_STEP){let T=De.findGuardPattern(r,c,u,a,!1,h,x);if(T!=null){for(;u>0;){const S=De.findGuardPattern(r,c,--u,a,!1,h,x);if(S!=null)T=S;else{u++;break}}d[0]=new _e(T[0],u),d[1]=new _e(T[1],u),y=!0;break}}let A=u+1;if(y){let T=0,S=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;A<s;A++){const B=De.findGuardPattern(r,S[0],A,a,!1,h,x);if(B!=null&&Math.abs(S[0]-B[0])<De.MAX_PATTERN_DRIFT&&Math.abs(S[1]-B[1])<De.MAX_PATTERN_DRIFT)S=B,T=0;else{if(T>De.SKIPPED_ROW_COUNT_MAX)break;T++}}A-=T+1,d[2]=new _e(S[0],A),d[3]=new _e(S[1],A)}return A-u<De.BARCODE_MIN_HEIGHT&&O.fill(d,null),d}static findGuardPattern(r,s,a,u,c,h,d){O.fillWithin(d,0,d.length,0);let y=s,x=0;for(;r.get(y,a)&&y>0&&x++<De.MAX_PIXEL_DRIFT;)y--;let A=y,T=0,S=h.length;for(let B=c;A<u;A++)if(r.get(A,a)!==B)d[T]++;else{if(T===S-1){if(De.patternMatchVariance(d,h,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return new Int32Array([y,A]);y+=d[0]+d[1],z.arraycopy(d,2,d,0,T-1),d[T-1]=0,d[T]=0,T--}else T++;d[T]=1,B=!B}return T===S-1&&De.patternMatchVariance(d,h,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE?new Int32Array([y,A-1]):null}static patternMatchVariance(r,s,a){let u=r.length,c=0,h=0;for(let x=0;x<u;x++)c+=r[x],h+=s[x];if(c<h)return 1/0;let d=c/h;a*=d;let y=0;for(let x=0;x<u;x++){let A=r[x],T=s[x]*d,S=A>T?A-T:T-A;if(S>a)return 1/0;y+=S}return y/c}}De.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),De.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),De.MAX_AVG_VARIANCE=.42,De.MAX_INDIVIDUAL_VARIANCE=.8,De.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),De.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),De.MAX_PIXEL_DRIFT=3,De.MAX_PATTERN_DRIFT=5,De.SKIPPED_ROW_COUNT_MAX=25,De.ROW_STEP=5,De.BARCODE_MIN_HEIGHT=10;class nn{constructor(r,s){if(s.length===0)throw new C;this.field=r;let a=s.length;if(a>1&&s[0]===0){let u=1;for(;u<a&&s[u]===0;)u++;u===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-u),z.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let s=this.coefficients[0],a=this.coefficients.length;for(let u=1;u<a;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let h=s;s=a,a=h}let u=new Int32Array(a.length),c=a.length-s.length;z.arraycopy(a,0,u,0,c);for(let h=c;h<a.length;h++)u[h]=this.field.add(s[h-c],a[h]);return new nn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof nn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new nn(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,u=r.coefficients,c=u.length,h=new Int32Array(a+c-1);for(let d=0;d<a;d++){let y=s[d];for(let x=0;x<c;x++)h[d+x]=this.field.add(h[d+x],this.field.multiply(y,u[x]))}return new nn(this.field,h)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new nn(this.field,s)}multiplyScalar(r){if(r===0)return new nn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let u=0;u<s;u++)a[u]=this.field.multiply(this.coefficients[u],r);return new nn(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new C;if(s===0)return new nn(this.field,new Int32Array([0]));let a=this.coefficients.length,u=new Int32Array(a+r);for(let c=0;c<a;c++)u[c]=this.field.multiply(this.coefficients[c],s);return new nn(this.field,u)}toString(){let r=new V;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class Oh{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}inverse(r){if(r===0)throw new ki;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class zi extends Oh{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let u=0;u<r;u++)this.expTable[u]=a,a=a*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new nn(this,new Int32Array([0])),this.one=new nn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new C;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new nn(this,a)}}zi.PDF417_GF=new zi(Re.NUMBER_OF_CODEWORDS,3);class Ls{constructor(){this.field=zi.PDF417_GF}decode(r,s,a){let u=new nn(this.field,r),c=new Int32Array(s),h=!1;for(let H=s;H>0;H--){let X=u.evaluateAt(this.field.exp(H));c[s-H]=X,X!==0&&(h=!0)}if(!h)return 0;let d=this.field.getOne();if(a!=null)for(const H of a){let X=this.field.exp(r.length-1-H),$=new nn(this.field,new Int32Array([this.field.subtract(0,X),1]));d=d.multiply($)}let y=new nn(this.field,c),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),y,s),A=x[0],T=x[1],S=this.findErrorLocations(A),B=this.findErrorMagnitudes(T,A,S);for(let H=0;H<S.length;H++){let X=r.length-1-this.field.log(S[H]);if(X<0)throw L.getChecksumInstance();r[X]=this.field.subtract(r[X],B[H])}return S.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let S=r;r=s,s=S}let u=r,c=s,h=this.field.getZero(),d=this.field.getOne();for(;c.getDegree()>=Math.round(a/2);){let S=u,B=h;if(u=c,h=d,u.isZero())throw L.getChecksumInstance();c=S;let H=this.field.getZero(),X=u.getCoefficient(u.getDegree()),$=this.field.inverse(X);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let ee=c.getDegree()-u.getDegree(),ue=this.field.multiply(c.getCoefficient(c.getDegree()),$);H=H.add(this.field.buildMonomial(ee,ue)),c=c.subtract(u.multiplyByMonomial(ee,ue))}d=H.multiply(h).subtract(B).negative()}let y=d.getCoefficient(0);if(y===0)throw L.getChecksumInstance();let x=this.field.inverse(y),A=d.multiply(x),T=c.multiply(x);return[A,T]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),u=0;for(let c=1;c<this.field.getSize()&&u<s;c++)r.evaluateAt(c)===0&&(a[u]=this.field.inverse(c),u++);if(u!==s)throw L.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let u=s.getDegree(),c=new Int32Array(u);for(let x=1;x<=u;x++)c[u-x]=this.field.multiply(x,s.getCoefficient(x));let h=new nn(this.field,c),d=a.length,y=new Int32Array(d);for(let x=0;x<d;x++){let A=this.field.inverse(a[x]),T=this.field.subtract(0,r.evaluateAt(A)),S=this.field.inverse(h.evaluateAt(A));y[x]=this.field.multiply(T,S)}return y}}class Jr{constructor(r,s,a,u,c){r instanceof Jr?this.constructor_2(r):this.constructor_1(r,s,a,u,c)}constructor_1(r,s,a,u,c){const h=s==null||a==null,d=u==null||c==null;if(h&&d)throw new te;h?(s=new _e(0,u.getY()),a=new _e(0,c.getY())):d&&(u=new _e(r.getWidth()-1,s.getY()),c=new _e(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(a.getY(),c.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Jr(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let u=this.topLeft,c=this.bottomLeft,h=this.topRight,d=this.bottomRight;if(r>0){let y=a?this.topLeft:this.topRight,x=Math.trunc(y.getY()-r);x<0&&(x=0);let A=new _e(y.getX(),x);a?u=A:h=A}if(s>0){let y=a?this.bottomLeft:this.bottomRight,x=Math.trunc(y.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let A=new _e(y.getX(),x);a?c=A:d=A}return new Jr(this.image,u,c,h,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Bs{constructor(r,s,a,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class kr{constructor(){this.buffer=""}static form(r,s){let a=-1;function u(h,d,y,x,A,T){if(h==="%%")return"%";if(s[++a]===void 0)return;h=x?parseInt(x.substr(1)):void 0;let S=A?parseInt(A.substr(1)):void 0,B;switch(T){case"s":B=s[a];break;case"c":B=s[a][0];break;case"f":B=parseFloat(s[a]).toFixed(h);break;case"p":B=parseFloat(s[a]).toPrecision(h);break;case"e":B=parseFloat(s[a]).toExponential(h);break;case"x":B=parseInt(s[a]).toString(S||16);break;case"d":B=parseFloat(parseInt(s[a],S||10).toPrecision(h)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(S);let H=parseInt(y),X=y&&y[0]+""=="0"?"0":" ";for(;B.length<H;)B=d!==void 0?B+X:X+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,u)}format(r,...s){this.buffer+=kr.form(r,s)}toString(){return this.buffer}}class ji{constructor(r){this.boundingBox=new Jr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<ji.MAX_NEARBY_DISTANCE;a++){let u=this.imageRowToCodewordIndex(r)-a;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+a,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new kr;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}ji.MAX_NEARBY_DISTANCE=5;class wi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,u]of this.values.entries()){const c={getKey:()=>a,getValue:()=>u};c.getValue()>r?(r=c.getValue(),s=[],s.push(c.getKey())):c.getValue()===r&&s.push(c.getKey())}return Re.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class xt extends ji{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),u=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=-1,x=1,A=0;for(let T=h;T<d;T++){if(s[T]==null)continue;let S=s[T],B=S.getRowNumber()-y;if(B===0)A++;else if(B===1)x=Math.max(x,A),A=1,y=S.getRowNumber();else if(B<0||S.getRowNumber()>=r.getRowCount()||B>T)s[T]=null;else{let H;x>2?H=(x-2)*B:H=B;let X=H>=T;for(let $=1;$<=H&&!X;$++)X=s[T-$]!=null;X?s[T]=null:(y=S.getRowNumber(),A=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let u=a.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),d=this.getCodewords(),y=-1;for(let x=c;x<h;x++){if(d[x]==null)continue;let A=d[x];A.setRowNumberAsRowIndicatorColumn();let T=A.getRowNumber()-y;T===0||(T===1?y=A.getRowNumber():A.getRowNumber()>=r.getRowCount()?d[x]=null:y=A.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new wi,a=new wi,u=new wi,c=new wi;for(let d of r){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let y=d.getValue()%30,x=d.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:a.setValue(y*3+1);break;case 1:c.setValue(y/3),u.setValue(y%3);break;case 2:s.setValue(y+1);break}}if(s.getValue().length===0||a.getValue().length===0||u.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+u.getValue()[0]<Re.MIN_ROWS_IN_BARCODE||a.getValue()[0]+u.getValue()[0]>Re.MAX_ROWS_IN_BARCODE)return null;let h=new Bs(s.getValue()[0],a.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let u=r[a];if(r[a]==null)continue;let c=u.getValue()%30,h=u.getRowNumber();if(h>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:c*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(c/3)!==s.getErrorCorrectionLevel()||c%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:c+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Fs{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Re.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let u=0;u<a.length;u++)a[u]!=null&&(a[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[a];c!=null&&(c.setRowNumber(r[a].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let u=s[a].getRowNumber(),c=0;for(let h=this.barcodeColumnCount+1;h>0&&c<this.ADJUST_ROW_NUMBER_SKIP;h--){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(c=Fs.adjustRowNumberIfValid(u,c,d),d.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let u=s[a].getRowNumber(),c=0;for(let h=1;h<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;h++){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(c=Fs.adjustRowNumberIfValid(u,c,d),d.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let u=a[s],c=this.detectionResultColumns[r-1].getCodewords(),h=c;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let d=new Array(14);d[2]=c[s],d[3]=h[s],s>0&&(d[0]=a[s-1],d[4]=c[s-1],d[5]=h[s-1]),s>1&&(d[8]=a[s-2],d[10]=c[s-2],d[11]=h[s-2]),s<a.length-1&&(d[1]=a[s+1],d[6]=c[s+1],d[7]=h[s+1]),s<a.length-2&&(d[9]=a[s+2],d[12]=c[s+2],d[13]=h[s+2]);for(let y of d)if(Fs.adjustRowNumber(u,y))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new kr;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[a];if(c==null){s.format("    |   ");continue}s.format(" %3d|%3d",c.getRowNumber(),c.getValue())}s.format("%n")}return s.toString()}}class Vs{constructor(r,s,a,u){this.rowNumber=Vs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Vs.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Vs.BARCODE_ROW_UNKNOWN=-1;class xn{static initialize(){for(let r=0;r<Re.SYMBOL_TABLE.length;r++){let s=Re.SYMBOL_TABLE[r],a=s&1;for(let u=0;u<Re.BARS_IN_MODULE;u++){let c=0;for(;(s&1)===a;)c+=1,s>>=1;a=s&1,xn.RATIOS_TABLE[r]||(xn.RATIOS_TABLE[r]=new Array(Re.BARS_IN_MODULE)),xn.RATIOS_TABLE[r][Re.BARS_IN_MODULE-u-1]=Math.fround(c/Re.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=xn.getDecodedCodewordValue(xn.sampleBitCounts(r));return s!==-1?s:xn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ze.sum(r),a=new Int32Array(Re.BARS_IN_MODULE),u=0,c=0;for(let h=0;h<Re.MODULES_IN_CODEWORD;h++){let d=s/(2*Re.MODULES_IN_CODEWORD)+h*s/Re.MODULES_IN_CODEWORD;c+r[u]<=d&&(c+=r[u],u++),a[u]++}return a}static getDecodedCodewordValue(r){let s=xn.getBitValue(r);return Re.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let u=0;u<r[a];u++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ze.sum(r),a=new Array(Re.BARS_IN_MODULE);if(s>1)for(let h=0;h<a.length;h++)a[h]=Math.fround(r[h]/s);let u=Bi.MAX_VALUE,c=-1;this.bSymbolTableReady||xn.initialize();for(let h=0;h<xn.RATIOS_TABLE.length;h++){let d=0,y=xn.RATIOS_TABLE[h];for(let x=0;x<Re.BARS_IN_MODULE;x++){let A=Math.fround(y[x]-a[x]);if(d+=Math.fround(A*A),d>=u)break}d<u&&(u=d,c=Re.SYMBOL_TABLE[h])}return c}}xn.bSymbolTableReady=!1,xn.RATIOS_TABLE=new Array(Re.SYMBOL_TABLE.length).map(I=>new Array(Re.BARS_IN_MODULE));class ba{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Da{static parseLong(r,s=void 0){return parseInt(r,s)}}class Us extends w{}Us.kind="NullPointerException";class iu{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new Us;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new q;if(a===0)return;for(let u=0;u<a;u++)this.write(r[s+u])}flush(){}close(){}}class Lr extends w{}class su extends iu{constructor(r=32){if(super(),this.count=0,r<0)throw new C("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new Lr;a=M.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new q;this.ensureCapacity(this.count+a),z.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var nt;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(nt||(nt={}));function Hi(){if(typeof window<"u")return window.BigInt||null;if(typeof ka<"u")return ka.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let zs;function Ir(I){if(typeof zs>"u"&&(zs=Hi()),zs===null)throw new Error("BigInt is not supported!");return zs(I)}function Ao(){let I=[];I[0]=Ir(1);let r=Ir(900);I[1]=r;for(let s=2;s<16;s++)I[s]=I[s-1]*r;return I}class Z{static decode(r,s){let a=new V(""),u=b.ISO8859_1;a.enableDecoding(u);let c=1,h=r[c++],d=new ba;for(;c<r[0];){switch(h){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(r,c,a);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(h,r,u,c,a);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(r,c,a);break;case Z.ECI_CHARSET:b.getCharacterSetECIByValue(r[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(r,c,d);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new N;default:c--,c=Z.textCompaction(r,c,a);break}if(c<r.length)h=r[c++];else throw N.getFormatInstance()}if(a.length()===0)throw N.getFormatInstance();let y=new Ns(null,a.toString(),null,s);return y.setOther(d),y}static decodeMacroBlock(r,s,a){if(s+Z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw N.getFormatInstance();let u=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<Z.NUMBER_OF_SEQUENCE_CODEWORDS;d++,s++)u[d]=r[s];a.setSegmentIndex(M.parseInt(Z.decodeBase900toBase10(u,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new V;s=Z.textCompaction(r,s,c),a.setFileId(c.toString());let h=-1;for(r[s]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<r[0];)switch(r[s]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new V;s=Z.textCompaction(r,s+1,d),a.setFileName(d.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new V;s=Z.textCompaction(r,s+1,y),a.setSender(y.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new V;s=Z.textCompaction(r,s+1,x),a.setAddressee(x.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let A=new V;s=Z.numericCompaction(r,s+1,A),a.setSegmentCount(M.parseInt(A.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new V;s=Z.numericCompaction(r,s+1,T),a.setTimestamp(Da.parseLong(T.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new V;s=Z.numericCompaction(r,s+1,S),a.setChecksum(M.parseInt(S.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let B=new V;s=Z.numericCompaction(r,s+1,B),a.setFileSize(Da.parseLong(B.toString()));break;default:throw N.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw N.getFormatInstance()}if(h!==-1){let d=s-h;a.isLastSegment()&&d--,a.setOptionalData(O.copyOfRange(r,h,h+d))}return s}static textCompaction(r,s,a){let u=new Int32Array((r[0]-s)*2),c=new Int32Array((r[0]-s)*2),h=0,d=!1;for(;s<r[0]&&!d;){let y=r[s++];if(y<Z.TEXT_COMPACTION_MODE_LATCH)u[h]=y/30,u[h+1]=y%30,h+=2;else switch(y){case Z.TEXT_COMPACTION_MODE_LATCH:u[h++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,d=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[h]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=r[s++],c[h]=y,h++;break}}return Z.decodeTextCompaction(u,c,h,a),s}static decodeTextCompaction(r,s,a,u){let c=nt.ALPHA,h=nt.ALPHA,d=0;for(;d<a;){let y=r[d],x="";switch(c){case nt.ALPHA:if(y<26)x=String.fromCharCode(65+y);else switch(y){case 26:x=" ";break;case Z.LL:c=nt.LOWER;break;case Z.ML:c=nt.MIXED;break;case Z.PS:h=c,c=nt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.LOWER:if(y<26)x=String.fromCharCode(97+y);else switch(y){case 26:x=" ";break;case Z.AS:h=c,c=nt.ALPHA_SHIFT;break;case Z.ML:c=nt.MIXED;break;case Z.PS:h=c,c=nt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.MIXED:if(y<Z.PL)x=Z.MIXED_CHARS[y];else switch(y){case Z.PL:c=nt.PUNCT;break;case 26:x=" ";break;case Z.LL:c=nt.LOWER;break;case Z.AL:c=nt.ALPHA;break;case Z.PS:h=c,c=nt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.PUNCT:if(y<Z.PAL)x=Z.PUNCT_CHARS[y];else switch(y){case Z.PAL:c=nt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.ALPHA_SHIFT:if(c=h,y<26)x=String.fromCharCode(65+y);else switch(y){case 26:x=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break;case nt.PUNCT_SHIFT:if(c=h,y<Z.PAL)x=Z.PUNCT_CHARS[y];else switch(y){case Z.PAL:c=nt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[d]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=nt.ALPHA;break}break}x!==""&&u.append(x),d++}}static byteCompaction(r,s,a,u,c){let h=new su,d=0,y=0,x=!1;switch(r){case Z.BYTE_COMPACTION_MODE_LATCH:let A=new Int32Array(6),T=s[u++];for(;u<s[0]&&!x;)switch(A[d++]=T,y=900*y+T,T=s[u++],T){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,x=!0;break;default:if(d%5===0&&d>0){for(let S=0;S<6;++S)h.write(Number(Ir(y)>>Ir(8*(5-S))));y=0,d=0}break}u===s[0]&&T<Z.TEXT_COMPACTION_MODE_LATCH&&(A[d++]=T);for(let S=0;S<d;S++)h.write(A[S]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!x;){let S=s[u++];if(S<Z.TEXT_COMPACTION_MODE_LATCH)d++,y=900*y+S;else switch(S){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,x=!0;break}if(d%5===0&&d>0){for(let B=0;B<6;++B)h.write(Number(Ir(y)>>Ir(8*(5-B))));y=0,d=0}}break}return c.append(G.decode(h.toByteArray(),a)),u}static numericCompaction(r,s,a){let u=0,c=!1,h=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!c;){let d=r[s++];if(s===r[0]&&(c=!0),d<Z.TEXT_COMPACTION_MODE_LATCH)h[u]=d,u++;else switch(d){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,c=!0;break}(u%Z.MAX_NUMERIC_CODEWORDS===0||d===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(a.append(Z.decodeBase900toBase10(h,u)),u=0)}return s}static decodeBase900toBase10(r,s){let a=Ir(0);for(let c=0;c<s;c++)a+=Z.EXP900[s-c-1]*Ir(r[c]);let u=a.toString();if(u.charAt(0)!=="1")throw new N;return u.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=Hi()?Ao():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Me{constructor(){}static decode(r,s,a,u,c,h,d){let y=new Jr(r,s,a,u,c),x=null,A=null,T;for(let H=!0;;H=!1){if(s!=null&&(x=Me.getRowIndicatorColumn(r,y,s,!0,h,d)),u!=null&&(A=Me.getRowIndicatorColumn(r,y,u,!1,h,d)),T=Me.merge(x,A),T==null)throw te.getNotFoundInstance();let X=T.getBoundingBox();if(H&&X!=null&&(X.getMinY()<y.getMinY()||X.getMaxY()>y.getMaxY()))y=X;else break}T.setBoundingBox(y);let S=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,x),T.setDetectionResultColumn(S,A);let B=x!=null;for(let H=1;H<=S;H++){let X=B?H:S-H;if(T.getDetectionResultColumn(X)!==void 0)continue;let $;X===0||X===S?$=new xt(y,X===0):$=new ji(y),T.setDetectionResultColumn(X,$);let ee=-1,ue=ee;for(let ce=y.getMinY();ce<=y.getMaxY();ce++){if(ee=Me.getStartColumn(T,X,ce,B),ee<0||ee>y.getMaxX()){if(ue===-1)continue;ee=ue}let ae=Me.detectCodeword(r,y.getMinX(),y.getMaxX(),B,ee,ce,h,d);ae!=null&&($.setCodeword(ce,ae),ue=ee,h=Math.min(h,ae.getWidth()),d=Math.max(d,ae.getWidth()))}}return Me.createDecoderResult(T)}static merge(r,s){if(r==null&&s==null)return null;let a=Me.getBarcodeMetadata(r,s);if(a==null)return null;let u=Jr.merge(Me.adjustBoundingBox(r),Me.adjustBoundingBox(s));return new Fs(a,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=Me.getMax(s),u=0;for(let d of s)if(u+=a-d,d>0)break;let c=r.getCodewords();for(let d=0;u>0&&c[d]==null;d++)u--;let h=0;for(let d=s.length-1;d>=0&&(h+=a-s[d],!(s[d]>0));d--);for(let d=c.length-1;h>0&&c[d]==null;d--)h--;return r.getBoundingBox().addMissingRows(u,h,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==u.getColumnCount()&&a.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&a.getRowCount()!==u.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,u,c,h){let d=new xt(s,u);for(let y=0;y<2;y++){let x=y===0?1:-1,A=Math.trunc(Math.trunc(a.getX()));for(let T=Math.trunc(Math.trunc(a.getY()));T<=s.getMaxY()&&T>=s.getMinY();T+=x){let S=Me.detectCodeword(r,0,r.getWidth(),u,A,T,c,h);S!=null&&(d.setCodeword(T,S),u?A=S.getStartX():A=S.getEndX())}}return d}static adjustCodewordCount(r,s){let a=s[0][1],u=a.getValue(),c=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Me.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(c<1||c>Re.MAX_CODEWORDS_IN_BARCODE)throw te.getNotFoundInstance();a.setValue(c)}else u[0]!==c&&a.setValue(c)}static createDecoderResult(r){let s=Me.createBarcodeMatrix(r);Me.adjustCodewordCount(r,s);let a=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),c=[],h=new Array;for(let y=0;y<r.getBarcodeRowCount();y++)for(let x=0;x<r.getBarcodeColumnCount();x++){let A=s[y][x+1].getValue(),T=y*r.getBarcodeColumnCount()+x;A.length===0?a.push(T):A.length===1?u[T]=A[0]:(h.push(T),c.push(A))}let d=new Array(c.length);for(let y=0;y<d.length;y++)d[y]=c[y];return Me.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,Re.toIntArray(a),Re.toIntArray(h),d)}static createDecoderResultFromAmbiguousValues(r,s,a,u,c){let h=new Int32Array(u.length),d=100;for(;d-- >0;){for(let y=0;y<h.length;y++)s[u[y]]=c[y][h[y]];try{return Me.decodeCodewords(s,r,a)}catch(y){if(!(y instanceof L))throw y}if(h.length===0)throw L.getChecksumInstance();for(let y=0;y<h.length;y++)if(h[y]<c[y].length-1){h[y]++;break}else if(h[y]=0,y===h.length-1)throw L.getChecksumInstance()}throw L.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let c=0;c<s[u].length;c++)s[u][c]=new wi;let a=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][a].setValue(c.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,u){let c=u?1:-1,h=null;if(Me.isValidBarcodeColumn(r,s-c)&&(h=r.getDetectionResultColumn(s-c).getCodeword(a)),h!=null)return u?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(s).getCodewordNearby(a),h!=null)return u?h.getStartX():h.getEndX();if(Me.isValidBarcodeColumn(r,s-c)&&(h=r.getDetectionResultColumn(s-c).getCodewordNearby(a)),h!=null)return u?h.getEndX():h.getStartX();let d=0;for(;Me.isValidBarcodeColumn(r,s-c);){s-=c;for(let y of r.getDetectionResultColumn(s).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+c*d*(y.getEndX()-y.getStartX());d++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,u,c,h,d,y){c=Me.adjustCodewordStartColumn(r,s,a,u,c,h);let x=Me.getModuleBitCount(r,s,a,u,c,h);if(x==null)return null;let A,T=ze.sum(x);if(u)A=c+T;else{for(let H=0;H<x.length/2;H++){let X=x[H];x[H]=x[x.length-1-H],x[x.length-1-H]=X}A=c,c=A-T}if(!Me.checkCodewordSkew(T,d,y))return null;let S=xn.getDecodedValue(x),B=Re.getCodeword(S);return B===-1?null:new Vs(c,A,Me.getCodewordBucketNumber(S),B)}static getModuleBitCount(r,s,a,u,c,h){let d=c,y=new Int32Array(8),x=0,A=u?1:-1,T=u;for(;(u?d<a:d>=s)&&x<y.length;)r.get(d,h)===T?(y[x]++,d+=A):(x++,T=!T);return x===y.length||d===(u?a:s)&&x===y.length-1?y:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,u,c,h){let d=c,y=u?-1:1;for(let x=0;x<2;x++){for(;(u?d>=s:d<a)&&u===r.get(d,h);){if(Math.abs(c-d)>Me.CODEWORD_SKEW_SIZE)return c;d+=y}y=-y,u=!u}return d}static checkCodewordSkew(r,s,a){return s-Me.CODEWORD_SKEW_SIZE<=r&&r<=a+Me.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw N.getFormatInstance();let u=1<<s+1,c=Me.correctErrors(r,a,u);Me.verifyCodewordCount(r,u);let h=Z.decode(r,""+s);return h.setErrorsCorrected(c),h.setErasures(a.length),h}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+Me.MAX_ERRORS||a<0||a>Me.MAX_EC_CODEWORDS)throw L.getChecksumInstance();return Me.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw N.getFormatInstance();let a=r[0];if(a>r.length)throw N.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw N.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,u=s.length-1;for(;!((r&1)!==a&&(a=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Me.getCodewordBucketNumber(Me.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new kr;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let u=0;u<r[a].length;u++){let c=r[a][u];c.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}s.format("%n")}return s.toString()}}Me.CODEWORD_SKEW_SIZE=2,Me.MAX_ERRORS=3,Me.MAX_EC_CODEWORDS=512,Me.errorCorrection=new Ls;class rn{decode(r,s=null){let a=rn.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw te.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return rn.decode(r,s,!0)}catch(a){throw a instanceof N||a instanceof L?te.getNotFoundInstance():a}}static decode(r,s,a){const u=new Array,c=De.detectMultiple(r,s,a);for(const h of c.getPoints()){const d=Me.decode(c.getBits(),h[4],h[5],h[6],h[7],rn.getMinCodewordWidth(h),rn.getMaxCodewordWidth(h)),y=new yt(d.getText(),d.getRawBytes(),void 0,h,Ae.PDF_417);y.putMetadata(Kt.ERROR_CORRECTION_LEVEL,d.getECLevel());const x=d.getOther();x!=null&&y.putMetadata(Kt.PDF417_EXTRA_METADATA,x),u.push(y)}return u.map(h=>h)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?M.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(rn.getMaxWidth(r[0],r[4]),rn.getMaxWidth(r[6],r[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.max(rn.getMaxWidth(r[1],r[5]),rn.getMaxWidth(r[7],r[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(rn.getMinWidth(r[0],r[4]),rn.getMinWidth(r[6],r[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.min(rn.getMinWidth(r[1],r[5]),rn.getMinWidth(r[7],r[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}reset(){}}class js extends w{}js.kind="ReaderException";class Wi{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(ne.TRY_HARDER)===!0,a=i(r)?null:r.get(ne.POSSIBLE_FORMATS),u=new Array;if(!i(a)){const c=a.some(h=>h===Ae.UPC_A||h===Ae.UPC_E||h===Ae.EAN_13||h===Ae.EAN_8||h===Ae.CODABAR||h===Ae.CODE_39||h===Ae.CODE_93||h===Ae.CODE_128||h===Ae.ITF||h===Ae.RSS_14||h===Ae.RSS_EXPANDED);c&&!s&&u.push(new Qr(r,this.verbose)),a.includes(Ae.QR_CODE)&&u.push(new Zr),a.includes(Ae.DATA_MATRIX)&&u.push(new Mr),a.includes(Ae.AZTEC)&&u.push(new mo),a.includes(Ae.PDF_417)&&u.push(new rn),c&&s&&u.push(new Qr(r,this.verbose))}u.length===0&&(s||u.push(new Qr(r,this.verbose)),u.push(new Zr),u.push(new Mr),u.push(new mo),u.push(new rn),s&&u.push(new Qr(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new js("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof js)continue}throw new te("No MultiFormat Readers were able to detect the code.")}}class ou extends st{constructor(r=null,s=500){const a=new Wi;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class au extends st{constructor(r=500){super(new rn,r)}}class Pa extends st{constructor(r=500){super(new Zr,r)}}var Hs;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(Hs||(Hs={}));var Vt=Hs;class Gi{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Zt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const u=this.field;for(let c=s.length;c<=r;c++){const h=a.multiply(new Zt(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));s.push(h),a=h}}return s[r]}encode(r,s){if(s===0)throw new C("No error correction bytes");const a=r.length-s;if(a<=0)throw new C("No data bytes provided");const u=this.buildGenerator(s),c=new Int32Array(a);z.arraycopy(r,0,c,0,a);let h=new Zt(this.field,c);h=h.multiplyByMonomial(s,1);const y=h.divide(u)[1].getCoefficients(),x=s-y.length;for(let A=0;A<x;A++)r[a+A]=0;z.arraycopy(y,0,r,a+x,y.length)}}class Et{constructor(){}static applyMaskPenaltyRule1(r){return Et.applyMaskPenaltyRule1Internal(r,!0)+Et.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),u=r.getWidth(),c=r.getHeight();for(let h=0;h<c-1;h++){const d=a[h];for(let y=0;y<u-1;y++){const x=d[y];x===d[y+1]&&x===a[h+1][y]&&x===a[h+1][y+1]&&s++}}return Et.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),u=r.getWidth(),c=r.getHeight();for(let h=0;h<c;h++)for(let d=0;d<u;d++){const y=a[h];d+6<u&&y[d]===1&&y[d+1]===0&&y[d+2]===1&&y[d+3]===1&&y[d+4]===1&&y[d+5]===0&&y[d+6]===1&&(Et.isWhiteHorizontal(y,d-4,d)||Et.isWhiteHorizontal(y,d+7,d+11))&&s++,h+6<c&&a[h][d]===1&&a[h+1][d]===0&&a[h+2][d]===1&&a[h+3][d]===1&&a[h+4][d]===1&&a[h+5][d]===0&&a[h+6][d]===1&&(Et.isWhiteVertical(a,d,h-4,h)||Et.isWhiteVertical(a,d,h+7,h+11))&&s++}return s*Et.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let u=s;u<a;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,a,u){a=Math.max(a,0),u=Math.min(u,r.length);for(let c=a;c<u;c++)if(r[c][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),u=r.getWidth(),c=r.getHeight();for(let y=0;y<c;y++){const x=a[y];for(let A=0;A<u;A++)x[A]===1&&s++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*Et.N4}static getDataMaskBit(r,s,a){let u,c;switch(r){case 0:u=a+s&1;break;case 1:u=a&1;break;case 2:u=s%3;break;case 3:u=(a+s)%3;break;case 4:u=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:c=a*s,u=(c&1)+c%3;break;case 6:c=a*s,u=(c&1)+c%3&1;break;case 7:c=a*s,u=c%3+(a+s&1)&1;break;default:throw new C("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const u=s?r.getHeight():r.getWidth(),c=s?r.getWidth():r.getHeight(),h=r.getArray();for(let d=0;d<u;d++){let y=0,x=-1;for(let A=0;A<c;A++){const T=s?h[d][A]:h[A][d];T===x?y++:(y>=5&&(a+=Et.N1+(y-5)),y=1,x=T)}y>=5&&(a+=Et.N1+(y-5))}return a}}Et.N1=3,Et.N2=3,Et.N3=40,Et.N4=10;class Ws{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let u=0;u!==s;u++)a[u]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)O.fill(s,r)}equals(r){if(!(r instanceof Ws))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,u=this.height;a<u;++a){const c=this.bytes[a],h=s.bytes[a];for(let d=0,y=this.width;d<y;++d)if(c[d]!==h[d])return!1}return!0}toString(){const r=new V;for(let s=0,a=this.height;s<a;++s){const u=this.bytes[s];for(let c=0,h=this.width;c<h;++c)switch(u[c]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Ln{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new V;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Ln.NUM_MASK_PATTERNS}}Ln.NUM_MASK_PATTERNS=8;class rt extends w{}rt.kind="WriterException";class Te{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,u,c){Te.clearMatrix(c),Te.embedBasicPatterns(a,c),Te.embedTypeInfo(s,u,c),Te.maybeEmbedVersionInfo(a,c),Te.embedDataBits(r,u,c)}static embedBasicPatterns(r,s){Te.embedPositionDetectionPatternsAndSeparators(s),Te.embedDarkDotAtLeftBottomCorner(s),Te.maybeEmbedPositionAdjustmentPatterns(r,s),Te.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const u=new K;Te.makeTypeInfoBits(r,s,u);for(let c=0,h=u.getSize();c<h;++c){const d=u.get(u.getSize()-1-c),y=Te.TYPE_INFO_COORDINATES[c],x=y[0],A=y[1];if(a.setBoolean(x,A,d),c<8){const T=a.getWidth()-c-1;a.setBoolean(T,8,d)}else{const S=a.getHeight()-7+(c-8);a.setBoolean(8,S,d)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new K;Te.makeVersionInfoBits(r,a);let u=6*3-1;for(let c=0;c<6;++c)for(let h=0;h<3;++h){const d=a.get(u);u--,s.setBoolean(c,s.getHeight()-11+h,d),s.setBoolean(s.getHeight()-11+h,c,d)}}static embedDataBits(r,s,a){let u=0,c=-1,h=a.getWidth()-1,d=a.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);d>=0&&d<a.getHeight();){for(let y=0;y<2;++y){const x=h-y;if(!Te.isEmpty(a.get(x,d)))continue;let A;u<r.getSize()?(A=r.get(u),++u):A=!1,s!==255&&Et.getDataMaskBit(s,x,d)&&(A=!A),a.setBoolean(x,d,A)}d+=c}c=-c,d+=c,h-=2}if(u!==r.getSize())throw new rt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-M.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new C("0 polynomial");const a=Te.findMSBSet(s);for(r<<=a-1;Te.findMSBSet(r)>=a;)r^=s<<Te.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!Ln.isValidMaskPattern(s))throw new rt("Invalid mask pattern");const u=r.getBits()<<3|s;a.appendBits(u,5);const c=Te.calculateBCHCode(u,Te.TYPE_INFO_POLY);a.appendBits(c,10);const h=new K;if(h.appendBits(Te.TYPE_INFO_MASK_PATTERN,15),a.xor(h),a.getSize()!==15)throw new rt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Te.calculateBCHCode(r.getVersionNumber(),Te.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new rt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Te.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Te.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new rt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let u=0;u<8;++u){if(!Te.isEmpty(a.get(r+u,s)))throw new rt;a.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let u=0;u<7;++u){if(!Te.isEmpty(a.get(r,s+u)))throw new rt;a.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let u=0;u<5;++u){const c=Te.POSITION_ADJUSTMENT_PATTERN[u];for(let h=0;h<5;++h)a.setNumber(r+h,s+u,c[h])}}static embedPositionDetectionPattern(r,s,a){for(let u=0;u<7;++u){const c=Te.POSITION_DETECTION_PATTERN[u];for(let h=0;h<7;++h)a.setNumber(r+h,s+u,c[h])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Te.POSITION_DETECTION_PATTERN[0].length;Te.embedPositionDetectionPattern(0,0,r),Te.embedPositionDetectionPattern(r.getWidth()-s,0,r),Te.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Te.embedHorizontalSeparationPattern(0,a-1,r),Te.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Te.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const u=7;Te.embedVerticalSeparationPattern(u,0,r),Te.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),Te.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,u=Te.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let c=0,h=u.length;c!==h;c++){const d=u[c];if(d>=0)for(let y=0;y!==h;y++){const x=u[y];x>=0&&Te.isEmpty(s.get(x,d))&&Te.embedPositionAdjustmentPattern(x-2,d-2,s)}}}}Te.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Te.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Te.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Te.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Te.VERSION_INFO_POLY=7973,Te.TYPE_INFO_POLY=1335,Te.TYPE_INFO_MASK_PATTERN=21522;class lu{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ht{constructor(){}static calculateMaskPenalty(r){return Et.applyMaskPenaltyRule1(r)+Et.applyMaskPenaltyRule2(r)+Et.applyMaskPenaltyRule3(r)+Et.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let u=ht.DEFAULT_BYTE_MODE_ENCODING;const c=a!==null&&a.get(Vt.CHARACTER_SET)!==void 0;c&&(u=a.get(Vt.CHARACTER_SET).toString());const h=this.chooseMode(r,u),d=new K;if(h===ve.BYTE&&(c||ht.DEFAULT_BYTE_MODE_ENCODING!==u)){const ce=b.getCharacterSetECIByName(u);ce!==void 0&&this.appendECI(ce,d)}this.appendModeInfo(h,d);const y=new K;this.appendBytes(r,h,y,u);let x;if(a!==null&&a.get(Vt.QR_VERSION)!==void 0){const ce=Number.parseInt(a.get(Vt.QR_VERSION).toString(),10);x=ge.getVersionForNumber(ce);const ae=this.calculateBitsNeeded(h,d,y,x);if(!this.willFit(ae,x,s))throw new rt("Data too big for requested version")}else x=this.recommendVersion(s,h,d,y);const A=new K;A.appendBitArray(d);const T=h===ve.BYTE?y.getSizeInBytes():r.length;this.appendLengthInfo(T,x,h,A),A.appendBitArray(y);const S=x.getECBlocksForLevel(s),B=x.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(B,A);const H=this.interleaveWithECBytes(A,x.getTotalCodewords(),B,S.getNumBlocks()),X=new Ln;X.setECLevel(s),X.setMode(h),X.setVersion(x);const $=x.getDimensionForVersion(),ee=new Ws($,$),ue=this.chooseMaskPattern(H,s,x,ee);return X.setMaskPattern(ue),Te.buildMatrix(H,s,x,ue,ee),X.setMatrix(ee),X}static recommendVersion(r,s,a,u){const c=this.calculateBitsNeeded(s,a,u,ge.getVersionForNumber(1)),h=this.chooseVersion(c,r),d=this.calculateBitsNeeded(s,a,u,h);return this.chooseVersion(d,r)}static calculateBitsNeeded(r,s,a,u){return s.getSize()+r.getCharacterCountBits(u)+a.getSize()}static getAlphanumericCode(r){return r<ht.ALPHANUMERIC_TABLE.length?ht.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(b.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return ve.KANJI;let a=!1,u=!1;for(let c=0,h=r.length;c<h;++c){const d=r.charAt(c);if(ht.isDigit(d))a=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)u=!0;else return ve.BYTE}return u?ve.ALPHANUMERIC:a?ve.NUMERIC:ve.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=G.encode(r,b.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let u=0;u<a;u+=2){const c=s[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(r,s,a,u){let c=Number.MAX_SAFE_INTEGER,h=-1;for(let d=0;d<Ln.NUM_MASK_PATTERNS;d++){Te.buildMatrix(r,s,a,d,u);let y=this.calculateMaskPenalty(u);y<c&&(c=y,h=d)}return h}static chooseVersion(r,s){for(let a=1;a<=40;a++){const u=ge.getVersionForNumber(a);if(ht.willFit(r,u,s))return u}throw new rt("Data too big")}static willFit(r,s,a){const u=s.getTotalCodewords(),h=s.getECBlocksForLevel(a).getTotalECCodewords(),d=u-h,y=(r+7)/8;return d>=y}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new rt("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let h=0;h<4&&s.getSize()<a;++h)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let h=u;h<8;h++)s.appendBit(!1);const c=r-s.getSizeInBytes();for(let h=0;h<c;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==a)throw new rt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,u,c,h){if(u>=a)throw new rt("Block ID too large");const d=r%a,y=a-d,x=Math.floor(r/a),A=x+1,T=Math.floor(s/a),S=T+1,B=x-T,H=A-S;if(B!==H)throw new rt("EC bytes mismatch");if(a!==y+d)throw new rt("RS blocks mismatch");if(r!==(T+B)*y+(S+H)*d)throw new rt("Total bytes mismatch");u<y?(c[0]=T,h[0]=B):(c[0]=S,h[0]=H)}static interleaveWithECBytes(r,s,a,u){if(r.getSizeInBytes()!==a)throw new rt("Number of bits and data bytes does not match");let c=0,h=0,d=0;const y=new Array;for(let A=0;A<u;++A){const T=new Int32Array(1),S=new Int32Array(1);ht.getNumDataBytesAndNumECBytesForBlockID(s,a,u,A,T,S);const B=T[0],H=new Uint8Array(B);r.toBytes(8*c,H,0,B);const X=ht.generateECBytes(H,S[0]);y.push(new lu(H,X)),h=Math.max(h,B),d=Math.max(d,X.length),c+=T[0]}if(a!==c)throw new rt("Data bytes does not match offset");const x=new K;for(let A=0;A<h;++A)for(const T of y){const S=T.getDataBytes();A<S.length&&x.appendBits(S[A],8)}for(let A=0;A<d;++A)for(const T of y){const S=T.getErrorCorrectionBytes();A<S.length&&x.appendBits(S[A],8)}if(s!==x.getSizeInBytes())throw new rt("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,s){const a=r.length,u=new Int32Array(a+s);for(let h=0;h<a;h++)u[h]=r[h]&255;new Gi(Ge.QR_CODE_FIELD_256).encode(u,s);const c=new Uint8Array(s);for(let h=0;h<s;h++)c[h]=u[a+h];return c}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,u){const c=a.getCharacterCountBits(s);if(r>=1<<c)throw new rt(r+" is bigger than "+((1<<c)-1));u.appendBits(r,c)}static appendBytes(r,s,a,u){switch(s){case ve.NUMERIC:ht.appendNumericBytes(r,a);break;case ve.ALPHANUMERIC:ht.appendAlphanumericBytes(r,a);break;case ve.BYTE:ht.append8BitBytes(r,a,u);break;case ve.KANJI:ht.appendKanjiBytes(r,a);break;default:throw new rt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ht.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let u=0;for(;u<a;){const c=ht.getDigit(r.charAt(u));if(u+2<a){const h=ht.getDigit(r.charAt(u+1)),d=ht.getDigit(r.charAt(u+2));s.appendBits(c*100+h*10+d,10),u+=3}else if(u+1<a){const h=ht.getDigit(r.charAt(u+1));s.appendBits(c*10+h,7),u+=2}else s.appendBits(c,4),u++}}static appendAlphanumericBytes(r,s){const a=r.length;let u=0;for(;u<a;){const c=ht.getAlphanumericCode(r.charCodeAt(u));if(c===-1)throw new rt;if(u+1<a){const h=ht.getAlphanumericCode(r.charCodeAt(u+1));if(h===-1)throw new rt;s.appendBits(c*45+h,11),u+=2}else s.appendBits(c,6),u++}}static append8BitBytes(r,s,a){let u;try{u=G.encode(r,a)}catch(c){throw new rt(c)}for(let c=0,h=u.length;c!==h;c++){const d=u[c];s.appendBits(d,8)}}static appendKanjiBytes(r,s){let a;try{a=G.encode(r,b.SJIS)}catch(c){throw new rt(c)}const u=a.length;for(let c=0;c<u;c+=2){const h=a[c]&255,d=a[c+1]&255,y=h<<8&4294967295|d;let x=-1;if(y>=33088&&y<=40956?x=y-33088:y>=57408&&y<=60351&&(x=y-49472),x===-1)throw new rt("Invalid byte sequence");const A=(x>>8)*192+(x&255);s.appendBits(A,13)}}static appendECI(r,s){s.appendBits(ve.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ht.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ht.DEFAULT_BYTE_MODE_ENCODING=b.UTF8.getName();class Tr{write(r,s,a,u=null){if(r.length===0)throw new C("Found empty contents");if(s<0||a<0)throw new C("Requested dimensions are too small: "+s+"x"+a);let c=je.L,h=Tr.QUIET_ZONE_SIZE;u!==null&&(u.get(Vt.ERROR_CORRECTION)!==void 0&&(c=je.fromString(u.get(Vt.ERROR_CORRECTION).toString())),u.get(Vt.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Vt.MARGIN).toString(),10)));const d=ht.encode(r,c,u);return this.renderResult(d,s,a,h)}writeToDom(r,s,a,u,c=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(s,a,u,c);r&&r.appendChild(h)}renderResult(r,s,a,u){const c=r.getMatrix();if(c===null)throw new jn;const h=c.getWidth(),d=c.getHeight(),y=h+u*2,x=d+u*2,A=Math.max(s,y),T=Math.max(a,x),S=Math.min(Math.floor(A/y),Math.floor(T/x)),B=Math.floor((A-h*S)/2),H=Math.floor((T-d*S)/2),X=this.createSVGElement(A,T);for(let $=0,ee=H;$<d;$++,ee+=S)for(let ue=0,ce=B;ue<h;ue++,ce+=S)if(c.get(ue,$)===1){const ae=this.createSvgRectElement(ce,ee,S,S);X.appendChild(ae)}return X}createSVGElement(r,s){const a=document.createElementNS(Tr.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,u){const c=document.createElementNS(Tr.SVG_NS,"rect");return c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"height",a.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Tr.QUIET_ZONE_SIZE=4,Tr.SVG_NS="http://www.w3.org/2000/svg";class qt{encode(r,s,a,u,c){if(r.length===0)throw new C("Found empty contents");if(s!==Ae.QR_CODE)throw new C("Can only encode QR_CODE, but got "+s);if(a<0||u<0)throw new C(`Requested dimensions are too small: ${a}x${u}`);let h=je.L,d=qt.QUIET_ZONE_SIZE;c!==null&&(c.get(Vt.ERROR_CORRECTION)!==void 0&&(h=je.fromString(c.get(Vt.ERROR_CORRECTION).toString())),c.get(Vt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Vt.MARGIN).toString(),10)));const y=ht.encode(r,h,c);return qt.renderResult(y,a,u,d)}static renderResult(r,s,a,u){const c=r.getMatrix();if(c===null)throw new jn;const h=c.getWidth(),d=c.getHeight(),y=h+u*2,x=d+u*2,A=Math.max(s,y),T=Math.max(a,x),S=Math.min(Math.floor(A/y),Math.floor(T/x)),B=Math.floor((A-h*S)/2),H=Math.floor((T-d*S)/2),X=new et(A,T);for(let $=0,ee=H;$<d;$++,ee+=S)for(let ue=0,ce=B;ue<h;ue++,ce+=S)c.get(ue,$)===1&&X.setRegion(ce,ee,S,S);return X}}qt.QUIET_ZONE_SIZE=4;class uu{encode(r,s,a,u,c){let h;switch(s){case Ae.QR_CODE:h=new qt;break;default:throw new C("No encoder available for format "+s)}return h.encode(r,s,a,u,c)}}class hr extends pe{constructor(r,s,a,u,c,h,d,y){if(super(h,d),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=u,this.top=c,u+h>s||c+d>a)throw new C("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(h,d)}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return z.arraycopy(this.yuvData,u,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,u=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return z.arraycopy(this.yuvData,c,u,0,a),u;for(let h=0;h<s;h++){const d=h*r;z.arraycopy(this.yuvData,c,u,d,r),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,a,u){return new hr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,u,!1)}renderThumbnail(){const r=this.getWidth()/hr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/hr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const d=h*r;for(let y=0;y<r;y++){const x=u[c+y*hr.THUMBNAIL_SCALE_FACTOR]&255;a[d+y]=4278190080|x*65793}c+=this.dataWidth*hr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/hr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/hr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<s;u++,c+=this.dataWidth){const h=c+r/2;for(let d=c,y=c+r-1;d<h;d++,y--){const x=a[d];a[d]=a[y],a[y]=x}}}invert(){return new Ie(this)}}hr.THUMBNAIL_SCALE_FACTOR=2;class ei extends pe{constructor(r,s,a,u,c,h,d){if(super(s,a),this.dataWidth=u,this.dataHeight=c,this.left=h,this.top=d,r.BYTES_PER_ELEMENT===4){const y=s*a,x=new Uint8ClampedArray(y);for(let A=0;A<y;A++){const T=r[A],S=T>>16&255,B=T>>7&510,H=T&255;x[A]=(S+B+H)/4&255}this.luminances=x}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),c===void 0&&(this.dataHeight=a),h===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return z.arraycopy(this.luminances,u,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,u=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return z.arraycopy(this.luminances,c,u,0,a),u;for(let h=0;h<s;h++){const d=h*r;z.arraycopy(this.luminances,c,u,d,r),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,a,u){return new ei(this.luminances,a,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Ie(this)}}class g extends b{static forName(r){return this.getCharacterSetECIByName(r)}}class E{}E.ISO_8859_1=b.ISO8859_1;class v{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class P{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Y{constructor(r){this.previous=r}getPrevious(){return this.previous}}class J extends Y{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new J(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new J(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+M.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class he extends J{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new he(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function at(I,r,s){return new he(I,r,s)}function Ot(I,r,s){return new J(I,r,s)}const Ke=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_t=0,Wt=1,sn=2,Xn=3,Bn=4,Oa=new J(null,0,0),Mh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Px(I){for(let r of I)O.fill(r,-1);return I[_t][Bn]=0,I[Wt][Bn]=0,I[Wt][_t]=28,I[Xn][Bn]=0,I[sn][Bn]=0,I[sn][_t]=15,I}const S0=Px(O.createInt32Array(6,6));class ti{constructor(r,s,a,u){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,u=this.token;if(r!==this.mode){let h=Mh[this.mode][r];u=Ot(u,h&65535,h>>16),a+=h>>16}let c=r===sn?4:5;return u=Ot(u,s,c),new ti(u,r,0,a+c)}shiftAndAppend(r,s){let a=this.token,u=this.mode===sn?4:5;return a=Ot(a,S0[this.mode][r],u),a=Ot(a,s,5),new ti(a,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,u=this.bitCount;if(this.mode===Bn||this.mode===sn){let d=Mh[a][_t];s=Ot(s,d&65535,d>>16),u+=d>>16,a=_t}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new ti(s,a,this.binaryShiftByteCount+1,u+c);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=at(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ti(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Mh[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=ti.calculateBinaryShiftCost(r)-ti.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let a=new K;for(const u of s)u.appendTo(a,r);return a}toString(){return W.format("%s bits=%d bytes=%d",Ke[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ti.INITIAL_STATE=new ti(Oa,_t,0,0);function Ox(I){const r=W.getCharCode(" "),s=W.getCharCode("."),a=W.getCharCode(",");I[_t][r]=1;const u=W.getCharCode("Z"),c=W.getCharCode("A");for(let S=c;S<=u;S++)I[_t][S]=S-c+2;I[Wt][r]=1;const h=W.getCharCode("z"),d=W.getCharCode("a");for(let S=d;S<=h;S++)I[Wt][S]=S-d+2;I[sn][r]=1;const y=W.getCharCode("9"),x=W.getCharCode("0");for(let S=x;S<=y;S++)I[sn][S]=S-x+2;I[sn][a]=12,I[sn][s]=13;const A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<A.length;S++)I[Xn][W.getCharCode(A[S])]=S;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<T.length;S++)W.getCharCode(T[S])>0&&(I[Bn][W.getCharCode(T[S])]=S);return I}const kh=Ox(O.createInt32Array(5,256));class Ma{constructor(r){this.text=r}encode(){const r=W.getCharCode(" "),s=W.getCharCode(`
`);let a=P.singletonList(ti.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let h,d=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case W.getCharCode("\r"):h=d===s?2:0;break;case W.getCharCode("."):h=d===r?3:0;break;case W.getCharCode(","):h=d===r?4:0;break;case W.getCharCode(":"):h=d===r?5:0;break;default:h=0}h>0?(a=Ma.updateStateListForPair(a,c,h),c++):a=this.updateStateListForChar(a,c)}return P.min(a,(c,h)=>c.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let u of r)this.updateStateForChar(u,s,a);return Ma.simplifyStates(a)}updateStateForChar(r,s,a){let u=this.text[s]&255,c=kh[r.getMode()][u]>0,h=null;for(let d=0;d<=Bn;d++){let y=kh[d][u];if(y>0){if(h==null&&(h=r.endBinaryShift(s)),!c||d===r.getMode()||d===sn){const x=h.latchAndAppend(d,y);a.push(x)}if(!c&&S0[r.getMode()][d]>=0){const x=h.shiftAndAppend(d,y);a.push(x)}}}if(r.getBinaryShiftByteCount()>0||kh[r.getMode()][u]===0){let d=r.addBinaryShiftChar(s);a.push(d)}}static updateStateListForPair(r,s,a){const u=[];for(let c of r)this.updateStateForPair(c,s,a,u);return this.simplifyStates(u)}static updateStateForPair(r,s,a,u){let c=r.endBinaryShift(s);if(u.push(c.latchAndAppend(Bn,a)),r.getMode()!==Bn&&u.push(c.shiftAndAppend(Bn,a)),a===3||a===4){let h=c.latchAndAppend(sn,16-a).latchAndAppend(sn,1);u.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(h)}}static simplifyStates(r){let s=[];for(const a of r){let u=!0;for(const c of s){if(c.isBetterThanOrEqualTo(a)){u=!1;break}a.isBetterThanOrEqualTo(c)&&(s=s.filter(h=>h!==c))}u&&s.push(a)}return s}}class Ze{constructor(){}static encodeBytes(r){return Ze.encode(r,Ze.DEFAULT_EC_PERCENT,Ze.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let u=new Ma(r).encode(),c=M.truncDivision(u.getSize()*s,100)+11,h=u.getSize()+c,d,y,x,A,T;if(a!==Ze.DEFAULT_AZTEC_LAYERS){if(d=a<0,y=Math.abs(a),y>(d?Ze.MAX_NB_BITS_COMPACT:Ze.MAX_NB_BITS))throw new C(W.format("Illegal value %s for layers",a));x=Ze.totalBitsInLayer(y,d),A=Ze.WORD_SIZE[y];let ae=x-x%A;if(T=Ze.stuffBits(u,A),T.getSize()+c>ae)throw new C("Data to large for user specified layer");if(d&&T.getSize()>A*64)throw new C("Data to large for user specified layer")}else{A=0,T=null;for(let ae=0;;ae++){if(ae>Ze.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(d=ae<=3,y=d?ae+1:ae,x=Ze.totalBitsInLayer(y,d),h>x)continue;(T==null||A!==Ze.WORD_SIZE[y])&&(A=Ze.WORD_SIZE[y],T=Ze.stuffBits(u,A));let He=x-x%A;if(!(d&&T.getSize()>A*64)&&T.getSize()+c<=He)break}}let S=Ze.generateCheckWords(T,x,A),B=T.getSize()/A,H=Ze.generateModeMessage(d,y,B),X=(d?11:14)+y*4,$=new Int32Array(X),ee;if(d){ee=X;for(let ae=0;ae<$.length;ae++)$[ae]=ae}else{ee=X+1+2*M.truncDivision(M.truncDivision(X,2)-1,15);let ae=M.truncDivision(X,2),He=M.truncDivision(ee,2);for(let Be=0;Be<ae;Be++){let Kn=Be+M.truncDivision(Be,15);$[ae-Be-1]=He-Kn-1,$[ae+Be]=He+Kn+1}}let ue=new et(ee);for(let ae=0,He=0;ae<y;ae++){let Be=(y-ae)*4+(d?9:12);for(let Kn=0;Kn<Be;Kn++){let Br=Kn*2;for(let qn=0;qn<2;qn++)S.get(He+Br+qn)&&ue.set($[ae*2+qn],$[ae*2+Kn]),S.get(He+Be*2+Br+qn)&&ue.set($[ae*2+Kn],$[X-1-ae*2-qn]),S.get(He+Be*4+Br+qn)&&ue.set($[X-1-ae*2-qn],$[X-1-ae*2-Kn]),S.get(He+Be*6+Br+qn)&&ue.set($[X-1-ae*2-Kn],$[ae*2+qn])}He+=Be*8}if(Ze.drawModeMessage(ue,d,ee,H),d)Ze.drawBullsEye(ue,M.truncDivision(ee,2),5);else{Ze.drawBullsEye(ue,M.truncDivision(ee,2),7);for(let ae=0,He=0;ae<M.truncDivision(X,2)-1;ae+=15,He+=16)for(let Be=M.truncDivision(ee,2)&1;Be<ee;Be+=2)ue.set(M.truncDivision(ee,2)-He,Be),ue.set(M.truncDivision(ee,2)+He,Be),ue.set(Be,M.truncDivision(ee,2)-He),ue.set(Be,M.truncDivision(ee,2)+He)}let ce=new v;return ce.setCompact(d),ce.setSize(ee),ce.setLayers(y),ce.setCodeWords(B),ce.setMatrix(ue),ce}static drawBullsEye(r,s,a){for(let u=0;u<a;u+=2)for(let c=s-u;c<=s+u;c++)r.set(c,s-u),r.set(c,s+u),r.set(s-u,c),r.set(s+u,c);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let u=new K;return r?(u.appendBits(s-1,2),u.appendBits(a-1,6),u=Ze.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(a-1,11),u=Ze.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,a,u){let c=M.truncDivision(a,2);if(s)for(let h=0;h<7;h++){let d=c-3+h;u.get(h)&&r.set(d,c-5),u.get(h+7)&&r.set(c+5,d),u.get(20-h)&&r.set(d,c+5),u.get(27-h)&&r.set(c-5,d)}else for(let h=0;h<10;h++){let d=c-5+h+M.truncDivision(h,5);u.get(h)&&r.set(d,c-7),u.get(h+10)&&r.set(c+7,d),u.get(29-h)&&r.set(d,c+7),u.get(39-h)&&r.set(c-7,d)}}static generateCheckWords(r,s,a){let u=r.getSize()/a,c=new Gi(Ze.getGF(a)),h=M.truncDivision(s,a),d=Ze.bitsToWords(r,a,h);c.encode(d,h-u);let y=s%a,x=new K;x.appendBits(0,y);for(const A of Array.from(d))x.appendBits(A,a);return x}static bitsToWords(r,s,a){let u=new Int32Array(a),c,h;for(c=0,h=r.getSize()/s;c<h;c++){let d=0;for(let y=0;y<s;y++)d|=r.get(c*s+y)?1<<s-y-1:0;u[c]=d}return u}static getGF(r){switch(r){case 4:return Ge.AZTEC_PARAM;case 6:return Ge.AZTEC_DATA_6;case 8:return Ge.AZTEC_DATA_8;case 10:return Ge.AZTEC_DATA_10;case 12:return Ge.AZTEC_DATA_12;default:throw new C("Unsupported word size "+r)}}static stuffBits(r,s){let a=new K,u=r.getSize(),c=(1<<s)-2;for(let h=0;h<u;h+=s){let d=0;for(let y=0;y<s;y++)(h+y>=u||r.get(h+y))&&(d|=1<<s-1-y);(d&c)===c?(a.appendBits(d&c,s),h--):d&c?a.appendBits(d,s):(a.appendBits(d|1,s),h--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Ze.DEFAULT_EC_PERCENT=33,Ze.DEFAULT_AZTEC_LAYERS=0,Ze.MAX_NB_BITS=32,Ze.MAX_NB_BITS_COMPACT=4,Ze.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class cu{encode(r,s,a,u){return this.encodeWithHints(r,s,a,u,null)}encodeWithHints(r,s,a,u,c){let h=E.ISO_8859_1,d=Ze.DEFAULT_EC_PERCENT,y=Ze.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Vt.CHARACTER_SET)&&(h=g.forName(c.get(Vt.CHARACTER_SET).toString())),c.has(Vt.ERROR_CORRECTION)&&(d=M.parseInt(c.get(Vt.ERROR_CORRECTION).toString())),c.has(Vt.AZTEC_LAYERS)&&(y=M.parseInt(c.get(Vt.AZTEC_LAYERS).toString()))),cu.encodeLayers(r,s,a,u,h,d,y)}static encodeLayers(r,s,a,u,c,h,d){if(s!==Ae.AZTEC)throw new C("Can only encode AZTEC, but got "+s);let y=Ze.encode(W.getBytes(r,c),h,d);return cu.renderResult(y,a,u)}static renderResult(r,s,a){let u=r.getMatrix();if(u==null)throw new jn;let c=u.getWidth(),h=u.getHeight(),d=Math.max(s,c),y=Math.max(a,h),x=Math.min(d/c,y/h),A=(d-c*x)/2,T=(y-h*x)/2,S=new et(d,y);for(let B=0,H=T;B<h;B++,H+=x)for(let X=0,$=A;X<c;X++,$+=x)u.get(X,B)&&S.setRegion($,H,x,x);return S}}n.AbstractExpandedDecoder=Ui,n.ArgumentException=_,n.ArithmeticException=ki,n.AztecCode=v,n.AztecCodeReader=mo,n.AztecCodeWriter=cu,n.AztecDecoder=ut,n.AztecDetector=Ta,n.AztecDetectorResult=go,n.AztecEncoder=Ze,n.AztecHighLevelEncoder=Ma,n.AztecPoint=hn,n.BarcodeFormat=Ae,n.Binarizer=j,n.BinaryBitmap=R,n.BitArray=K,n.BitMatrix=et,n.BitSource=Eo,n.BrowserAztecCodeReader=bs,n.BrowserBarcodeReader=Rh,n.BrowserCodeReader=st,n.BrowserDatamatrixCodeReader=bh,n.BrowserMultiFormatReader=ou,n.BrowserPDF417Reader=au,n.BrowserQRCodeReader=Pa,n.BrowserQRCodeSvgWriter=Tr,n.CharacterSetECI=b,n.ChecksumException=L,n.Code128Reader=fe,n.Code39Reader=Dt,n.DataMatrixDecodedBitStreamParser=$r,n.DataMatrixReader=Mr,n.DecodeHintType=ne,n.DecoderResult=Ns,n.DefaultGridSampler=cn,n.DetectorResult=fo,n.EAN13Reader=Or,n.EncodeHintType=Vt,n.Exception=w,n.FormatException=N,n.GenericGF=Ge,n.GenericGFPoly=Zt,n.GlobalHistogramBinarizer=It,n.GridSampler=po,n.GridSamplerInstance=sr,n.HTMLCanvasElementLuminanceSource=be,n.HybridBinarizer=Ne,n.ITFReader=ot,n.IllegalArgumentException=C,n.IllegalStateException=jn,n.InvertedLuminanceSource=Ie,n.LuminanceSource=pe,n.MathUtils=ze,n.MultiFormatOneDReader=Qr,n.MultiFormatReader=Wi,n.MultiFormatWriter=uu,n.NotFoundException=te,n.OneDReader=bt,n.PDF417DecodedBitStreamParser=Z,n.PDF417DecoderErrorCorrection=Ls,n.PDF417Reader=rn,n.PDF417ResultMetadata=ba,n.PerspectiveTransform=ct,n.PlanarYUVLuminanceSource=hr,n.QRCodeByteMatrix=Ws,n.QRCodeDataMask=dn,n.QRCodeDecodedBitStreamParser=wt,n.QRCodeDecoderErrorCorrectionLevel=je,n.QRCodeDecoderFormatInformation=jt,n.QRCodeEncoder=ht,n.QRCodeEncoderQRCode=Ln,n.QRCodeMaskUtil=Et,n.QRCodeMatrixUtil=Te,n.QRCodeMode=ve,n.QRCodeReader=Zr,n.QRCodeVersion=ge,n.QRCodeWriter=qt,n.RGBLuminanceSource=ei,n.RSS14Reader=tt,n.RSSExpandedReader=se,n.ReaderException=js,n.ReedSolomonDecoder=Li,n.ReedSolomonEncoder=Gi,n.ReedSolomonException=Kr,n.Result=yt,n.ResultMetadataType=Kt,n.ResultPoint=_e,n.StringUtils=W,n.UnsupportedOperationException=U,n.VideoInputDevice=gt,n.WhiteRectangleDetector=ir,n.WriterException=rt,n.ZXingArrays=O,n.ZXingCharset=g,n.ZXingInteger=M,n.ZXingStandardCharsets=E,n.ZXingStringBuilder=V,n.ZXingStringEncoding=G,n.ZXingSystem=z,n.createAbstractExpandedDecoder=tu,Object.defineProperty(n,"__esModule",{value:!0})})})(zd,zd.exports);var Ct=zd.exports;const m4=im(Ct),y4=rm({__proto__:null,default:m4},[Ct]);var Xp=function(){function t(e,n,i){if(this.formatMap=new Map([[xe.QR_CODE,Ct.BarcodeFormat.QR_CODE],[xe.AZTEC,Ct.BarcodeFormat.AZTEC],[xe.CODABAR,Ct.BarcodeFormat.CODABAR],[xe.CODE_39,Ct.BarcodeFormat.CODE_39],[xe.CODE_93,Ct.BarcodeFormat.CODE_93],[xe.CODE_128,Ct.BarcodeFormat.CODE_128],[xe.DATA_MATRIX,Ct.BarcodeFormat.DATA_MATRIX],[xe.MAXICODE,Ct.BarcodeFormat.MAXICODE],[xe.ITF,Ct.BarcodeFormat.ITF],[xe.EAN_13,Ct.BarcodeFormat.EAN_13],[xe.EAN_8,Ct.BarcodeFormat.EAN_8],[xe.PDF_417,Ct.BarcodeFormat.PDF_417],[xe.RSS_14,Ct.BarcodeFormat.RSS_14],[xe.RSS_EXPANDED,Ct.BarcodeFormat.RSS_EXPANDED],[xe.UPC_A,Ct.BarcodeFormat.UPC_A],[xe.UPC_E,Ct.BarcodeFormat.UPC_E],[xe.UPC_EAN_EXTENSION,Ct.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!y4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(Ct.DecodeHintType.POSSIBLE_FORMATS,o),l.set(Ct.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new Ct.MultiFormatReader(this.verbose,this.hints),i=new Ct.HTMLCanvasElementLuminanceSource(e),o=new Ct.BinaryBitmap(new Ct.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:dx.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),w4=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(_){try{w(i.next(_))}catch(C){f(C)}}function m(_){try{w(i.throw(_))}catch(C){f(C)}}function w(_){_.done?l(_.value):o(_.value).then(p,m)}w((i=i.apply(t,e||[])).next())})},x4=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(w){return function(_){return m([w,_])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(_){w=[6,_],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Kp=function(){function t(e,n,i){if(this.formatMap=new Map([[xe.QR_CODE,"qr_code"],[xe.AZTEC,"aztec"],[xe.CODABAR,"codabar"],[xe.CODE_39,"code_39"],[xe.CODE_93,"code_93"],[xe.CODE_128,"code_128"],[xe.DATA_MATRIX,"data_matrix"],[xe.ITF,"itf"],[xe.EAN_13,"ean_13"],[xe.EAN_8,"ean_8"],[xe.PDF_417,"pdf417"],[xe.UPC_A,"upc_a"],[xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return w4(this,void 0,void 0,function(){var n,i;return x4(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:dx.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],p=f.boundingBox.width*f.boundingBox.height;p>i&&(i=p,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),qp=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(_){try{w(i.next(_))}catch(C){f(C)}}function m(_){try{w(i.throw(_))}catch(C){f(C)}}function w(_){_.done?l(_.value):o(_.value).then(p,m)}w((i=i.apply(t,e||[])).next())})},Yp=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(w){return function(_){return m([w,_])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(_){w=[6,_],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},E4=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Kp.isSupported()?(this.primaryDecoder=new Kp(e,i,o),this.secondaryDecoder=new Xp(e,i,o)):this.primaryDecoder=new Xp(e,i,o)}return t.prototype.decodeAsync=function(e){return qp(this,void 0,void 0,function(){var n;return Yp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return qp(this,void 0,void 0,function(){var n,i;return Yp(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),_0=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Fc=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(_){try{w(i.next(_))}catch(C){f(C)}}function m(_){try{w(i.throw(_))}catch(C){f(C)}}function w(_){_.done?l(_.value):o(_.value).then(p,m)}w((i=i.apply(t,e||[])).next())})},Vc=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(w){return function(_){return m([w,_])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(_){w=[6,_],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},px=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),_4=function(t){_0(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(px),A4=function(t){_0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(_4),C4=function(t){_0(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(px),v4=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new A4(this.track)},t.prototype.torchFeature=function(){return new C4(this.track)},t}(),I4=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return Fc(this,void 0,void 0,function(){var l,f;return Vc(this,function(p){switch(p.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Fc(this,void 0,void 0,function(){return Vc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new v4(this.getFirstTrackOrFail())},t}(),T4=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Fc(this,void 0,void 0,function(){return Vc(this,function(o){return[2,I4.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Fc(this,void 0,void 0,function(){var n,i;return Vc(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),Qp=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(_){try{w(i.next(_))}catch(C){f(C)}}function m(_){try{w(i.throw(_))}catch(C){f(C)}}function w(_){_.done?l(_.value):o(_.value).then(p,m)}w((i=i.apply(t,e||[])).next())})},$p=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(w){return function(_){return m([w,_])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(_){w=[6,_],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},S4=function(){function t(){}return t.failIfNotSupported=function(){return Qp(this,void 0,void 0,function(){return $p(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Qp(this,void 0,void 0,function(){return $p(this,function(n){return[2,T4.create(e)]})})},t}(),R4=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(_){try{w(i.next(_))}catch(C){f(C)}}function m(_){try{w(i.throw(_))}catch(C){f(C)}}function w(_){_.done?l(_.value):o(_.value).then(p,m)}w((i=i.apply(t,e||[])).next())})},N4=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(w){return function(_){return m([w,_])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(_){w=[6,_],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},b4=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ho.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ho.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return R4(this,void 0,void 0,function(){var e,n,i,o,l,f,p;return N4(this,function(m){switch(m.label){case 0:return e=function(w){for(var _=w.getVideoTracks(),C=0,R=_;C<R.length;C++){var L=R[C];L.enabled=!1,L.stop(),w.removeTrack(L)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=m.sent(),o=[],l=0,f=i;l<f.length;l++)p=f[l],p.kind==="videoinput"&&o.push({id:p.deviceId,label:p.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],p=0,m=l;p<m.length;p++){var w=m[p];w.kind==="video"&&f.push({id:w.id,label:w.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),Ut;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Ut||(Ut={}));var D4=function(){function t(){this.state=Ut.NOT_STARTED,this.onGoingTransactionNewState=Ut.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ut.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ut.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ut.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Ut.UNKNOWN:throw"Transition from unknown is not allowed";case Ut.NOT_STARTED:this.failIfNewStateIs(e,[Ut.PAUSED]);break;case Ut.SCANNING:break;case Ut.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),P4=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Ut.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Ut.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ut.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Ut.PAUSED},t}(),O4=function(){function t(){}return t.create=function(){return new P4(new D4)},t}(),M4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),dr=function(t){M4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(d4),k4=function(){function t(e,n){this.logger=n,this.fps=dr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=dr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?gx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!xi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Zp=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new p4(this.verbose),this.qrcode=new E4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=O4.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var p=k4.create(n,this.logger);this.clearElement();var m=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=m,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:dr.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var C=this,R=this.stateManagerProxy.startTransition(Ut.SCANNING);return new Promise(function(L,j){var z=w?p.videoConstraints:C.createVideoConstraints(e);if(!z){R.cancel(),j("videoConstraints should be defined");return}var q={};(!w||p.aspectRatio)&&(q.aspectRatio=p.aspectRatio);var F={onRenderSurfaceReady:function(O,M){C.setupUi(O,M,p),C.isScanning=!0,C.foreverScan(p,i,f)}};S4.failIfNotSupported().then(function(O){O.create(z).then(function(M){return M.render(l.element,q,F).then(function(K){C.renderedCamera=K,R.execute(),L(null)}).catch(function(K){R.cancel(),j(K)})}).catch(function(M){R.cancel(),j(Ho.errorGettingUserMedia(M))})}).catch(function(O){R.cancel(),j(Ho.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ut.PAUSED),this.showPausedState(),(xi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Ut.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ut.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(dr.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(xi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var p=f.width,m=f.height,w=document.getElementById(i.elementId),_=w.clientWidth?w.clientWidth:dr.DEFAULT_WIDTH,C=Math.max(w.clientHeight?w.clientHeight:m,dr.FILE_SCAN_MIN_HEIGHT),R=i.computeCanvasDrawConfig(p,m,_,C);if(n){var L=i.createCanvasElement(_,C,"qr-canvas-visible");L.style.display="inline-block",w.appendChild(L);var j=L.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=_,j.canvas.height=C,j.drawImage(f,0,0,p,m,R.x,R.y,R.width,R.height)}var z=dr.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(f.width,R.width),F=Math.max(f.height,R.height),O=q+2*z,M=F+2*z,K=i.createCanvasElement(O,M);w.appendChild(K);var re=K.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=O,re.canvas.height=M,re.drawImage(f,0,0,p,m,z,z,q,F);try{i.qrcode.decodeRobustlyAsync(K).then(function(ne){o(Gp.createFromQrcodeResult(ne))}).catch(l)}catch(ne){l("QR code parse error, error = ".concat(ne))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return b4.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!gx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[xe.QR_CODE,xe.AZTEC,xe.CODABAR,xe.CODE_39,xe.CODE_93,xe.CODE_128,xe.DATA_MATRIX,xe.MAXICODE,xe.ITF,xe.EAN_13,xe.EAN_8,xe.PDF_417,xe.RSS_14,xe.RSS_EXPANDED,xe.UPC_A,xe.UPC_E,xe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];f4(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(xi(e))return!0;if(!xi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(xi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return xi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),p=function(w){if(w<dr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(dr.MIN_QR_BOX_SIZE,"px.")},m=function(w){return w>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};p(f.width),p(f.height),f.width=m(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=xi(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,p={x:0,y:0,width:e,height:n},m=f?this.getShadedRegionBounds(e,n,l):p,w=this.createCanvasElement(m.width,m.height),_={willReadFrequently:!0},C=w.getContext("2d",_);C.canvas.width=m.width,C.canvas.height=m.height,this.element.append(w),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=C,this.canvasElement=w},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ho.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Gp.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Ho.codeParseError(o);return n(l,g4.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,p=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,w=this.qrRegion.height*p,_=this.qrRegion.x*f,C=this.qrRegion.y*p;this.context.drawImage(l,_,C,m,w,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(L){!L&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){R()})):R()}).catch(function(L){o.logger.logError("Error happend while scanning context",L),R()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(j){if(j in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var w=e.facingMode;if(typeof w=="string"){if(f(w))return{facingMode:w}}else if(typeof w=="object")if(l in w){if(f(w["".concat(l)]))return{facingMode:{exact:w["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var _=typeof w;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(l in C)return{deviceId:{exact:C["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var R=typeof C;throw"Invalid type of 'deviceId' = ".concat(R)}}}var L=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(L)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var p=e,m=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?dr.BORDER_SHADER_MATCH_COLOR:dr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=xi(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,p=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(dr.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var m=5,w=40;this.insertShaderBorders(l,w,m,-m,null,0,!0),this.insertShaderBorders(l,w,m,-m,null,0,!1),this.insertShaderBorders(l,w,m,null,-m,0,!0),this.insertShaderBorders(l,w,m,null,-m,0,!1),this.insertShaderBorders(l,m,w+m,-m,null,-m,!0),this.insertShaderBorders(l,m,w+m,null,-m,-m,!0),this.insertShaderBorders(l,m,w+m,-m,null,-m,!1),this.insertShaderBorders(l,m,w+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,p){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=dr.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(i,"px"),o!==null&&(m.style.top="".concat(o,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),p?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Jp;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Jp||(Jp={}));function L4(){const[t,e]=de.useState(""),[n,i]=de.useState(!1),[o,l]=de.useState(!1);de.useRef(null),de.useEffect(()=>{const p=new Zp("qr-reader");return p.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},m=>{try{p.stop().then(()=>{l(!0);try{const _=new URL(m).searchParams.get("id");if(!_){e("QR Code inválido. ID não encontrado."),i(!0),l(!1);return}fetch("https://controllween.onrender.com/validar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_})}).then(C=>C.json()).then(C=>{e(C.message||"Erro ao validar o convidado."),i(!0),l(!1)}).catch(C=>{console.error("Erro ao validar:",C),e("Erro ao validar o convidado."),i(!0),l(!1)})}catch(w){console.error("Erro ao processar a URL do QR Code:",w),e("Erro ao processar a URL do QR Code."),i(!0),l(!1)}})}catch(w){console.error("Erro ao processar o QR Code:",w),e("Erro ao processar o QR Code."),i(!0)}},m=>{console.warn("Erro na leitura do QR Code:",m)}),()=>{p.stop().catch(m=>console.error("Erro ao parar QR Code Reader:",m))}},[]);const f=()=>{i(!1),e(""),l(!1),new Zp("qr-reader").start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},m=>{},m=>{console.warn("Erro na leitura do QR Code:",m)}).catch(m=>{console.error("Erro ao reiniciar o QR Code Reader:",m)})};return me.jsxs("div",{children:[me.jsx("h2",{children:"Validar QR Code"}),me.jsx("div",{id:"qr-reader",style:{width:"300px"}}),o&&me.jsx("p",{children:"Processando..."}),n&&me.jsx("div",{className:"modal",children:me.jsxs("div",{className:"modal-content",children:[me.jsx("p",{style:{color:"black"},children:t}),me.jsx("button",{onClick:f,children:"Fechar"})]})}),me.jsx("style",{jsx:!0,children:`
        .modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
        }
        .modal-content {
          background: #1a1a1a; /* Fundo escuro para melhor contraste */
          padding: 20px;
          border-radius: 5px;
          text-align: center;
          color: #ffffff; /* Texto branco para visibilidade */
        }
        .modal-content p {
          margin-bottom: 10px;
          color: #ffffff; /* Texto branco */
        }
        .modal-content button {
          padding: 10px 20px;
          border: none;
          background: #007bff; /* Cor de fundo do botão */
          color: white; /* Texto branco */
          border-radius: 5px;
          cursor: pointer;
        }
        .modal-content button:hover {
          background: #0056b3; /* Cor de fundo do botão ao passar o mouse */
        }
      `})]})}var $l={},B4=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},mx={},Ar={};let A0;const F4=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ar.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ar.getSymbolTotalCodewords=function(e){return F4[e]};Ar.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Ar.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');A0=e};Ar.isKanjiModeEnabled=function(){return typeof A0<"u"};Ar.toSJIS=function(e){return A0(e)};var vh={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return e(i)}catch{return o}}})(vh);function yx(){this.buffer=[],this.length=0}yx.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var V4=yx;function Zl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Zl.prototype.set=function(t,e,n,i){const o=t*this.size+e;this.data[o]=n,i&&(this.reservedBit[o]=!0)};Zl.prototype.get=function(t,e){return this.data[t*this.size+e]};Zl.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Zl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var U4=Zl,wx={};(function(t){const e=Ar.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,l=e(i),f=l===145?26:Math.ceil((l-13)/(2*o-2))*2,p=[l-7];for(let m=1;m<o-1;m++)p[m]=p[m-1]-f;return p.push(6),p.reverse()},t.getPositions=function(i){const o=[],l=t.getRowColCoords(i),f=l.length;for(let p=0;p<f;p++)for(let m=0;m<f;m++)p===0&&m===0||p===0&&m===f-1||p===f-1&&m===0||o.push([l[p],l[m]]);return o}})(wx);var xx={};const z4=Ar.getSymbolSize,em=7;xx.getPositions=function(e){const n=z4(e);return[[0,0],[n-em,0],[0,n-em]]};var Ex={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const l=o.size;let f=0,p=0,m=0,w=null,_=null;for(let C=0;C<l;C++){p=m=0,w=_=null;for(let R=0;R<l;R++){let L=o.get(C,R);L===w?p++:(p>=5&&(f+=e.N1+(p-5)),w=L,p=1),L=o.get(R,C),L===_?m++:(m>=5&&(f+=e.N1+(m-5)),_=L,m=1)}p>=5&&(f+=e.N1+(p-5)),m>=5&&(f+=e.N1+(m-5))}return f},t.getPenaltyN2=function(o){const l=o.size;let f=0;for(let p=0;p<l-1;p++)for(let m=0;m<l-1;m++){const w=o.get(p,m)+o.get(p,m+1)+o.get(p+1,m)+o.get(p+1,m+1);(w===4||w===0)&&f++}return f*e.N2},t.getPenaltyN3=function(o){const l=o.size;let f=0,p=0,m=0;for(let w=0;w<l;w++){p=m=0;for(let _=0;_<l;_++)p=p<<1&2047|o.get(w,_),_>=10&&(p===1488||p===93)&&f++,m=m<<1&2047|o.get(_,w),_>=10&&(m===1488||m===93)&&f++}return f*e.N3},t.getPenaltyN4=function(o){let l=0;const f=o.data.length;for(let m=0;m<f;m++)l+=o.data[m];return Math.abs(Math.ceil(l*100/f/5)-10)*e.N4};function n(i,o,l){switch(i){case t.Patterns.PATTERN000:return(o+l)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(o+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return o*l%2+o*l%3===0;case t.Patterns.PATTERN110:return(o*l%2+o*l%3)%2===0;case t.Patterns.PATTERN111:return(o*l%3+(o+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,l){const f=l.size;for(let p=0;p<f;p++)for(let m=0;m<f;m++)l.isReserved(m,p)||l.xor(m,p,n(o,m,p))},t.getBestMask=function(o,l){const f=Object.keys(t.Patterns).length;let p=0,m=1/0;for(let w=0;w<f;w++){l(w),t.applyMask(w,o);const _=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(w,o),_<m&&(m=_,p=w)}return p}})(Ex);var Ih={};const ts=vh,Ou=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Mu=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ih.getBlocksCount=function(e,n){switch(n){case ts.L:return Ou[(e-1)*4+0];case ts.M:return Ou[(e-1)*4+1];case ts.Q:return Ou[(e-1)*4+2];case ts.H:return Ou[(e-1)*4+3];default:return}};Ih.getTotalCodewordsCount=function(e,n){switch(n){case ts.L:return Mu[(e-1)*4+0];case ts.M:return Mu[(e-1)*4+1];case ts.Q:return Mu[(e-1)*4+2];case ts.H:return Mu[(e-1)*4+3];default:return}};var _x={},Th={};const hl=new Uint8Array(512),Uc=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)hl[n]=e,Uc[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)hl[n]=hl[n-255]})();Th.log=function(e){if(e<1)throw new Error("log("+e+")");return Uc[e]};Th.exp=function(e){return hl[e]};Th.mul=function(e,n){return e===0||n===0?0:hl[Uc[e]+Uc[n]]};(function(t){const e=Th;t.mul=function(i,o){const l=new Uint8Array(i.length+o.length-1);for(let f=0;f<i.length;f++)for(let p=0;p<o.length;p++)l[f+p]^=e.mul(i[f],o[p]);return l},t.mod=function(i,o){let l=new Uint8Array(i);for(;l.length-o.length>=0;){const f=l[0];for(let m=0;m<o.length;m++)l[m]^=e.mul(o[m],f);let p=0;for(;p<l.length&&l[p]===0;)p++;l=l.slice(p)}return l},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let l=0;l<i;l++)o=t.mul(o,new Uint8Array([1,e.exp(l)]));return o}})(_x);const Ax=_x;function C0(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}C0.prototype.initialize=function(e){this.degree=e,this.genPoly=Ax.generateECPolynomial(this.degree)};C0.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const i=Ax.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i};var j4=C0,Cx={},Rs={},v0={};v0.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var fi={};const vx="[0-9]+",H4="[A-Z $%*+\\-./:]+";let Ul="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ul=Ul.replace(/u/g,"\\u");const W4="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ul+`)(?:.|[\r
]))+`;fi.KANJI=new RegExp(Ul,"g");fi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");fi.BYTE=new RegExp(W4,"g");fi.NUMERIC=new RegExp(vx,"g");fi.ALPHANUMERIC=new RegExp(H4,"g");const G4=new RegExp("^"+Ul+"$"),X4=new RegExp("^"+vx+"$"),K4=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");fi.testKanji=function(e){return G4.test(e)};fi.testNumeric=function(e){return X4.test(e)};fi.testAlphanumeric=function(e){return K4.test(e)};(function(t){const e=v0,n=fi;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,f){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?l.ccBits[0]:f<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return n.testNumeric(l)?t.NUMERIC:n.testAlphanumeric(l)?t.ALPHANUMERIC:n.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(l,f){if(t.isValid(l))return l;try{return i(l)}catch{return f}}})(Rs);(function(t){const e=Ar,n=Ih,i=vh,o=Rs,l=v0,f=7973,p=e.getBCHDigit(f);function m(R,L,j){for(let z=1;z<=40;z++)if(L<=t.getCapacity(z,j,R))return z}function w(R,L){return o.getCharCountIndicator(R,L)+4}function _(R,L){let j=0;return R.forEach(function(z){const q=w(z.mode,L);j+=q+z.getBitsLength()}),j}function C(R,L){for(let j=1;j<=40;j++)if(_(R,j)<=t.getCapacity(j,L,o.MIXED))return j}t.from=function(L,j){return l.isValid(L)?parseInt(L,10):j},t.getCapacity=function(L,j,z){if(!l.isValid(L))throw new Error("Invalid QR Code version");typeof z>"u"&&(z=o.BYTE);const q=e.getSymbolTotalCodewords(L),F=n.getTotalCodewordsCount(L,j),O=(q-F)*8;if(z===o.MIXED)return O;const M=O-w(z,L);switch(z){case o.NUMERIC:return Math.floor(M/10*3);case o.ALPHANUMERIC:return Math.floor(M/11*2);case o.KANJI:return Math.floor(M/13);case o.BYTE:default:return Math.floor(M/8)}},t.getBestVersionForData=function(L,j){let z;const q=i.from(j,i.M);if(Array.isArray(L)){if(L.length>1)return C(L,q);if(L.length===0)return 1;z=L[0]}else z=L;return m(z.mode,z.getLength(),q)},t.getEncodedBits=function(L){if(!l.isValid(L)||L<7)throw new Error("Invalid QR Code version");let j=L<<12;for(;e.getBCHDigit(j)-p>=0;)j^=f<<e.getBCHDigit(j)-p;return L<<12|j}})(Cx);var Ix={};const jd=Ar,Tx=1335,q4=21522,tm=jd.getBCHDigit(Tx);Ix.getEncodedBits=function(e,n){const i=e.bit<<3|n;let o=i<<10;for(;jd.getBCHDigit(o)-tm>=0;)o^=Tx<<jd.getBCHDigit(o)-tm;return(i<<10|o)^q4};var Sx={};const Y4=Rs;function fa(t){this.mode=Y4.NUMERIC,this.data=t.toString()}fa.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};fa.prototype.getLength=function(){return this.data.length};fa.prototype.getBitsLength=function(){return fa.getBitsLength(this.data.length)};fa.prototype.write=function(e){let n,i,o;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),o=parseInt(i,10),e.put(o,10);const l=this.data.length-n;l>0&&(i=this.data.substr(n),o=parseInt(i,10),e.put(o,l*3+1))};var Q4=fa;const $4=Rs,wf=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function da(t){this.mode=$4.ALPHANUMERIC,this.data=t}da.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};da.prototype.getLength=function(){return this.data.length};da.prototype.getBitsLength=function(){return da.getBitsLength(this.data.length)};da.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let i=wf.indexOf(this.data[n])*45;i+=wf.indexOf(this.data[n+1]),e.put(i,11)}this.data.length%2&&e.put(wf.indexOf(this.data[n]),6)};var Z4=da;const J4=Rs;function ga(t){this.mode=J4.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}ga.getBitsLength=function(e){return e*8};ga.prototype.getLength=function(){return this.data.length};ga.prototype.getBitsLength=function(){return ga.getBitsLength(this.data.length)};ga.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var eS=ga;const tS=Rs,nS=Ar;function pa(t){this.mode=tS.KANJI,this.data=t}pa.getBitsLength=function(e){return e*13};pa.prototype.getLength=function(){return this.data.length};pa.prototype.getBitsLength=function(){return pa.getBitsLength(this.data.length)};pa.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=nS.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var rS=pa,Rx={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,i,o){var l={},f={};f[i]=0;var p=e.PriorityQueue.make();p.push(i,0);for(var m,w,_,C,R,L,j,z,q;!p.empty();){m=p.pop(),w=m.value,C=m.cost,R=n[w]||{};for(_ in R)R.hasOwnProperty(_)&&(L=R[_],j=C+L,z=f[_],q=typeof f[_]>"u",(q||z>j)&&(f[_]=j,p.push(_,j),l[_]=w))}if(typeof o<"u"&&typeof f[o]>"u"){var F=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(F)}return l},extract_shortest_path_from_predecessor_list:function(n,i){for(var o=[],l=i;l;)o.push(l),n[l],l=n[l];return o.reverse(),o},find_path:function(n,i,o){var l=e.single_source_shortest_paths(n,i,o);return e.extract_shortest_path_from_predecessor_list(l,o)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,o={},l;n=n||{};for(l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);return o.queue=[],o.sorter=n.sorter||i.default_sorter,o},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var o={value:n,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Rx);var iS=Rx.exports;(function(t){const e=Rs,n=Q4,i=Z4,o=eS,l=rS,f=fi,p=Ar,m=iS;function w(F){return unescape(encodeURIComponent(F)).length}function _(F,O,M){const K=[];let re;for(;(re=F.exec(M))!==null;)K.push({data:re[0],index:re.index,mode:O,length:re[0].length});return K}function C(F){const O=_(f.NUMERIC,e.NUMERIC,F),M=_(f.ALPHANUMERIC,e.ALPHANUMERIC,F);let K,re;return p.isKanjiModeEnabled()?(K=_(f.BYTE,e.BYTE,F),re=_(f.KANJI,e.KANJI,F)):(K=_(f.BYTE_KANJI,e.BYTE,F),re=[]),O.concat(M,K,re).sort(function(N,D){return N.index-D.index}).map(function(N){return{data:N.data,mode:N.mode,length:N.length}})}function R(F,O){switch(O){case e.NUMERIC:return n.getBitsLength(F);case e.ALPHANUMERIC:return i.getBitsLength(F);case e.KANJI:return l.getBitsLength(F);case e.BYTE:return o.getBitsLength(F)}}function L(F){return F.reduce(function(O,M){const K=O.length-1>=0?O[O.length-1]:null;return K&&K.mode===M.mode?(O[O.length-1].data+=M.data,O):(O.push(M),O)},[])}function j(F){const O=[];for(let M=0;M<F.length;M++){const K=F[M];switch(K.mode){case e.NUMERIC:O.push([K,{data:K.data,mode:e.ALPHANUMERIC,length:K.length},{data:K.data,mode:e.BYTE,length:K.length}]);break;case e.ALPHANUMERIC:O.push([K,{data:K.data,mode:e.BYTE,length:K.length}]);break;case e.KANJI:O.push([K,{data:K.data,mode:e.BYTE,length:w(K.data)}]);break;case e.BYTE:O.push([{data:K.data,mode:e.BYTE,length:w(K.data)}])}}return O}function z(F,O){const M={},K={start:{}};let re=["start"];for(let ne=0;ne<F.length;ne++){const N=F[ne],D=[];for(let b=0;b<N.length;b++){const U=N[b],G=""+ne+b;D.push(G),M[G]={node:U,lastCount:0},K[G]={};for(let W=0;W<re.length;W++){const V=re[W];M[V]&&M[V].node.mode===U.mode?(K[V][G]=R(M[V].lastCount+U.length,U.mode)-R(M[V].lastCount,U.mode),M[V].lastCount+=U.length):(M[V]&&(M[V].lastCount=U.length),K[V][G]=R(U.length,U.mode)+4+e.getCharCountIndicator(U.mode,O))}}re=D}for(let ne=0;ne<re.length;ne++)K[re[ne]].end=0;return{map:K,table:M}}function q(F,O){let M;const K=e.getBestModeForData(F);if(M=e.from(O,K),M!==e.BYTE&&M.bit<K.bit)throw new Error('"'+F+'" cannot be encoded with mode '+e.toString(M)+`.
 Suggested mode is: `+e.toString(K));switch(M===e.KANJI&&!p.isKanjiModeEnabled()&&(M=e.BYTE),M){case e.NUMERIC:return new n(F);case e.ALPHANUMERIC:return new i(F);case e.KANJI:return new l(F);case e.BYTE:return new o(F)}}t.fromArray=function(O){return O.reduce(function(M,K){return typeof K=="string"?M.push(q(K,null)):K.data&&M.push(q(K.data,K.mode)),M},[])},t.fromString=function(O,M){const K=C(O,p.isKanjiModeEnabled()),re=j(K),ne=z(re,M),N=m.find_path(ne.map,"start","end"),D=[];for(let b=1;b<N.length-1;b++)D.push(ne.table[N[b]].node);return t.fromArray(L(D))},t.rawSplit=function(O){return t.fromArray(C(O,p.isKanjiModeEnabled()))}})(Sx);const Sh=Ar,xf=vh,sS=V4,oS=U4,aS=wx,lS=xx,Hd=Ex,Wd=Ih,uS=j4,zc=Cx,cS=Ix,hS=Rs,Ef=Sx;function fS(t,e){const n=t.size,i=lS.getPositions(e);for(let o=0;o<i.length;o++){const l=i[o][0],f=i[o][1];for(let p=-1;p<=7;p++)if(!(l+p<=-1||n<=l+p))for(let m=-1;m<=7;m++)f+m<=-1||n<=f+m||(p>=0&&p<=6&&(m===0||m===6)||m>=0&&m<=6&&(p===0||p===6)||p>=2&&p<=4&&m>=2&&m<=4?t.set(l+p,f+m,!0,!0):t.set(l+p,f+m,!1,!0))}}function dS(t){const e=t.size;for(let n=8;n<e-8;n++){const i=n%2===0;t.set(n,6,i,!0),t.set(6,n,i,!0)}}function gS(t,e){const n=aS.getPositions(e);for(let i=0;i<n.length;i++){const o=n[i][0],l=n[i][1];for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)f===-2||f===2||p===-2||p===2||f===0&&p===0?t.set(o+f,l+p,!0,!0):t.set(o+f,l+p,!1,!0)}}function pS(t,e){const n=t.size,i=zc.getEncodedBits(e);let o,l,f;for(let p=0;p<18;p++)o=Math.floor(p/3),l=p%3+n-8-3,f=(i>>p&1)===1,t.set(o,l,f,!0),t.set(l,o,f,!0)}function _f(t,e,n){const i=t.size,o=cS.getEncodedBits(e,n);let l,f;for(l=0;l<15;l++)f=(o>>l&1)===1,l<6?t.set(l,8,f,!0):l<8?t.set(l+1,8,f,!0):t.set(i-15+l,8,f,!0),l<8?t.set(8,i-l-1,f,!0):l<9?t.set(8,15-l-1+1,f,!0):t.set(8,15-l-1,f,!0);t.set(i-8,8,1,!0)}function mS(t,e){const n=t.size;let i=-1,o=n-1,l=7,f=0;for(let p=n-1;p>0;p-=2)for(p===6&&p--;;){for(let m=0;m<2;m++)if(!t.isReserved(o,p-m)){let w=!1;f<e.length&&(w=(e[f]>>>l&1)===1),t.set(o,p-m,w),l--,l===-1&&(f++,l=7)}if(o+=i,o<0||n<=o){o-=i,i=-i;break}}}function yS(t,e,n){const i=new sS;n.forEach(function(m){i.put(m.mode.bit,4),i.put(m.getLength(),hS.getCharCountIndicator(m.mode,t)),m.write(i)});const o=Sh.getSymbolTotalCodewords(t),l=Wd.getTotalCodewordsCount(t,e),f=(o-l)*8;for(i.getLengthInBits()+4<=f&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const p=(f-i.getLengthInBits())/8;for(let m=0;m<p;m++)i.put(m%2?17:236,8);return wS(i,t,e)}function wS(t,e,n){const i=Sh.getSymbolTotalCodewords(e),o=Wd.getTotalCodewordsCount(e,n),l=i-o,f=Wd.getBlocksCount(e,n),p=i%f,m=f-p,w=Math.floor(i/f),_=Math.floor(l/f),C=_+1,R=w-_,L=new uS(R);let j=0;const z=new Array(f),q=new Array(f);let F=0;const O=new Uint8Array(t.buffer);for(let N=0;N<f;N++){const D=N<m?_:C;z[N]=O.slice(j,j+D),q[N]=L.encode(z[N]),j+=D,F=Math.max(F,D)}const M=new Uint8Array(i);let K=0,re,ne;for(re=0;re<F;re++)for(ne=0;ne<f;ne++)re<z[ne].length&&(M[K++]=z[ne][re]);for(re=0;re<R;re++)for(ne=0;ne<f;ne++)M[K++]=q[ne][re];return M}function xS(t,e,n,i){let o;if(Array.isArray(t))o=Ef.fromArray(t);else if(typeof t=="string"){let w=e;if(!w){const _=Ef.rawSplit(t);w=zc.getBestVersionForData(_,n)}o=Ef.fromString(t,w||40)}else throw new Error("Invalid data");const l=zc.getBestVersionForData(o,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=l;else if(e<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const f=yS(e,n,o),p=Sh.getSymbolSize(e),m=new oS(p);return fS(m,e),dS(m),gS(m,e),_f(m,n,0),e>=7&&pS(m,e),mS(m,f),isNaN(i)&&(i=Hd.getBestMask(m,_f.bind(null,m,n))),Hd.applyMask(i,m),_f(m,n,i),{modules:m,version:e,errorCorrectionLevel:n,maskPattern:i,segments:o}}mx.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let i=xf.M,o,l;return typeof n<"u"&&(i=xf.from(n.errorCorrectionLevel,xf.M),o=zc.from(n.version),l=Hd.from(n.maskPattern),n.toSJISFunc&&Sh.setToSJISFunction(n.toSJISFunc)),xS(e,o,i,l)};var Nx={},I0={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:l,scale:l?4:f,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const l=t.getScale(i,o);return Math.floor((i+o.margin*2)*l)},t.qrToImageData=function(i,o,l){const f=o.modules.size,p=o.modules.data,m=t.getScale(f,l),w=Math.floor((f+l.margin*2)*m),_=l.margin*m,C=[l.color.light,l.color.dark];for(let R=0;R<w;R++)for(let L=0;L<w;L++){let j=(R*w+L)*4,z=l.color.light;if(R>=_&&L>=_&&R<w-_&&L<w-_){const q=Math.floor((R-_)/m),F=Math.floor((L-_)/m);z=C[p[q*f+F]?1:0]}i[j++]=z.r,i[j++]=z.g,i[j++]=z.b,i[j]=z.a}}})(I0);(function(t){const e=I0;function n(o,l,f){o.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=f,l.width=f,l.style.height=f+"px",l.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,f,p){let m=p,w=f;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),f||(w=i()),m=e.getOptions(m);const _=e.getImageWidth(l.modules.size,m),C=w.getContext("2d"),R=C.createImageData(_,_);return e.qrToImageData(R.data,l,m),n(C,w,_),C.putImageData(R,0,0),w},t.renderToDataURL=function(l,f,p){let m=p;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),m||(m={});const w=t.render(l,f,m),_=m.type||"image/png",C=m.rendererOpts||{};return w.toDataURL(_,C.quality)}})(Nx);var bx={};const ES=I0;function nm(t,e){const n=t.a/255,i=e+'="'+t.hex+'"';return n<1?i+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function Af(t,e,n){let i=t+e;return typeof n<"u"&&(i+=" "+n),i}function _S(t,e,n){let i="",o=0,l=!1,f=0;for(let p=0;p<t.length;p++){const m=Math.floor(p%e),w=Math.floor(p/e);!m&&!l&&(l=!0),t[p]?(f++,p>0&&m>0&&t[p-1]||(i+=l?Af("M",m+n,.5+w+n):Af("m",o,0),o=0,l=!1),m+1<e&&t[p+1]||(i+=Af("h",f),f=0)):o++}return i}bx.render=function(e,n,i){const o=ES.getOptions(n),l=e.modules.size,f=e.modules.data,p=l+o.margin*2,m=o.color.light.a?"<path "+nm(o.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",w="<path "+nm(o.color.dark,"stroke")+' d="'+_S(f,l,o.margin)+'"/>',_='viewBox="0 0 '+p+" "+p+'"',R='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+_+' shape-rendering="crispEdges">'+m+w+`</svg>
`;return typeof i=="function"&&i(null,R),R};const AS=B4,Gd=mx,Dx=Nx,CS=bx;function T0(t,e,n,i,o){const l=[].slice.call(arguments,1),f=l.length,p=typeof l[f-1]=="function";if(!p&&!AS())throw new Error("Callback required as last argument");if(p){if(f<2)throw new Error("Too few arguments provided");f===2?(o=n,n=e,e=i=void 0):f===3&&(e.getContext&&typeof o>"u"?(o=i,i=void 0):(o=i,i=n,n=e,e=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(n=e,e=i=void 0):f===2&&!e.getContext&&(i=n,n=e,e=void 0),new Promise(function(m,w){try{const _=Gd.create(n,i);m(t(_,e,i))}catch(_){w(_)}})}try{const m=Gd.create(n,i);o(null,t(m,e,i))}catch(m){o(m)}}$l.create=Gd.create;$l.toCanvas=T0.bind(null,Dx.render);$l.toDataURL=T0.bind(null,Dx.renderToDataURL);$l.toString=T0.bind(null,function(t,e,n){return CS.render(t,n)});function vS(){const{id:t}=VA(),[e,n]=de.useState(""),[i,o]=de.useState(""),l=de.useRef(null);return de.useEffect(()=>{(async()=>{try{const p=Eh(Vl,"convidados",t),m=await qT(p);if(m.exists()){const w=m.data();n(w.qrUrl)}else o("QR Code não encontrado.")}catch(p){console.error("Erro ao buscar QR Code:",p),o("Erro ao buscar QR Code.")}})()},[t]),de.useEffect(()=>{e&&l.current&&$l.toCanvas(l.current,e,{width:256},f=>{f&&(console.error("Erro ao gerar QR code:",f),o("Erro ao gerar o QR code."))})},[e]),me.jsxs("div",{children:[me.jsx("h2",{children:"Seu QR Code"}),i&&me.jsx("p",{children:i}),me.jsx("canvas",{ref:l})]})}function IS(){return me.jsxs(oC,{children:[me.jsx(fC,{}),me.jsx("main",{children:me.jsxs(JA,{children:[me.jsx(To,{path:"/",element:me.jsx(hC,{})}),me.jsx(To,{path:"/cadastrar",element:me.jsx(c4,{})}),me.jsx(To,{path:"/consultar",element:me.jsx(h4,{})}),me.jsx(To,{path:"/validar",element:me.jsx(L4,{})}),me.jsx(To,{path:"/view-qr/:id",element:me.jsx(vS,{})})]})})]})}yy(document.getElementById("root")).render(me.jsx(de.StrictMode,{children:me.jsx(IS,{})}));
